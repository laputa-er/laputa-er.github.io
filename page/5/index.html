<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="整理了一批过去一段时间ios相关的笔记，其它的笔记也整理下？源码分享出来？再说吧...反正也只有自己会看吧...">
<meta property="og:type" content="website">
<meta property="og:title" content="Sean">
<meta property="og:url" content="http://laputa-er.github.io/page/5/index.html">
<meta property="og:site_name" content="Sean">
<meta property="og:description" content="整理了一批过去一段时间ios相关的笔记，其它的笔记也整理下？源码分享出来？再说吧...反正也只有自己会看吧...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Sean">
<meta name="twitter:description" content="整理了一批过去一段时间ios相关的笔记，其它的笔记也整理下？源码分享出来？再说吧...反正也只有自己会看吧...">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://laputa-er.github.io/page/5/"/>

  <title> Sean </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Sean</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">笔记分享</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/13/TSPL2_07  闭包/" itemprop="url">
                  7 闭包
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-13T19:40:46+08:00" content="2016-05-13">
              2016-05-13
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/13/TSPL2_07  闭包/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/13/TSPL2_07  闭包/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p><strong>描述：</strong>可以捕获和存储其所在上下文中任意常量或变量的引用的字包含的函数代码块。<br><strong>说明：</strong>由<code>3</code>种类型的闭包。</p>
</blockquote>
<table>
<thead>
<tr>
<th>分类</th>
<th>是否有名字</th>
<th>捕获内容</th>
<th>适用</th>
</tr>
</thead>
<tbody>
<tr>
<td>全局函数</td>
<td>是</td>
<td>无</td>
<td>严格说来不是闭包</td>
</tr>
<tr>
<td>嵌套函数</td>
<td>是</td>
<td>其封闭函数域内的变量或常量的引用</td>
<td>在较复杂函数中，需要命名和定义自包含代码模块的场景</td>
</tr>
<tr>
<td>闭合表达式</td>
<td>否</td>
<td>其上下文中的变量或常量的引用</td>
<td>处理一些函数并需要将另外一些函数作为该函数的参数时</td>
</tr>
</tbody>
</table>
<h2 id="7-1-闭包表达式"><a href="#7-1-闭包表达式" class="headerlink" title="7.1    闭包表达式"></a>7.1    闭包表达式</h2><blockquote>
<p><strong>描述：</strong>闭包表达式是一种利用简洁语法构建内联闭包的方式<br><strong>说明：</strong>和<code>全局函数</code>或<code>嵌套函数</code>相比有如下特点</p>
<ul>
<li><strong>类型推断：</strong>利用上下文推断<code>参数</code>和<code>返回值</code>类型</li>
<li><strong>隐式返回：</strong>隐式返回单表达式闭包，即单表达式闭包可以省略<code>return</code>语句。</li>
<li><strong>参数名称缩写</strong></li>
<li><strong>尾随闭包语法</strong></li>
</ul>
<p><strong>语法：</strong>一般形式</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123; (parameters) -&gt; returnType <span class="keyword">in</span></span><br><span class="line">    statements</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>可以使用<code>常量</code>、<code>变量</code>和<code>inout</code>类型作为参数</li>
<li>参数不支持设置<code>默认值</code></li>
<li>可以在参数列表的最后使用<code>可变参数</code></li>
<li><code>元组</code>也可以作为参数和返回值</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> names = [<span class="string">"Charis"</span>, <span class="string">"Alex"</span>, <span class="string">"Ewa"</span>, <span class="string">"Barry"</span>, <span class="string">"Daniella"</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个比较函数（按照字典顺序逆序排序）</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">backwards</span><span class="params">(s1: String, s2: String)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> s1 &gt; s2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// sort</span></span><br><span class="line"><span class="keyword">var</span> reversed = names.<span class="built_in">sort</span>(backwards)<span class="comment">// ["Ewa", "Daniella", "Chris", "Barry", "Alex"]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 闭包表达式</span></span><br><span class="line">reversed = names.<span class="built_in">sort</span>(&#123;(s1: <span class="type">String</span>, s2: <span class="type">String</span>) -&gt; <span class="type">Bool</span> <span class="keyword">in</span></span><br><span class="line">    <span class="keyword">return</span> s1 &gt; s2</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 闭包表达式：推断类型</span></span><br><span class="line">reversed = names.<span class="built_in">sort</span>(&#123;s1, s2 <span class="keyword">in</span> <span class="keyword">return</span> s1 &gt; s2&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 闭合表达式：推断类型、隐式返回</span></span><br><span class="line">reversed = names.<span class="built_in">sort</span>(&#123;s1, s2 <span class="keyword">in</span> s1 &gt; s2&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 闭合表达式：推断类型、隐式返回、参数名缩写</span></span><br><span class="line">reversed = names.<span class="built_in">sort</span>(&#123;$<span class="number">0</span> &gt; $<span class="number">1</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 闭合表达式：&gt;(一个字符串函数)</span></span><br><span class="line">reversed = names.<span class="built_in">sort</span>(&gt;)</span><br></pre></td></tr></table></figure>
<h2 id="7-2-尾随闭包"><a href="#7-2-尾随闭包" class="headerlink" title="7.2    尾随闭包"></a>7.2    尾随闭包</h2><blockquote>
<p><strong>条件：</strong>当将闭包作为最后一个参数传递给函数时<br><strong>用途：</strong>增强函数的<code>可读性</code>（其实就是一种特殊条件下的简写）<br><strong>语法：</strong>书写在函数<code>()</code>之后，用<code>{}</code>括起来。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 案例1：基本案例 */</span></span><br><span class="line"><span class="comment">/**</span><br><span class="line">* 用于展示尾随闭包的函数</span><br><span class="line">* @param &#123;() -&gt; Void&#125; closure 函数类型参数</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">someFunctionThatTakesAClosure</span><span class="params">(closure: <span class="params">()</span></span></span> -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">    <span class="comment">// 函数主体</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用：不使用尾随闭包</span></span><br><span class="line">someFunctionThatTakesAClosure(&#123;</span><br><span class="line">    <span class="comment">// 闭包主体</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用：使用尾随闭包</span></span><br><span class="line">someFunctionThatTakesAClosure() &#123;</span><br><span class="line">    <span class="comment">// 闭包主体</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 案例2：sort */</span></span><br><span class="line"><span class="comment">// sort使用尾随闭包</span></span><br><span class="line">reversed = names.<span class="built_in">sort</span>() &#123;$<span class="number">0</span> &gt; $<span class="number">1</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// sort使用尾随闭包：省略()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 案例3：map */</span></span><br><span class="line"><span class="keyword">let</span> digitNames = [</span><br><span class="line">    <span class="number">0</span>: <span class="string">"Zero"</span>,</span><br><span class="line">    <span class="number">1</span>: <span class="string">"One"</span>,</span><br><span class="line">    <span class="number">2</span>: <span class="string">"Two"</span>,</span><br><span class="line">    <span class="number">3</span>: <span class="string">"Three"</span>,</span><br><span class="line">    <span class="number">4</span>: <span class="string">"Four"</span>,</span><br><span class="line">    <span class="number">5</span>: <span class="string">"Five"</span>,</span><br><span class="line">    <span class="number">6</span>: <span class="string">"Six"</span>,</span><br><span class="line">    <span class="number">7</span>: <span class="string">"Seven"</span>,</span><br><span class="line">    <span class="number">8</span>: <span class="string">"Eight"</span>,</span><br><span class="line">    <span class="number">9</span>: <span class="string">"Nine"</span></span><br><span class="line">]</span><br><span class="line"><span class="keyword">let</span> numbers = [<span class="number">16</span>, <span class="number">58</span>, <span class="number">510</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用尾随闭包：["OneSix", "FiveEight", "FiveOneZero"]</span></span><br><span class="line"><span class="keyword">let</span> strings = numbers.<span class="built_in">map</span>&#123;</span><br><span class="line">    (<span class="keyword">var</span> number) -&gt; <span class="type">String</span> <span class="keyword">in</span></span><br><span class="line">    <span class="keyword">var</span> output = <span class="string">""</span></span><br><span class="line">    <span class="keyword">while</span> number &gt; <span class="number">0</span> &#123;</span><br><span class="line">        output = digitNames[number % <span class="number">10</span>]! + output</span><br><span class="line">        number /= <span class="number">10</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> output</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="7-3-捕获值"><a href="#7-3-捕获值" class="headerlink" title="7.3    捕获值"></a>7.3    捕获值</h2><blockquote>
<p><strong>说明：</strong>能够捕获值的闭包有<code>2</code>种</p>
<ul>
<li><strong>嵌套函数：</strong>捕获其外部函数所有的参数以及定义的常量和变量</li>
<li><strong>闭包表达式：</strong>闭包可以在其被定义的上下文中捕获常量或变量</li>
</ul>
<p><strong>注意：</strong></p>
<ol>
<li>如果一个值是不可变的，Swift 可能会改为捕获并保存一份对值的拷贝</li>
<li>Swift 也会负责被捕获变量的所有内存管理工作，包括释放不再需要的变量</li>
</ol>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 捕获值</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">makeIncrementor</span><span class="params">(froIncrement amount: Int)</span></span> -&gt; () -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> runningTotal = <span class="number">0</span><span class="comment">// 被捕获</span></span><br><span class="line">    <span class="comment">// 嵌套函数</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">incrementor</span><span class="params">()</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        runningTotal += amount</span><br><span class="line">        <span class="keyword">return</span> runningTotal</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> incrementor</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获得闭包1</span></span><br><span class="line"><span class="keyword">let</span> incrementByTen = makeIncrementor(froIncrement: <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用闭包</span></span><br><span class="line">incrementByTen()<span class="comment">// 10</span></span><br><span class="line">incrementByTen()<span class="comment">// 20</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 获得闭包2</span></span><br><span class="line"><span class="keyword">let</span> incrementBySeven = makeIncrementor(froIncrement: <span class="number">7</span>)</span><br><span class="line">incrementBySeven()<span class="comment">// 7</span></span><br></pre></td></tr></table></figure>
<h2 id="7-4-闭包是引用类型"><a href="#7-4-闭包是引用类型" class="headerlink" title="7.4    闭包是引用类型"></a>7.4    闭包是引用类型</h2><blockquote>
<p><strong>说明：</strong>这意味着不同的变量或常量可以引用同一个闭包。</p>
</blockquote>
<h2 id="7-5-逃逸闭包和非逃逸闭包"><a href="#7-5-逃逸闭包和非逃逸闭包" class="headerlink" title="7.5    逃逸闭包和非逃逸闭包"></a>7.5    逃逸闭包和非逃逸闭包</h2><blockquote>
<p><strong>逃逸：</strong>当一个闭包作为参数传到一个函数中，但是这个闭包在函数执行过程中没有执行，函数返回之后才被执行或者从来没有执行过，我们称该闭包从函数中逃逸。<br><strong>说明：</strong>通过标注传入闭包的闭包为<code>@noescape</code>，让编译器对<code>非逃逸闭包</code>进行优化。</p>
</blockquote>
<h3 id="noescape"><a href="#noescape" class="headerlink" title="@noescape"></a>@noescape</h3><blockquote>
<p><strong>说明：</strong>告诉编译器，闭包必须在被传入到的函数体中执行。</p>
<ul>
<li>将闭包标注为<code>@noescape</code>使你能在闭包中隐式地引用<code>self</code>（因为<code>@noescape</code>保障了成员方法）</li>
</ul>
<p><strong>用途：</strong>使编译器能够进行一些更加激进的优化。<br><strong>注意：</strong>如果被标注了<code>@noescape</code>的闭包没有在函数体中执行，编译器讲报错。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 参数带有@noescape标注（闭包不可以逃逸）</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">someFunctionWithNoescapeClosure</span><span class="params">(@noescape closure: <span class="params">()</span></span></span> -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">    closure()</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 参数不带@noescape标注（闭包可以逃逸）</span></span><br><span class="line"><span class="keyword">var</span> completionHandlers: [() -&gt; <span class="type">Void</span>] = []</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">someFunctionWithEscapingClosure</span><span class="params">(completionHandler: <span class="params">()</span></span></span> -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">    completionHandlers.append(completionHandler)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line">* 掩饰@noescape标注的闭包中隐式使用self</span><br><span class="line">* 成员函数doSomething会调用上面两个函数</span><br><span class="line">*/</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeClass</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> x = <span class="number">10</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">doSomething</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="comment">// 传入闭包：必须使用self</span></span><br><span class="line">        someFunctionWithEscapingClosure &#123;<span class="keyword">self</span>.x = <span class="number">100</span>&#125;</span><br><span class="line">        <span class="comment">// 传入闭包：self可以省略</span></span><br><span class="line">        someFunctionWithNoescapeClosure &#123;x = <span class="number">200</span>&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> instance = <span class="type">SomeClass</span>()</span><br><span class="line">instance.doSomething()</span><br><span class="line"><span class="built_in">print</span>(instance.x)<span class="comment">// 200(说明@noescape的闭包不使用self也成功调用了x)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用前面通过someFunctionWithEscapingClosure逃逸的闭包</span></span><br><span class="line">completionHandlers.first?()</span><br><span class="line"><span class="built_in">print</span>(instance.x)<span class="comment">// 100</span></span><br></pre></td></tr></table></figure>
<h2 id="7-6-自动闭包"><a href="#7-6-自动闭包" class="headerlink" title="7.6    自动闭包"></a>7.6    自动闭包</h2><blockquote>
<p><strong>描述：</strong><code>自动闭包</code>是一种自动创建的闭包，用于包装传递给函数作为参数的表达式。<br><strong>限制：</strong><br><strong>用途：</strong>这种便利语法让你能够用一个普通的表达式来代替显式的闭包，从而省略闭包的<code>{}</code>。<br><strong>说明：</strong>有<code>2</code>种方式</p>
<ul>
<li>显式创建：<code>{语句}</code></li>
<li></li>
</ul>
<p><strong>技巧：</strong>自动闭包让你能够<code>延迟求值</code>，因为代码段不会被执行直到你调用这个闭包。延迟求值对于那些有<code>副作用</code>和<code>代价昂贵</code>的代码来说是很有益处的，因为你能控制代码什么时候执行。</p>
</blockquote>
<h3 id="7-6-1-通过普通闭包实现延迟执行"><a href="#7-6-1-通过普通闭包实现延迟执行" class="headerlink" title="7.6.1    通过普通闭包实现延迟执行"></a>7.6.1    通过普通闭包实现延迟执行</h3><p><em>案例1：先创建闭包然后调用 </em></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> customersInLine = [<span class="string">"Chris"</span>, <span class="string">"Aelx"</span>, <span class="string">"Ewa"</span>, <span class="string">"Barry"</span>, <span class="string">"Daniella"</span>]</span><br><span class="line"><span class="built_in">print</span>(customersInLine.<span class="built_in">count</span>)</span><br><span class="line"><span class="comment">// 创建自动闭包</span></span><br><span class="line"><span class="keyword">let</span> customerProvider = &#123;customersInLine.removeAtIndex(<span class="number">0</span>)&#125;</span><br><span class="line"><span class="comment">// 执行闭包</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"Now serving\(customerProvider())!"</span>)</span><br></pre></td></tr></table></figure>
<p><em>案例2：将闭包作为参数传递</em></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">serveCustomer</span><span class="params">(customerProvider: <span class="params">()</span></span></span> -&gt; <span class="type">String</span>) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Now serving \(customerProvider())!"</span>)</span><br><span class="line">&#125;</span><br><span class="line">serveCustomer( &#123; customersInLine.removeAtIndex(<span class="number">0</span>) &#125; )</span><br></pre></td></tr></table></figure>
<h3 id="7-6-2-自动闭包实现延迟执行"><a href="#7-6-2-自动闭包实现延迟执行" class="headerlink" title="7.6.2    自动闭包实现延迟执行"></a>7.6.2    自动闭包实现延迟执行</h3><h4 id="autoclosure和-autoclosure-escaping"><a href="#autoclosure和-autoclosure-escaping" class="headerlink" title="@autoclosure和@autoclosure(escaping)"></a>@autoclosure和@autoclosure(escaping)</h4><blockquote>
<p><strong>说明：</strong>通过将参数标记为<code>@autoclosure</code>来接收一个自动闭包。</p>
</blockquote>
<table>
<thead>
<tr>
<th>分类</th>
<th>是否允许闭包逃逸</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>@autoclosure</td>
<td>不</td>
<td>暗含了<code>@noescape</code>特性</td>
</tr>
<tr>
<td>@autoclosure(escaping)</td>
<td>是</td>
</tr>
</tbody>
</table>
<h5 id="autoclosure"><a href="#autoclosure" class="headerlink" title="@autoclosure"></a>@autoclosure</h5><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 通过autoclosure标记，自动将传入的参数（语句）转换为闭包 */</span></span><br><span class="line"><span class="keyword">var</span> customersInLine = [<span class="string">"Barry"</span>, <span class="string">"Daniella"</span>]</span><br><span class="line"><span class="comment">/**</span><br><span class="line">* 包装（延迟执行）对顾客的服务</span><br><span class="line">* @param &#123;() -&gt; String&#125; @autoclosure customerProvider 将输参数（语句）自动转换为一个() -&gt; String的闭包</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">serveCustomer</span><span class="params">(@autoclosure customerProvider: <span class="params">()</span></span></span> -&gt; <span class="type">String</span>) &#123;</span><br><span class="line">    <span class="comment">// customerProvider是一个被自动封装好的闭包</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Now serving \(customerProvider())"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 调用：customersInLine.removeAtIndex(0)在serveCustomer中被调用（通过自动闭包）时才会执行</span></span><br><span class="line"></span><br><span class="line">serveCustomer(customersInLine.removeAtIndex(<span class="number">0</span>))</span><br></pre></td></tr></table></figure>
<h5 id="autoclosure-escaping"><a href="#autoclosure-escaping" class="headerlink" title="@autoclosure(escaping)"></a>@autoclosure(escaping)</h5><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> customersInLine = [<span class="string">"Barry"</span>, <span class="string">"Daniella"</span>]</span><br><span class="line"><span class="comment">// 存储() -&gt; String类型闭包的数组</span></span><br><span class="line"><span class="keyword">var</span> customerProviders: [() -&gt; <span class="type">String</span>] = []</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line">* 将闭包存入集合的工具函数</span><br><span class="line">* @param &#123;() -&gt; String&#125; @autoclosure(escaping) customerProvider 为语句自动创建() -&gt; String类型的封包</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">collectCustomerProvider</span><span class="params">(@autoclosure<span class="params">(escaping)</span></span></span> customerProvider: () -&gt; <span class="type">String</span>) &#123;</span><br><span class="line">    customerProviders.append(customerProvider)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用工具函数</span></span><br><span class="line">collectCustomerProvider(customersInLine.removeAtIndex(<span class="number">0</span>))</span><br><span class="line">collectCustomerProvider(customersInLine.removeAtIndex(<span class="number">0</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"Collected \(customersInLine.count)"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 执行集合中的闭包</span></span><br><span class="line"><span class="keyword">for</span> customerProvider <span class="keyword">in</span> customerProviders &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Now serving \(customerProviders)"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/13/TSPL2_06  函数/" itemprop="url">
                  6 函数
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-13T19:40:24+08:00" content="2016-05-13">
              2016-05-13
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/13/TSPL2_06  函数/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/13/TSPL2_06  函数/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p><strong>说明：</strong>用来完成特定任务的独立的代码。</p>
<ul>
<li><strong>从简单到复杂：</strong>既可以定义最简单的没有参数名字的 C 风格函数，也可以定义复杂的带局部和外部参数名的 Objective-C 风格函数</li>
<li><strong>默认参数值：</strong>参数可以提供默认值，以简化函数调用</li>
<li><strong>In-out参数：</strong>参数前加 <code>&amp;</code> 符,表示这个值可以被函数修改（只能针对变量参数，类似传引用）</li>
<li><strong>当作普通变量：</strong>可以把函数类型当做任何其他普通变量类型一样处理</li>
<li><strong>嵌套：</strong>函数的定义可以写在在其他函数定义中</li>
</ul>
</blockquote>
<h2 id="6-1-定义"><a href="#6-1-定义" class="headerlink" title="6.1    定义"></a>6.1    定义</h2><blockquote>
<p><strong>定义：</strong>使用<code>func</code>关键字</p>
<ul>
<li><strong>函数名：</strong>描述函数执行的任务</li>
<li><strong>参数：</strong>可以定义一个或多个有名字和类型的值，作为函数的输入</li>
<li><strong>返回值：</strong>可以定义某种类型的值作为函数执行结束的输出</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sayHelloAgain</span><span class="params">(personName: String)</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"Hello again, "</span> + personName + <span class="string">"!"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(sayHelloAgain(<span class="string">"Anna"</span>))</span><br></pre></td></tr></table></figure>
<h3 id="6-1-1-参数"><a href="#6-1-1-参数" class="headerlink" title="6.1.1    参数"></a>6.1.1    参数</h3><blockquote>
<p><strong>说明：</strong>特点总结</p>
<ul>
<li><strong>参数数量：</strong>参数可以没有、1个或多个（用<code>,</code>分隔）</li>
<li><strong>参数名：</strong>包括外部参数名（为了调用时的可读性）和内部参数名（内部调用）</li>
<li><strong>默认参数值：</strong>当默认值被定义后,调用这个函数时可以忽略这个 参数</li>
<li><strong>定义可变参数：</strong>可以用可变参数来传入不确定数 量的输入参数</li>
<li><strong>常量参数：</strong>函数参数默认是常量，在函数体中不能修改</li>
<li><strong>变量参数：</strong>可以在函数中把它当做新的可修改副本来使<br>用</li>
</ul>
</blockquote>
<h4 id="6-1-1-1-参数数量和类型"><a href="#6-1-1-1-参数数量和类型" class="headerlink" title="6.1.1.1    参数数量和类型"></a>6.1.1.1    参数数量和类型</h4><blockquote>
<p><strong>说明：</strong>参数具有以下特点</p>
<ul>
<li><strong>数量：</strong>可以有0个或多个输入参数</li>
<li><strong>类型：</strong>可以有多种类型的输入参数</li>
</ul>
</blockquote>
<table>
<thead>
<tr>
<th>类型</th>
<th>参数数量</th>
<th>参数类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>无参函数</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>多参量函数</td>
<td>大于1</td>
<td>多种类型</td>
</tr>
</tbody>
</table>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 无参函数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sayHelloWorld</span><span class="params">()</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"hello, world"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1个参数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sayHello</span><span class="params">(personName: String)</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> greeting = <span class="string">"Hello, "</span> + personName + <span class="string">"!"</span></span><br><span class="line">    <span class="keyword">return</span> greeting</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sayHelloAgain</span><span class="params">(personName: String)</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"Hello again, "</span> + personName + <span class="string">"!"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 多参量函数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sayHello</span><span class="params">(personName: String, alreadyGreeted: Bool)</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> alreadyGreeted &#123;</span><br><span class="line">        <span class="keyword">return</span> sayHelloAgain(personName)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> sayHello(personName)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(sayHello(<span class="string">"Tim"</span>, alreadyGreeted: <span class="literal">true</span>))</span><br></pre></td></tr></table></figure>
<h4 id="6-1-1-2-参数名"><a href="#6-1-1-2-参数名" class="headerlink" title="6.1.1.2    参数名"></a>6.1.1.2    参数名</h4><blockquote>
<p><strong>说明：</strong>包括<code>内部参数名</code>和<code>外部参数名</code></p>
</blockquote>
<table>
<thead>
<tr>
<th>特点</th>
<th>说明</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>内部参数名</td>
<td>在函数被调用时，函数内部用来访问参数相应副本</td>
<td>所有参数都必须有</td>
</tr>
<tr>
<td>外部参数名</td>
<td>往函数的调用语句中传递参数时使用</td>
<td>第一个参数可以指定，其它参数要么指定一个外部参数名，要么就默认和内部参数名相同（除非使用<code>_</code>声明不指定外部参数名）</td>
</tr>
</tbody>
</table>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 指定外部参数名</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sayHello</span><span class="params">(to person: String, and anotherPerson: String)</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"Hello \(person) and \(anotherPerson)!"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(sayHello(to: <span class="string">"Bill"</span>, and: <span class="string">"Ted"</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用_忽略外部参数名</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">someFunction</span><span class="params">(firstParameterName: Int, <span class="number">_</span> secondParameterName: Int)</span></span> &#123;</span><br><span class="line">    <span class="comment">// 函数体</span></span><br><span class="line">&#125;</span><br><span class="line">someFunction(<span class="number">1</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<h4 id="6-1-1-2-默认参数值"><a href="#6-1-1-2-默认参数值" class="headerlink" title="6.1.1.2    默认参数值"></a>6.1.1.2    默认参数值</h4><blockquote>
<p><strong>语法：</strong><code>部参数名: 参数类型 = 默认值</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">someFunction</span><span class="params">(parameterWithDefault: Int = <span class="number">12</span>)</span></span> &#123;</span><br><span class="line">	<span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>技巧：</strong>将带有默认值的参数放在函数参数列表的最后。这样可以保证在函数调用时，非默认参数的顺序是一致的，同时使得相同的函数在不同情况下调用时显得更为清晰。</p>
</blockquote>
<h4 id="6-1-1-3-可变参数"><a href="#6-1-1-3-可变参数" class="headerlink" title="6.1.1.3    可变参数"></a>6.1.1.3    可变参数</h4><blockquote>
<p><strong>说明：</strong>可以用可变参数来指定函数参数可以被传入不确定数量的输入值。</p>
<ul>
<li>可变参数的传入值在函数体中变为此类型的一个数组</li>
<li>一个函数<code>最多只能有一个</code>可变参数</li>
<li>如果函数有一个或多个带默认值的参数，而且还有一个可变参数，那么把可变参数放在参数表的最后</li>
</ul>
<p><strong>语法：</strong><code>部参数名: 参数类型 ...</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">arithmeticMean</span><span class="params">(numbers: Double...)</span></span> -&gt; <span class="type">Double</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> total: <span class="type">Double</span> = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> number <span class="keyword">in</span> numbers &#123;</span><br><span class="line">        total += number</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> total / <span class="type">Double</span>(numbers.<span class="built_in">count</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 调用</span></span><br><span class="line">arithmeticMean(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">arithmeticMean(<span class="number">3</span>, <span class="number">8.25</span>, <span class="number">18.75</span>)</span><br></pre></td></tr></table></figure>
<h4 id="6-1-1-4-常量参数和变量参数"><a href="#6-1-1-4-常量参数和变量参数" class="headerlink" title="6.1.1.4    常量参数和变量参数"></a>6.1.1.4    常量参数和变量参数</h4><blockquote>
<p><strong>说明：</strong>对于<code>值类型</code>(<code>class</code>之外的所有类型)，无论<code>常量参数</code>还是<code>变量参数</code>，函数使用的都是副本。</p>
</blockquote>
<table>
<thead>
<tr>
<th>分类</th>
<th>副本是否可以修改</th>
<th>语法</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>常量参数</td>
<td>否</td>
<td>默认</td>
<td></td>
</tr>
<tr>
<td>变量参数</td>
<td>是</td>
<td><code>var 参数名: 参数类型</code></td>
<td>仅存在于函数调用的声明周期中，调用结速后修改便消失了</td>
</tr>
</tbody>
</table>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;String|var&#125; string 字符串</span><br><span class="line">* @param &#123;Int&#125; totalLength 输出总长度</span><br><span class="line">* @param &#123;Character&#125; pad 填充使用的字符</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">alignRight</span> <span class="params">(<span class="keyword">var</span> string: String, totalLength: Int, pad: Character)</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="comment">// 要在前面填充的字符总数</span></span><br><span class="line">    <span class="keyword">let</span> amountToPad = totalLength - string.characters.<span class="built_in">count</span>;</span><br><span class="line">    <span class="keyword">if</span> amountToPad &lt; <span class="number">1</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> string</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> padString = <span class="type">String</span>(pad)</span><br><span class="line">    <span class="comment">// 补上填充字符</span></span><br><span class="line">    <span class="keyword">for</span> <span class="number">_</span> <span class="keyword">in</span> <span class="number">1</span>...amountToPad &#123;</span><br><span class="line">        string = padString + string</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 返回填充后的字符串</span></span><br><span class="line">    <span class="keyword">return</span> string</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="6-1-2-5-输入输出参数"><a href="#6-1-2-5-输入输出参数" class="headerlink" title="6.1.2.5    输入输出参数"></a>6.1.2.5    输入输出参数</h4><blockquote>
<p><strong>关键字：</strong><code>inout</code>(声明函数时使用)<br><strong>操作符：</strong><code>&amp;</code>（调用函数时使用）<br><strong>说明：</strong>相当于将原本针对值类型默认的<code>传值</code>转变为<code>传引用</code>。</p>
<ul>
<li>只能传递<code>变量</code>给<code>输入输出参数</code>（不能传入<code>常量</code>或者<code>字面量</code>）</li>
<li>不能用于<code>带默认值的参数</code>和<code>可变参数</code></li>
<li>参数被<code>inout</code>标记后就不能再被<code>let</code>或<code>var</code>标记</li>
</ul>
<p><strong>扩展：</strong>函数对函数体外进行影响的两个方式</p>
<ul>
<li>返回值</li>
<li>输入输出参数</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* 对调两个整数的值</span><br><span class="line">* @param &#123;Int|input&#125; a 第一个整数</span><br><span class="line">* @param &#123;Int|input&#125; b 第二个整数</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swapTwoInts</span><span class="params">(<span class="keyword">inout</span> a: Int, <span class="keyword">inout</span> <span class="number">_</span> b: Int)</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> temporaryA = a</span><br><span class="line">    a = b</span><br><span class="line">    b = temporaryA</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> someInt = <span class="number">3</span></span><br><span class="line"><span class="keyword">var</span> anotherInt = <span class="number">107</span></span><br><span class="line"><span class="comment">// &amp;</span></span><br><span class="line"><span class="built_in">swap</span>(&amp;someInt, &amp;anotherInt)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"someInt is now \(someInt), and anotherInt is now \(anotherInt)"</span>)</span><br></pre></td></tr></table></figure>
<h3 id="6-1-2-返回值"><a href="#6-1-2-返回值" class="headerlink" title="6.1.2    返回值"></a>6.1.2    返回值</h3><blockquote>
<p><strong>声明返回值语法：</strong><code>func 函数名 () -&gt; 返回值类型 {...}</code><br><strong>说明：</strong>分为3种情况</p>
</blockquote>
<table>
<thead>
<tr>
<th>返回值</th>
<th>说明</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>无</td>
<td>严格说来函数依然返回了值<code>Void</code>（空元组）</td>
<td></td>
</tr>
<tr>
<td>一个返回值</td>
<td>任意类型</td>
<td></td>
</tr>
<tr>
<td>多个返回值</td>
<td>用元组让多个值作为一个符合值返回</td>
<td>也可以是可选型元组</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>注意：</strong>函数一旦设置了返回值，则必须通过<code>return</code>返回相应类型的返回值。</p>
</blockquote>
<h4 id="无返回值函数"><a href="#无返回值函数" class="headerlink" title="无返回值函数"></a>无返回值函数</h4><blockquote>
<p><strong>说明：</strong>声明方式有3种</p>
<ul>
<li>省略<code>-&gt; 返回值类型</code></li>
<li><code>-&gt; Void</code></li>
<li><code>-&gt; ()</code></li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 无返回值</span></span><br><span class="line"><span class="comment">// 1. 不使用 -&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sayGoodbye</span><span class="params">(personName: String)</span></span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Bye, \(personName)"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. -&gt; Void</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sayGoodbye2</span><span class="params">(personName: String)</span></span> -&gt; <span class="type">Void</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Bye, \(personName)"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. -&gt; ()</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sayGoodsbye3</span><span class="params">(personName: String)</span></span> -&gt; () &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Bye, \(personName)"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="返回元组"><a href="#返回元组" class="headerlink" title="返回元组"></a>返回元组</h4><blockquote>
<p><strong>技巧：</strong>声明返回的元组时，为每一项设置名字，以便通过名字访问每一项。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* 返回数组种的最大值和最小值</span><br><span class="line">* @param &#123;Array&lt;Int&gt;&#125; array 数组</span><br><span class="line">* @return &#123;(min: Int, max: Int)&#125; 元组</span><br><span class="line">*</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">minMax</span><span class="params">(array: [Int])</span></span> -&gt; (<span class="built_in">min</span>: <span class="type">Int</span>, <span class="built_in">max</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> currentMin = array[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">var</span> currentMax = array[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">for</span> value <span class="keyword">in</span> array[<span class="number">1</span>..&lt;array.<span class="built_in">count</span>] &#123;</span><br><span class="line">        <span class="keyword">if</span> value &lt; currentMin &#123;</span><br><span class="line">            currentMin = value</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> value &gt; currentMax &#123;</span><br><span class="line">            currentMax = value</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (currentMin, currentMin)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> bounds = minMax([<span class="number">8</span>, -<span class="number">6</span>, <span class="number">2</span>, <span class="number">109</span>, <span class="number">3</span>, <span class="number">71</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"min is \(bounds.min) and max is \(bounds.max)"</span>)</span><br></pre></td></tr></table></figure>
<h4 id="返回可选型元组"><a href="#返回可选型元组" class="headerlink" title="返回可选型元组"></a>返回可选型元组</h4><blockquote>
<p><strong>语法：</strong><code>-&gt; (...)?</code><br><strong>应用：</strong>当返回的元组可能是一个<code>nil</code>值时必须将返回的元组定义为可选型</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* 返回数组种的最大值和最小值</span><br><span class="line">* @param &#123;Array&lt;Int&gt;&#125; array 数组</span><br><span class="line">* @return &#123;(min: Int, max: Int)?&#125; 元组</span><br><span class="line">*</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">minMax</span><span class="params">(array: [Int])</span></span> -&gt; (<span class="built_in">min</span>: <span class="type">Int</span>, <span class="built_in">max</span>: <span class="type">Int</span>)? &#123;</span><br><span class="line">    <span class="comment">// 如果数组为空，返回nil</span></span><br><span class="line">    <span class="keyword">if</span> array.isEmpty &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> currentMin = array[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">var</span> currentMax = array[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">for</span> value <span class="keyword">in</span> array[<span class="number">1</span>..&lt;array.<span class="built_in">count</span>] &#123;</span><br><span class="line">        <span class="keyword">if</span> value &lt; currentMin &#123;</span><br><span class="line">            currentMin = value</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> value &gt; currentMax &#123;</span><br><span class="line">            currentMax = value</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (currentMin, currentMin)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> bounds = minMax([<span class="number">8</span>, -<span class="number">6</span>, <span class="number">2</span>, <span class="number">109</span>, <span class="number">3</span>, <span class="number">71</span>]) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"min is \(bounds.min) and max is \(bounds.max)"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="6-2-函数类型"><a href="#6-2-函数类型" class="headerlink" title="6.2    函数类型"></a>6.2    函数类型</h2><blockquote>
<p><strong>说明：</strong>函数的类型由函数的<code>参数类型</code>和<code>返回值类型</code>决定。项其它类型一样：</p>
<ul>
<li><strong>常量或变量：</strong>可以定义一个类型为函数的常量或变量，并将函数赋值给它</li>
<li><strong>赋值：</strong>如果变量或常量是某种函数类型，那么只有匹配的函数才能进行赋值</li>
<li><strong>类型推断：</strong>当赋值一个函数给常量或变量时，Swift可以推断其函数类型</li>
<li><strong>作为参数</strong></li>
<li><strong>作为返回值类型</strong></li>
</ul>
</blockquote>
<h3 id="6-2-1-基本使用"><a href="#6-2-1-基本使用" class="headerlink" title="6.2.1    基本使用"></a>6.2.1    基本使用</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 函数类型：(Int, Int) -&gt; Int</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">addTwoInts</span><span class="params">(a: Int, <span class="number">_</span> b: Int)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">multiplyTwoInts</span><span class="params">(a: Int, <span class="number">_</span> b: Int)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> a * b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数类型：() -&gt; Void</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printHelloWorld</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"hello, world"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用函数类型变量</span></span><br><span class="line"><span class="keyword">var</span> mathFunction: (<span class="type">Int</span>, <span class="type">Int</span>) -&gt; <span class="type">Int</span> = addTwoInts</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"Result: \(mathFunction(2, 3))"</span>)<span class="comment">// 声明并赋值</span></span><br><span class="line"></span><br><span class="line">mathFunction = multiplyTwoInts<span class="comment">// 重新赋值</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"Result: \(mathFunction(2, 3))"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> anotherMathFunction = addTwoInts<span class="comment">// 自动类型推断</span></span><br></pre></td></tr></table></figure>
<h3 id="6-2-2-作为参数"><a href="#6-2-2-作为参数" class="headerlink" title="6.2.2    作为参数"></a>6.2.2    作为参数</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 作为参数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printMathResult</span><span class="params">(mathFunction: <span class="params">(Int, Int)</span></span></span> -&gt; <span class="type">Int</span>, <span class="number">_</span> a: <span class="type">Int</span>, <span class="number">_</span> b: <span class="type">Int</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Result: \(mathFunction(a, b))"</span>)</span><br><span class="line">&#125;</span><br><span class="line">printMathResult(addTwoInts, <span class="number">3</span>, <span class="number">5</span>)</span><br></pre></td></tr></table></figure>
<h3 id="6-2-3-作为返回值"><a href="#6-2-3-作为返回值" class="headerlink" title="6.2.3    作为返回值"></a>6.2.3    作为返回值</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 作为返回值</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">stepForward</span><span class="params">(input: Int)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> input + <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">stepBackward</span><span class="params">(input: Int)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> input - <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line">* 选择相应步骤的函数</span><br><span class="line">* @param &#123;Bool&#125; backwards 返回哪个函数的依据</span><br><span class="line">* @return &#123;(Int) -&gt; Int&#125; 函数类型返回值</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">chooseStepFunction</span><span class="params">(backwards: Bool)</span></span> -&gt; (<span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> backwards ? stepBackward : stepBackward</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> currentValue = <span class="number">3</span></span><br><span class="line"><span class="keyword">let</span> moveNearerToZero = chooseStepFunction(currentValue &gt; <span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<h2 id="6-3-嵌套函数"><a href="#6-3-嵌套函数" class="headerlink" title="6.3    嵌套函数"></a>6.3    嵌套函数</h2><blockquote>
<p><strong>说明：</strong>定义在其他函数中的函数。</p>
<ul>
<li>对外界不可见</li>
<li>可以通过被函数返回使其对外界可见</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/13/TSPL2_05  控制流/" itemprop="url">
                  5 控制流
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-13T19:38:49+08:00" content="2016-05-13">
              2016-05-13
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/13/TSPL2_05  控制流/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/13/TSPL2_05  控制流/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="5-1-for循环"><a href="#5-1-for循环" class="headerlink" title="5.1    for循环"></a>5.1    for循环</h2><blockquote>
<p><strong>说明：</strong>有两种形式</p>
<ul>
<li><code>for-in</code></li>
<li><code>for initialization; condition; increment</code>（c语言形式）</li>
</ul>
</blockquote>
<h3 id="5-1-1-for-in"><a href="#5-1-1-for-in" class="headerlink" title="5.1.1    for-in"></a>5.1.1    for-in</h3><blockquote>
<p><strong>说明：</strong>可以遍历的集合包括<code>区间</code>、<code>Array</code>、<code>Set</code>、<code>String中的字符</code>。</p>
<ul>
<li>其中每次循环都会被赋值的常量不需要声明</li>
<li>可以使用<code>_</code>忽略每个数据项中具体的值</li>
<li>字典内部是无序的，不经处理不能保证遍历顺序</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 区间</span></span><br><span class="line"><span class="keyword">for</span> index <span class="keyword">in</span> <span class="number">1</span>...<span class="number">5</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"\(index) times 5 is \(index * 5)"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组</span></span><br><span class="line"><span class="keyword">let</span> names = [<span class="string">"Anna"</span>, <span class="string">"Alex"</span>, <span class="string">"Brian"</span>, <span class="string">"Jack"</span>]</span><br><span class="line"><span class="keyword">for</span> name <span class="keyword">in</span> names &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Hello, \(name)!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 字典</span></span><br><span class="line"><span class="keyword">let</span> numberOfLegs = [<span class="string">"spider"</span>: <span class="number">8</span>, <span class="string">"ant"</span>: <span class="number">6</span>, <span class="string">"cat"</span>: <span class="number">4</span>]</span><br><span class="line"><span class="keyword">for</span> (animalName, <span class="number">_</span>) <span class="keyword">in</span> numberOfLegs &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"\(animalName)s"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-1-2-C语言形式"><a href="#5-1-2-C语言形式" class="headerlink" title="5.1.2    C语言形式"></a>5.1.2    C语言形式</h3><blockquote>
<p><strong>语法：</strong>标准C样式。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="keyword">for</span> initialization; condition; increment &#123;</span><br><span class="line">&gt;    statements</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> <span class="keyword">var</span> index = <span class="number">0</span>; index &lt; <span class="number">3</span>; ++index &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"index is \(index)"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-2-while循环"><a href="#5-2-while循环" class="headerlink" title="5.2    while循环"></a>5.2    while循环</h2><blockquote>
<p><strong>说明：</strong>分两类</p>
<ul>
<li><code>while</code></li>
<li><code>repeat-while</code></li>
</ul>
</blockquote>
<h3 id="5-2-1-while"><a href="#5-2-1-while" class="headerlink" title="5.2.1    while"></a>5.2.1    while</h3><blockquote>
<p><strong>说明：</strong>每次在循环开始时计算条件是否符合。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> condition &#123;  </span><br><span class="line">    statements</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-2-2-repeat-while"><a href="#5-2-2-repeat-while" class="headerlink" title="5.2.2    repeat-while"></a>5.2.2    repeat-while</h3><blockquote>
<p><strong>说明：</strong>和<code>while</code>的区别是在判断循环条件之前，先执行一次循环的代码块，然后重复循环直到条件为<code>false</code>。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="keyword">repeat</span> &#123;</span><br><span class="line">    statements</span><br><span class="line">&#125; <span class="keyword">while</span> condition</span><br></pre></td></tr></table></figure>
<h2 id="5-3-条件语句"><a href="#5-3-条件语句" class="headerlink" title="5.3    条件语句"></a>5.3    条件语句</h2><blockquote>
<p><strong>说明：</strong><code>if</code>、<code>switch</code></p>
<ul>
<li><code>if</code>：当条件较为简单且可能的情况很少时使用</li>
<li><code>switch</code>：当条件较复杂、可能情况较多且需要模式匹配的情景使用</li>
</ul>
</blockquote>
<h3 id="5-3-1-if"><a href="#5-3-1-if" class="headerlink" title="5.3.1    if"></a>5.3.1    if</h3><blockquote>
<p><strong>语法：</strong><code>if-[else]</code>、<code>if-else if-...-[else]</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> condition1 &#123;</span><br><span class="line">    <span class="comment">// 处理</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> condition2 &#123;</span><br><span class="line">    <span class="comment">// 处理</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 处理</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> temperatureInFahrenheit = <span class="number">90</span></span><br><span class="line"><span class="keyword">if</span> temperatureInFahrenheit &lt;= <span class="number">32</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"It's very cold. Consider wearing a scarf."</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> temperatureInFahrenheit &gt;= <span class="number">86</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"It's really warm. Don't forget to wear sunscreen."</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"It's not that cold. Wear a t-shirt."</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-3-2-switch"><a href="#5-3-2-switch" class="headerlink" title="5.3.2    switch"></a>5.3.2    switch</h3><blockquote>
<p><strong>语法：</strong>类似C语言</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> some value to consider &#123;</span><br><span class="line">	<span class="keyword">case</span> value <span class="number">1</span>:</span><br><span class="line">	    respond to value <span class="number">1</span></span><br><span class="line">	<span class="keyword">case</span> value <span class="number">2</span>, value <span class="number">3</span>:</span><br><span class="line">	    respond to value <span class="number">2</span> or <span class="number">3</span></span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">	    otherwise, <span class="keyword">do</span> something <span class="keyword">else</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>说明：</strong>和C语言的<code>switch</code>相比更加强悍。<br><strong>更安全：</strong></p>
<ol>
<li>每个<code>case</code>分支都必须包含至少一条语句</li>
<li><code>case</code>和<code>default</code>必须包含所有可能的情况，否则报错</li>
<li>当匹配的<code>case</code>分支中的代码执行完毕，<code>switch</code>终止（不需要手动<code>break</code>）</li>
</ol>
<p><strong>更强大：</strong></p>
<ol>
<li><code>case</code>可以包含多个模式，用<code>,</code>分隔</li>
<li><code>case</code>分支的模式可以是：<code>区间</code>、<code>元组</code></li>
<li>允许多个<code>case</code>匹配到一个值，但执行时只有最前面的被匹配到的分支会执行</li>
<li>值绑定</li>
<li><code>where</code></li>
</ol>
</blockquote>
<h4 id="case多个模式"><a href="#case多个模式" class="headerlink" title="case多个模式"></a><code>case</code>多个模式</h4><blockquote>
<p><strong>用途：</strong>多个值匹配到一种<code>case</code>中。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> someCharacter: <span class="type">Character</span> = <span class="string">"e"</span></span><br><span class="line"><span class="keyword">switch</span> someCharacter &#123;</span><br><span class="line">    <span class="comment">// 原音字符</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">"a"</span>, <span class="string">"e"</span>, <span class="string">"i"</span>, <span class="string">"o"</span>, <span class="string">"u"</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"\(someCharacter) is a vowel"</span>)</span><br><span class="line">    <span class="comment">// 辅音字符</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="string">"d"</span>, <span class="string">"f"</span>, <span class="string">"g"</span>, <span class="string">"h"</span>, <span class="string">"j"</span>, <span class="string">"k"</span>, <span class="string">"l"</span>, <span class="string">"m"</span>,</span><br><span class="line"><span class="string">"n"</span>, <span class="string">"p"</span>, <span class="string">"q"</span>, <span class="string">"r"</span>, <span class="string">"s"</span>, <span class="string">"t"</span>, <span class="string">"v"</span>, <span class="string">"w"</span>, <span class="string">"x"</span>, <span class="string">"y"</span>, <span class="string">"z"</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"\(someCharacter) is a consonant"</span>)</span><br><span class="line">    <span class="comment">// 不匹配24个英文字符</span></span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"\(someCharacter) is not a vowel or a consonant"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="区间"><a href="#区间" class="headerlink" title="区间"></a>区间</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> approximateCount = <span class="number">62</span></span><br><span class="line"><span class="keyword">let</span> countedThings = <span class="string">"moons orbiting saturn"</span></span><br><span class="line"><span class="keyword">var</span> naturalCount: <span class="type">String</span></span><br><span class="line"><span class="keyword">switch</span> approximateCount &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">        naturalCount = <span class="string">"no"</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>..&lt;<span class="number">5</span>:</span><br><span class="line">        naturalCount = <span class="string">"a few"</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">5</span>..&lt;<span class="number">12</span>:</span><br><span class="line">        naturalCount = <span class="string">"several"</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">12</span>..&lt;<span class="number">100</span>:</span><br><span class="line">        naturalCount = <span class="string">"dozens of"</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">100</span>..&lt;<span class="number">1000</span>:</span><br><span class="line">        naturalCount = <span class="string">"hundreds of"</span></span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        naturalCount = <span class="string">"many"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"There are \(naturalCount) \(countedThings)."</span>)</span><br></pre></td></tr></table></figure>
<h4 id="元组"><a href="#元组" class="headerlink" title="元组"></a>元组</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> yetAnotherPoint = (<span class="number">1</span>, -<span class="number">1</span>)</span><br><span class="line"><span class="keyword">switch</span> yetAnotherPoint &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">let</span> (x, y) <span class="keyword">where</span> x == y:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"(\(x), \(y)) is on the line x == y"</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">let</span> (x, y) <span class="keyword">where</span> x == -y:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"(\(x), \(y)) is on the line x == -y"</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">let</span> (x, y):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"(\(x), \(y)) is just some arbitrary point"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="值绑定"><a href="#值绑定" class="headerlink" title="值绑定"></a>值绑定</h4><blockquote>
<p><strong>说明：</strong>在<code>case</code> 分支的模式将匹配的值绑定到一个临时的常量或变量，然后就可以在分之内使用这些常量或变量。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> anotherPoint = (<span class="number">2</span>, <span class="number">0</span>)</span><br><span class="line"><span class="keyword">switch</span> anotherPoint &#123;</span><br><span class="line">	<span class="keyword">case</span> (<span class="keyword">let</span> x, <span class="number">0</span>):</span><br><span class="line">	    <span class="built_in">print</span>(<span class="string">"on the x-axis with an x value of \(x)"</span>)</span><br><span class="line">	<span class="keyword">case</span> (<span class="number">0</span>, <span class="keyword">let</span> y):</span><br><span class="line">	    <span class="built_in">print</span>(<span class="string">"on the y-axis with a y value of \(y)"</span>)</span><br><span class="line">	<span class="keyword">case</span> <span class="keyword">let</span> (x, y):</span><br><span class="line">	    <span class="built_in">print</span>(<span class="string">"somewhere else at (\(x), \(y))"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="where表达式"><a href="#where表达式" class="headerlink" title="where表达式"></a><code>where</code>表达式</h4><blockquote>
<p><strong>说明：</strong><code>case</code> 分支的模式可以使用where语句来判断额外的条件。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> yetAnotherPoint = (<span class="number">1</span>, -<span class="number">1</span>)</span><br><span class="line"><span class="keyword">switch</span> yetAnotherPoint &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">let</span> (x, y) <span class="keyword">where</span> x == y:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"(\(x), \(y)) is on the line x == y"</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">let</span> (x, y) <span class="keyword">where</span> x == -y:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"(\(x), \(y)) is on the line x == -y"</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">let</span> (x, y):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"(\(x), \(y)) is just some arbitrary point"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-4-控制转移语句"><a href="#5-4-控制转移语句" class="headerlink" title="5.4    控制转移语句"></a>5.4    控制转移语句</h2><blockquote>
<p><strong>说明：</strong>Swift 有<code>5</code>种控制转移语句</p>
<ul>
<li><code>continue</code></li>
<li><code>break</code></li>
<li><code>fallthrough</code></li>
<li><code>return</code></li>
<li><code>throw</code></li>
</ul>
</blockquote>
<h3 id="5-4-1-continue"><a href="#5-4-1-continue" class="headerlink" title="5.4.1    continue"></a>5.4.1    continue</h3><blockquote>
<p><strong>说明：</strong>告诉一个循环体立刻停止本次循环迭代，重新开始下次循环迭代。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> puzzleInput = <span class="string">"great minds think alike"</span></span><br><span class="line"><span class="keyword">var</span> puzzleOutput = <span class="string">""</span></span><br><span class="line"><span class="keyword">for</span> character <span class="keyword">in</span> puzzleInput.characters &#123;</span><br><span class="line">    <span class="keyword">switch</span> character &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"a"</span>, <span class="string">"e"</span>, <span class="string">"i"</span>, <span class="string">"o"</span>, <span class="string">"u"</span>, <span class="string">" "</span>:</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        puzzleOutput.append(character)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(puzzleOutput)</span><br></pre></td></tr></table></figure>
<h3 id="5-4-2-break"><a href="#5-4-2-break" class="headerlink" title="5.4.2    break"></a>5.4.2    break</h3><blockquote>
<p><strong>说明：</strong>立刻结束整个控制流的执行。</p>
</blockquote>
<h4 id="switch语句中的break"><a href="#switch语句中的break" class="headerlink" title="switch语句中的break"></a>switch语句中的break</h4><blockquote>
<p><strong>背景：</strong><code>switch</code>的完备性使所有值的情况都要求有对应的分支（但是有的分支內并不需要执行任何代码）<br><strong>说明：</strong>立即结束<code>switch</code>代码块<br><strong>用途：</strong>用来匹配或者忽略一个或多个分支</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> numberSymbol: <span class="type">Character</span> = <span class="string">"三"</span>  <span class="comment">// 简体中文里的数字 3</span></span><br><span class="line"><span class="keyword">var</span> possibleIntegerValue: <span class="type">Int</span>?</span><br><span class="line"><span class="keyword">switch</span> numberSymbol &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="string">"1"</span>, <span class="string">"١"</span>, <span class="string">"一"</span>, <span class="string">"๑"</span>:</span><br><span class="line">    possibleIntegerValue = <span class="number">1</span></span><br><span class="line"><span class="keyword">case</span> <span class="string">"2"</span>, <span class="string">"٢"</span>, <span class="string">"二"</span>, <span class="string">"๒"</span>:</span><br><span class="line">    possibleIntegerValue = <span class="number">2</span></span><br><span class="line"><span class="keyword">case</span> <span class="string">"3"</span>, <span class="string">"٣"</span>, <span class="string">"三"</span>, <span class="string">"๓"</span>:</span><br><span class="line">    possibleIntegerValue = <span class="number">3</span></span><br><span class="line"><span class="keyword">case</span> <span class="string">"4"</span>, <span class="string">"٤"</span>, <span class="string">"四"</span>, <span class="string">"๔"</span>:</span><br><span class="line">    possibleIntegerValue = <span class="number">4</span></span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> integerValue = possibleIntegerValue &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"The integer value of \(numberSymbol) is \(integerValue)."</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"An integer value could not be found for \(numberSymbol)."</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-4-3-fallthrough"><a href="#5-4-3-fallthrough" class="headerlink" title="5.4.3    fallthrough"></a>5.4.3    fallthrough</h3><blockquote>
<p><strong>说明：</strong>使代码执行继续到下一个 <code>case</code> 中的执行代码</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> integerToDescribe = <span class="number">5</span></span><br><span class="line"><span class="keyword">var</span> description = <span class="string">"The number \(integerToDescribe) is"</span></span><br><span class="line"><span class="keyword">switch</span> integerToDescribe &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">11</span>, <span class="number">13</span>, <span class="number">17</span>, <span class="number">19</span>:</span><br><span class="line">    description += <span class="string">" a prime number, and also"</span></span><br><span class="line">    <span class="keyword">fallthrough</span></span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">    description += <span class="string">" an integer."</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-4-4-标签"><a href="#5-4-4-标签" class="headerlink" title="5.4.4    标签"></a>5.4.4    标签</h3><blockquote>
<p><strong>说明：</strong>配合<code>continue</code>或 <code>break</code>实现跳转。适用的语句包括</p>
<ul>
<li><code>while</code>、<code>repeat-while</code></li>
<li><code>for</code></li>
<li><code>switch</code></li>
</ul>
<p><strong>语法：</strong>以<code>while</code>为例子</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">label name: <span class="keyword">while</span> condition &#123;</span><br><span class="line">    statements</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//寻找二维数组中的特殊值</span></span><br><span class="line"><span class="keyword">var</span> board = <span class="type">Array</span>&lt;<span class="type">Array</span>&lt;<span class="type">Int</span>&gt;&gt;()<span class="comment">//声明二维数组</span></span><br><span class="line"><span class="comment">//初始化二维数组</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>...<span class="number">10</span>&#123;</span><br><span class="line">    board.append(<span class="type">Array</span>(<span class="built_in">count</span>:<span class="number">10</span>,repeatedValue:<span class="number">0</span>))</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//随机给二维数组中某个元素赋值1</span></span><br><span class="line"><span class="keyword">let</span> randx = <span class="type">Int</span>(arc4random()%<span class="number">10</span>)</span><br><span class="line"><span class="keyword">let</span> randy = <span class="type">Int</span>(arc4random()%<span class="number">10</span>)</span><br><span class="line">board[randx][randy] = <span class="number">1</span></span><br><span class="line"><span class="comment">//找到这个值为1的元素的位置</span></span><br><span class="line"><span class="keyword">var</span> i = <span class="number">0</span> , j = <span class="number">0</span></span><br><span class="line">mainloop:<span class="keyword">for</span> i = <span class="number">0</span> ; i &lt; <span class="number">10</span> ; i++ &#123;</span><br><span class="line">    <span class="keyword">for</span> j = <span class="number">0</span> ; j &lt; <span class="number">10</span> ; j++ &#123;</span><br><span class="line">        <span class="keyword">if</span> board[i][j] == <span class="number">1</span>&#123;</span><br><span class="line">            <span class="keyword">break</span> mainloop</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">println</span>(<span class="string">"board[\(i)][\(j)] = 1"</span>)</span><br></pre></td></tr></table></figure>
<h2 id="5-5-提前退出"><a href="#5-5-提前退出" class="headerlink" title="5.5    提前退出"></a>5.5    提前退出</h2><blockquote>
<p><strong>说明：</strong>条件为真时，执行<code>guard</code>语句后的代码；不为真则执行<code>else</code>分句中的代码。</p>
<ul>
<li>一个<code>guard</code>语句总是有一个<code>else</code>分句</li>
<li><code>else</code>分支必须通过<code>return</code>、<code>break</code>、<code>continue</code>、<code>throw</code>，或者调用一个不返回的方法或函数（比如<code>fatalError</code>函数）来退出<code>guard</code>所在的代码段。</li>
</ul>
<p><strong>用途：</strong>相比于可以实现同样功能的if语句，按需使用<code>guard</code>语句会提升我们代码的可靠性和可读性。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">greet</span><span class="params">(person: [String: String])</span></span> &#123;</span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> name = person[<span class="string">"name"</span>] <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Hello \(name)"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> location = person[<span class="string">"location"</span>] <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"I hope the weather is nice near you."</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"I hope the weather is nice in \(location)."</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">greet([<span class="string">"name"</span>: <span class="string">"John"</span>])</span><br><span class="line">greet([<span class="string">"name"</span>: <span class="string">"Jane"</span>, <span class="string">"location"</span>: <span class="string">"Cupertino"</span>])</span><br></pre></td></tr></table></figure>
<h2 id="5-6-检测API是否可用"><a href="#5-6-检测API是否可用" class="headerlink" title="5.6    检测API是否可用"></a>5.6    检测API是否可用</h2><blockquote>
<p><strong>用途：</strong>确保我们不会不小心地使用对于当前部署目标不可用的 API。<br><strong>语法：</strong>最后一个参数<code>*</code>是必须写的，用于处理未来潜在的平台。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> #available(platform name version, ..., *) &#123;</span><br><span class="line">    <span class="comment">// 验证的API可用</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 不可用</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>说明：</strong>平台名字可以是<code>iOS</code>，<code>OSX</code>或<code>watchOS</code>，除了特定的主板本号像 <code>iOS 8</code>，我们可以指定较小的版本号像 <code>iOS 8.3</code> 以及 <code>OS X v10.10.3</code>。</p>
<ol>
<li>编译器使用从可用性条件语句中获取的信息去验证在代码块中调用的 <code>API</code> 是否都可用</li>
<li>根据步骤<code>1</code>，在一个<code>if</code>或<code>guard</code>语句中去有条件的执行一段代码</li>
</ol>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> #available(iOS <span class="number">9</span>, <span class="type">OSX</span> <span class="number">10.10</span>, *) &#123;</span><br><span class="line">    <span class="comment">// 在 iOS 使用 iOS 9 的 API, 在 OS X 使用 OS X v10.10 的 API</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 使用先前版本的 iOS 和 OS X 的 API</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/13/TSPL2_04  集合类型/" itemprop="url">
                  4 集合类型
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-13T19:33:00+08:00" content="2016-05-13">
              2016-05-13
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/13/TSPL2_04  集合类型/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/13/TSPL2_04  集合类型/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p><strong>说明：</strong><code>Array、Sets、Dictionary</code>(Swift将这3中类型使纤维范型集合)</p>
</blockquote>
<table>
<thead>
<tr>
<th>集合类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>数组（Array）</td>
<td>有序数据集合</td>
</tr>
<tr>
<td>集合（Sets）</td>
<td>无序无重复数据的集</td>
</tr>
<tr>
<td>字典（Dictionaries）</td>
<td>无序的键值对的值</td>
</tr>
</tbody>
</table>
<p><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202015-11-25%20%E4%B8%8B%E5%8D%8811.16.16.png" alt="Alt text"></p>
<h2 id="4-1-集合的可变性"><a href="#4-1-集合的可变性" class="headerlink" title="4.1    集合的可变性"></a>4.1    集合的可变性</h2><blockquote>
<p><strong>说明：</strong>集合的可变性依赖于声明为常量或变量。</p>
</blockquote>
<table>
<thead>
<tr>
<th>声明</th>
<th>可变性</th>
</tr>
</thead>
<tbody>
<tr>
<td>常量（<code>let</code>）</td>
<td>大小不可改变</td>
</tr>
<tr>
<td>变量（<code>var</code>）</td>
<td>可以添加或移除集合中的项</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>技巧：</strong>不可变的集合性能更好。</p>
</blockquote>
<h2 id="4-2-数组"><a href="#4-2-数组" class="headerlink" title="4.2 数组"></a>4.2 数组</h2><blockquote>
<p><strong>扩展：</strong>Swift中的<code>Array</code>可以桥接到Foundation中的<code>NSArray</code>。</p>
</blockquote>
<h3 id="4-2-1-创建数组"><a href="#4-2-1-创建数组" class="headerlink" title="4.2.1 创建数组"></a>4.2.1 创建数组</h3><blockquote>
<p><strong>说明：</strong>有3种声明数组的形式</p>
</blockquote>
<table>
<thead>
<tr>
<th>形式</th>
<th>说明</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Array&lt;ElementType&gt;(count: Int, repeatedValue)</code></td>
<td>调用数组的<code>构造器</code></td>
<td>如果不提供参数，则会调用另一个构造器（创建空数组）</td>
</tr>
</tbody>
</table>
<p>|<code>[ElementType]（count: Int, repeatedValue）</code>|调用<code>构造器</code>的方式|另一种调用构造器的方式，和上面等价，更常用|<br>|<code>[Element, ...]</code>|数组字面量|<code>[]</code>表示空数组|</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明数组：形式一（构造器，不常用）</span></span><br><span class="line"><span class="keyword">var</span> anotherInts = <span class="type">Array</span>&lt;<span class="type">Int</span>&gt;(<span class="built_in">count</span>: <span class="number">3</span>, repeatedValue: <span class="number">5</span>)</span><br><span class="line"><span class="keyword">var</span> anotherInts2 = <span class="type">Array</span>(<span class="built_in">count</span>: <span class="number">3</span>, repeatedValue: <span class="number">5</span>);</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"someInts is of type [Int] with \(someInts.count) items."</span>)</span><br><span class="line"><span class="comment">// 声明数组：形式二（构造器）</span></span><br><span class="line"><span class="keyword">var</span> someInts = [<span class="type">Int</span>]()</span><br><span class="line"><span class="comment">// 声明数组：形式三（数组字面量）</span></span><br><span class="line"><span class="keyword">var</span> shoppingList1: [<span class="type">String</span>] = [<span class="string">"Eggs"</span>, <span class="string">"Milk"</span>]<span class="comment">// 指定类型</span></span><br><span class="line"><span class="keyword">var</span> shoppingList2 = [<span class="string">"Eggs"</span>, <span class="string">"Milk"</span>]<span class="comment">// 类型推断</span></span><br></pre></td></tr></table></figure>
<h3 id="4-2-2-空数组"><a href="#4-2-2-空数组" class="headerlink" title="4.2.2 空数组"></a>4.2.2 空数组</h3><blockquote>
<p><strong>说明：</strong>3种方式（对应数组声明的3种方式）</p>
<ol>
<li><code>Array[ElementType]（）</code></li>
<li><code>[ElementType] ()</code></li>
<li><code>[]</code>(空数组字面量无法推断类型，声明常量或变量时需指定类型)</li>
</ol>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 空数组</span></span><br><span class="line"><span class="keyword">var</span> emptyArray1 = <span class="type">Array</span>&lt;<span class="type">Int</span>&gt;()</span><br><span class="line"><span class="keyword">var</span> emptyArray2 = [<span class="type">Int</span>]()</span><br><span class="line"><span class="keyword">var</span> emptyArray3: [<span class="type">Int</span>] = []</span><br></pre></td></tr></table></figure>
<h3 id="4-2-3-数组相加"><a href="#4-2-3-数组相加" class="headerlink" title="4.2.3 数组相加"></a>4.2.3 数组相加</h3><blockquote>
<p><strong>说明：</strong><code>+</code>、<code>+=</code>在数组之间起到拼接的作用。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> threeDoubles = [<span class="type">Double</span>](<span class="built_in">count</span>:<span class="number">3</span>, repeatedValue: <span class="number">0</span>)<span class="comment">// [0.0, 0.0, 0.0]</span></span><br><span class="line"><span class="keyword">let</span> anotherThreeDoubles = <span class="type">Array</span>(<span class="built_in">count</span>: <span class="number">3</span>, repeatedValue: <span class="number">2.5</span>)<span class="comment">// [2.5, 2.5, 2.5]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// +</span></span><br><span class="line"><span class="keyword">var</span> sixDouble = threeDoubles + anotherThreeDoubles</span><br><span class="line"></span><br><span class="line"><span class="comment">// +=</span></span><br><span class="line">sixDouble += [<span class="number">3</span>, <span class="number">3</span>]<span class="comment">// [0, 0, 0, 2.5, 2.5, 2.5, 3, 3]</span></span><br></pre></td></tr></table></figure>
<h3 id="4-2-4-数组字面量"><a href="#4-2-4-数组字面量" class="headerlink" title="4.2.4 数组字面量"></a>4.2.4 数组字面量</h3><blockquote>
<p><strong>语法：</strong>一系列由<code>,</code>分割并由<code>[]</code>包含的数值。</p>
<ul>
<li>只能拥有相同类型值</li>
<li>当数组不为<code>[]</code>的时候，不必把数组的类型定义清楚</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> shoppingList = [<span class="string">"Eggs"</span>, <span class="string">"Milk"</span>]</span><br></pre></td></tr></table></figure>
<h3 id="4-2-5-属性和方法（访问和修改数组）"><a href="#4-2-5-属性和方法（访问和修改数组）" class="headerlink" title="4.2.5 属性和方法（访问和修改数组）"></a>4.2.5 属性和方法（访问和修改数组）</h3><h4 id="下标"><a href="#下标" class="headerlink" title="下标"></a>下标</h4><blockquote>
<p><strong>说明：</strong><code>arr[下标或下标区间]</code></p>
<ul>
<li>可以通过<code>下标</code>(<code>下标区间</code>)改变某个(些)已有索引值对应的数据项（<code>下标</code>或<code>下标区间</code>不能超过数组的下标范围）</li>
<li><code>下标区间</code>中<code>下标</code>的数量可以和用来替换其对应的数据项的新数据项数量不同</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> shoppingList = [<span class="string">"Eggs"</span>, <span class="string">"Milk"</span>, <span class="string">"Maple Syrup"</span>, <span class="string">"Flour"</span>]<span class="comment">// 0...3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 将前3项（0, 1, 2）替换为 ["Bananas", "Apples"]</span></span><br><span class="line">shoppingList[<span class="number">0</span>...<span class="number">2</span>] = [<span class="string">"Bananas"</span>, <span class="string">"Apples"</span>]<span class="comment">// ["Bananas", "Apples", "Flour"]</span></span><br></pre></td></tr></table></figure>
<h4 id="count属性"><a href="#count属性" class="headerlink" title="count属性"></a>count属性</h4><blockquote>
<p><strong>类型：</strong><code>Int</code><br><strong>说明：</strong>只读属性，用来获取数组中的数据项数量。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> shoppingList = [<span class="string">"Eggs"</span>, <span class="string">"Milk"</span>]</span><br><span class="line"><span class="comment">// count</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"The shopping list contains \(shoppingList.count) items."</span>)</span><br></pre></td></tr></table></figure>
<h4 id="isEmpty属性"><a href="#isEmpty属性" class="headerlink" title="isEmpty属性"></a>isEmpty属性</h4><blockquote>
<p><strong>类型：</strong><code>Bool</code><br><strong>说明：</strong>用来判断数组是否为空。<br><strong>技巧：</strong>可以作为检查<code>count</code>属性的值是否为0的捷径。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 字面量</span></span><br><span class="line"><span class="keyword">var</span> shoppingList = [<span class="string">"Eggs"</span>, <span class="string">"Milk"</span>]</span><br><span class="line"><span class="keyword">if</span> shoppingList.isEmpty &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"The shopping list is empty."</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"The shopping list is not empty."</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="append方法"><a href="#append方法" class="headerlink" title="append方法"></a>append方法</h4><blockquote>
<p><strong>说明：</strong>在数组后面添加新的数据项。<br><strong>原型：</strong><code>String类型的实例方法</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @param &#123;ElementType&#125; newElement 要被添加的数据项</span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">func</span> <span class="title">append</span><span class="params">(newElement: ElementType)</span></span> -&gt; <span class="type">Void</span></span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> shoppingList = [<span class="string">"Eggs"</span>, <span class="string">"Milk"</span>]</span><br><span class="line">shoppingList.append(<span class="string">"Flour"</span>)<span class="comment">// ["Eggs", "Milk", "Flour"]</span></span><br></pre></td></tr></table></figure>
<h4 id="insert方法"><a href="#insert方法" class="headerlink" title="insert方法"></a>insert方法</h4><blockquote>
<p><strong>说明：</strong>在某个具体索引项之前添加数据项。<br><strong>原型：</strong><code>String类型的实例方法</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @param &#123;ElementType&#125; newElement 要插入的数据项</span><br><span class="line">&gt;* @param &#123;Int&#125; atIndex 下标（插入的位置）</span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">func</span> <span class="title">insert</span><span class="params">(newElement: String, atIndex: Int)</span></span> -&gt; <span class="type">Void</span></span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shoppingList.insert(<span class="string">"Flour"</span>, atIndex: <span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<h4 id="removeAtIndex方法"><a href="#removeAtIndex方法" class="headerlink" title="removeAtIndex方法"></a>removeAtIndex方法</h4><blockquote>
<p><strong>说明：</strong>移除数组中的某一项。<br><strong>原型：</strong><code>String类型的实例方法</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @param &#123;Int&#125; index 要删除的数据项的下标</span><br><span class="line">&gt;* @return &#123;ElementType&#125; 要删除的数据项的类型</span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">func</span> <span class="title">removeAtIndex</span><span class="params">(index: Int)</span></span> -&gt;<span class="type">ElementType</span></span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> shoppingList = [<span class="string">"Eggs"</span>, <span class="string">"Milk"</span>, <span class="string">"Maple Syrup"</span>]</span><br><span class="line"><span class="comment">// 删除第一项</span></span><br><span class="line">shoppingList.removeAtIndex(<span class="number">0</span>)<span class="comment">// "flour"</span></span><br></pre></td></tr></table></figure>
<h4 id="removeFirst函数"><a href="#removeFirst函数" class="headerlink" title="removeFirst函数"></a>removeFirst函数</h4><blockquote>
<p><strong>说明：</strong>删除第一项<br><strong>原型：</strong><code>String类型的实例方法</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @return &#123;ElementType&#125; 删除的数组项</span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">func</span> <span class="title">removeFirst</span><span class="params">()</span></span> -&gt; <span class="type">ElementType</span></span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> shoppingList = [<span class="string">"Eggs"</span>, <span class="string">"Milk"</span>, <span class="string">"Maple Syrup"</span>]</span><br><span class="line"><span class="comment">// 删除第一项</span></span><br><span class="line">shoppingList.removeFirst()<span class="comment">// "Eggs"</span></span><br></pre></td></tr></table></figure>
<h4 id="removeLast函数"><a href="#removeLast函数" class="headerlink" title="removeLast函数"></a>removeLast函数</h4><blockquote>
<p><strong>说明：</strong>删除最后一项<br><strong>原型：</strong><code>String类型的实例方法</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @return &#123;ElementType&#125; 删除的数组项</span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">func</span> <span class="title">removeLast</span><span class="params">()</span></span> -&gt; <span class="type">ElementType</span></span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> shoppingList = [<span class="string">"Eggs"</span>, <span class="string">"Milk"</span>, <span class="string">"Maple Syrup"</span>]</span><br><span class="line"><span class="comment">// 删除第一项</span></span><br><span class="line">shoppingList.removeLast()<span class="comment">// "Maple Syrup"</span></span><br></pre></td></tr></table></figure>
<h3 id="4-2-6-数组遍历"><a href="#4-2-6-数组遍历" class="headerlink" title="4.2.6 数组遍历"></a>4.2.6 数组遍历</h3><blockquote>
<p><strong>说明：</strong>有两种方式</p>
<ul>
<li><code>for-in</code>：只在遍历时获得元素项</li>
<li><code>for-in</code>配合<code>enumerate</code>：遍历时获得元素项和对应下标</li>
</ul>
</blockquote>
<h4 id="enumerate方法"><a href="#enumerate方法" class="headerlink" title="enumerate方法"></a>enumerate方法</h4><blockquote>
<p><strong>说明：</strong>配合<code>for-in</code>使用，返回一个由每一个数据项索引和数据值组成的元组。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// for-in</span></span><br><span class="line"><span class="keyword">var</span> shoppingList = [<span class="string">"Eggs"</span>, <span class="string">"Milk"</span>, <span class="string">"Maple Syrup"</span>]</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> shoppingList &#123;</span><br><span class="line">    <span class="built_in">print</span>(item)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// enumerate属性</span></span><br><span class="line"><span class="keyword">for</span> (index, value) <span class="keyword">in</span> shoppingList.<span class="built_in">enumerate</span>() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Item \(String(index + 1)): \(value)"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-3-集合"><a href="#4-3-集合" class="headerlink" title="4.3    集合"></a>4.3    集合</h2><blockquote>
<p><strong>关键字：</strong><code>Set</code></p>
<ul>
<li>元素类型相同</li>
<li>没有确定顺序</li>
<li>每个元素只出现一次</li>
</ul>
<p><strong>扩展：</strong>Swift中的<code>Set</code>类型被桥接到<code>Foundation</code>中的<code>NSSet</code>类。</p>
</blockquote>
<h3 id="4-3-1-集合类型的哈希值"><a href="#4-3-1-集合类型的哈希值" class="headerlink" title="4.3.1    集合类型的哈希值"></a>4.3.1    集合类型的哈希值</h3><blockquote>
<p><strong>说明：</strong>存储在<code>Set</code>中的类型必须是可<code>哈希化</code>的。</p>
</blockquote>
<table>
<thead>
<tr>
<th>值类型（可哈细化）</th>
<th>条件</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>String</code>、<code>Int</code>、<code>Double</code>、<code>Bool</code></td>
<td>无</td>
<td>所有基本类型（既可以作为值，也可以作为键）</td>
</tr>
<tr>
<td><code>enum</code>类型值</td>
<td>没有关联值</td>
</tr>
<tr>
<td>自定义类型</td>
<td>实现<code>Hashable</code>协议（符合<code>Equatable</code>协议）</td>
<td><code>1.</code>需要提供一个类型为<code>Int</code>的可读属性<code>hashValue</code>；<code>2.</code>提供一个是否相等运算符<code>==</code>的实现</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>注意：</strong>Hashable协议的<code>==</code>实现必须满足三种情况</p>
<ul>
<li>自反性：<code>a == a</code></li>
<li>对称性：<code>a == b</code>意味着<code>b == a</code></li>
<li>传递性：<code>a == b</code> &amp;&amp; <code>b == c</code>意味着<code>a == c</code></li>
</ul>
</blockquote>
<h3 id="4-3-2-声明集合类型"><a href="#4-3-2-声明集合类型" class="headerlink" title="4.3.2    声明集合类型"></a>4.3.2    声明集合类型</h3><blockquote>
<p><strong>说明：</strong>有2种类型</p>
</blockquote>
<table>
<thead>
<tr>
<th>形式</th>
<th>说明</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Set&lt;ElementType&gt;()</code></td>
<td>调用构造器</td>
<td>没有类似<code>[ElementType] ()</code>的简化形式</td>
</tr>
<tr>
<td><code>Set()</code></td>
<td>调用构造器</td>
<td>必要条件是声明的变量或常量不仅制定了<code>Set</code>，而且明确了<code>&lt;ElementType&gt;</code></td>
</tr>
<tr>
<td><code>[Element, ...]</code></td>
<td>字面量</td>
<td>需要明确指定<code>标记名:Set&lt;ElementType&gt;</code>，其中<code>&lt;ElementType&gt;</code>在集合字面量不是<code>[]</code>的情况下可以省略（类型推断）</td>
</tr>
</tbody>
</table>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建空Set（形式1）</span></span><br><span class="line"><span class="keyword">var</span> letters = <span class="type">Set</span>&lt;<span class="type">Character</span>&gt;()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"letters is of type Set&lt;Character&gt; with \(letters.count) items."</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 字面量（形式2）</span></span><br><span class="line"><span class="keyword">var</span> favoriteGenres: <span class="type">Set</span>&lt;<span class="type">String</span>&gt; = [<span class="string">"Rock"</span>, <span class="string">"Classical"</span>, <span class="string">"Hip hop"</span>]</span><br></pre></td></tr></table></figure>
<h3 id="4-3-3-创建和构造一个空的集合"><a href="#4-3-3-创建和构造一个空的集合" class="headerlink" title="4.3.3    创建和构造一个空的集合"></a>4.3.3    创建和构造一个空的集合</h3><blockquote>
<p><strong>说明：</strong>2种形式（对应两种声明方式）</p>
<ul>
<li><code>Set&lt;ElementType&gt;()</code></li>
<li><code>Set()</code></li>
<li><code>[]</code>(无法进行类型推断，需要指定<code>ElementType</code>)</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 形式1</span></span><br><span class="line"><span class="keyword">var</span> emptySet1: <span class="type">Set</span>&lt;<span class="type">String</span>&gt; = []</span><br><span class="line"><span class="comment">// 形式2</span></span><br><span class="line"><span class="keyword">var</span> emptySet2: <span class="type">Set</span>&lt;<span class="type">String</span>&gt; = <span class="type">Set</span>()</span><br><span class="line"><span class="comment">// 形式3</span></span><br><span class="line"><span class="keyword">var</span> emptySet3: <span class="type">Set</span> = <span class="type">Set</span>&lt;<span class="type">String</span>&gt;()</span><br></pre></td></tr></table></figure>
<h3 id="4-3-4-用数组字面量创建集合"><a href="#4-3-4-用数组字面量创建集合" class="headerlink" title="4.3.4    用数组字面量创建集合"></a>4.3.4    用数组字面量创建集合</h3><blockquote>
<p><strong>注意：</strong>对应的常量或变量必须指定了<code>Set</code>类型，否则会被默认为<code>Array</code>。</p>
</blockquote>
<h3 id="4-3-5-属性和方法（访问和修改一个集合）"><a href="#4-3-5-属性和方法（访问和修改一个集合）" class="headerlink" title="4.3.5    属性和方法（访问和修改一个集合）"></a>4.3.5    属性和方法（访问和修改一个集合）</h3><h4 id="count属性-1"><a href="#count属性-1" class="headerlink" title="count属性"></a>count属性</h4><blockquote>
<p><strong>类型：</strong><code>Int</code><br><strong>说明：</strong>只读属性，用来获取<code>Set</code>中的数据项数量。</p>
</blockquote>
<h4 id="isEmpty属性-1"><a href="#isEmpty属性-1" class="headerlink" title="isEmpty属性"></a>isEmpty属性</h4><blockquote>
<p><strong>类型：</strong><code>Bool</code><br><strong>说明：</strong>用来判断数组是否为空。<br><strong>技巧：</strong>可以作为检查<code>count</code>属性的值是否为0的捷径。</p>
</blockquote>
<h4 id="insert方法-1"><a href="#insert方法-1" class="headerlink" title="insert方法"></a>insert方法</h4><blockquote>
<p><strong>说明：</strong>在<code>Set</code>中插入一个元素。<br><strong>原型：</strong><code>Set类型的实例方法</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @param &#123;Hashable&#125; member 新数据项</span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">func</span> <span class="title">insert</span><span class="params">(member: Hashable)</span></span> -&gt; <span class="type">Void</span></span><br></pre></td></tr></table></figure>
<h4 id="remove方法"><a href="#remove方法" class="headerlink" title="remove方法"></a>remove方法</h4><blockquote>
<p><strong>说明：</strong>移除一个数据项<br><strong>原型：</strong><code>Set类型的实例方法</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @param &#123;Hashable&#125; member 要移除的数据项的键</span><br><span class="line">&gt;* @return &#123;Hashable?&#125; 移除的数据项</span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">func</span> <span class="title">remove</span><span class="params">(member: Hashable)</span></span> -&gt; <span class="type">Hashable</span>?</span><br></pre></td></tr></table></figure>
<h4 id="contain方法"><a href="#contain方法" class="headerlink" title="contain方法"></a>contain方法</h4><blockquote>
<p><strong>说明：</strong>检查<code>Set</code>中是否包含一个特定的值。<br><strong>原型：</strong><code>Set类型的实例方法</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @param &#123;Hashable&#125; member 数据项值</span><br><span class="line">&gt;* @return &#123;Bool&#125; 是否包含 </span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">func</span> <span class="title">contains</span><span class="params">(member: Hashable)</span></span> -&gt; <span class="type">Bool</span></span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建空Set（形式1）</span></span><br><span class="line"><span class="keyword">var</span> letters = <span class="type">Set</span>&lt;<span class="type">Character</span>&gt;()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"letters is of type Set&lt;Character&gt; with \(letters.count) items."</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 空Set</span></span><br><span class="line"><span class="comment">// 形式1</span></span><br><span class="line"><span class="keyword">var</span> emptySet1: <span class="type">Set</span>&lt;<span class="type">String</span>&gt; = []</span><br><span class="line"><span class="comment">// 形式2</span></span><br><span class="line"><span class="keyword">var</span> emptySet2: <span class="type">Set</span>&lt;<span class="type">String</span>&gt; = <span class="type">Set</span>()</span><br><span class="line"><span class="comment">// 形式3</span></span><br><span class="line"><span class="keyword">var</span> emptySet3: <span class="type">Set</span> = <span class="type">Set</span>&lt;<span class="type">String</span>&gt;()</span><br><span class="line"><span class="comment">// 清空Set</span></span><br><span class="line">letters = []</span><br><span class="line"></span><br><span class="line"><span class="comment">// 字面量（形式2）</span></span><br><span class="line"><span class="keyword">var</span> favoriteGenres: <span class="type">Set</span>&lt;<span class="type">String</span>&gt; = [<span class="string">"Rock"</span>, <span class="string">"Classical"</span>, <span class="string">"Hip hop"</span>]</span><br><span class="line"><span class="comment">// count</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"I have \(favoriteGenres.count) favorite music genres."</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// isEmpty</span></span><br><span class="line"><span class="keyword">if</span> favoriteGenres.isEmpty &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"As far as music goes, I'm not picky."</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"I have particular music preferences."</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// insert</span></span><br><span class="line">favoriteGenres.insert(<span class="string">"Jazz"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// remove</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> removedGenre = favoriteGenres.remove(<span class="string">"Rock"</span>) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"\(removedGenre) ? I'm over it."</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"I never much cared for thar."</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// contains</span></span><br><span class="line"><span class="keyword">if</span> favoriteGenres.<span class="built_in">contains</span>(<span class="string">"Funk"</span>) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"I get up on the good foot."</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"It's too funky here."</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-3-6-遍历一个集合"><a href="#4-3-6-遍历一个集合" class="headerlink" title="4.3.6    遍历一个集合"></a>4.3.6    遍历一个集合</h3><blockquote>
<p><strong>说明：</strong>如果不做任何处理，使用<code>for-in</code>遍历时<code>Set</code>时并没有确定的顺序。</p>
</blockquote>
<h4 id="sort方法"><a href="#sort方法" class="headerlink" title="sort方法"></a>sort方法</h4><blockquote>
<p><strong>说明：</strong>根据提供的序列返回一个有序<code>Set</code>。<br><strong>原型：</strong><code>Set类型的实例方法</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @return &#123;Set&#125; 带顺序的Set</span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">func</span> <span class="title">sort</span><span class="params">()</span></span> -&gt; <span class="type">Set</span></span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> favoriteGenres: <span class="type">Set</span>&lt;<span class="type">String</span>&gt; = [<span class="string">"Rock"</span>, <span class="string">"Classical"</span>, <span class="string">"Hip hop"</span>]</span><br><span class="line"><span class="comment">// 遍历</span></span><br><span class="line"><span class="keyword">for</span> genre <span class="keyword">in</span> favoriteGenres &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"\(genre)"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// sort</span></span><br><span class="line"><span class="keyword">for</span> genre <span class="keyword">in</span> favoriteGenres.<span class="built_in">sort</span>() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"\(genre)"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-3-7-完成集合操作"><a href="#4-3-7-完成集合操作" class="headerlink" title="4.3.7    完成集合操作"></a>4.3.7    完成集合操作</h3><h4 id="4-3-7-1-基本集合操作"><a href="#4-3-7-1-基本集合操作" class="headerlink" title="4.3.7.1    基本集合操作"></a>4.3.7.1    基本集合操作</h4><blockquote>
<p><strong>说明：</strong>交、差、并、补</p>
</blockquote>
<table>
<thead>
<tr>
<th>集合操作</th>
<th>方法</th>
</tr>
</thead>
<tbody>
<tr>
<td>交</td>
<td>intersect</td>
</tr>
<tr>
<td>差</td>
<td>exclusive</td>
</tr>
<tr>
<td>并</td>
<td>union</td>
</tr>
<tr>
<td>补</td>
<td>subtract</td>
</tr>
</tbody>
</table>
<p><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202015-11-29%20%E4%B8%8B%E5%8D%884.04.29.png" alt="Alt text"></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 奇数</span></span><br><span class="line"><span class="keyword">let</span> oddDigits: <span class="type">Set</span> = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>]</span><br><span class="line"><span class="comment">// 偶数</span></span><br><span class="line"><span class="keyword">let</span> evenDigits: <span class="type">Set</span> = [<span class="number">0</span> ,<span class="number">2</span> ,<span class="number">4</span> ,<span class="number">6</span>, <span class="number">8</span>]</span><br><span class="line"><span class="comment">// 素数</span></span><br><span class="line"><span class="keyword">let</span> singleDigitPrimeNumbers: <span class="type">Set</span> = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 并</span></span><br><span class="line">oddDigits.union(evenDigits).<span class="built_in">sort</span>()<span class="comment">// [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 交</span></span><br><span class="line">oddDigits.intersect(evenDigits).<span class="built_in">sort</span>()<span class="comment">// []</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 差</span></span><br><span class="line">oddDigits.subtract(singleDigitPrimeNumbers)<span class="comment">// [9, 1]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 补</span></span><br><span class="line">oddDigits.exclusiveOr(singleDigitPrimeNumbers).<span class="built_in">sort</span>()<span class="comment">// [1, 2, 9]</span></span><br></pre></td></tr></table></figure>
<h4 id="4-3-7-2-集合成员关系和相等"><a href="#4-3-7-2-集合成员关系和相等" class="headerlink" title="4.3.7.2    集合成员关系和相等"></a>4.3.7.2    集合成员关系和相等</h4><blockquote>
<p><strong>说明：</strong>集合之间的关系可以分为6中情况</p>
</blockquote>
<table>
<thead>
<tr>
<th>关系</th>
<th>判定方式</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>相等</td>
<td><code>==</code></td>
<td>判断两个集合是否包含全部相同的值</td>
</tr>
<tr>
<td>被包含</td>
<td><code>isSubsetOf</code></td>
<td>判断一个集合中的值是否也被包含在另外一个集合中</td>
</tr>
<tr>
<td>包含</td>
<td><code>isSupersetOf</code></td>
<td>判断一个集合中包含另一个集合的所有值</td>
</tr>
<tr>
<td>被包含且不想等</td>
<td><code>isStrucxtSubsetOf</code></td>
<td>判定一个集合是另外一个集合的真子集</td>
</tr>
<tr>
<td>包含且不想等</td>
<td><code>isStructSupersetOf</code></td>
<td>判定一个集合是另外一个集合的父集且不想等</td>
</tr>
<tr>
<td>不相交</td>
<td><code>isDisjoinWith</code></td>
<td>判断两个集合不包含相同的值</td>
</tr>
</tbody>
</table>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> houseAnimals: <span class="type">Set</span> = [<span class="string">"dog"</span>, <span class="string">"cat"</span>]</span><br><span class="line"><span class="keyword">let</span> farmAnimals: <span class="type">Set</span> = [<span class="string">"pig"</span>, <span class="string">"chicken"</span>, <span class="string">"sheep"</span>, <span class="string">"dog"</span>, <span class="string">"cat"</span>]</span><br><span class="line"><span class="keyword">let</span> cityAnimal: <span class="type">Set</span> = [<span class="string">"Dove"</span>, <span class="string">"Mouse"</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 被包含</span></span><br><span class="line">houseAnimals.isSubsetOf(farmAnimals)<span class="comment">// true</span></span><br><span class="line"><span class="comment">// 包含</span></span><br><span class="line">farmAnimals.isSupersetOf(houseAnimals)<span class="comment">// true</span></span><br><span class="line"><span class="comment">// 不相交</span></span><br><span class="line">farmAnimals.isDisjointWith(cityAnimal)<span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<h2 id="4-4-字典"><a href="#4-4-字典" class="headerlink" title="4.4    字典"></a>4.4    字典</h2><blockquote>
<p><strong>类型关键字：</strong><code>Dictionary</code><br><strong>说明：</strong>其实就是键值对容器。</p>
<ul>
<li>每个<code>value</code>都关联唯一的<code>key</code></li>
<li><code>key</code>作为字典中的这个值数据的标示符</li>
<li>没有具体顺序</li>
</ul>
<p><strong>限制：</strong>对<code>key</code>和<code>value</code>的类型要求有所不同</p>
<ul>
<li><code>key</code>：其类型必须遵循<code>Hashable</code>协议</li>
<li><code>value</code>：所有数据类型</li>
</ul>
<p><strong>扩展：</strong>Swift中的<code>Dictionary</code></p>
</blockquote>
<h3 id="4-4-1-创建字典"><a href="#4-4-1-创建字典" class="headerlink" title="4.4.1    创建字典"></a>4.4.1    创建字典</h3><blockquote>
<p><strong>说明：</strong>可划分为<code>3</code>种方式</p>
</blockquote>
<table>
<thead>
<tr>
<th>创建形式</th>
<th>说明</th>
<th>是否只能创建空字典</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>[keyType: valueType] ()</code></td>
<td>调用构造器的简化形式</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td><code>[key1: value1, ...]</code></td>
<td>字面量</td>
<td>否，空字典字面量为<code>[:]</code></td>
<td></td>
</tr>
<tr>
<td><code>Dictionary&lt;Int, String&gt;()</code></td>
<td>调用构造器</td>
<td>是</td>
<td><code>&lt;Int, String&gt;</code>可省略（当变量或常量的键值对类型已指定过时）</td>
</tr>
</tbody>
</table>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方式1：构造器的简化方式</span></span><br><span class="line"><span class="comment">// 指定键值对类型</span></span><br><span class="line"><span class="keyword">var</span> dictionary1 = [<span class="type">Int</span>: <span class="type">String</span>]()</span><br><span class="line"><span class="comment">// 方式2:字面量形式</span></span><br><span class="line"><span class="keyword">var</span> dictionary2: [<span class="type">Int</span>: <span class="type">String</span>] = [<span class="string">"YYZ"</span>: <span class="string">"Toronto"</span>, <span class="string">"DUB"</span>: <span class="string">"Dublin"</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方式3：构造器</span></span><br><span class="line"><span class="comment">// 指定键值对类型</span></span><br><span class="line"><span class="keyword">var</span> dictionary3 = <span class="type">Dictionary</span>&lt;<span class="type">Int</span>, <span class="type">String</span>&gt;()</span><br><span class="line"><span class="comment">// 键值对类型已确定</span></span><br><span class="line"><span class="keyword">var</span> dictionary4: [<span class="type">Int</span>: <span class="type">String</span>] = <span class="type">Dictionary</span>()</span><br></pre></td></tr></table></figure>
<h3 id="4-4-2-访问和修改字典"><a href="#4-4-2-访问和修改字典" class="headerlink" title="4.4.2    访问和修改字典"></a>4.4.2    访问和修改字典</h3><h4 id="下标-1"><a href="#下标-1" class="headerlink" title="下标"></a>下标</h4><blockquote>
<p><strong>说明：</strong>通过下标可以实现字典中<code>key-value</code>的增删改查。<br><strong>注意：</strong>当通过下标使用<code>key</code>访问字典中的<code>value</code>时，返回的是相应的可选型。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> airports: [<span class="type">String</span>: <span class="type">String</span>] = [<span class="string">"YYZ"</span>: <span class="string">"Toronto"</span>, <span class="string">"DUB"</span>: <span class="string">"Dublin"</span>]</span><br><span class="line"><span class="comment">// 添加新key-value</span></span><br><span class="line">airports[<span class="string">"LHR"</span>] = <span class="string">"London"</span></span><br><span class="line"><span class="comment">// 修改value</span></span><br><span class="line">airports[<span class="string">"LHR"</span>] = <span class="string">"London Heathrow"</span></span><br><span class="line"><span class="comment">// 访问</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> airportName = airports[<span class="string">"DUB"</span>] &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"The name of the airport is \(airportName)"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"The airport is not in the aitpoorts dictionary."</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 移除</span></span><br><span class="line">airports[<span class="string">"LHR"</span>] = <span class="literal">nil</span></span><br></pre></td></tr></table></figure>
<h4 id="count属性-2"><a href="#count属性-2" class="headerlink" title="count属性"></a>count属性</h4><blockquote>
<p><strong>类型说明：</strong><code>Int</code><br><strong>说明：</strong>记录着字典中着键值对的数量的只读属性。</p>
</blockquote>
<h4 id="isEmpty属性-2"><a href="#isEmpty属性-2" class="headerlink" title="isEmpty属性"></a>isEmpty属性</h4><blockquote>
<p><strong>类型说明：</strong><code>Bool</code><br><strong>说明：</strong>判断字典是否为空字典。</p>
</blockquote>
<h4 id="keys属性"><a href="#keys属性" class="headerlink" title="keys属性"></a>keys属性</h4><blockquote>
<p><strong>类型：</strong><code>[key1, key2, ...]</code><br><strong>说明：</strong>字典中所有数据项的<code>key</code>构成的数组。</p>
</blockquote>
<h4 id="values属性"><a href="#values属性" class="headerlink" title="values属性"></a>values属性</h4><blockquote>
<p><strong>类型：</strong><code>[value1, value2, ...]</code><br><strong>说明：</strong>字典中所有数据项的<code>value</code>构成的数组。</p>
</blockquote>
<h4 id="removeValueForKey方法"><a href="#removeValueForKey方法" class="headerlink" title="removeValueForKey方法"></a>removeValueForKey方法</h4><blockquote>
<p><strong>说明：</strong>通过<code>key</code>移除键值对。<br><strong>原型：</strong><code>Dictionary类型的实例方法</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @param &#123;Hashable&#125; key 要删除的键值对的键</span><br><span class="line">&gt;* @return &#123;ValueType?&#125; 对应value的可选型</span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">func</span> <span class="title">removeValueForKey</span><span class="params">(key: Hashable)</span></span> -&gt; <span class="type">ValueType</span>?</span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// count</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"The dictionary if airports contains \(airports.count) items."</span>)</span><br><span class="line"><span class="comment">// isEmpty</span></span><br><span class="line"><span class="keyword">if</span> airports.isEmpty &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"The airports dictionary is empty."</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Tge airports dictionary is not empty."</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// removeValueForKey</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> removedValue = airports.removeValueForKey(<span class="string">"DUB"</span>) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"The airports dictionary does not contain a value for DUB."</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"The airports dictionary does not contain a value fot DUB."</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-4-3-字典遍历"><a href="#4-4-3-字典遍历" class="headerlink" title="4.4.3    字典遍历"></a>4.4.3    字典遍历</h3><blockquote>
<p><strong>说明：</strong>通过<code>for-in</code>便利字典时，每一个数据项都以<code>(key, value)</code>元组形式返回。<br><strong>技巧：</strong></p>
<ul>
<li>可以通过临时常量或变量分解<code>(key, value)</code></li>
<li>可以使用<code>keys</code>或<code>values</code>属性获取相应的数组单独进行遍历</li>
<li>字典是无序的，可以通过对<code>keys</code>或<code>values</code>属性使用<code>sort方法</code>获得特定顺序</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 遍历字典</span></span><br><span class="line"><span class="keyword">for</span> (airportCode, airportName) <span class="keyword">in</span> airports &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"\(airportCode): \(airportName)"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 遍历字典的key</span></span><br><span class="line"><span class="keyword">for</span> airportCode <span class="keyword">in</span> airports.keys &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Airport code: \(airportCode)"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 遍历字典的value</span></span><br><span class="line"><span class="keyword">for</span> airportName <span class="keyword">in</span> airports.values &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Airport name: \(airportName)"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 提取key或value构成的数组</span></span><br><span class="line"><span class="keyword">let</span> airportCodes = [<span class="type">String</span>](airports.keys)</span><br><span class="line"><span class="keyword">let</span> airportNames = [<span class="type">String</span>](airports.values)</span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/13/TSPL2_03  字符串和字符/" itemprop="url">
                  3 字符串和字符
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-13T19:32:42+08:00" content="2016-05-13">
              2016-05-13
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/13/TSPL2_03  字符串和字符/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/13/TSPL2_03  字符串和字符/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p><strong>说明：</strong>有序的<code>Character</code>类型的值的集合，通过<code>String类</code>来表示。</p>
<ul>
<li>每一个字符串都是由编码无关的<code>Unicide</code>字符组成</li>
<li>可以通过內插的方式将字符串插入到常量、变量、字面量表达式中</li>
</ul>
<p><strong>扩展：</strong>和Cocoa中的Foundation框架中的<code>NSString类</code>进行了无缝对接</p>
<ul>
<li>可以将创建的任何字符串的值转换成<code>NSString</code></li>
<li>可以调用任意的<code>NSString</code>API</li>
<li>可以在任意要求传入<code>NSString</code>实例作为参数的API中用<code>String类</code>的值代替</li>
</ul>
</blockquote>
<p>##3.1    字符串字面量</p>
<blockquote>
<p><strong>格式：</strong><code>&quot;固定顺序的文本字符集&quot;</code><br><strong>应用：</strong>为常量或变量提供初始值</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> someString = <span class="string">"Some string literal value"</span></span><br></pre></td></tr></table></figure>
<p>##3.2    初始化空字符串</p>
<blockquote>
<p><strong>说明：</strong>2种形式</p>
<ol>
<li>将空的字符串字面量赋值给变量</li>
<li>初始化一个新的<code>String</code>实例</li>
</ol>
<p><strong>判空：</strong>可以通过字符串实例的<code>isEmpty</code>属性(Boolean)来判断字符串是否为空。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 形式1</span></span><br><span class="line"><span class="keyword">var</span> emptyString = <span class="string">""</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 形式2</span></span><br><span class="line"><span class="keyword">var</span> anotherEmptyString = <span class="type">String</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判空</span></span><br><span class="line"><span class="keyword">if</span> emptyString.isEmpty &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Nothing to see here"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>##3.3    字符串可变性</p>
<blockquote>
<p><strong>说明：</strong>和Swift中其它值类型一样，可变性取决于定义为常量还是变量</p>
<ul>
<li>常量：不可改变</li>
<li>变量：可以改变</li>
</ul>
<p><strong>扩展：</strong>在O-C和Cocoa中，字符串的可变性取决于使用<code>NSString类</code>还是<code>NSMutableString类</code>。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义为变量</span></span><br><span class="line"><span class="keyword">var</span> variableString = <span class="string">"Hourse"</span></span><br><span class="line"><span class="comment">// 所以可以修改</span></span><br><span class="line">variableString += <span class="string">" add carriage"</span></span><br></pre></td></tr></table></figure>
<p>##3.4    字符串是值类型</p>
<blockquote>
<p><strong>说明：</strong>意味着在以下操作中通过拷贝来传递值</p>
<ul>
<li>常量、变量赋值操作</li>
<li>在函数、方法中传参</li>
</ul>
<p><strong>意义：</strong>确保传递的字符串不会被意外修改。<br><strong>扩展：</strong>为了保证性能，Swift编译器只会在绝对必要的情况下才进行复制。</p>
<p>##3.5    使用字符<br><strong>说明：</strong><code>Character</code></p>
<ul>
<li>字符类型的常量和字符串相似，不同点在于自能包含一个字符。</li>
<li>用字符常量初始化字符类型必须指定常量或变量为<code>Character</code>，否则默认为字符串类型。</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> exclamatuinMark: <span class="type">Character</span> = <span class="string">"!"</span></span><br></pre></td></tr></table></figure>
<p>###3.5.1    字符串的Chracters属性</p>
<blockquote>
<p><strong>说明：</strong>可以通过该属性遍历字符串对应的字符数组。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 遍历字符串中的字符</span></span><br><span class="line"><span class="keyword">for</span> character <span class="keyword">in</span> <span class="string">"Dog"</span>.characters &#123;</span><br><span class="line">    <span class="built_in">print</span>(character)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>###3.5.2    字符数组转换为字符串</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明字符数组</span></span><br><span class="line"><span class="keyword">let</span> catCharacters: [<span class="type">Character</span>] = [<span class="string">"C"</span>, <span class="string">"a"</span>, <span class="string">"t"</span>]</span><br><span class="line"><span class="comment">// 将字符数组转换为字符串</span></span><br><span class="line"><span class="keyword">let</span> catString = <span class="type">String</span>(catCharacters)</span><br><span class="line"><span class="built_in">print</span>(catString)<span class="comment">// "Cat"</span></span><br></pre></td></tr></table></figure>
<p>##3.6    连接字符串和字符</p>
<blockquote>
<p><strong>说明：</strong>两种方式</p>
<ul>
<li><code>+</code>、<code>+=</code>：字符串拼接</li>
<li><code>append方法</code><br>###append方法<br><strong>说明：</strong>将一个字符附加到字符串变量的尾部<br><strong>原型：</strong><code>String类实例方法</code></li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @param &#123;Character&#125; c 字符</span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;void append(<span class="built_in">c</span>: <span class="type">Character</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>注意：</strong>参数只能是<code>Character</code>常量或变量，不能是字面量(因为存在歧义)</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str1 = <span class="string">"hello"</span></span><br><span class="line"><span class="keyword">let</span> str2 = <span class="string">" there"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//+</span></span><br><span class="line"><span class="keyword">var</span> welcome = str1 + str2<span class="comment">// hello there</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//+=</span></span><br><span class="line"><span class="keyword">var</span> instruction = <span class="string">"look over"</span></span><br><span class="line">instruction += str2<span class="comment">// look over there</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//append</span></span><br><span class="line"><span class="keyword">let</span> exclamationMark: <span class="type">Character</span> = <span class="string">"!"</span></span><br><span class="line">instruction.append(exclamationMark)</span><br></pre></td></tr></table></figure>
<p>##3.7    字符串插值</p>
<blockquote>
<p><strong>用途：</strong>构建新的字符串。<br><strong>语法：</strong><code>\(表达式)</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> multiplier = <span class="number">3</span></span><br><span class="line"><span class="comment">// 通过插值构建新的字符串</span></span><br><span class="line"><span class="keyword">let</span> message = <span class="string">"\(multiplier) times 2.5 is \(Double(multiplier) * 2.5)"</span></span><br></pre></td></tr></table></figure>
<p>##3.8    Unicode</p>
<p>###3.8.1    Unicode标量</p>
<blockquote>
<p><strong>Unicode码位：</strong>格式为<code>U+[1到8位16进制数字]</code></p>
<ul>
<li><strong>Unicode标量码位：</strong>是对应字符或者修饰符的唯一的21位数字，每个<code>Unicode标量</code>都对应着一个<code>Unicode码位</code>，但反过来不成立。</li>
<li><strong>Unicode代理项码位：</strong>Unicode码位中不属于Unicode标量的部分。</li>
</ul>
</blockquote>
<table>
<thead>
<tr>
<th>U+0000~U+D7FF</th>
<th>U+D800~U+DFFF</th>
<th>U+E000~U+10FFF</th>
</tr>
</thead>
<tbody>
<tr>
<td>Unicode标量</td>
<td>unicode代理项</td>
<td>Unicode标量</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>应用：</strong>Swift的<code>String</code>类型是基于Unicode标量建立的。</p>
</blockquote>
<p>###3.8.2    字符串字面量的特殊字符</p>
<blockquote>
<p><strong>说明：</strong>分两类</p>
<ul>
<li>转义字符</li>
<li>Unicode标量</li>
</ul>
</blockquote>
<table>
<thead>
<tr>
<th>特殊字符</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>\0</code></td>
<td>空字符</td>
</tr>
<tr>
<td><code>\\</code></td>
<td>反斜线</td>
</tr>
<tr>
<td><code>\t</code></td>
<td>水平制表符</td>
</tr>
<tr>
<td><code>\n</code></td>
<td>换行符</td>
</tr>
<tr>
<td><code>\r</code></td>
<td>回车符</td>
</tr>
<tr>
<td><code>\&quot;</code></td>
<td>双引号</td>
</tr>
<tr>
<td><code>\&#39;</code></td>
<td>单引号</td>
</tr>
<tr>
<td><code>\u{1到8位16进制数}</code></td>
<td>Unicode标量</td>
</tr>
</tbody>
</table>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// \"</span></span><br><span class="line"><span class="keyword">let</span> wiseWords = <span class="string">"\"Imagination is more importent than knowledge\" - Einstein"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Unocode标量</span></span><br><span class="line"><span class="keyword">let</span> dollarSign = <span class="string">"\u&#123;24&#125;"</span></span><br></pre></td></tr></table></figure>
<p>###3.8.3    可扩展的字形群集</p>
<blockquote>
<p><strong>说明：</strong>有些字符由多个部分组成，每个部分都可以用一个Unicode标量表示。组合起来就形成了一个新字符。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é</span></span><br><span class="line"><span class="keyword">let</span> eAcute: <span class="type">Character</span> = <span class="string">"\u&#123;E9&#125;"</span><span class="comment">// é</span></span><br><span class="line"><span class="keyword">let</span> combinedEAcute: <span class="type">Character</span> = <span class="string">"\u&#123;65&#125;\u&#123;301&#125;"</span><span class="comment">// é</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 한</span></span><br><span class="line"><span class="keyword">let</span> precomposed: <span class="type">Character</span> = <span class="string">"\u&#123;D55C&#125;"</span><span class="comment">// 한</span></span><br><span class="line"><span class="keyword">let</span> decomposed: <span class="type">Character</span> = <span class="string">"\u&#123;1112&#125;\u&#123;1161&#125;\u&#123;11AB&#125;"</span><span class="comment">// 한</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é⃝</span></span><br><span class="line"><span class="keyword">let</span> encosedEAcute: <span class="type">Character</span> = <span class="string">"\u&#123;E9&#125;\u&#123;20DD&#125;"</span><span class="comment">// é⃝</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 🇺🇸</span></span><br><span class="line"><span class="keyword">let</span> regionalIndicatorForUS: <span class="type">Character</span> = <span class="string">"\u&#123;1F1FA&#125;\u&#123;1F1F8&#125;"</span><span class="comment">// 🇺🇸</span></span><br></pre></td></tr></table></figure>
<p>##3.9    计算字符数量</p>
<p>###characters.count属性</p>
<blockquote>
<p><strong>说明：</strong><code>String</code>类实例成员<code>characters</code>提供的记录字符总数的属性。<br><strong>性能问题：</strong>字符串中可能包含可扩展字符群，只有遍历<code>Unicode</code>标量确定字符群表示的字符后才能确定字符串的长度<br><strong>扩展：</strong><code>NSString</code>的<code>length</code>属性不同于swift的<code>String</code>的<code>count</code>属性。前者利用<code>UTF-16</code>表示的16位代码单元数字。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> unusualMenagerie = <span class="string">"Koala, Snail, Penguin, Dromedary"</span></span><br><span class="line"><span class="comment">// 获得字符串中字符的数量</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"unusualMenagerie has \(unusualMenagerie.characters.count)"</span>)<span class="comment">// 32</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用可扩展的群组作为Character拼接到字符串时，字符串的字符数量并不一定会改变</span></span><br><span class="line"><span class="keyword">var</span> word = <span class="string">"cafe"</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"the number of characters in \(word) is \(word.characters.count)"</span>)<span class="comment">// 4</span></span><br><span class="line"></span><br><span class="line">word += <span class="string">"\u&#123;301&#125;"</span><span class="comment">// café</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"the number of characters in \(word) is \(word.characters.count)"</span>)<span class="comment">// 4</span></span><br></pre></td></tr></table></figure>
<p>##3.10    访问和修改字符串</p>
<blockquote>
<p><strong>说明：</strong>两种方式</p>
<ul>
<li>字符串的属性和方法</li>
<li>下标语法<br>###3.10.1    字符串索引<br>####相关属性(2个)</li>
</ul>
</blockquote>
<table>
<thead>
<tr>
<th>字符串实例属性</th>
<th>说明</th>
<th>空字符串相应属性值</th>
</tr>
</thead>
<tbody>
<tr>
<td>startIndex</td>
<td>第一个<code>Character</code>的下标</td>
<td>0</td>
</tr>
<tr>
<td>endIndex</td>
<td>最后一个<code>Character</code>的下标 + 1</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>####predecessor方法</p>
<blockquote>
<p><strong>说明：</strong>通过当前下标获得前一个下标<br><strong>原型：</strong><code>Index类型的成员方法</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @return  &#123;String.CharacterView.Index&#125; 下标索引</span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">func</span> <span class="title">predecessor</span> -&gt; <span class="title">String</span>.<span class="title">CharacterView</span>.<span class="title">Index</span></span></span><br></pre></td></tr></table></figure>
<p>####successor方法</p>
<blockquote>
<p><strong>说明：</strong>通过当前索引获得后面一个索引。<br><strong>原型：</strong><code>Index类型的成员方法</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @return  &#123;String.CharacterView.Index&#125; 下标索引</span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">func</span> <span class="title">successor</span> -&gt; <span class="title">String</span>.<span class="title">CharacterView</span>.<span class="title">Index</span></span></span><br></pre></td></tr></table></figure>
<p>####indices属性</p>
<blockquote>
<p><strong>说明：</strong>包含全部索引的<code>Range</code><br><strong>类型：</strong><code>Range &lt;Index&gt;</code><br><strong>原型：</strong><code>String&gt;characters的成员属性</code></p>
</blockquote>
<p>####advancedBy方法</p>
<blockquote>
<p><strong>说明：</strong>以当前位置为参照，获得相隔指定数量个下标的位置处的下标。<br><strong>原型：</strong><code>String.CharacterView.Index类型的成员方法</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @param &#123;Int&#125; n 距离（正数代表向右移动，负数代表向左移动）</span><br><span class="line">&gt;* @return &#123;Index&#125; 下标</span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">func</span> <span class="title">advancedBy</span><span class="params">(n: Int)</span></span> -&gt; <span class="type">String</span>.<span class="type">CharacterView</span>.<span class="type">Index</span></span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> greeting = <span class="string">"Gunten Tag!"</span></span><br><span class="line"><span class="comment">// 访问第一个字符</span></span><br><span class="line">greeting[greeting.startIndex]<span class="comment">// G</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 访问最后一个字符</span></span><br><span class="line">greeting[greeting.endIndex.predecessor()]<span class="comment">// !</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 访问第二个字符</span></span><br><span class="line">greeting[greeting.startIndex.successor()]<span class="comment">// u</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 访问最后一个字符</span></span><br><span class="line">greeting[greeting.endIndex.advancedBy(-<span class="number">1</span>)] <span class="comment">// !</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// indices属性</span></span><br><span class="line"><span class="keyword">for</span> index <span class="keyword">in</span> greeting.characters.<span class="built_in">indices</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"\(greeting[index])"</span>, terminator: <span class="string">""</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>###3.10.2    插入和删除</p>
<p>####insert函数</p>
<blockquote>
<p><strong>说明：</strong>在一个字符串的指定索引插入一个字符串。<br><strong>原型：</strong><code>String类型的实例方法</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @param &#123;Character&#125; newElement 要插入的字符</span><br><span class="line">&gt;* @param &#123;Index&#125; atIndex 插入的位置</span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">func</span> <span class="title">insert</span><span class="params">(newElement: Character, atIndex: Index)</span></span> -&gt; void</span><br></pre></td></tr></table></figure>
<p>####insertContentsOf函数</p>
<blockquote>
<p><strong>说明：</strong>在一个字符串的指定索引插入一个字符串。<br><strong>原型：</strong><code>String类型的实例方法</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @param &#123;CollectionType&#125; newElements 插入的集合</span><br><span class="line">&gt;* @param &#123;Index&#125; at 插入位置</span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">func</span> <span class="title">insertContentsOf</span><span class="params">(newElements: CollectionType, at: Index)</span></span> -&gt; void</span><br></pre></td></tr></table></figure>
<p>####removeAtIndex函数</p>
<blockquote>
<p><strong>说明：</strong>在一个字符串中的指定索引删除一个字符<br><strong>原型：</strong><code>String类型的实例方法</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @param  &#123;Index&#125; i 要删除的字符对应的索引</span><br><span class="line">&gt;* @return &#123;Character&#125; 删除的字符</span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">func</span> <span class="title">removeAtIndex</span><span class="params">(i: Index)</span></span> -&gt; <span class="type">Character</span></span><br></pre></td></tr></table></figure>
<p>####removeRange函数</p>
<blockquote>
<p><strong>说明：</strong>在一个字符串的指定索引删除一个字串<br><strong>原型：</strong><code>String类型的实例方法</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="function"><span class="keyword">func</span> <span class="title">removeRange</span><span class="params">(subRange: Range&lt;Index&gt;)</span></span> -&gt; void</span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> welcome = <span class="string">"hello"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 在字符串尾部插入一个字符</span></span><br><span class="line">welcome.insert(<span class="string">"!"</span>, atIndex: welcome.endIndex)<span class="comment">// hello</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 在字符串倒数第二个位置插入另一个字符串</span></span><br><span class="line">welcome.insertContentsOf(<span class="string">" there"</span>.characters, at: welcome.endIndex.predecessor())<span class="comment">// hello!</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除指定索引处的字符</span></span><br><span class="line">welcome.removeAtIndex(welcome.endIndex.predecessor())<span class="comment">// hello there!</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除子串</span></span><br><span class="line"><span class="keyword">let</span> range = welcome.endIndex.advancedBy(-<span class="number">6</span>)..&lt;welcome.endIndex<span class="comment">// 5..&lt;11</span></span><br><span class="line">welcome.removeRange(range)<span class="comment">// hello</span></span><br></pre></td></tr></table></figure>
<p>##3.11    比较字符串</p>
<p>###3.11.1    字符串/字符相等</p>
<blockquote>
<p><strong>说明：</strong>使用<code>!=</code>和<code>==</code></p>
<ul>
<li>如果两个字符串（或字符）的可扩展字形群集是标准相等（Unicode标量不同，语言外观相同）的，那就认为它们是相等的</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 比较普通两个字符串</span></span><br><span class="line"><span class="keyword">let</span> quotation = <span class="string">"we're a lot alike, you and I."</span></span><br><span class="line"><span class="keyword">let</span> sameQuotation = <span class="string">"we're a lot alike, you and I."</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> quotation == sameQuotation &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"There two strings are considered equal"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 比较两个Unicode标量不同但外观相同的字符串</span></span><br><span class="line"><span class="keyword">let</span> eAcuteQuestion = <span class="string">"Voulez-vous un caf\u&#123;E9&#125;?"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> combinedEAcuteQuestion = <span class="string">"Voulez-vous uncaf\u&#123;65&#125;\u&#123;301&#125;?"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> eAcuteQuestion == combinedEAcuteQuestion &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"These twostrings are considered equal"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>###33.11.2        前缀/后缀相等</p>
<p>####hasPrefix函数</p>
<blockquote>
<p><strong>说明：</strong>判断字符串是否包含某种前缀。<br><strong>原型：</strong><code>String类型的实例方法</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @param &#123;String&#125; prefix 前缀</span><br><span class="line">&gt;* @return &#123;Boolean&#125; true : 包含前缀；false : 不包含前缀</span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">func</span> <span class="title">hasPrefix</span><span class="params">(<span class="keyword">prefix</span>: String)</span></span> -&gt; <span class="type">Boolean</span></span><br></pre></td></tr></table></figure>
<p>####hasSuffix函数</p>
<blockquote>
<p><strong>说明：</strong>判断字符串是否包含某种后缀。<br><strong>原型：</strong><code>String类型的实例方法</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @param &#123;String&#125; suffix 前缀</span><br><span class="line">&gt;* @return &#123;Boolean&#125; true : 包含后缀；false : 不包含后缀</span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">func</span> <span class="title">hasSuffix</span><span class="params">(<span class="keyword">prefix</span>: String)</span></span> -&gt; <span class="type">Boolean</span></span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 场景位置</span></span><br><span class="line"><span class="keyword">let</span> romeoAndJuliet = [</span><br><span class="line">    <span class="string">"Act 1 Scene 1: Verona, A public place"</span>,</span><br><span class="line">    <span class="string">"Act 1 Scene 2: Capulet's mansion"</span>,</span><br><span class="line">    <span class="string">"Act 1 Scene 3: A room in Capulet's room"</span>,</span><br><span class="line">    <span class="string">"Act 2 Scene 1: Outside Capulet's mansion"</span>,</span><br><span class="line">    <span class="string">"Act 2 Scene 2: Capulet's orchard"</span>,</span><br><span class="line">    <span class="string">"Act 2 Scene 3: Ouside Friar Lawrence's cell"</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> act1SceneCount = <span class="number">0</span><span class="comment">// 场景一数量</span></span><br><span class="line"><span class="comment">// 根据前缀删选数据项</span></span><br><span class="line"><span class="keyword">for</span> scene <span class="keyword">in</span> romeoAndJuliet &#123;</span><br><span class="line">    <span class="keyword">if</span> scene.hasPrefix(<span class="string">"Act 1 "</span>) &#123;</span><br><span class="line">        ++act1SceneCount</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"There are \(act1SceneCount) scenes in Act 1"</span>)</span><br></pre></td></tr></table></figure>
<p>##3.12    字符串的Unicode表示形式</p>
<blockquote>
<p><strong>编码方式和字符集：</strong>事实上，计算机存储任何数据（包括文本文件）都是以<code>二进制方式</code>存储的，但字符如何对应到二进制数据，或者说二进制数据如何解读成字符是由<code>编码方式</code>和<code>字符集</code>决定的。每种<code>字符集</code>都对应一种或多种<code>编码方式</code>。<br><strong>说明：</strong>当字符串被保存到文本文件时，会按照某种编码方式存储。而Unicode标量对应的编码方式包括以下三种。</p>
</blockquote>
<table>
<thead>
<tr>
<th>Unicode字符集对应的编码方式</th>
<th>代码单元大小（bit）</th>
<th>对应的String的成员属性</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>UTF-8</strong></td>
<td>8</td>
<td>utf8</td>
</tr>
<tr>
<td><strong>UTF-16</strong></td>
<td>16</td>
<td>utf16</td>
</tr>
<tr>
<td><strong>UTF-32(Unicode标量集合)</strong></td>
<td>32</td>
<td>unicodeScalars</td>
</tr>
</tbody>
</table>
<p>###举个例子：<code>Dog‼🐶</code></p>
<table>
<thead>
<tr>
<th>code unit(十进制)</th>
<th>D</th>
<th>o</th>
<th>g</th>
<th>!!</th>
<th>🐶</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>UTF-8编码</strong></td>
<td>68</td>
<td>111</td>
<td>103</td>
<td>226 128 188</td>
<td>240 159 144 182</td>
</tr>
<tr>
<td><strong>UTF-16编码</strong></td>
<td>68</td>
<td>111</td>
<td>103</td>
<td>8252</td>
<td>55357 56374</td>
</tr>
<tr>
<td><strong>UTF-32(Unicode标量)</strong></td>
<td>68</td>
<td>111</td>
<td>103</td>
<td>8252</td>
<td>128054</td>
</tr>
</tbody>
</table>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/13/TSPL2_02  基本运算符/" itemprop="url">
                  2 基本运算符
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-13T19:32:24+08:00" content="2016-05-13">
              2016-05-13
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/13/TSPL2_02  基本运算符/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/13/TSPL2_02  基本运算符/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <table>
<thead>
<tr>
<th>基本运算</th>
<th>正负</th>
<th>自加/减</th>
<th>自返运算</th>
</tr>
</thead>
<tbody>
<tr>
<td>a+b</td>
<td>+a</td>
<td>a++/++a</td>
<td>a+=b</td>
</tr>
<tr>
<td>a-b</td>
<td>-b</td>
<td><code>b--/--b</code></td>
<td>a-=b</td>
</tr>
<tr>
<td>a*b</td>
<td></td>
<td></td>
<td>a*=b</td>
</tr>
<tr>
<td>a/b</td>
<td></td>
<td></td>
<td>a/=b</td>
</tr>
<tr>
<td>a%b</td>
<td></td>
<td></td>
<td>a%=b</td>
</tr>
</tbody>
</table>
<p>[toc]</p>
<h2 id="2-1-术语"><a href="#2-1-术语" class="headerlink" title="2.1    术语"></a>2.1    术语</h2><ul>
<li>运算符</li>
</ul>
<table>
<thead>
<tr>
<th>按照操作数数量分类</th>
<th>说明</th>
<th>举例</th>
</tr>
</thead>
<tbody>
<tr>
<td>一元运算符</td>
<td>分为前值运算符和后值运算符</td>
<td><code>!</code>、<code>++</code>、<code>--</code>等</td>
</tr>
<tr>
<td>二元运算符</td>
<td>在两个操作数之间</td>
<td>大部分运算符都属于二元运算符</td>
</tr>
<tr>
<td>三元运算符</td>
<td>和C语言一样只有一个三目运算符</td>
<td><code>a ? b : c</code></td>
</tr>
</tbody>
</table>
<ul>
<li>操作数：受运算影响的值叫做操作数</li>
</ul>
<h2 id="2-2-赋值运算符"><a href="#2-2-赋值运算符" class="headerlink" title="2.2    赋值运算符"></a>2.2    赋值运算符</h2><blockquote>
<p><strong>说明：</strong>用来跟新或初始化变量或常量。</p>
<ul>
<li>右边如果是元组，会被分解成多个常量或变量</li>
<li>不返回值（不同于c和o-c）</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> (x, y) = (<span class="number">1</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<h2 id="2-3-算术运算符"><a href="#2-3-算术运算符" class="headerlink" title="2.3    算术运算符"></a>2.3    算术运算符</h2><h3 id="2-3-1-四则运算"><a href="#2-3-1-四则运算" class="headerlink" title="2.3.1    四则运算"></a>2.3.1    四则运算</h3><blockquote>
<p><strong>说明：</strong>其中<code>+</code>允许操作数为字符串，此时不再是四则运算中的加法运算，而是用来拼接字符串。</p>
</blockquote>
<table>
<thead>
<tr>
<th>四则运算符</th>
<th>说明</th>
<th>操作数类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>+</td>
<td>加法或连接符</td>
<td>数值类型或字符串</td>
</tr>
<tr>
<td>-</td>
<td>减法</td>
<td>数值类型</td>
</tr>
<tr>
<td>*</td>
<td>乘法</td>
<td>数值类型</td>
</tr>
<tr>
<td>/</td>
<td>除法</td>
<td>数值类型（两个操作数都是整数则结果取整(<code>Int</code>)，否则为<code>Double</code>）</td>
</tr>
</tbody>
</table>
<h3 id="2-3-2-求余运算符"><a href="#2-3-2-求余运算符" class="headerlink" title="2.3.2    求余运算符"></a>2.3.2    求余运算符</h3><blockquote>
<p><strong>说明：</strong>在其它语言中也叫做取膜运算。<br><strong>规则：</strong><code>余数 = a % b</code>，其中<code>a = (|b| x 倍数) + 余数</code></p>
<ul>
<li><code>b</code>的符号将会被忽略，也就是说 <code>a % b</code>和<code>a % -b</code>相同</li>
</ul>
</blockquote>
<h3 id="2-3-3-浮点数求余运算"><a href="#2-3-3-浮点数求余运算" class="headerlink" title="2.3.3    浮点数求余运算"></a>2.3.3    浮点数求余运算</h3><blockquote>
<p><strong>说明：</strong>不同于<code>c</code>和<code>o-c</code>，<code>Swift</code>中可以对浮点数进行求余。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">8</span> % <span class="number">2.5</span><span class="comment">// 0.5</span></span><br></pre></td></tr></table></figure>
<h3 id="2-3-4-自增和自减运算"><a href="#2-3-4-自增和自减运算" class="headerlink" title="2.3.4    自增和自减运算"></a>2.3.4    自增和自减运算</h3><blockquote>
<p><strong>操作对象：</strong>整型和浮点型<br><strong>技巧：</strong>先修改后返回更符合我们的逻辑，因此除非需要<code>i++（i--）</code>的特性，否则推荐使用<code>++i(--i)</code></p>
</blockquote>
<table>
<thead>
<tr>
<th>相对操作数的位置</th>
<th>自增</th>
<th>自减</th>
<th>返回值</th>
</tr>
</thead>
<tbody>
<tr>
<td>前置</td>
<td><code>++i</code></td>
<td><code>--i</code></td>
<td>先自增，后返回</td>
</tr>
<tr>
<td>后置</td>
<td><code>i++</code></td>
<td><code>i++</code></td>
<td>先返回，后自增</td>
</tr>
</tbody>
</table>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">0</span></span><br><span class="line"><span class="keyword">let</span> b = ++a<span class="comment">// a 1, b 1</span></span><br><span class="line"><span class="keyword">let</span> <span class="built_in">c</span> = a++<span class="comment">// a 2, c 1</span></span><br></pre></td></tr></table></figure>
<h3 id="2-3-5-一元负号运算符"><a href="#2-3-5-一元负号运算符" class="headerlink" title="2.3.5    一元负号运算符"></a>2.3.5    一元负号运算符</h3><blockquote>
<p><strong>符号：</strong><code>-</code><br><strong>说明：</strong>写在操作数之前，中间没有空格</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> three = <span class="number">3</span></span><br><span class="line"><span class="keyword">let</span> minusThree = -three</span><br><span class="line"><span class="keyword">let</span> plusThree = -minusThree</span><br></pre></td></tr></table></figure>
<h3 id="2-3-6-一元正号运算符"><a href="#2-3-6-一元正号运算符" class="headerlink" title="2.3.6    一元正号运算符"></a>2.3.6    一元正号运算符</h3><blockquote>
<p><strong>说明：</strong>不做任何改变地返回操作数的值<br><strong>用途：</strong>和负数一起使用时为整数添加<code>+</code>符号使代码看起来更加对称。</p>
</blockquote>
<h2 id="2-4-复合赋值"><a href="#2-4-复合赋值" class="headerlink" title="2.4    复合赋值"></a>2.4    复合赋值</h2><table>
<thead>
<tr>
<th>自返运算(复合赋值)</th>
</tr>
</thead>
<tbody>
<tr>
<td>a+=2</td>
</tr>
<tr>
<td>a-=2</td>
</tr>
<tr>
<td>a*=2</td>
</tr>
<tr>
<td>a/=2</td>
</tr>
<tr>
<td>a%=2</td>
</tr>
</tbody>
</table>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line">a += <span class="number">2</span><span class="comment">// a 3</span></span><br></pre></td></tr></table></figure>
<h2 id="2-5-比较运算符"><a href="#2-5-比较运算符" class="headerlink" title="2.5    比较运算符"></a>2.5    比较运算符</h2><blockquote>
<p><strong>应用：</strong>多用于<code>if</code>语句</p>
</blockquote>
<table>
<thead>
<tr>
<th>运算符</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>a == b</td>
<td>等于</td>
</tr>
<tr>
<td>a != b</td>
<td>不等于</td>
</tr>
<tr>
<td>a &gt; b</td>
<td>大于</td>
</tr>
<tr>
<td>a &lt; b</td>
<td>小于</td>
</tr>
<tr>
<td>a === b</td>
<td>两个引用指向同一个对象实例</td>
</tr>
<tr>
<td>a !== b</td>
<td>两个引用不指向同一个对象实例</td>
</tr>
</tbody>
</table>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">"word"</span></span><br><span class="line"><span class="keyword">if</span> name == <span class="string">"wword"</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"hello world"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"I'm sorry \(name), but I don't recognize you"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-6-三目运算符"><a href="#2-6-三目运算符" class="headerlink" title="2.6    三目运算符"></a>2.6    三目运算符</h2><blockquote>
<p><strong>语法：</strong><code>问题 ? 答案1 : 答案2</code><br><strong>技巧：</strong>过度使用三目运算符会使简洁的代码变得难懂。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> contentHeight = <span class="number">40</span></span><br><span class="line"><span class="keyword">let</span> hasHeader = <span class="literal">true</span></span><br><span class="line"><span class="keyword">let</span> rowHeight = contentHeight + (hasHeader ? <span class="number">50</span> : <span class="number">20</span>)</span><br></pre></td></tr></table></figure>
<h2 id="2-7-空合运算符"><a href="#2-7-空合运算符" class="headerlink" title="2.7    空合运算符"></a>2.7    空合运算符</h2><blockquote>
<p><strong>语法：</strong><code>a ?? b</code><br><strong>说明：</strong>对可选类型<code>a</code>进行空判断，如果<code>a</code>包含一个值就进行解封，否则就返回一个默认值<code>b</code>。</p>
<ul>
<li><code>a ?? b</code>等价于<code>a != nil ? a! : b</code></li>
<li>表达式<code>a</code>必须是<code>Optional</code>类型</li>
<li>默认值<code>b</code>的类型必须要和<code>a</code>存储的类型保持一致</li>
<li>短路求值：如果<code>a</code>不是<code>nil</code>，则<code>b</code>不会被估值</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> defaultColorName = <span class="string">"red"</span></span><br><span class="line"><span class="keyword">var</span> userDefinedColorName: <span class="type">String</span>?<span class="comment">// nil</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> colorNameToUse = userDefinedColorName ?? defaultColorName<span class="comment">// red</span></span><br></pre></td></tr></table></figure>
<h2 id="2-8-区间运算符"><a href="#2-8-区间运算符" class="headerlink" title="2.8    区间运算符"></a>2.8    区间运算符</h2><blockquote>
<p><strong>说明：</strong>分两种</p>
<ul>
<li>闭区间运算符（<code>a...b</code>）：包含a和b</li>
<li>半开区间运算符（<code>a..&lt;b</code>）：包含a不包含b</li>
</ul>
<p><strong>应用：</strong>在迭代一个区间的所有值时非常有用，比如在<code>for-in</code>循环中。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> names = [<span class="string">"Anna"</span>, <span class="string">"Alex"</span>, <span class="string">"Brain"</span>, <span class="string">"Jack"</span>]</span><br><span class="line"><span class="keyword">let</span> <span class="built_in">count</span> = names.<span class="built_in">count</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;<span class="built_in">count</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"第 \(i + 1) 个人叫 \(names[i])"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-9-逻辑运算符"><a href="#2-9-逻辑运算符" class="headerlink" title="2.9    逻辑运算符"></a>2.9    逻辑运算符</h2><blockquote>
<p><strong>说明：</strong>一共3个</p>
</blockquote>
<table>
<thead>
<tr>
<th>逻辑运算符</th>
<th>说明</th>
<th>是否短路</th>
<th>结合性</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>!a</code></td>
<td>逻辑非</td>
<td></td>
</tr>
<tr>
<td><code>a &amp;&amp; b</code></td>
<td>逻辑与</td>
<td>是</td>
<td>左结合</td>
</tr>
<tr>
<td><code>a｜｜b</code></td>
<td>逻辑或</td>
<td>是</td>
<td>左结合</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>提高可读性：</strong></p>
<ul>
<li>多个逻辑运算符组合运算时使用括号来明确优先级</li>
<li>小心地选择布尔常量或变量</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (enteredDoorCode &amp;&amp; passedRetinaScan) || hasDoorKey || knowsOverridePassword &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Welcome!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"ACCESS DENIED"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/13/TSPL2_01  基础部分/" itemprop="url">
                  1 基础部分
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-13T19:31:53+08:00" content="2016-05-13">
              2016-05-13
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/13/TSPL2_01  基础部分/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/13/TSPL2_01  基础部分/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-1-常量和变量"><a href="#1-1-常量和变量" class="headerlink" title="1.1    常量和变量"></a>1.1    常量和变量</h2><blockquote>
<p><strong>描述：</strong>常量和变量把一个名字和一个指定类型的值关良起来。<br><strong>说明：</strong>两者的区别在于设定后是否还能修改</p>
<ul>
<li>常量：设定后不可能修改</li>
<li>变量：可以随意更改</li>
</ul>
</blockquote>
<h3 id="1-1-1-声明常量和变量"><a href="#1-1-1-声明常量和变量" class="headerlink" title="1.1.1    声明常量和变量"></a>1.1.1    声明常量和变量</h3><blockquote>
<p><strong>共同规则：</strong></p>
<ul>
<li>可以在一行中声明多个，用<code>,</code>分隔</li>
</ul>
<p><strong>关键字：</strong></p>
<ul>
<li><code>let</code>：常量</li>
<li><code>var</code>：变量</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 常量声明</span></span><br><span class="line"><span class="keyword">let</span> maximunNumberOfLoginAttemts = <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 变量声明</span></span><br><span class="line"><span class="keyword">var</span> currentLoginAttempts = <span class="number">0</span></span><br><span class="line"><span class="keyword">var</span> x = <span class="number">0.0</span>, y = <span class="number">0.0</span>, z = <span class="number">0.0</span></span><br></pre></td></tr></table></figure>
<h3 id="1-1-2-类型标注"><a href="#1-1-2-类型标注" class="headerlink" title="1.1.2    类型标注"></a>1.1.2    类型标注</h3><blockquote>
<p><strong>用途：</strong>说明常量或者变量中要存储的值的类型<br><strong>注意：</strong></p>
<ul>
<li>如果没有类型标注，声明时都必须设置一个值作为初始值，否则报错</li>
<li>类型标注可以省略，此时Swift可以通过赋的初始值推断其类型</li>
</ul>
<p><strong>语法：</strong><code>var welcomeMessage: String</code></p>
</blockquote>
<table>
<thead>
<tr>
<th>var</th>
<th>welcomeMessage:</th>
<th></th>
<th>String</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>let(var)</code></td>
<td>常量(变量)名</td>
<td><code>:</code></td>
<td><code>空格</code></td>
<td>类型名称</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>说明：</strong>可以在一行中定义多个同样类型的变量，<code>,</code>分隔，并在最后一个比变量名之后添加<code>类型标注</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明</span></span><br><span class="line"><span class="keyword">var</span> welcomeMessage: <span class="type">String</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 赋值</span></span><br><span class="line">welcomeMessage = <span class="string">"Hello"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明多个具有相同类型标注的变量的略写方式</span></span><br><span class="line"><span class="keyword">var</span> red, green, blue:<span class="type">Double</span></span><br></pre></td></tr></table></figure>
<h3 id="1-1-3-常量和变量的命名"><a href="#1-1-3-常量和变量的命名" class="headerlink" title="1.1.3    常量和变量的命名"></a>1.1.3    常量和变量的命名</h3><blockquote>
<p><strong>说明：</strong>声明完成后，一些特性将不能再次修改</p>
<ul>
<li>已经声明的名字不能再次用来声明</li>
<li>声明时确定的类型不能更改</li>
<li>常量与变量不能相互转换</li>
</ul>
</blockquote>
<table>
<thead>
<tr>
<th>不允许的字符</th>
</tr>
</thead>
<tbody>
<tr>
<td>数学符号</td>
</tr>
<tr>
<td>箭头</td>
</tr>
<tr>
<td>保留的（非法的）<code>Univode</code>码位</td>
</tr>
<tr>
<td>连线</td>
</tr>
<tr>
<td>制表符</td>
</tr>
<tr>
<td>数字（仅开头不能使用）</td>
</tr>
</tbody>
</table>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 常量和变量的命名</span></span><br><span class="line"><span class="keyword">let</span> π = <span class="number">3.141592654</span></span><br><span class="line"><span class="keyword">let</span> 你好 = <span class="string">"Hello"</span></span><br><span class="line"><span class="keyword">let</span> ？？ = <span class="string">"dog"</span><span class="comment">// 中文全角的</span></span><br></pre></td></tr></table></figure>
<h3 id="1-1-4-输出常量和变量"><a href="#1-1-4-输出常量和变量" class="headerlink" title="1.1.4    输出常量和变量"></a>1.1.4    输出常量和变量</h3><h4 id="print函数"><a href="#print函数" class="headerlink" title="print函数"></a>print函数</h4><blockquote>
<p><strong>描述：</strong>一个用来输出一个或多个值到适当输出区的全局函数。<br><strong>说明：</strong>可以直接通过<code>\(表达式)</code>的方式在字符串中插值（<code>String interprolation</code>）<br><strong>原型：</strong><code>全局函数</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @param &#123;Any...&#125; items 可变个任意类型的参数</span><br><span class="line">&gt;* @param &#123;String=&#125; separator 连接符（默认为空格，可省略）</span><br><span class="line">&gt;* @param &#123;String=&#125; terminator 自动追加再末尾的字串（默认为换行符，可省略）</span><br><span class="line">&gt;* @param &#123;&amp;Target=&#125; toStream 输出流（默认为标准输出流，可省略）</span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;void <span class="built_in">print</span>(items: <span class="type">Any</span>..., separator: <span class="type">String</span>, terminator: <span class="type">String</span>, toStream: &amp;<span class="type">Target</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str1 = <span class="string">"hello"</span></span><br><span class="line"><span class="keyword">var</span> str2 = <span class="string">"world"</span></span><br><span class="line"><span class="comment">// hello,world!</span></span><br><span class="line"><span class="built_in">print</span>(str1, str2, separator:<span class="string">","</span>, terminator:<span class="string">"!"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// hello world\n</span></span><br><span class="line"><span class="built_in">print</span>(str1, str2)</span><br></pre></td></tr></table></figure>
<h2 id="1-2-注释"><a href="#1-2-注释" class="headerlink" title="1.2    注释"></a>1.2    注释</h2><blockquote>
<p><strong>说明：</strong>和C语言的注释非常相似</p>
<ul>
<li>单行注释：<code>// 这是一个注释</code></li>
<li>多行注释：<code>/* 多行注释 */</code></li>
</ul>
<p><strong>注意：</strong>和C语言不同的是，swift支持前套的多行注释。便于在原先多行注释的基础上扩大注释范围。</p>
</blockquote>
<h2 id="1-3-分号"><a href="#1-3-分号" class="headerlink" title="1.3    分号"></a>1.3    分号</h2><blockquote>
<p><strong>说明：</strong>和大部分语句有所不同</p>
<ul>
<li>单独占一行的语句的结尾处的分号可以省略</li>
<li>一行代码存在多个语句，则语句之间的<code>;</code>不能省略</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> cat = <span class="string">"?"</span>; <span class="built_in">print</span>(cat)</span><br></pre></td></tr></table></figure>
<h2 id="1-3-整数"><a href="#1-3-整数" class="headerlink" title="1.3    整数"></a>1.3    整数</h2><blockquote>
<p><strong>说明：</strong>一共有<code>10</code>种整数类型（<code>(U)Int(4种宽度)</code>）<br><strong>注意：</strong>其中8种类型是指定的宽度的，<code>Int</code>和<code>UInt</code>类型比较特殊，其宽度依赖于处理器架构。</p>
</blockquote>
<table>
<thead>
<tr>
<th>长度(bit)</th>
<th>有符号</th>
<th>无符号</th>
</tr>
</thead>
<tbody>
<tr>
<td>8</td>
<td>Int8</td>
<td>UInt8</td>
</tr>
<tr>
<td>16</td>
<td>Int16</td>
<td>UInt16</td>
</tr>
<tr>
<td>32</td>
<td>Int32</td>
<td>UInt32</td>
</tr>
<tr>
<td>64</td>
<td>Int64</td>
<td>UInt64</td>
</tr>
<tr>
<td>依赖平台</td>
<td>Int</td>
<td>UInt</td>
</tr>
</tbody>
</table>
<h3 id="1-3-1-整数范围"><a href="#1-3-1-整数范围" class="headerlink" title="1.3.1    整数范围"></a>1.3.1    整数范围</h3><blockquote>
<p><strong>说明：</strong>可以通过<code>mix</code>和<code>max</code>属性获得相应类型的最大值和最小值。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> minValue = <span class="type">UInt8</span>.<span class="built_in">min</span><span class="comment">// 0</span></span><br><span class="line"><span class="keyword">let</span> maxValue = <span class="type">UInt8</span>.<span class="built_in">max</span><span class="comment">// 255</span></span><br></pre></td></tr></table></figure>
<h3 id="1-3-2-Int"><a href="#1-3-2-Int" class="headerlink" title="1.3.2    Int"></a>1.3.2    Int</h3><blockquote>
<p><strong>技巧：</strong>大多数时候使用<code>Int</code>类型</p>
<ul>
<li>可以提高代码的一致性和可复用性</li>
<li>即使在32位机器上，也足够大了（<code>-2,147,483,648~2,147,483,647</code>）</li>
</ul>
</blockquote>
<h3 id="1-3-3-UInt"><a href="#1-3-3-UInt" class="headerlink" title="1.3.3    UInt"></a>1.3.3    UInt</h3><blockquote>
<p><strong>技巧：</strong>尽可能使用<code>Int</code>而不是<code>UInt</code>，即使已知值是非负的</p>
<ul>
<li>一致型和可复用性</li>
<li>避免不同类型数字之间的转换(默认的对整数类型的表达式的推断类型为<code>Int</code>)</li>
</ul>
</blockquote>
<h2 id="1-4-浮点数"><a href="#1-4-浮点数" class="headerlink" title="1.4    浮点数"></a>1.4    浮点数</h2><blockquote>
<p><strong>定义：</strong>有小数部分的数字<br><strong>说明：</strong>有两种有符号浮点数类型</p>
</blockquote>
<table>
<thead>
<tr>
<th>浮点类型</th>
<th>解释</th>
<th>最大精度（整数部分和小数部分数字位数之和）</th>
<th>适用</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Double</td>
<td>64位浮点数</td>
<td>7</td>
<td>需要存储很大或很高精度的浮点数时</td>
</tr>
<tr>
<td>Float</td>
<td>32位浮点数</td>
<td>16</td>
<td>精度要求不高时</td>
</tr>
</tbody>
</table>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> f:<span class="type">Float</span> = <span class="number">0.123456789</span><span class="comment">// 0.1234568</span></span><br><span class="line"><span class="keyword">var</span> d:<span class="type">Double</span> = <span class="number">0.12345678901234567</span><span class="comment">// 0.1234567890123457</span></span><br></pre></td></tr></table></figure>
<h2 id="1-5-类型安全和类型推断"><a href="#1-5-类型安全和类型推断" class="headerlink" title="1.5    类型安全和类型推断"></a>1.5    类型安全和类型推断</h2><blockquote>
<p><strong>说明：</strong></p>
<ul>
<li><strong>类型安全：</strong>编译器会在编译阶段进行类型检查，并把不匹配的类型标记为错误</li>
<li><strong>类型推断：</strong>如果在声明阶段没有显示指定类型，编译器回通过赋的值自动推断出表达式的类型</li>
</ul>
<p><strong>注意：</strong></p>
<ul>
<li>当推断浮点数的类型时，Swift 总是会选择<code>Double</code>而不是<code>Float</code></li>
<li>如果表达式中同时出现整数和浮点数，则计算结果被推断为<code>Double</code></li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// meaningOfLife 会被推测为 Int 类型</span></span><br><span class="line"><span class="keyword">let</span> meaningOfLife = <span class="number">42</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// pi 会被推测为 Double 类型</span></span><br><span class="line"><span class="keyword">let</span> pi = <span class="number">3.14159</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 表达式种出现了一个浮点字面量，所以表达式被推断为 Double 类型</span></span><br><span class="line"><span class="keyword">let</span> anotherPi = <span class="number">3</span> + <span class="number">0.14159</span></span><br></pre></td></tr></table></figure>
<h2 id="1-6-数值型字面量"><a href="#1-6-数值型字面量" class="headerlink" title="1.6    数值型字面量"></a>1.6    数值型字面量</h2><h3 id="整数字面量"><a href="#整数字面量" class="headerlink" title="整数字面量"></a>整数字面量</h3><blockquote>
<p><strong>说明：</strong>根据进制划分有<code>4</code>种</p>
</blockquote>
<table>
<thead>
<tr>
<th>进制</th>
<th>前缀</th>
</tr>
</thead>
<tbody>
<tr>
<td>十进制</td>
<td>无</td>
</tr>
<tr>
<td>二进制</td>
<td><code>0b</code></td>
</tr>
<tr>
<td>八进制</td>
<td><code>0o</code></td>
</tr>
<tr>
<td>十六进制</td>
<td><code>0x</code></td>
</tr>
</tbody>
</table>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 17</span></span><br><span class="line"><span class="keyword">let</span> decimalInteger = <span class="number">17</span><span class="comment">// 十进制</span></span><br><span class="line"><span class="keyword">let</span> binaryInter = <span class="number">0b10001</span><span class="comment">// 二进制</span></span><br><span class="line"><span class="keyword">let</span> octalInteger = <span class="number">0o21</span><span class="comment">// 八进制</span></span><br><span class="line"><span class="keyword">let</span> hexadecimalInteger = <span class="number">0x11</span><span class="comment">// 十六进制</span></span><br></pre></td></tr></table></figure>
<h3 id="浮点数字面量"><a href="#浮点数字面量" class="headerlink" title="浮点数字面量"></a>浮点数字面量</h3><blockquote>
<p><strong>说明：</strong>根据进制划分有<code>2</code>种</p>
</blockquote>
<table>
<thead>
<tr>
<th>进制</th>
<th>前缀</th>
<th>小数点两边</th>
<th>可选的指数</th>
</tr>
</thead>
<tbody>
<tr>
<td>十进制</td>
<td>无</td>
<td>至少有一个十进制数</td>
<td><code>(E)e</code>， 基数为10</td>
</tr>
<tr>
<td>十六进制</td>
<td><code>0x</code></td>
<td>至少有一个十六进制数</td>
<td><code>(P)p</code></td>
<td>基数为2</td>
</tr>
</tbody>
</table>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 10进制</span></span><br><span class="line"><span class="keyword">let</span> a = <span class="number">1.25e2</span><span class="comment">// 1.25 x 10^2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 16进制</span></span><br><span class="line"><span class="keyword">let</span> b = 0xFp-<span class="number">2</span><span class="comment">// 15 x 2^-2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 12.1875</span></span><br><span class="line"><span class="keyword">let</span> decimalDouble = <span class="number">12.1875</span></span><br><span class="line"><span class="keyword">let</span> exponentDouble = <span class="number">1.21876e1</span></span><br><span class="line"><span class="keyword">let</span> hexadecimalDouble = <span class="number">0xC.3p0</span></span><br></pre></td></tr></table></figure>
<h3 id="增强可读性"><a href="#增强可读性" class="headerlink" title="增强可读性"></a>增强可读性</h3><blockquote>
<p><strong>说明：</strong>整数和浮点数都可以添加额外的零并且包含下划线来增强可读性</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 额外的零</span></span><br><span class="line"><span class="keyword">let</span> paddedDouble = <span class="number">000123.456</span></span><br><span class="line"><span class="comment">// 额外的下划线</span></span><br><span class="line"><span class="keyword">let</span> oneMillon = <span class="number">1_000_000</span></span><br><span class="line"><span class="keyword">let</span> justOverOneMillion = <span class="number">1_000_000.000_000_1</span></span><br></pre></td></tr></table></figure>
<h2 id="1-7-数值型类型转换"><a href="#1-7-数值型类型转换" class="headerlink" title="1.7    数值型类型转换"></a>1.7    数值型类型转换</h2><blockquote>
<p><strong>使用<code>Int</code>：</strong>即使代码中的整数常量或变量已知非负，也尽量使用<code>Int</code></p>
<ul>
<li>保证整数变量或常量可以直接被复用</li>
<li>可以匹配整数类字面量的类型推断（整数字面量只会被推断为<code>Int</code>，赋值给其它类型的整数需要类型转换）</li>
</ul>
<p><strong>使用其它整数类型：</strong></p>
<ul>
<li>处理外部的长度明确的数据时，为了优化性能、内存占用等</li>
<li>可以及时发现溢出</li>
<li>可以暗示正在处理特殊数据</li>
</ul>
</blockquote>
<h3 id="1-7-1-整数转换"><a href="#1-7-1-整数转换" class="headerlink" title="1.7.1    整数转换"></a>1.7.1    整数转换</h3><h4 id="1-7-1-1-必要性"><a href="#1-7-1-1-必要性" class="headerlink" title="1.7.1.1    必要性"></a>1.7.1.1    必要性</h4><blockquote>
<ul>
<li>如果数字超过了常量或变量可存储的范围，编译的时候会报错</li>
<li>两种类型（<code>Int</code>除外）的整数不能直接相加</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 会报错，因为 UInt8 不能存储负数</span></span><br><span class="line"><span class="keyword">let</span> cannotBeNegative:<span class="type">UInt8</span> = -<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 会报错，因为超过了最大值</span></span><br><span class="line"><span class="keyword">let</span> tooBig:<span class="type">Int8</span> = <span class="type">Int8</span>.<span class="built_in">max</span> + <span class="number">1</span></span><br></pre></td></tr></table></figure>
<h4 id="1-7-1-2-使用类型对应的构造器进行转换"><a href="#1-7-1-2-使用类型对应的构造器进行转换" class="headerlink" title="1.7.1.2    使用类型对应的构造器进行转换"></a>1.7.1.2    使用类型对应的构造器进行转换</h4><blockquote>
<p><strong>注意：</strong>不能传入任意类型的值给构造器，只能是有对应构造器的值<br><strong>扩展：</strong>可以通过扩展现有的类型让它可以接受其它类型的值</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> twoThousand: <span class="type">UInt16</span> = <span class="number">2_000</span></span><br><span class="line"><span class="keyword">let</span> one: <span class="type">UInt8</span> = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 将 one 由 UInt8 转换为 UInt16，最终 twoThousandAndOne 被推断为 UInt16</span></span><br><span class="line"><span class="keyword">let</span> twoThousandAndOne = twoThousand + <span class="type">UInt16</span>(one)</span><br></pre></td></tr></table></figure>
<h3 id="1-7-2-整数和浮点数转换"><a href="#1-7-2-整数和浮点数转换" class="headerlink" title="1.7.2    整数和浮点数转换"></a>1.7.2    整数和浮点数转换</h3><h4 id="1-7-2-1-整数-gt-浮点数"><a href="#1-7-2-1-整数-gt-浮点数" class="headerlink" title="1.7.2.1    整数-&gt;浮点数"></a>1.7.2.1    整数-&gt;浮点数</h4><blockquote>
<p><strong>说明：</strong></p>
<ul>
<li><strong>强制转换：</strong>对与所有类型的整数常量或变量，可以强制转换为<code>Double</code>或<code>Float</code></li>
<li><strong>隐式转换：</strong>声明时指定<code>Double</code>或<code>Float</code>，则用来初始化的整数字面量会被自动转换</li>
</ul>
<p><strong>注意：</strong>数值类常量或变量不同于数值类字面量，后者可以不同类型可以一起运算，因为字面量本身没有明确的类型</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 隐式转换</span></span><br><span class="line"><span class="keyword">let</span> d:<span class="type">Double</span> = <span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 强制转换</span></span><br><span class="line"><span class="keyword">let</span> three = <span class="number">3</span></span><br><span class="line"><span class="keyword">let</span> pointOneFourOneFineNine = <span class="number">0.14159</span></span><br><span class="line"><span class="keyword">let</span> pi = <span class="type">Double</span>(three) + pointOneFourOneFineNine</span><br></pre></td></tr></table></figure>
<h4 id="1-7-2-2-浮点数-gt-整数"><a href="#1-7-2-2-浮点数-gt-整数" class="headerlink" title="1.7.2.2    浮点数-&gt;整数"></a>1.7.2.2    浮点数-&gt;整数</h4><blockquote>
<p><strong>说明：</strong>声明变量或常量时指定任何一种整数类型，则用来初始化字面量只能是整数。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 强制转换</span></span><br><span class="line"><span class="keyword">let</span> pi = <span class="number">3.14</span></span><br><span class="line"><span class="keyword">let</span> integerPi = <span class="type">Int</span>(pi)</span><br></pre></td></tr></table></figure>
<h2 id="1-8-类型别名"><a href="#1-8-类型别名" class="headerlink" title="1.8    类型别名"></a>1.8    类型别名</h2><blockquote>
<p><strong>语法：</strong><code>typealias 别名 = 原始类型名</code><br><strong>用途：</strong>给现有类型起一个更有意义的名字。<br><strong>说明：</strong>定义了类型别名之后，可以在任何使用原始类型名的地方使用。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义类型别名</span></span><br><span class="line"><span class="keyword">typealias</span> <span class="type">AudioSample</span> = <span class="type">UInt16</span></span><br><span class="line"><span class="comment">// 调用类型别名</span></span><br><span class="line"><span class="keyword">var</span> maxAmolitudeFound = <span class="type">AudioSample</span>.<span class="built_in">min</span></span><br></pre></td></tr></table></figure>
<h2 id="1-9-布尔值"><a href="#1-9-布尔值" class="headerlink" title="1.9    布尔值"></a>1.9    布尔值</h2><blockquote>
<p><strong>类型：</strong><code>Bool</code><br><strong>字面量：</strong></p>
<ul>
<li>true</li>
<li>false</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 橙子是橙子，true</span></span><br><span class="line"><span class="keyword">let</span> orangesAreOrange = <span class="literal">true</span></span><br><span class="line"><span class="comment">// 萝卜很好吃，false</span></span><br><span class="line"><span class="keyword">let</span> turnipsAreDelicious = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> turnipsAreDelicious &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Mmm, tasty turnips"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Eww, turnips are horrible."</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="1-10-元组"><a href="#1-10-元组" class="headerlink" title="1.10    元组"></a>1.10    元组</h2><blockquote>
<p><strong>用途：</strong>元组把多个值组合成一个复合值<br><strong>说明：</strong></p>
<ul>
<li>元组内的值可以是任意类型，并不要求是相同类型。</li>
<li>可以作为函数的返回值</li>
<li>可以为元组中的每个元素命名</li>
<li>可以通过下标访问元组中的每个元素</li>
</ul>
<p><strong>语法：</strong><code>(字面量1, 字面量2, ...)</code></p>
<p><strong>限制：</strong>元组在临时组织值的时候很有用，但不适合创建复杂的数据结构。<br><strong>扩展：</strong>如果数据结构不是临时使用，请使用类或者结构体而不是元组。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明：一个类型为 (Int, String) 的元组</span></span><br><span class="line"><span class="keyword">let</span> http404Error = (<span class="number">404</span>, <span class="string">"Not found"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 分解</span></span><br><span class="line"><span class="keyword">let</span> (statusCode, statusMessage) = http404Error</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"The status code is \(statusCode)"</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"The status message is \(statusMessage)"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 分解时用_忽略</span></span><br><span class="line"><span class="keyword">let</span> (justTheStatusCode, <span class="number">_</span>) = http404Error</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过下标访问元组中的元素</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"The status code is \(http404Error.1))"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义元组时为单个元素命名</span></span><br><span class="line"><span class="keyword">let</span> http200Status = (statusCode: <span class="number">200</span>, description: <span class="string">"OK"</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"The status code is \(http200Status.statusCode)"</span>)</span><br></pre></td></tr></table></figure>
<h2 id="1-11-可选类型"><a href="#1-11-可选类型" class="headerlink" title="1.11    可选类型"></a>1.11    可选类型</h2><blockquote>
<p><strong>用途：</strong>值可能缺失的情况<br><strong>应用：</strong>任何类型</p>
</blockquote>
<h3 id="1-11-1-nil"><a href="#1-11-1-nil" class="headerlink" title="1.11.1    nil"></a>1.11.1    nil</h3><blockquote>
<p><strong>语法：</strong><code>var(let) 标识符: 类型? = 表达式</code><br><strong>相关字面量：</strong><code>nil</code></p>
<ul>
<li><code>nil</code>不能用于非可选的常量或变量</li>
<li>如果声明一个可选常量或者变量但是没有赋值，他们会自动被设置为<code>nil</code></li>
<li>任何类型的可选状态都可以被设置为<code>nil</code></li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> serverResponseCode: <span class="type">Int</span>? = <span class="number">404</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// nil是一类可选类型字面量，表示没有值</span></span><br><span class="line">serverResponseCode = <span class="literal">nil</span></span><br></pre></td></tr></table></figure>
<h3 id="1-11-2-if语句以及强制解析"><a href="#1-11-2-if语句以及强制解析" class="headerlink" title="1.11.2        if语句以及强制解析"></a>1.11.2        if语句以及强制解析</h3><blockquote>
<ol>
<li>通过判断可选型是否<code>!= nil</code>,判断可选型是否存在值</li>
<li>如果存在(否则会报错)通过<code>可选型变量或常量!</code>强制解析</li>
</ol>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> possibleNumber = <span class="string">"123"</span></span><br><span class="line"><span class="comment">// 强制类型转换返回的是一个可选型</span></span><br><span class="line"><span class="keyword">let</span> convertedNumber = <span class="type">Int</span>(possibleNumber)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过 !强制解析</span></span><br><span class="line"><span class="keyword">if</span> convertedNumber != <span class="literal">nil</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"convertedNumber has an integer value of \(convertedNumber!)"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1-11-3-可选绑定"><a href="#1-11-3-可选绑定" class="headerlink" title="1.11.3    可选绑定"></a>1.11.3    可选绑定</h3><blockquote>
<p><strong>用途：</strong>更加便捷地解包可选型值。<br><strong>限制：</strong>只能结合<code>if</code>或<code>while</code>使用<br><strong>说明：</strong>如果包含值就把值赋给一个临时<code>常量</code>或者<code>变量</code>。</p>
</blockquote>
<h4 id="绑定一个"><a href="#绑定一个" class="headerlink" title="绑定一个"></a>绑定一个</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> possibleNumber = <span class="string">"abc"</span>;</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> actualNumber = <span class="type">Int</span>(possibleNumber) &#123;</span><br><span class="line">    <span class="comment">// 如果确实包含一个值</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"\'\(possibleNumber)\' has an integer value of \(actualNumber)"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 可选值为nil</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"\'\(possibleNumber)\' could not be converted to an integer"</span>)<span class="comment">// 'abc' could not be converted to an intege</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="批量绑定"><a href="#批量绑定" class="headerlink" title="批量绑定"></a>批量绑定</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> firstNumber = <span class="type">Int</span>(<span class="string">"4"</span>), secondNumber = <span class="type">Int</span>(<span class="string">"42"</span>) <span class="keyword">where</span> firstNumber &lt; secondNumber &#123;</span><br><span class="line">    <span class="comment">// 4 &lt; 42</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"\(firstNumber) &lt; \(secondNumber)"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1-11-4-隐式解析可选类型"><a href="#1-11-4-隐式解析可选类型" class="headerlink" title="1.11.4    隐式解析可选类型"></a>1.11.4    隐式解析可选类型</h3><blockquote>
<p><strong>说明：</strong>相当于声明可选型(<code>类型?</code>)和强制解包(<code>可选型!</code>)两个过程的结合。</p>
<ul>
<li>被赋值后，值要么是解包后的值，要么是<code>nil</code></li>
<li>在可选绑定中仍然可以作为普通可选类型使用</li>
</ul>
<p><strong>限制：</strong>右边表达式的返回值必须是可选型，否则将报错。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明可选型并强制解析</span></span><br><span class="line"><span class="keyword">let</span> possibleString: <span class="type">String</span>? = <span class="string">"An optional string."</span></span><br><span class="line"><span class="keyword">let</span> forcedString: <span class="type">String</span> = possibleString!</span><br><span class="line"></span><br><span class="line"><span class="comment">// 隐式解析(一步到位)</span></span><br><span class="line"><span class="keyword">let</span> assumedString: <span class="type">String</span>! = <span class="string">"An implicitly unwrapped optional string."</span></span><br><span class="line"><span class="keyword">if</span> assumedString != <span class="literal">nil</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(assumedString)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在可选绑定中使用隐式解析可选类型</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> definiteString = assumedString &#123;</span><br><span class="line">    <span class="built_in">print</span>(definiteString)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="1-12-错误处理"><a href="#1-12-错误处理" class="headerlink" title="1.12    错误处理"></a>1.12    错误处理</h2><blockquote>
<p><strong>说明：</strong>分位两步</p>
<ol>
<li>定义函数时，使用<code>throws</code>标记可能抛出错误的函数</li>
<li>用<code>do-try-catch</code>包含函数的调用过程和错误处理方式</li>
</ol>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">makeASandwich</span><span class="params">()</span></span> <span class="keyword">throws</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">    <span class="comment">// 可能报错的函数的调用前必须加关键字 try</span></span><br><span class="line">    <span class="keyword">try</span> makeASandwich()</span><br><span class="line">    <span class="comment">// 如果没有报错则执行</span></span><br><span class="line">    eatASandwich()</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> <span class="type">Error</span>.<span class="type">OutOfCleanDishes</span> &#123;</span><br><span class="line">    <span class="comment">// 捕获错误类型1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> <span class="type">Error</span>.<span class="type">MissingIngredients</span>(<span class="keyword">let</span> ingredients) &#123;</span><br><span class="line">    <span class="comment">// 捕获错误类型2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="1-13-断言"><a href="#1-13-断言" class="headerlink" title="1.13    断言"></a>1.13    断言</h2><blockquote>
<p><strong>用途：</strong>当满足一定条件时结束代码运行通过调试来找到值缺失的原因。<br><strong>适用场景：</strong></p>
<ul>
<li>整数类型的下标索引被传入一个自定义下标脚本实现，但是下标索引值可能太小或者太大</li>
<li>需要给函数传入一个值，但是非法的值可能导致函数不能正常执行</li>
<li>一个可选值现在是<code>nil</code>，但是后面的代码运行需要一个非<code>nil</code>的值</li>
</ul>
</blockquote>
<h3 id="assert函数"><a href="#assert函数" class="headerlink" title="assert函数"></a>assert函数</h3><blockquote>
<p><strong>说明：</strong>在运行时判断一个逻辑条件是否为<code>true</code></p>
<ul>
<li>如果为<code>true</code>，代码继续运行</li>
<li>如果为<code>false</code>，代码执行结束</li>
<li>可以附加一条调试信息</li>
</ul>
<p><strong>注意：</strong>在Xcode 中使用<code>target Release</code>配置为<code>build</code>时，断言会被禁用。<br><strong>原型：</strong><code>全局</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @param &#123;Bool&#125; condition 结果为true或false的表达式</span><br><span class="line">&gt;* @param &#123;String=&#125; message 调试信息</span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;<span class="type">Void</span> <span class="built_in">assert</span>(condition: <span class="type">Bool</span>,  message: <span class="type">String</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> age = -<span class="number">3</span></span><br><span class="line"><span class="built_in">assert</span>(age &gt;= <span class="number">0</span>, <span class="string">"Aperson's age cannot be less than zero"</span>);</span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/13/TSPL2_0 简介/" itemprop="url">
                  简介
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-13T19:31:15+08:00" content="2016-05-13">
              2016-05-13
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/13/TSPL2_0 简介/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/13/TSPL2_0 简介/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="0-1-关于Swift-About-Swift"><a href="#0-1-关于Swift-About-Swift" class="headerlink" title="0.1    关于Swift(About Swift)"></a>0.1    关于Swift(About Swift)</h2><blockquote>
<p><strong>用途：</strong>编写<code>IOS</code>、<code>OS X</code>、<code>watchOS</code>应用程序<br><strong>特点归纳：</strong></p>
<ul>
<li>基于<code>Cocoa</code>和<code>Cocoa Touch</code>框架</li>
<li>自动垃圾回收（自动引用计数）</li>
<li>采用了<code>Object-C</code>的命名参数和动态对象模型，兼容<code>Object-C</code>，可以无缝对接到现有的<code>Cocoa</code>框架</li>
<li>支持<code>过程式编程</code>和<code>面向对象编程</code></li>
<li>支持代码预览（像脚本语言一样，可以实时查看结果）</li>
</ul>
</blockquote>
<h2 id="0-2-Swift初见（A-Swift-Tour）"><a href="#0-2-Swift初见（A-Swift-Tour）" class="headerlink" title="0.2    Swift初见（A Swift Tour）"></a>0.2    Swift初见（A Swift Tour）</h2><h3 id="0-2-1-简单值（Simple-Values）"><a href="#0-2-1-简单值（Simple-Values）" class="headerlink" title="0.2.1    简单值（Simple Values）"></a>0.2.1    简单值（Simple Values）</h3><h4 id="0-2-1-1-自动推断类型"><a href="#0-2-1-1-自动推断类型" class="headerlink" title="0.2.1.1    自动推断类型"></a>0.2.1.1    自动推断类型</h4><blockquote>
<p><strong>说明：</strong>声明的同时赋值的话，如果不指定类型，编译器会自动推断其类型。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 自动推断类型为integer</span></span><br><span class="line"><span class="keyword">let</span> implicitInteger = <span class="number">70</span></span><br><span class="line"><span class="comment">// 自动推断类型为double</span></span><br><span class="line"><span class="keyword">let</span> implicitDouble = <span class="number">70.0</span></span><br></pre></td></tr></table></figure>
<h4 id="0-2-1-2-指定类型"><a href="#0-2-1-2-指定类型" class="headerlink" title="0.2.1.2    指定类型"></a>0.2.1.2    指定类型</h4><blockquote>
<p><strong>说明：</strong>指定类型会导致强制类型转换</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 指定类型为double</span></span><br><span class="line"><span class="keyword">let</span> explicitDouble:<span class="type">Double</span> = <span class="number">70</span></span><br></pre></td></tr></table></figure>
<h4 id="0-2-1-3-显示转换（在表达式中）"><a href="#0-2-1-3-显示转换（在表达式中）" class="headerlink" title="0.2.1.3    显示转换（在表达式中）"></a>0.2.1.3    显示转换（在表达式中）</h4><blockquote>
<p><strong>说明：</strong>表达式中的值任何时候都不会发生隐式转化。需要转换为其它类型必须进行显示转换。<br><strong>特别：</strong><code>\(变量或表达式)</code>（转换成字符串类型）</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// string</span></span><br><span class="line"><span class="keyword">let</span> label = <span class="string">"The width is"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// integer</span></span><br><span class="line"><span class="keyword">let</span> width = <span class="number">94</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// integer显示转换为string</span></span><br><span class="line"><span class="keyword">let</span> widthLabel = label + <span class="type">String</span>(width)</span><br></pre></td></tr></table></figure>
<p><em><code>\(变量或表达式)</code></em></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> apples = <span class="number">3</span></span><br><span class="line"><span class="keyword">let</span> oranges = <span class="number">5</span></span><br><span class="line"><span class="keyword">let</span> appleSummary = <span class="string">"I have \(apples) apples."</span></span><br><span class="line"><span class="keyword">let</span> fruitSummary = <span class="string">"I have \(apples + oranges) pices of fruit."</span></span><br></pre></td></tr></table></figure>
<h4 id="0-2-1-4-数组和字典"><a href="#0-2-1-4-数组和字典" class="headerlink" title="0.2.1.4    数组和字典"></a>0.2.1.4    数组和字典</h4><p><em>声明并初始化（自动推断类型）</em></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 数组</span></span><br><span class="line"><span class="keyword">var</span> shoppingList = [<span class="string">"catfish"</span>, <span class="string">"water"</span>, <span class="string">"tulips"</span>, <span class="string">"blue paint"</span>]</span><br><span class="line">shoppingList[<span class="number">1</span>] = <span class="string">"bottle of water"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 字典</span></span><br><span class="line"><span class="keyword">var</span> occupations = [</span><br><span class="line">    <span class="string">"Malcolm"</span>: <span class="string">"Caption"</span>,</span><br><span class="line">    <span class="string">"Kaylee"</span>: <span class="string">"Mechanic"</span></span><br><span class="line">]</span><br><span class="line">occupations[<span class="string">"Jayne"</span>] = <span class="string">"Public Relations"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 清空（类型信息可以被推断出来）</span></span><br><span class="line">shoppingList = []</span><br><span class="line">occuations = [:]</span><br></pre></td></tr></table></figure>
<p><em>空数组和空字典</em></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 空数组(指定每个元素的类型)</span></span><br><span class="line"><span class="keyword">let</span> emptyArry = [<span class="type">String</span>]()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 空字典（指定键的类型和值的类型）</span></span><br><span class="line"><span class="keyword">let</span> emptyDictionary = [<span class="type">String</span>:<span class="type">Float</span>]()</span><br></pre></td></tr></table></figure>
<h3 id="0-2-2-控制流（Control-Flow）"><a href="#0-2-2-控制流（Control-Flow）" class="headerlink" title="0.2.2    控制流（Control Flow）"></a>0.2.2    控制流（Control Flow）</h3><h4 id="0-2-2-1-条件判断"><a href="#0-2-2-1-条件判断" class="headerlink" title="0.2.2.1    条件判断"></a>0.2.2.1    条件判断</h4><blockquote>
<p><strong>说明：</strong>有两类</p>
<ul>
<li>if</li>
<li>switch</li>
</ul>
<p><strong>if语法：</strong></p>
<ul>
<li>包裹条件的<code>()</code>可以省略</li>
<li>语句的<code>{}</code>不可以省略</li>
<li><code>条件</code>必须是一个<code>布尔表达式</code>（其它数据类型会报错，因为不会隐式转换）</li>
</ul>
<p><strong>switch语法：</strong></p>
<ul>
<li>支持任意类型（不仅仅是整数）</li>
<li>支持各种比较操作（不仅仅是测试想等）</li>
<li><code>case</code>后可以有多个数据</li>
<li><code>case</code>后可以使用<code>where</code>字句</li>
<li>匹配字句后程序会退出<code>switch</code>，不需要在每个字句结尾写break</li>
<li>…<br><strong>技巧：</strong><code>if</code>和<code>let</code>组合起来使用可以来为可选值解包</li>
</ul>
</blockquote>
<p><em>if(配合let解包可选值)</em></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> optionalString:<span class="type">String</span>? = <span class="string">"Hello"</span></span><br><span class="line"><span class="built_in">print</span>(optionalString == <span class="literal">nil</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> optionalName:<span class="type">String</span>? = <span class="string">"Join Appleseed"</span></span><br><span class="line"><span class="keyword">var</span> greeting = <span class="string">"Hello"</span></span><br><span class="line"><span class="comment">// 将可选值optionalName解包后的值给name</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> name = optionalName &#123;</span><br><span class="line">    greeting = <span class="string">"Hello, \(name)"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    greeting = <span class="string">"Hello"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><em>switch</em></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> vegetable = <span class="string">"red pepper"</span></span><br><span class="line"><span class="keyword">switch</span> vegetable &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"celery"</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"Add some raisins and make ants on a log."</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"cucumber"</span>, <span class="string">"watercress"</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"That would make a good tea sandwich."</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">let</span> x <span class="keyword">where</span> x.hasSuffix(<span class="string">"pepper"</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"Is it a spicy \(x)?"</span>)</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"Everything tasts good in soup."</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="0-2-2-2-循环"><a href="#0-2-2-2-循环" class="headerlink" title="0.2.2.2    循环"></a>0.2.2.2    循环</h4><blockquote>
<p><strong>说明：</strong>有4类</p>
<ul>
<li>for-in</li>
<li>for</li>
<li>while</li>
<li>repeat-while</li>
</ul>
</blockquote>
<p><em>for-in</em></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 寻找字典中的所有数组中的最大值</span></span><br><span class="line">let interestingNumbers = [</span><br><span class="line">    <span class="string">"Prime"</span>: [<span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">11</span>, <span class="number">13</span>],</span><br><span class="line">    <span class="string">"Fibonacci"</span>: [<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">8</span>],</span><br><span class="line">    <span class="string">"Square"</span>: [<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>, <span class="number">25</span>]</span><br><span class="line">]</span><br><span class="line">var largest = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> (kind, numbers) in interestingNumbers &#123;</span><br><span class="line">    <span class="keyword">for</span> number in numbers &#123;</span><br><span class="line">        <span class="keyword">if</span> number &gt; largest &#123;</span><br><span class="line">            largest = number</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">print(largest)<span class="comment">// 25</span></span><br></pre></td></tr></table></figure>
<p><em>repeat-while</em></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> n = <span class="number">2</span></span><br><span class="line"><span class="keyword">while</span> n &lt; <span class="number">100</span> &#123;</span><br><span class="line">    n = n * <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(n)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> m = <span class="number">2</span></span><br><span class="line"><span class="keyword">repeat</span> &#123;</span><br><span class="line">    m = m * <span class="number">2</span></span><br><span class="line">&#125; <span class="keyword">while</span> m &lt; <span class="number">100</span></span><br><span class="line"><span class="built_in">print</span>(m)</span><br></pre></td></tr></table></figure>
<p><em>for</em></p>
<blockquote>
<p><strong>区间：</strong></p>
<ul>
<li>包含边界：<code>...</code></li>
<li>不包含上边界：<code>..&lt;</code></li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 区间的方式</span></span><br><span class="line"><span class="keyword">var</span> firstForLoop = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;<span class="number">4</span> &#123;</span><br><span class="line">    firstForLoop += i</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(firstForLoop)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 传统的方式</span></span><br><span class="line"><span class="keyword">var</span> secondForLoop = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> <span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; ++i &#123;</span><br><span class="line">    secondForLoop += i</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(secondForLoop)</span><br></pre></td></tr></table></figure>
<h3 id="0-2-3-函数和闭包（Functions-and-Closures）"><a href="#0-2-3-函数和闭包（Functions-and-Closures）" class="headerlink" title="0.2.3    函数和闭包（Functions and Closures）"></a>0.2.3    函数和闭包（Functions and Closures）</h3><h4 id="0-2-3-1-简单函数"><a href="#0-2-3-1-简单函数" class="headerlink" title="0.2.3.1    简单函数"></a>0.2.3.1    简单函数</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">greet</span><span class="params">(name: String, day: String)</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"Hello \(name), today is \(day)."</span></span><br><span class="line">&#125;</span><br><span class="line">greet(<span class="string">"Bob"</span>, day: <span class="string">"Tuesday"</span>)<span class="comment">// 第一个参数不用说明label</span></span><br></pre></td></tr></table></figure>
<h4 id="0-2-3-2-返回元组"><a href="#0-2-3-2-返回元组" class="headerlink" title="0.2.3.2    返回元组"></a>0.2.3.2    返回元组</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 找到元组的最大值、最小值和总和</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">calculateStatistics</span><span class="params">(scores: [Int])</span></span> -&gt; (<span class="built_in">min</span>: <span class="type">Int</span>, <span class="built_in">max</span>: <span class="type">Int</span>, sum: <span class="type">Int</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> <span class="built_in">min</span> = scores[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">var</span> <span class="built_in">max</span> = scores[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">var</span> sum = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> score <span class="keyword">in</span> scores &#123;</span><br><span class="line">        <span class="keyword">if</span> score &gt; <span class="built_in">max</span> &#123;</span><br><span class="line">            <span class="built_in">max</span> = score</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> score &lt; <span class="built_in">min</span> &#123;</span><br><span class="line">            <span class="built_in">min</span> = score</span><br><span class="line">        &#125;</span><br><span class="line">        sum += score</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (<span class="built_in">min</span>, <span class="built_in">max</span>, sum)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 调用</span></span><br><span class="line"><span class="keyword">let</span> statistics = calculateStatistics([<span class="number">5</span>, <span class="number">3</span>, <span class="number">100</span>, <span class="number">3</span>, <span class="number">9</span>])</span><br><span class="line"><span class="built_in">print</span>(statistics.sum)</span><br><span class="line"><span class="built_in">print</span>(statistics.<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<h4 id="0-2-3-3-可变参数"><a href="#0-2-3-3-可变参数" class="headerlink" title="0.2.3.3    可变参数"></a>0.2.3.3    可变参数</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 可变参数函数</span></span><br><span class="line"><span class="comment">// 计算总和</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sumOf</span><span class="params">(numbers: Int...)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> sum = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> number <span class="keyword">in</span> numbers &#123;</span><br><span class="line">        sum += number</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum</span><br><span class="line">&#125;</span><br><span class="line">sumOf()</span><br><span class="line">sumOf(<span class="number">42</span>, <span class="number">597</span>, <span class="number">12</span>)</span><br></pre></td></tr></table></figure>
<h4 id="0-2-3-4-函数嵌套"><a href="#0-2-3-4-函数嵌套" class="headerlink" title="0.2.3.4    函数嵌套"></a>0.2.3.4    函数嵌套</h4><blockquote>
<p><strong>说明：</strong>如果嵌套的函数被返回，调用返回的函数就会出现闭包的效果。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 函数嵌套</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">returnFifteen</span><span class="params">()</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> y = <span class="number">10</span></span><br><span class="line">    <span class="comment">// 函数内部的函数</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">()</span></span> &#123;</span><br><span class="line">        y += <span class="number">5</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 调用函数内部的函数</span></span><br><span class="line">    add()</span><br><span class="line">    <span class="keyword">return</span> y</span><br><span class="line">&#125;</span><br><span class="line">returnFifteen()</span><br></pre></td></tr></table></figure>
<h4 id="0-2-3-5-返回函数"><a href="#0-2-3-5-返回函数" class="headerlink" title="0.2.3.5    返回函数"></a>0.2.3.5    返回函数</h4><blockquote>
<p><strong>说明：</strong>返回的函数是闭包的一种</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 返回函数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">makeIncrementer</span><span class="params">()</span></span> -&gt; (<span class="type">Int</span> -&gt; <span class="type">Int</span>) &#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">addOne</span><span class="params">(number: Int)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span> + number</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> addOne</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> increment = makeIncrementer()</span><br><span class="line">increment(<span class="number">7</span>)</span><br></pre></td></tr></table></figure>
<h4 id="0-2-3-6-函数作为参数"><a href="#0-2-3-6-函数作为参数" class="headerlink" title="0.2.3.6    函数作为参数"></a>0.2.3.6    函数作为参数</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用函数作为参数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">hasAnyMatches</span><span class="params">(list: [Int], condition: Int -&gt; Bool)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> list &#123;</span><br><span class="line">        <span class="keyword">if</span> condition(item) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 被作为参数的函数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">lessThanThen</span><span class="params">(number: Int)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> number &lt; <span class="number">10</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用</span></span><br><span class="line"><span class="keyword">var</span> numbers = [<span class="number">20</span>, <span class="number">19</span>, <span class="number">7</span>, <span class="number">12</span>]</span><br><span class="line">hasAnyMatches(numbers, condition: lessThanThen)</span><br></pre></td></tr></table></figure>
<h4 id="0-2-3-7-匿名函数（匿名闭包）"><a href="#0-2-3-7-匿名函数（匿名闭包）" class="headerlink" title="0.2.3.7    匿名函数（匿名闭包）"></a>0.2.3.7    匿名函数（匿名闭包）</h4><blockquote>
<p><strong>说明：</strong>匿名函数写法非常自由</p>
<ul>
<li>如果一个闭包的类型已知，比如作为一个回调函数，可以忽略参数的类型和返回值</li>
<li>单个语句闭包会把它语句的值当作结果返回</li>
<li>可以通过参数位置而不是参数名引用参数</li>
<li>当一个闭包作为最后一个参数传给一个函数的时候，它可以直接跟在括号后面</li>
<li>当一个闭包是传给函数的唯一参数，可以完全忽略<code>()</code></li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 匿名闭包1（包含参数类型和返回值类型）</span></span><br><span class="line">numbers.<span class="built_in">map</span>(&#123;</span><br><span class="line">    (number:<span class="type">Int</span>) -&gt; <span class="type">Int</span> <span class="keyword">in</span></span><br><span class="line">    <span class="keyword">let</span> result = <span class="number">3</span> * number</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 匿名闭包2（可以推导出闭包的参数类型和返回值类型的话，两者都可以省略）</span></span><br><span class="line"><span class="keyword">let</span> mappedNumbers = numbers.<span class="built_in">map</span>(&#123;number <span class="keyword">in</span> <span class="number">3</span> * number&#125;)</span><br><span class="line"><span class="built_in">print</span>(mappedNumbers)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 匿名闭包3（函数体中通过参数位置而不是参数名访问参数）</span></span><br><span class="line"><span class="keyword">let</span> sortedNumbers = numbers.<span class="built_in">sort</span> &#123; $<span class="number">0</span> &gt; $<span class="number">1</span> &#125;</span><br><span class="line"><span class="built_in">print</span>(sortedNumbers)</span><br></pre></td></tr></table></figure>
<h3 id="0-2-4-对象和类（Object-and-Classes）"><a href="#0-2-4-对象和类（Object-and-Classes）" class="headerlink" title="0.2.4    对象和类（Object and Classes）"></a>0.2.4    对象和类（Object and Classes）</h3><blockquote>
<p><strong>语法：</strong></p>
<ul>
<li><code>class 类型名 {...}</code></li>
<li>使用<code>.</code>访问实例的属性和方法</li>
<li>在成员方法中使用<code>self</code>引用当前实例对象</li>
<li>使用构造函数<code>init</code>初始化类实例</li>
<li>使用析构函数<code>deinit</code>在删除对象之前做一些清理工作</li>
<li>没有标准的根类（不同于<code>java</code>）</li>
<li>子类的定义：<code>class 子类名:父类名</code></li>
<li>重写父类的方法许必须用<code>override</code>标记</li>
</ul>
</blockquote>
<p><em>简单类</em></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 形状</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 实例属性</span></span><br><span class="line">    <span class="keyword">var</span> numberOfSides = <span class="number">0</span></span><br><span class="line">    <span class="comment">// 实例方法</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">simpleDescription</span><span class="params">()</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"A shape with \(numberOfSides) sides."</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建实例</span></span><br><span class="line"><span class="keyword">var</span> shape = <span class="type">Shape</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 操作实例的成员</span></span><br><span class="line">shape.numberOfSides = <span class="number">7</span></span><br><span class="line"><span class="keyword">var</span> shapeDescription = shape.simpleDescription()</span><br></pre></td></tr></table></figure>
<p><em>构造函数和子类</em></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 带名字的形状（基类）</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NamedShape</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> numberOfSides: <span class="type">Int</span> = <span class="number">0</span></span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    <span class="comment">// 构造函数</span></span><br><span class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.name = name</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 成员方法</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">simpleDescription</span><span class="params">()</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"A shape with \(numberOfSides) sides."</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 正方形（子类）</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Square</span>: <span class="title">NamedShape</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> sideLength: <span class="type">Double</span></span><br><span class="line">    <span class="keyword">init</span>(sideLength: <span class="type">Double</span>, name: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.sideLength = sideLength</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(name: name)</span><br><span class="line">        numberOfSides = <span class="number">4</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">area</span><span class="params">()</span></span> -&gt;  <span class="type">Double</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> sideLength * sideLength</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 重写</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">simpleDescription</span><span class="params">()</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"A square with sides of length \(sideLength)."</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> test = <span class="type">Square</span>(sideLength: <span class="number">5.2</span>, name: <span class="string">"my test square"</span>)</span><br><span class="line">test.area()</span><br><span class="line">test.simpleDescription()</span><br></pre></td></tr></table></figure>
<h4 id="0-2-4-1-计算属性"><a href="#0-2-4-1-计算属性" class="headerlink" title="0.2.4.1    计算属性"></a>0.2.4.1    计算属性</h4><blockquote>
<p><strong>说明：</strong>计算属性有getter和setter</p>
<ul>
<li>get：读取属性时返回计算出的属性值</li>
<li>set：写入值时被调用，其中内置变量<code>newValue</code>存储新值</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 等腰三角形（子类）</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EquilateralTriangle</span>: <span class="title">NamedShape</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> sideLength: <span class="type">Double</span> = <span class="number">0.0</span></span><br><span class="line">    <span class="comment">// 构造函数</span></span><br><span class="line">    <span class="keyword">init</span>(sideLength: <span class="type">Double</span>, name: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.sideLength = sideLength</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(name: name)</span><br><span class="line">        numberOfSides = <span class="number">3</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 计算属性：提供get和set</span></span><br><span class="line">    <span class="keyword">var</span> perimeter: <span class="type">Double</span> &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">3.0</span> * sideLength</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">set</span> &#123;</span><br><span class="line">            sideLength = newValue / <span class="number">3.0</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 重写</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">simpleDescription</span><span class="params">()</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"An equilateral triagle with sides of length \(sideLength)."</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> triangle = <span class="type">EquilateralTriangle</span>(sideLength: <span class="number">3.1</span>, name: <span class="string">"a triangle"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 访问计算属性（get被调用）</span></span><br><span class="line"><span class="built_in">print</span>(triangle.perimeter)</span><br><span class="line"><span class="comment">// 设置计算属性（set计算属性）</span></span><br><span class="line">triangle.perimeter = <span class="number">9.9</span></span><br><span class="line"><span class="comment">// 访问存储属性</span></span><br><span class="line"><span class="built_in">print</span>(triangle.sideLength)</span><br></pre></td></tr></table></figure>
<h4 id="0-2-4-2-属性监控"><a href="#0-2-4-2-属性监控" class="headerlink" title="0.2.4.2    属性监控"></a>0.2.4.2    属性监控</h4><blockquote>
<p><strong>说明：</strong>不需要计算属性，但是仍然需要在设置一个新值之前或者之后运行代码。可以使用<code>willset</code>和<code>didSet</code>。</p>
<ul>
<li>willset：在设置之前调用</li>
<li>didSet：在设置后后调用</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 包含一个三角形实例和一个正方形实例作为成员，并确保边长相等</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TriangleAndSquare</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> triangle: <span class="type">EquilateralTriangle</span> &#123;</span><br><span class="line">        <span class="comment">// 设置新值前调用</span></span><br><span class="line">        <span class="keyword">willSet</span> &#123;</span><br><span class="line">            square.sideLength = newValue.sideLength</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> square: <span class="type">Square</span> &#123;</span><br><span class="line">        <span class="comment">// 设置新值之前调用</span></span><br><span class="line">        <span class="keyword">willSet</span> &#123;</span><br><span class="line">            triangle.sideLength = newValue.sideLength</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">init</span> (size: <span class="type">Double</span>, name: <span class="type">String</span>) &#123;</span><br><span class="line">        square = <span class="type">Square</span>(sideLength: size, name: name)</span><br><span class="line">        triangle = <span class="type">EquilateralTriangle</span>(sideLength: size, name: name)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建实例</span></span><br><span class="line"><span class="keyword">var</span> triangleAndSquare = <span class="type">TriangleAndSquare</span>(size: <span class="number">10</span>, name: <span class="string">"another test shape"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置前</span></span><br><span class="line"><span class="built_in">print</span>(triangleAndSquare.square.sideLength)</span><br><span class="line"><span class="built_in">print</span>(triangleAndSquare.triangle.sideLength)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置其中一个成员（会触发willset）</span></span><br><span class="line">triangleAndSquare.square = <span class="type">Square</span>(sideLength: <span class="number">50</span>, name: <span class="string">"larger square"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置之后</span></span><br><span class="line"><span class="built_in">print</span>(triangleAndSquare.triangle.sideLength)</span><br></pre></td></tr></table></figure>
<h4 id="0-2-4-3-实例是可选值"><a href="#0-2-4-3-实例是可选值" class="headerlink" title="0.2.4.3    实例是可选值"></a>0.2.4.3    实例是可选值</h4><blockquote>
<p><strong>说明：</strong>当实例是nil是，需要避免访问实例的成员导致报错。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明可选型</span></span><br><span class="line"><span class="keyword">let</span> optionalSquare: <span class="type">Square</span>? = <span class="type">Square</span>(sideLength: <span class="number">2.5</span>, name: <span class="string">"optional square"</span>)</span><br><span class="line"><span class="comment">// 在操作（方法调用／属性访问／子脚本访问）前加?</span></span><br><span class="line"><span class="keyword">let</span> sideLength = optionalSquare?.sideLength</span><br></pre></td></tr></table></figure>
<h3 id="0-2-5-枚举和结构体（Enumerations-and-Structures）"><a href="#0-2-5-枚举和结构体（Enumerations-and-Structures）" class="headerlink" title="0.2.5    枚举和结构体（Enumerations and Structures）"></a>0.2.5    枚举和结构体（Enumerations and Structures）</h3><h4 id="0-2-5-1-枚举"><a href="#0-2-5-1-枚举" class="headerlink" title="0.2.5.1    枚举"></a>0.2.5.1    枚举</h4><blockquote>
<p><strong>关键字：</strong><code>enum</code><br><strong>说明：</strong>swift中的所有命名类型都可以包含方法（包括枚举）。</p>
<ul>
<li>可以不设置枚举值的原始值类型</li>
<li>同一枚举类型的实例的成员（枚举值）的原始值（可以在创建实例的时候传入值）可以不同</li>
<li>如果原始值类型为<code>Int</code>，可以只设置第一个原始值，剩下的原始值会按照顺序自动完成赋值</li>
<li>也可以使用字符串或者浮点数作为枚举的原始值</li>
<li>使用<code>rawValue</code>属性来访问一个枚举成员的原始值</li>
<li>存在一个默认的初始化构造器<code>init?(rawValue:)</code>，这意味着可以通过原始值创建可选型美剧值（使用前需要解包）</li>
<li>声明枚举类型常量或在<code>switch</code>中时，当指定了枚举类型时，可以使用<code>.枚举值</code>的方式</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 扑克牌级别</span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Rank</span>: <span class="title">Int</span></span>&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Ace</span> = <span class="number">1</span></span><br><span class="line">    <span class="keyword">case</span> <span class="type">Two</span>, <span class="type">Three</span>, <span class="type">Four</span>, <span class="type">Five</span>, <span class="type">Six</span>, <span class="type">Seven</span>, <span class="type">Eight</span>, <span class="type">Nine</span>, <span class="type">Ten</span></span><br><span class="line">    <span class="keyword">case</span> <span class="type">Jack</span>, <span class="type">Queen</span>, <span class="type">King</span></span><br><span class="line">    <span class="comment">// 枚举类型可以声明方法</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">simpleDescription</span><span class="params">()</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> <span class="keyword">self</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> .<span class="type">Ace</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"ace"</span></span><br><span class="line">        <span class="keyword">case</span> .<span class="type">Jack</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"jack"</span></span><br><span class="line">        <span class="keyword">case</span> .<span class="type">Queen</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"queen"</span></span><br><span class="line">        <span class="keyword">case</span> .<span class="type">King</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"king"</span></span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="type">String</span>(<span class="keyword">self</span>.rawValue)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 枚举类型变量</span></span><br><span class="line"><span class="keyword">let</span> ace = <span class="type">Rank</span>.<span class="type">Ace</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用枚举类型值的方法</span></span><br><span class="line">ace.simpleDescription()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 枚举类型变量的原始值</span></span><br><span class="line"><span class="keyword">let</span> aceRawValue = ace.rawValue<span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 解包通过init?(rawValue:)初始化构造器创建的枚举类型值</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> convertedRank = <span class="type">Rank</span>(rawValue: <span class="number">3</span>) &#123;</span><br><span class="line">	<span class="keyword">let</span> threeDescription = convertedRank.simpleDescription()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><em>不设置原始值类型</em></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 扑克牌花色</span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Suit</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Spades</span>, <span class="type">Hearts</span>, <span class="type">Diamonds</span>, <span class="type">Clubs</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">simpleDescription</span><span class="params">()</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> <span class="keyword">self</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> .<span class="type">Spades</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"spades"</span></span><br><span class="line">        <span class="keyword">case</span> .<span class="type">Hearts</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"hearts"</span></span><br><span class="line">        <span class="keyword">case</span> .<span class="type">Diamonds</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"diamonds"</span></span><br><span class="line">        <span class="keyword">case</span> .<span class="type">Clubs</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"clubs"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 枚举值</span></span><br><span class="line"><span class="keyword">let</span> hearts = <span class="type">Suit</span>.<span class="type">Hearts</span></span><br><span class="line"><span class="comment">// 调用枚举值的方法查看枚举值对应的说明</span></span><br><span class="line"><span class="keyword">let</span> heartsDescription = hearts.simpleDescription()</span><br></pre></td></tr></table></figure>
<p><em>枚举的每个case还可以包含一些值</em></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 服务器响应</span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">ServerResponse</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 正确响应</span></span><br><span class="line">    <span class="keyword">case</span> <span class="type">Result</span>(<span class="type">String</span>, <span class="type">String</span>)</span><br><span class="line">    <span class="comment">// 请求失败</span></span><br><span class="line">    <span class="keyword">case</span> <span class="type">Error</span>(<span class="type">String</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 为实例传值</span></span><br><span class="line"><span class="keyword">let</span> success = <span class="type">ServerResponse</span>.<span class="type">Result</span>(<span class="string">"6:00 am"</span>, <span class="string">"8:09 pm"</span>)</span><br><span class="line"><span class="keyword">let</span> failure = <span class="type">ServerResponse</span>.<span class="type">Error</span>(<span class="string">"Out of cheese"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> success &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">let</span> .<span class="type">Result</span>(sunrise, sunset):</span><br><span class="line">    <span class="comment">// 获取枚举实例的值</span></span><br><span class="line">    <span class="keyword">let</span> serverResponse = <span class="string">"sunset is at \(sunrise) and sunset is at \(sunset)."</span></span><br><span class="line"><span class="keyword">case</span> <span class="keyword">let</span> .<span class="type">Error</span>(error):</span><br><span class="line">    <span class="keyword">let</span> serverResponse = <span class="string">"Failure... \(error)"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="0-2-5-2-结构体"><a href="#0-2-5-2-结构体" class="headerlink" title="0.2.5.2    结构体"></a>0.2.5.2    结构体</h4><blockquote>
<p><strong>说明：</strong>结构体和类有很多相同的地方，比如方法和构造器。它们之间最大的区别就是结构体是传值，类是传引用。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 扑克牌</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Card</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 级别</span></span><br><span class="line">    <span class="keyword">var</span> rank: <span class="type">Rank</span></span><br><span class="line">    <span class="comment">// 花色</span></span><br><span class="line">    <span class="keyword">var</span> suit: <span class="type">Suit</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">simpleDescription</span><span class="params">()</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"The \(rank.simpleDescription()) of \(suit.simpleDescription())"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 黑桃3</span></span><br><span class="line"><span class="keyword">let</span> threeOfSpades = <span class="type">Card</span>(rank: .<span class="type">Three</span>, suit: .<span class="type">Spades</span>)</span><br><span class="line"><span class="keyword">let</span> threeOfSpandesDescription = threeOfSpades.simpleDescription()</span><br></pre></td></tr></table></figure>
<h3 id="0-2-6-协议和扩展（Protocols-and-Extensions）"><a href="#0-2-6-协议和扩展（Protocols-and-Extensions）" class="headerlink" title="0.2.6    协议和扩展（Protocols and Extensions）"></a>0.2.6    协议和扩展（Protocols and Extensions）</h3><h4 id="0-2-6-1-协议"><a href="#0-2-6-1-协议" class="headerlink" title="0.2.6.1    协议"></a>0.2.6.1    协议</h4><blockquote>
<p><strong>关键字：</strong><code>protocol</code><br><strong>说明：</strong>类似于接句，类、枚举、结构体都可以实现协议。<br><strong>注意：</strong></p>
<ul>
<li>使用结构体实现协议时，如果实现的方法会修改结构体，需要用<code>mutating</code>标记。</li>
<li>可以直接使用协议声明变量或常量，但无法调用运行时类型实现的协议值完的方法或属性</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个协议</span></span><br><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">ExampleProtocol</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> simpleDescription: <span class="type">String</span> &#123;<span class="keyword">get</span>&#125;</span><br><span class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">adjust</span><span class="params">()</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 通过类实现这个协议</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SimpleClass</span>: <span class="title">ExampleProtocol</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> simpleDescription: <span class="type">String</span> = <span class="string">"A very simple class."</span></span><br><span class="line">    <span class="keyword">var</span> anotherProperty: <span class="type">Int</span> = <span class="number">69105</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">adjust</span><span class="params">()</span></span> &#123;</span><br><span class="line">        simpleDescription += <span class="string">" Now 100% adjust."</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 创建实例</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="type">SimpleClass</span>()</span><br><span class="line">a.adjust()</span><br><span class="line"><span class="keyword">let</span> aDescription = a.simpleDescription</span><br><span class="line"><span class="comment">// 像使用其他命名类型一样使用协议名，用其声明一个变量，并将实现了该协议的类的实例赋值给它</span></span><br><span class="line"><span class="keyword">let</span> protocolValue: <span class="type">ExampleProtocol</span> = a</span><br><span class="line"><span class="comment">// 使用协议本身声明的变量或常量不能访问协议外定义成员</span></span><br><span class="line"><span class="comment">// print(protocolValue.anotherProperty)</span></span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 通过结构体实现这个协议</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SimpleStructure</span>: <span class="title">ExampleProtocol</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> simpleDescription: <span class="type">String</span> = <span class="string">"A simple structure"</span></span><br><span class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">adjust</span><span class="params">()</span></span> &#123;</span><br><span class="line">        simpleDescription += <span class="string">"(adjusted)"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 创建实例</span></span><br><span class="line"><span class="keyword">var</span> b = <span class="type">SimpleStructure</span>()</span><br><span class="line"><span class="comment">// 调用方法</span></span><br><span class="line">b.adjust()</span><br><span class="line"><span class="keyword">let</span> bDesctiption = b.simpleDescription</span><br></pre></td></tr></table></figure>
<h4 id="0-2-6-2-扩展"><a href="#0-2-6-2-扩展" class="headerlink" title="0.2.6.2    扩展"></a>0.2.6.2    扩展</h4><blockquote>
<p><strong>关键字：</strong><code>extension</code><br><strong>描述：</strong>为现有的类型添加功能，比如新的方法和计算属性。<br><strong>说明：</strong>你可以使用扩展在别处修改定义，甚至是从外部库活着框架引入的一个类型，使得这个类型遵循某个协议。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 扩展</span></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Int</span>: <span class="title">ExampleProtocol</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> simpleDescription: <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"The number \(self)"</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">adjust</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">self</span> += <span class="number">42</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="number">7</span>.simpleDescription)</span><br></pre></td></tr></table></figure>
<h3 id="0-2-7-范型（Generics）"><a href="#0-2-7-范型（Generics）" class="headerlink" title="0.2.7    范型（Generics）"></a>0.2.7    范型（Generics）</h3><blockquote>
<p><strong>描述：</strong>在<code>&lt;&gt;</code>中写一个名字来创建一个范型函数或者类型。<br><strong>说明：</strong>可以应用于</p>
<ul>
<li>函数</li>
<li>方法</li>
<li>类</li>
<li>枚举</li>
<li>结构体</li>
</ul>
<p><strong>特点：</strong></p>
<ul>
<li>可以使用<code>where</code>来指定对类型的要求</li>
<li><code>&lt;T: Equatable&gt;</code>和<code>&lt;T where T: Equatable&gt;</code>等价</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">anyCommonElements</span> &lt;T: SequenceType, U: SequenceType where T.Generator.Element: Equatable, T.Generator.Element == U.Generator.Element&gt; <span class="params">(lhs: T, <span class="number">_</span> rhs: U)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> lhsItem <span class="keyword">in</span> lhs &#123;</span><br><span class="line">        <span class="keyword">for</span> rhsItem <span class="keyword">in</span> rhs &#123;</span><br><span class="line">            <span class="keyword">if</span> lhsItem == rhsItem &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line">anyCommonElements([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">3</span>])</span><br></pre></td></tr></table></figure>
<h2 id="0-3-Swift版本历史记录"><a href="#0-3-Swift版本历史记录" class="headerlink" title="0.3    Swift版本历史记录"></a>0.3    Swift版本历史记录</h2><h2 id="0-4-The-Swift-Programing-language中文版"><a href="#0-4-The-Swift-Programing-language中文版" class="headerlink" title="0.4    The Swift Programing language中文版"></a>0.4    The Swift Programing language中文版</h2>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/13/o-c基础教程第二版_20 NSPredicate/" itemprop="url">
                  20 NSpredicate
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-13T10:43:10+08:00" content="2016-05-13">
              2016-05-13
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/13/o-c基础教程第二版_20 NSPredicate/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/13/o-c基础教程第二版_20 NSPredicate/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p><strong>说明：</strong><code>Cocoa</code>提供了一个名为<code>NSPredicate</code>的类，用于指定过滤器的条件。<br><strong>原理：</strong>可以创建<code>NSPredicate</code>对象，通过它准确描述所需的条件，通过<code>谓词</code>(计算真值和假值的函数)筛选每个对象，判断它们是否与条件相匹配。</p>
</blockquote>
<h2 id="20-1-创建谓词"><a href="#20-1-创建谓词" class="headerlink" title="20.1    创建谓词"></a>20.1    创建谓词</h2><blockquote>
<p><strong>说明：</strong>使用<code>谓词</code>有两种方式</p>
</blockquote>
<table>
<thead>
<tr>
<th>方式</th>
<th>适用</th>
</tr>
</thead>
<tbody>
<tr>
<td>创建许多<code>NSPredicate</code>对象，组合使用</td>
<td>构建通用用户界面来指定查询的场景</td>
</tr>
<tr>
<td>谓词字符串</td>
<td>适用于初学者使用，比较简单</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>建议：</strong>通常将以使用<code>面向字符串</code>的<code>API</code>，尤其是在缺少编译器的错误检查和奇怪的运行时错误的时候。</p>
</blockquote>
<h3 id="predicateWithFormat工厂方法"><a href="#predicateWithFormat工厂方法" class="headerlink" title="predicateWithFormat工厂方法"></a>predicateWithFormat工厂方法</h3><blockquote>
<p><strong>说明：</strong>基于<code>谓词字符串</code>在后台构建<code>对象数</code>，创建<code>谓词</code>。<br><strong>谓词字符串：</strong>用途类似<code>sql</code>，语法类似标准c语言表达式<br><strong>原型：</strong><code>NSPredicate</code></p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;NSString *&#125; predicateFormat 谓词字符串（地位类似格式串）</span><br><span class="line">* @param &#123;...&#125; 对应为此字符串中的占位符</span><br><span class="line">*/</span></span><br><span class="line">+ (<span class="built_in">NSPredicate</span> *)predicateWithFormat:(<span class="built_in">NSString</span> *)predicateFormat, ...;</span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 汽车集合</span></span><br><span class="line">Garage *garage = [[Garage alloc] init];</span><br><span class="line">garage.name = <span class="string">@"Joe's Garage"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 存入汽车实例</span></span><br><span class="line">Car *car;</span><br><span class="line">car = makeCar(<span class="string">@"Herbie"</span>, <span class="string">@"Honda"</span>, <span class="string">@"CRX"</span>, <span class="number">1984</span>, <span class="number">2</span>, <span class="number">34000</span>, <span class="number">58</span>);</span><br><span class="line">[garage addCar:car];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建谓词：过滤 name 属性值为 Herbie 的车</span></span><br><span class="line"><span class="built_in">NSPredicate</span> *predicate;</span><br><span class="line">predicate = [<span class="built_in">NSPredicate</span> predicateWithFormat:<span class="string">@"name == 'Herbie'"</span>];</span><br></pre></td></tr></table></figure>
<h2 id="20-2-计算谓词"><a href="#20-2-计算谓词" class="headerlink" title="20.2    计算谓词"></a>20.2    计算谓词</h2><h3 id="evaluateWithObject实例方法"><a href="#evaluateWithObject实例方法" class="headerlink" title="evaluateWithObject实例方法"></a>evaluateWithObject实例方法</h3><blockquote>
<p><strong>说明：</strong>通知接收对象（即<code>谓词</code>）根据<code>指定的对象</code>计算自身的值。<br><strong>用途：</strong>计算<code>某个对象</code>是否符合某个<code>谓词</code>中的判断逻辑。<br><strong>原型：</strong>``</p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;id&#125; object 谓词的主语</span><br><span class="line">* @return &#123;BOOL&#125; YES 判断为真， NO 判断为假</span><br><span class="line">*/</span></span><br><span class="line">- (<span class="built_in">BOOL</span>)evaluateWithObject:(nullable <span class="keyword">id</span>)object;</span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 谓词1：过滤 name 属性值为 Herbie 的车</span></span><br><span class="line"><span class="built_in">NSPredicate</span> *predicate;</span><br><span class="line">predicate = [<span class="built_in">NSPredicate</span> predicateWithFormat:<span class="string">@"name == 'Herbie'"</span>];</span><br><span class="line"><span class="comment">// 搭配主语进行判断</span></span><br><span class="line"><span class="built_in">BOOL</span> match = [predicate evaluateWithObject:car];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%s"</span>, (match) ? <span class="string">"YES"</span> : <span class="string">"NO"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 谓词2：引擎马力大于150</span></span><br><span class="line">predicate = [<span class="built_in">NSPredicate</span> predicateWithFormat:<span class="string">@"engine.horsepower &gt; 150"</span>];</span><br><span class="line">match = [predicate evaluateWithObject:car];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%s"</span>, (match) ? <span class="string">"YES"</span> : <span class="string">"NO"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 谓词3：和谓词1等价</span></span><br><span class="line">predicate = [<span class="built_in">NSPredicate</span> predicateWithFormat:<span class="string">@"name == %@"</span>, <span class="string">@"Herbie"</span>];</span><br><span class="line">match = [predicate evaluateWithObject:car];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%s"</span>, (match) ? <span class="string">"YES"</span> : <span class="string">"NO"</span>);</span><br></pre></td></tr></table></figure>
<h2 id="20-3-数组过滤器"><a href="#20-3-数组过滤器" class="headerlink" title="20.3    数组过滤器"></a>20.3    数组过滤器</h2><blockquote>
<p><strong>说明：</strong>某些<code>类别</code>将<code>谓词过滤方法</code>添加到了<code>Cocoa</code>集合类（比如<code>NSArray</code>）中。</p>
</blockquote>
<h3 id="filteredArrayUsingPredicate实例方法"><a href="#filteredArrayUsingPredicate实例方法" class="headerlink" title="filteredArrayUsingPredicate实例方法"></a>filteredArrayUsingPredicate实例方法</h3><blockquote>
<p><strong>说明：</strong>循环过滤数组内容，根据<code>谓词</code>计算每个对象的值，并将值为<code>YES</code>的对象累计到将被放回的新数组中。</p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 数组过滤 */</span></span><br><span class="line"><span class="comment">// 创建汽车集合</span></span><br><span class="line">Garage *garage = [[Garage alloc] init];</span><br><span class="line">garage.name = <span class="string">@"Joe's Garage"</span>;</span><br><span class="line"><span class="comment">// 添加汽车实例</span></span><br><span class="line">car = makeCar (<span class="string">@"Badger"</span>, <span class="string">@"Acura"</span>, <span class="string">@"Integra"</span>, <span class="number">1987</span>, <span class="number">5</span>, <span class="number">217036.7</span>, <span class="number">130</span>);</span><br><span class="line">[garage addCar: car];</span><br><span class="line"></span><br><span class="line">car = makeCar (<span class="string">@"Elvis"</span>, <span class="string">@"Acura"</span>, <span class="string">@"Legend"</span>, <span class="number">1989</span>, <span class="number">4</span>, <span class="number">28123.4</span>, <span class="number">151</span>);</span><br><span class="line">[garage addCar: car];</span><br><span class="line"></span><br><span class="line">car = makeCar (<span class="string">@"Phoenix"</span>, <span class="string">@"Pontiac"</span>, <span class="string">@"Firebird"</span>, <span class="number">1969</span>, <span class="number">2</span>, <span class="number">85128.3</span>, <span class="number">345</span>);</span><br><span class="line">[garage addCar: car];</span><br><span class="line"></span><br><span class="line">car = makeCar (<span class="string">@"Streaker"</span>, <span class="string">@"Pontiac"</span>, <span class="string">@"Silver Streak"</span>, <span class="number">1950</span>, <span class="number">2</span>, <span class="number">39100.0</span>, <span class="number">36</span>);</span><br><span class="line">[garage addCar: car];</span><br><span class="line"></span><br><span class="line">car = makeCar (<span class="string">@"Judge"</span>, <span class="string">@"Pontiac"</span>, <span class="string">@"GTO"</span>, <span class="number">1969</span>, <span class="number">2</span>, <span class="number">45132.2</span>, <span class="number">370</span>);</span><br><span class="line">[garage addCar: car];</span><br><span class="line"></span><br><span class="line">car = makeCar (<span class="string">@"Paper Car"</span>, <span class="string">@"Plymouth"</span>, <span class="string">@"Valiant"</span>, <span class="number">1965</span>, <span class="number">2</span>, <span class="number">76800</span>, <span class="number">105</span>);</span><br><span class="line">[garage addCar: car];</span><br><span class="line"><span class="comment">// 创建谓词</span></span><br><span class="line">predicate = [<span class="built_in">NSPredicate</span> predicateWithFormat:<span class="string">@"engine.horsepower &gt; 150"</span>];</span><br><span class="line"><span class="comment">// 获取汽车实例组成的数组</span></span><br><span class="line"><span class="built_in">NSArray</span> *cars = [garage cars];</span><br><span class="line"><span class="comment">// 遍历数组</span></span><br><span class="line"><span class="keyword">for</span> (Car *car <span class="keyword">in</span> cars) &#123;</span><br><span class="line">    <span class="keyword">if</span> ([predicate evaluateWithObject:car]) &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, car.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 创建谓词</span></span><br><span class="line">predicate = [<span class="built_in">NSPredicate</span> predicateWithFormat:<span class="string">@"engine.horsepower &gt; %d"</span>, <span class="number">50</span>];</span><br><span class="line"><span class="comment">// 过滤数组：引擎马力大于50的</span></span><br><span class="line"><span class="built_in">NSArray</span> *results = [cars filteredArrayUsingPredicate:predicate];</span><br></pre></td></tr></table></figure>
<h3 id="filterUsingPredicate实例方法"><a href="#filterUsingPredicate实例方法" class="headerlink" title="filterUsingPredicate实例方法"></a>filterUsingPredicate实例方法</h3><blockquote>
<p><strong>说明：</strong>通过<code>谓词</code>剔除可变数组中计算结果不为真的对象。<br><strong>原型：</strong><code>NSMutableArray</code></p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;NSPredicate *&#125; predicate 谓词</span><br><span class="line">*/</span></span><br><span class="line">- (<span class="keyword">void</span>)filterUsingPredicate:(<span class="built_in">NSPredicate</span> *)predicate;</span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//------------------可变数组过滤</span></span><br><span class="line"><span class="built_in">NSMutableArray</span> *carsCopy = [cars mutableCopy];</span><br><span class="line"><span class="comment">// 过滤（有副作用的过滤）</span></span><br><span class="line">[carsCopy filterUsingPredicate:predicate];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, results);</span><br></pre></td></tr></table></figure>
<h2 id="20-4-格式说明符"><a href="#20-4-格式说明符" class="headerlink" title="20.4    格式说明符"></a>20.4    格式说明符</h2><blockquote>
<p><strong>说明：</strong>硬编码并非好事，可以通过两种方式将不同的内同放入<code>谓词格式字符串</code>中</p>
<ul>
<li>格式说明符：<code>%格式说明符</code></li>
<li>变量名：<code>$变量名</code></li>
</ul>
</blockquote>
<h3 id="20-4-1-格式说明符"><a href="#20-4-1-格式说明符" class="headerlink" title="20.4.1    格式说明符"></a>20.4.1    格式说明符</h3><blockquote>
<p><strong>说明：</strong>分3种</p>
</blockquote>
<table>
<thead>
<tr>
<th>分类</th>
<th>说明</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>printf说明符</td>
<td><code>c</code>语言使用的格式说明符</td>
<td><code>%d</code>、<code>%f</code>等</td>
</tr>
<tr>
<td><code>%@</code></td>
<td>插入<code>O-C</code>字符串值</td>
<td></td>
</tr>
<tr>
<td><code>%K</code></td>
<td>插入键路径</td>
</tr>
</tbody>
</table>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用printf式格式字符串</span></span><br><span class="line">predicate = [<span class="built_in">NSPredicate</span> predicateWithFormat:<span class="string">@"engine.horsepower &gt; %d"</span>, <span class="number">50</span>];</span><br><span class="line">results = [cars filteredArrayUsingPredicate:predicate];</span><br><span class="line"><span class="comment">// 使用%@插入字符串值</span></span><br><span class="line">predicate = [<span class="built_in">NSPredicate</span> predicateWithFormat:<span class="string">@"name == %@"</span>, <span class="string">@"Herbie"</span>];</span><br><span class="line"><span class="comment">// 使用%K指定键路径</span></span><br><span class="line">predicate = [<span class="built_in">NSPredicate</span> predicateWithFormat:<span class="string">@"%K == %@"</span>, <span class="string">@"name"</span>, <span class="string">@"Herbie"</span>];</span><br></pre></td></tr></table></figure>
<h3 id="20-4-2-插入变量名"><a href="#20-4-2-插入变量名" class="headerlink" title="20.4.2    插入变量名"></a>20.4.2    插入变量名</h3><blockquote>
<p><strong>说明：</strong>需要配合<code>字典</code>和<code>predicateWithSubstitutionVariables</code>实例方法一起使用。</p>
</blockquote>
<h4 id="predicateWithSubstitutionVariables"><a href="#predicateWithSubstitutionVariables" class="headerlink" title="predicateWithSubstitutionVariables"></a>predicateWithSubstitutionVariables</h4><blockquote>
<p><strong>说明：</strong>通过已有的<code>谓词</code>（<code>谓词字符串</code>中包含插入的变量名）创建更加具体的<code>专用谓词</code>。<br><strong>原型：</strong><code>NSPredicate</code></p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;NSDictionary&lt;NSString *, id&gt; *&#125; variables 用于具体化谓词的字典</span><br><span class="line">* @return &#123;NSPredicate&#125; 专用谓词</span><br><span class="line">*/</span></span><br><span class="line">- (instancetype)predicateWithSubstitutionVariables:(<span class="built_in">NSDictionary</span>&lt;<span class="built_in">NSString</span> *, <span class="keyword">id</span>&gt; *)variables;</span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将字典的键名插入到谓词字符串中</span></span><br><span class="line"><span class="built_in">NSPredicate</span> *predicateTemplate = [<span class="built_in">NSPredicate</span> predicateWithFormat:<span class="string">@"name == $NAME"</span>];<span class="comment">// 创建谓词模版</span></span><br><span class="line"><span class="built_in">NSDictionary</span> *varDict;</span><br><span class="line"><span class="comment">// 变量名为NSString类型</span></span><br><span class="line">varDict = [<span class="built_in">NSDictionary</span> dictionaryWithObjectsAndKeys:<span class="string">@"Heribie"</span>, <span class="string">@"NAME"</span>, <span class="literal">nil</span>];<span class="comment">// 用来为上述谓词模版的$NAME赋值的字典</span></span><br><span class="line">predicate = [predicateTemplate predicateWithSubstitutionVariables:varDict];<span class="comment">// 通过谓词模版创建谓词</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"SNORGLE：%@"</span>, predicate);</span><br><span class="line">match = [predicate evaluateWithObject:car];<span class="comment">// 主语结合谓词进行计算</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%s"</span>, (match) ? <span class="string">"YES"</span> : <span class="string">"NO"</span>);</span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">predicateTemplate = [<span class="built_in">NSPredicate</span> predicateWithFormat:<span class="string">@"engine.horsepower &gt; $POWER"</span>];</span><br><span class="line"><span class="comment">// 变量名为NSNumber类型</span></span><br><span class="line">varDict = [<span class="built_in">NSDictionary</span> dictionaryWithObjectsAndKeys:[<span class="built_in">NSNumber</span> numberWithInt:<span class="number">150</span>], <span class="string">@"POWER"</span>, <span class="literal">nil</span>];</span><br><span class="line">predicate = [predicateTemplate predicateWithSubstitutionVariables:varDict];</span><br><span class="line">results = [cars filteredArrayUsingPredicate:predicate];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"OOP %@"</span>, results);</span><br></pre></td></tr></table></figure>
<h2 id="20-5-运算符"><a href="#20-5-运算符" class="headerlink" title="20.5    运算符"></a>20.5    运算符</h2><blockquote>
<p><strong>说明：</strong><code>NSPredicate</code>的格式串中包含大量不同的运算符。<br><strong>注意：</strong>本章将介绍大多数运算符，其余的可以通过苹果公司的<code>在线文档</code>进行查询。</p>
</blockquote>
<h3 id="20-5-1-比较和逻辑运算符"><a href="#20-5-1-比较和逻辑运算符" class="headerlink" title="20.5.1    比较和逻辑运算符"></a>20.5.1    比较和逻辑运算符</h3><blockquote>
<p><strong>说明：</strong><code>谓词字符串</code>语法支持<code>C</code>语言中一些常用的运算符</p>
<ul>
<li>等号运算符：<code>==</code></li>
<li>不等号运算符：<code>&gt;</code>、<code>&lt;=</code>、<code>!=</code>等</li>
<li>赋值运算符：<code>=</code></li>
<li>逻辑运算符：<code>AND(&amp;&amp;)</code>、<code>OR(||)</code>、<code>NOT(!)</code></li>
</ul>
</blockquote>
<h4 id="20-5-1-1-比较运算符"><a href="#20-5-1-1-比较运算符" class="headerlink" title="20.5.1.1    比较运算符"></a>20.5.1.1    比较运算符</h4><blockquote>
<p><strong>说明：</strong>包括<code>等号运算符</code>和<code>不等号运算符</code>。</p>
</blockquote>
<table>
<thead>
<tr>
<th>运算符</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>==</code>(<code>&lt;&gt;</code>)</td>
<td>等于</td>
</tr>
<tr>
<td><code>!=</code></td>
<td>不等于</td>
</tr>
<tr>
<td><code>&lt;</code></td>
<td>小于</td>
</tr>
<tr>
<td><code>&gt;</code></td>
<td>大于</td>
</tr>
<tr>
<td><code>&lt;=</code>(<code>=&lt;</code>)</td>
<td>小于或等于</td>
</tr>
<tr>
<td><code>&gt;=</code>(<code>=&gt;</code>)</td>
<td>大于或等于</td>
</tr>
</tbody>
</table>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 比较运算符：过滤出数组中name属性小于"Newton"的对象组成的新数组</span></span><br><span class="line">predicate = [<span class="built_in">NSPredicate</span> predicateWithFormat:<span class="string">@"name &lt; 'Newton'"</span>];</span><br><span class="line">results = [cars filteredArrayUsingPredicate:predicate];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, [results valueForKey:<span class="string">@"name"</span>]);</span><br></pre></td></tr></table></figure>
<h4 id="20-5-1-2-逻辑运算符"><a href="#20-5-1-2-逻辑运算符" class="headerlink" title="20.5.1.2    逻辑运算符"></a>20.5.1.2    逻辑运算符</h4><blockquote>
<p><strong>说明：</strong>共3个</p>
</blockquote>
<table>
<thead>
<tr>
<th>逻辑运算符</th>
<th><code>O-C</code>形式</th>
<th>c语言形式</th>
</tr>
</thead>
<tbody>
<tr>
<td>与</td>
<td><code>AND</code></td>
<td><code>&amp;&amp;</code></td>
</tr>
<tr>
<td>或</td>
<td><code>OR</code></td>
<td>`</td>
<td></td>
<td>`</td>
</tr>
<tr>
<td>非</td>
<td><code>NOT</code></td>
<td><code>!</code></td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>注意：</strong><code>谓词字符串</code>中的运算符不区分大小写</p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 逻辑运算符</span></span><br><span class="line">predicate = [<span class="built_in">NSPredicate</span> predicateWithFormat:<span class="string">@"(engine.horsepower &gt; 50) AND (engine.horsepower &lt; 200)"</span>];</span><br><span class="line">results = [cars filteredArrayUsingPredicate:predicate];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"oop %@"</span>, results);</span><br></pre></td></tr></table></figure>
<h3 id="20-5-2-数组运算符"><a href="#20-5-2-数组运算符" class="headerlink" title="20.5.2    数组运算符"></a>20.5.2    数组运算符</h3><blockquote>
<p><strong>说明：</strong>有2个</p>
</blockquote>
<p>|数组运算符|说明|<br>|<code>BETWEEN</code>|判断是否介于两个值之间|<br>|<code>IN</code>|判断数组中是否包含某个值|</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 数组运算符 BETWEEN：使用数组字面量</span></span><br><span class="line">predicate = [<span class="built_in">NSPredicate</span> predicateWithFormat:</span><br><span class="line">             <span class="string">@"engine.horsepower BETWEEN &#123; 50, 200 &#125;"</span>];</span><br><span class="line">results = [cars filteredArrayUsingPredicate: predicate];</span><br><span class="line"><span class="built_in">NSLog</span> (<span class="string">@"%@"</span>, results);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组运算符 BETWEEN：使用数组变量</span></span><br><span class="line"><span class="built_in">NSArray</span> *betweens = [<span class="built_in">NSArray</span> arrayWithObjects:</span><br><span class="line">                     [<span class="built_in">NSNumber</span> numberWithInt: <span class="number">50</span>], [<span class="built_in">NSNumber</span> numberWithInt: <span class="number">200</span>], <span class="literal">nil</span>];</span><br><span class="line">predicate = [<span class="built_in">NSPredicate</span> predicateWithFormat: <span class="string">@"engine.horsepower BETWEEN %@"</span>, betweens];</span><br><span class="line">results = [cars filteredArrayUsingPredicate: predicate];</span><br><span class="line"><span class="built_in">NSLog</span> (<span class="string">@"%@"</span>, results);</span><br><span class="line"><span class="comment">// 数组运算符 BETWEEN：使用数组变量＋谓词模版</span></span><br><span class="line">predicateTemplate = [<span class="built_in">NSPredicate</span> predicateWithFormat: <span class="string">@"engine.horsepower BETWEEN $POWERS"</span>];</span><br><span class="line">varDict = [<span class="built_in">NSDictionary</span> dictionaryWithObjectsAndKeys: betweens, <span class="string">@"POWERS"</span>, <span class="literal">nil</span>];</span><br><span class="line">predicate = [predicateTemplate predicateWithSubstitutionVariables: varDict];</span><br><span class="line">results = [cars filteredArrayUsingPredicate: predicate];</span><br><span class="line"><span class="built_in">NSLog</span> (<span class="string">@"%@"</span>, results);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组运算符 IN：使用数组字面量</span></span><br><span class="line">predicate = [<span class="built_in">NSPredicate</span> predicateWithFormat: <span class="string">@"name IN &#123; 'Herbie', 'Snugs', 'Badger', 'Flap' &#125;"</span>];</span><br><span class="line">results = [cars filteredArrayUsingPredicate: predicate];</span><br><span class="line"><span class="built_in">NSLog</span> (<span class="string">@"%@"</span>, [results valueForKey: <span class="string">@"name"</span>]);</span><br></pre></td></tr></table></figure>
<h2 id="20-6-有-SELF-就足够了"><a href="#20-6-有-SELF-就足够了" class="headerlink" title="20.6    有 SELF 就足够了"></a>20.6    有 SELF 就足够了</h2><blockquote>
<p><strong>说明：</strong>在谓词字符串的<code>键路径</code>部分，除了可以使用对象的属性名外，还可以通过<code>SELF</code>引用自身。<br><strong>用途：</strong><code>SELF</code>表示的是响应谓词计算的对象本身，适用于将谓词应用于简单的值（例如纯文本字符串），而非哪些可以通过键路径进行操作的复杂对象。<br><strong>技巧：</strong>可以使用<code>谓词</code>计算两个数组的交集，其中一个数组作为<code>主语</code>，另一个在<code>谓词</code>中，使用<code>IN</code>运算符。</p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//------------ SELF ：应用于复杂对象</span></span><br><span class="line"><span class="comment">// 判断 name 属性是不是在指定 字符串数组中</span></span><br><span class="line">predicate = [<span class="built_in">NSPredicate</span> predicateWithFormat:<span class="string">@"SELF.name IN &#123;'Herbie', 'Snugs', 'Badger', 'Flap'&#125;"</span>];</span><br><span class="line"><span class="comment">// 使用谓词过滤汽车数组，获取子数组</span></span><br><span class="line">results = [cars filteredArrayUsingPredicate:predicate];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, results);</span><br><span class="line"></span><br><span class="line"><span class="comment">//------------ SELF：应用于简单对象</span></span><br><span class="line"><span class="comment">// 字符串数组</span></span><br><span class="line">names = [cars valueForKey:<span class="string">@"name"</span>];</span><br><span class="line"><span class="comment">// 判断字符串自身是不是在指定 字符串数组中</span></span><br><span class="line">predicate = [<span class="built_in">NSPredicate</span> predicateWithFormat:<span class="string">@"SELF IN &#123;'Herbie', 'Snugs', 'Bager', 'Flap'&#125;"</span>];</span><br><span class="line"><span class="comment">// 主语＋谓词</span></span><br><span class="line">results = [cars filteredArrayUsingPredicate:predicate];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, results);</span><br><span class="line"></span><br><span class="line"><span class="comment">//-------- 使用 IN 运算符计算两个数组的交集</span></span><br><span class="line"><span class="built_in">NSArray</span> *names1 = [<span class="built_in">NSArray</span> arrayWithObjects: <span class="string">@"Herbie"</span>, <span class="string">@"Badger"</span>, <span class="string">@"Judge"</span>, <span class="string">@"Elvis"</span>, <span class="literal">nil</span>];</span><br><span class="line"><span class="built_in">NSArray</span> *names2 = [<span class="built_in">NSArray</span> arrayWithObjects: <span class="string">@"Judge"</span>, <span class="string">@"Paper Car"</span>, <span class="string">@"Badger"</span>, <span class="string">@"Phoenix"</span>, <span class="literal">nil</span>];</span><br><span class="line"></span><br><span class="line">predicate = [<span class="built_in">NSPredicate</span> predicateWithFormat: <span class="string">@"SELF IN %@"</span>, names1];</span><br><span class="line">results = [names2 filteredArrayUsingPredicate: predicate];</span><br></pre></td></tr></table></figure>
<h2 id="20-7-字符串运算符"><a href="#20-7-字符串运算符" class="headerlink" title="20.7    字符串运算符"></a>20.7    字符串运算符</h2><blockquote>
<p><strong>说明：</strong>3个专门针对字符串的运算符</p>
</blockquote>
<table>
<thead>
<tr>
<th>运算符</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>BEGINSWITH</code></td>
<td>前缀是否是某一个字符串</td>
</tr>
<tr>
<td><code>ENDSWITH</code></td>
<td>后缀是某一个字符串</td>
</tr>
<tr>
<td><code>CONTAINS</code></td>
<td>是否包含某一个子串</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>运算符修饰符：</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th>修饰符</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>c</code></td>
<td>不区分大小写</td>
</tr>
<tr>
<td><code>d</code></td>
<td>不区分发音符号</td>
</tr>
<tr>
<td><code>cd</code></td>
<td>不区分大小写和发音符号</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>建议：</strong>处分是需要区分大小写或重音符号的特殊原因，否则请尽力使用<code>cd</code>修饰符。</p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//----------- 字符串运算符</span></span><br><span class="line">predicate = [<span class="built_in">NSPredicate</span> predicateWithFormat: <span class="string">@"name BEGINSWITH 'Bad'"</span>];</span><br><span class="line">results = [cars filteredArrayUsingPredicate: predicate];</span><br><span class="line"><span class="built_in">NSLog</span> (<span class="string">@"%@"</span>, results);</span><br><span class="line"></span><br><span class="line">predicate = [<span class="built_in">NSPredicate</span> predicateWithFormat: <span class="string">@"name BEGINSWITH 'HERB'"</span>];</span><br><span class="line">results = [cars filteredArrayUsingPredicate: predicate];</span><br><span class="line"><span class="built_in">NSLog</span> (<span class="string">@"%@"</span>, results);</span><br><span class="line"></span><br><span class="line">predicate = [<span class="built_in">NSPredicate</span> predicateWithFormat: <span class="string">@"name BEGINSWITH[cd] 'HERB'"</span>];</span><br><span class="line">results = [cars filteredArrayUsingPredicate: predicate];</span><br><span class="line"><span class="built_in">NSLog</span> (<span class="string">@"%@"</span>, results);</span><br></pre></td></tr></table></figure>
<h2 id="20-8-LIKE-运算符"><a href="#20-8-LIKE-运算符" class="headerlink" title="20.8    LIKE 运算符"></a>20.8    LIKE 运算符</h2><blockquote>
<p><strong>说明：</strong><code>LIKE</code>运算符包含2个通配符</p>
</blockquote>
<table>
<thead>
<tr>
<th>通配符</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>*</code></td>
<td>与任意个任意字符匹配</td>
</tr>
<tr>
<td><code>?</code></td>
<td>与一个任意字符匹配</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>扩展：</strong>如果热衷于正则表达式，可以使用<code>MATCHES</code>运算符。<br><strong>技巧：</strong>由于正则表达式计算开销比较大，因此可以在使用<code>MATCH</code>之前先使用其它运算符做初步过滤，从而提高运算速度。</p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//------------- like 运算符</span></span><br><span class="line">predicate = [<span class="built_in">NSPredicate</span> predicateWithFormat: <span class="string">@"name LIKE[cd] '*er*'"</span>];</span><br><span class="line">results = [cars filteredArrayUsingPredicate: predicate];</span><br><span class="line"><span class="built_in">NSLog</span> (<span class="string">@"%@"</span>, results);</span><br><span class="line"></span><br><span class="line">predicate = [<span class="built_in">NSPredicate</span> predicateWithFormat: <span class="string">@"name LIKE[cd] '???er*'"</span>];</span><br><span class="line">results = [cars filteredArrayUsingPredicate: predicate];</span><br><span class="line"><span class="built_in">NSLog</span> (<span class="string">@"%@"</span>, results);</span><br></pre></td></tr></table></figure>
<h2 id="20-9-结语"><a href="#20-9-结语" class="headerlink" title="20.9    结语"></a>20.9    结语</h2>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/13/o-c基础教程第二版_19 使用静态分析器/" itemprop="url">
                  19 使用静态分析器
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-13T10:42:52+08:00" content="2016-05-13">
              2016-05-13
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/13/o-c基础教程第二版_19 使用静态分析器/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/13/o-c基础教程第二版_19 使用静态分析器/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p><strong>说明：</strong>从<code>Xcode 3.2</code>开始加入的新功能，不需要运行程序就可以从逻辑上检测代码的工具，它可以寻找会演变成bug的错误。</p>
</blockquote>
<h2 id="19-1-静态工作"><a href="#19-1-静态工作" class="headerlink" title="19.1    静态工作"></a>19.1    静态工作</h2><blockquote>
<p><strong>说明：</strong><code>静态分析器</code>可以识别以下几种错误</p>
<ul>
<li><strong>安全问题：</strong>比如内存泄漏和缓冲区溢出</li>
<li><strong>并发性问题：</strong>比如静态条件（也就是依赖时间的两个或多个任务失效）</li>
<li><strong>逻辑问题：</strong>包括废代码和不好的编码习惯</li>
</ul>
<p><strong>注意：</strong><code>静态分析器</code>存在以下不足</p>
<ul>
<li>拖慢构建程序的过程：因为需要消耗时间来进行分析</li>
<li>有时会误报错误</li>
<li>需要适应：因为改变了熟悉的工作流程</li>
</ul>
</blockquote>
<h3 id="19-1-1-开始分析"><a href="#19-1-1-开始分析" class="headerlink" title="19.1.1    开始分析"></a>19.1.1    开始分析</h3><blockquote>
<p><strong>运行静态分析器：</strong><code>Product(菜单) -&gt; Analyze</code>，分解决过在导航栏<code>issue</code>中可以看到<br><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-01-31%20%E4%B8%8B%E5%8D%885.26.58.png" alt="Alt text"></p>
</blockquote>
<h4 id="19-1-1-1-废代码"><a href="#19-1-1-1-废代码" class="headerlink" title="19.1.1.1    废代码"></a>19.1.1.1    废代码</h4><blockquote>
<p><strong>废代码：</strong>创建了一个对象<code>pool</code>，但从没有在代码中直接访问过，没有向它发送消息也没有更改过它。<br><strong>优化手段：</strong>移除<code>废代码</code><br><strong>优化意义：</strong>废代码并不一定会给程序带来功能上的问题，但终归会浪费性能，移除废代码可以使应用程序更加高效。</p>
</blockquote>
<p><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-01-31%20%E4%B8%8B%E5%8D%886.42.15.png" alt="Alt text"></p>
<h4 id="19-1-1-2-内存泄漏：对象被释放之前程序return"><a href="#19-1-1-2-内存泄漏：对象被释放之前程序return" class="headerlink" title="19.1.1.2    内存泄漏：对象被释放之前程序return"></a>19.1.1.2    内存泄漏：对象被释放之前程序return</h4><blockquote>
<p><strong>说明：</strong>通常还没有释放掉分配的内存的对象，就过早返回时便会出现这种情况。<br><strong>扩展：</strong>可以通过点击带有<code>分析器图标</code>的代码来观察代码从开始到当前行的运行流程</p>
<ol>
<li>触发“运行流程”<br><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-01-31%20%E4%B8%8B%E5%8D%886.50.10.png" alt="Alt text"></li>
<li>完毕<br><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-01-31%20%E4%B8%8B%E5%8D%886.55.01.png" alt="Alt text"></li>
</ol>
</blockquote>
<h4 id="19-1-1-3-内存泄漏：副本没有释放"><a href="#19-1-1-3-内存泄漏：副本没有释放" class="headerlink" title="19.1.1.3    内存泄漏：副本没有释放"></a>19.1.1.3    内存泄漏：副本没有释放</h4><blockquote>
<p><strong>说明：</strong>创建一个对象的副本，要在适当的时候对其进行释放，否则引发内存泄漏。<br><strong>优化手段：</strong>在<code>main</code>函数结尾处释放<code>carCopy</code>。<br><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-01-31%20%E4%B8%8B%E5%8D%887.02.18.png" alt="Alt text"></p>
</blockquote>
<h4 id="19-1-1-4-内存泄漏：description方法中的desc在返回前没有释放"><a href="#19-1-1-4-内存泄漏：description方法中的desc在返回前没有释放" class="headerlink" title="19.1.1.4    内存泄漏：description方法中的desc在返回前没有释放"></a>19.1.1.4    内存泄漏：description方法中的desc在返回前没有释放</h4><blockquote>
<p><strong>说明：</strong><code>AllWeatherRadial类</code>中的<code>description</code>方法中分配了一个字符串<code>desc</code>，但没有在返回函数之前释放它。</p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">NSString</span> *) description</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSString</span> *desc;</span><br><span class="line">    desc = [[<span class="built_in">NSString</span> alloc] initWithFormat:</span><br><span class="line">                   <span class="string">@"AllWeatherRadial: %.1f / %.1f / %.1f / %.1f"</span>,</span><br><span class="line">               [<span class="keyword">self</span> pressure], [<span class="keyword">self</span> treadDepth],</span><br><span class="line">               [<span class="keyword">self</span> rainHandling], </span><br><span class="line">               [<span class="keyword">self</span> snowHandling]];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> [desc autorelease];</span><br><span class="line"></span><br><span class="line">&#125; <span class="comment">// description</span></span><br></pre></td></tr></table></figure>
<h3 id="19-1-2-协助分析器"><a href="#19-1-2-协助分析器" class="headerlink" title="19.1.2    协助分析器"></a>19.1.2    协助分析器</h3><blockquote>
<p><strong>说明：</strong><code>静态分析器</code>分析出的“问题”如果是我们有意的，可以通过在声明方法时使用一些<code>关键字</code>避免误报；或者有些情况下，想要使通常没问题的方式发出警报。比如</p>
</blockquote>
<table>
<thead>
<tr>
<th>关键字</th>
<th>用途</th>
<th>对应的惯例</th>
<th>返回对象为<code>Core Foundation</code>对象时</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>NS_RETURNS_RETAINTED</code></td>
<td>标记方法，以返回一个保留计数器的值不是零的对象</td>
<td>分配内存的地方也要负责清理内存</td>
<td><code>CF_RETURNS_RETAINTED</code></td>
</tr>
<tr>
<td><code>NS_RETURNS_NOT_RETAINED</code></td>
<td>使<code>静态分析器</code>在方法试图返回一个保留对象时发出<code>issue</code></td>
<td>返回保留对象通常不需要做额外内存管理</td>
<td><code>NS_RETURNS_NOT_RETAINED</code></td>
</tr>
<tr>
<td><code>CLANG_ANALYZER_NORETURN</code></td>
<td>如果方法有值返回，就在<code>静态分析</code>是发出警报</td>
<td>方法返回值不会发生<code>issue</code></td>
<td>无意义</td>
</tr>
</tbody>
</table>
<h4 id="NS-RETURNS-RETAINTED：返回一个保留的对象"><a href="#NS-RETURNS-RETAINTED：返回一个保留的对象" class="headerlink" title="NS_RETURNS_RETAINTED：返回一个保留的对象"></a>NS_RETURNS_RETAINTED：返回一个保留的对象</h4><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">NSMutableArray</span> *) superDuperArrayCreator <span class="built_in">NS_RETURNS_RETAINED</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">NSMutableArray</span> *) superDuperArrayCreator</span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">NSMutableArray</span> *myArray = [[<span class="built_in">NSMutableArray</span> alloc] init];</span><br><span class="line">	<span class="comment">// ...</span></span><br><span class="line">	<span class="comment">// 没将 myArray 释放就返回了</span></span><br><span class="line">	<span class="keyword">return</span> myArray;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="NS-RETURNS-NOT-RETAINED：返回一个未保留的对象"><a href="#NS-RETURNS-NOT-RETAINED：返回一个未保留的对象" class="headerlink" title="NS_RETURNS_NOT_RETAINED：返回一个未保留的对象"></a>NS_RETURNS_NOT_RETAINED：返回一个未保留的对象</h4><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 分析器会在该方法视图返回一个保留对象时提出issue</span></span><br><span class="line">- (<span class="built_in">NSMutableArray</span> *) superDuperArrayCreator <span class="built_in">NS_RETURNS_NOT_RETAINED</span>;</span><br></pre></td></tr></table></figure>
<h3 id="19-1-3-了解更多"><a href="#19-1-3-了解更多" class="headerlink" title="19.1.3    了解更多"></a>19.1.3    了解更多</h3><blockquote>
<p><strong>说明：</strong><code>静态分析器</code>能够找到的其它问题</p>
</blockquote>
<table>
<thead>
<tr>
<th><code>issue</code></th>
<th>说明</th>
<th>解决<code>issue</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>等号错误</td>
<td><code>if (myValue = expression)</code>存在歧义</td>
<td>赋值后判空：<code>if ((myValue = expression))</code>；判等：<code>if (nil != (myValue = expression))</code></td>
</tr>
<tr>
<td>内存泄漏</td>
<td>方法中的运行时错误使方法提前return，导致release代码没有执行而发生内存泄漏</td>
<td>无论什么时候退出了方法，都需要确认有没有分配了单海没有释放的对象</td>
</tr>
<tr>
<td>过度释放</td>
<td>重复<code>autorelease</code></td>
<td>移除多余的<code>autorelease</code></td>
</tr>
<tr>
<td><code>@synchronized语句中的空值</code></td>
<td><code>@synchronized(object)</code>中的<code>object</code>如果为<code>nil</code>就发出<code>issue</code></td>
<td>确保<code>object</code>不为<code>nil</code></td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>建议：</strong>把<code>静态分析器</code>作为一个善意但烦人的朋友，因为它所说的通常都是对的。<br><strong>注意：</strong>不要太依赖<code>静态分析器</code>来查找每一个内存泄漏和废代码，自己要对自己的代码负责。</p>
</blockquote>
<h2 id="19-2-小结"><a href="#19-2-小结" class="headerlink" title="19.2    小结"></a>19.2    小结</h2>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="Sean" />
          <p class="site-author-name" itemprop="name">Sean</p>
          <p class="site-description motion-element" itemprop="description">整理了一批过去一段时间ios相关的笔记，其它的笔记也整理下？源码分享出来？再说吧...反正也只有自己会看吧...</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">94</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Sean</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"lapuda-er"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    <script src="/vendors/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  






  
  

  

  

  

</body>
</html>
