<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="整理了一批过去一段时间ios相关的笔记，其它的笔记也整理下？源码分享出来？再说吧...反正也只有自己会看吧...">
<meta property="og:type" content="website">
<meta property="og:title" content="Sean">
<meta property="og:url" content="http://laputa-er.github.io/page/5/index.html">
<meta property="og:site_name" content="Sean">
<meta property="og:description" content="整理了一批过去一段时间ios相关的笔记，其它的笔记也整理下？源码分享出来？再说吧...反正也只有自己会看吧...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Sean">
<meta name="twitter:description" content="整理了一批过去一段时间ios相关的笔记，其它的笔记也整理下？源码分享出来？再说吧...反正也只有自己会看吧...">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://laputa-er.github.io/page/5/"/>

  <title> Sean </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Sean</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">笔记分享</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/13/TSPL2_11 方法/" itemprop="url">
                  11 方法
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-13T19:45:53+08:00" content="2016-05-13">
              2016-05-13
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/13/TSPL2_11 方法/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/13/TSPL2_11 方法/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p><strong>定义</strong>：与某些特定类型相关联的函数。</p>
</blockquote>
<table>
<thead>
<tr>
<th>方法</th>
<th>支持类型</th>
<th>关联对象</th>
</tr>
</thead>
<tbody>
<tr>
<td>实例方法</td>
<td>类、结构体、枚举</td>
<td>实例</td>
</tr>
<tr>
<td>类型方法</td>
<td>类、结构体、枚举</td>
<td>类型</td>
</tr>
</tbody>
</table>
<h2 id="11-1-实例方法"><a href="#11-1-实例方法" class="headerlink" title="11.1    实例方法"></a>11.1    实例方法</h2><blockquote>
<p><strong>说明：</strong>写在它所属的类型的前后<code>{}</code>之间</p>
<ul>
<li>能够隐式访问它所属类型的所有的其他实例方法和属性</li>
<li>只能被它所属的类的某个特定实例调用</li>
</ul>
</blockquote>
<table>
<thead>
<tr>
<th>调用位置</th>
<th>调用方式</th>
</tr>
</thead>
<tbody>
<tr>
<td>内部</td>
<td>能够隐式访问它所属类型的所有其它实例方法和属性</td>
</tr>
<tr>
<td>外部</td>
<td>只能被它所属的类的某个特定实例调用</td>
</tr>
</tbody>
</table>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> </span>&#123;</span><br><span class="line">    <span class="comment">//实例属性</span></span><br><span class="line">    <span class="keyword">var</span> <span class="built_in">count</span> = <span class="number">0</span></span><br><span class="line">    <span class="comment">//实例方法1</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">increment</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="built_in">count</span>++</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//实例方法2</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">incrementBy</span><span class="params">(amount:Int)</span></span>&#123;</span><br><span class="line">        <span class="built_in">count</span> += amount</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//实例方法3</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">reset</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="built_in">count</span> = <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> counter = <span class="type">Counter</span>()</span><br><span class="line">counter.increment()</span><br><span class="line">counter.incrementBy(<span class="number">5</span>)</span><br><span class="line">counter.reset()</span><br></pre></td></tr></table></figure>
<h3 id="11-1-1-方法的内部参数名和外部参数名"><a href="#11-1-1-方法的内部参数名和外部参数名" class="headerlink" title="11.1.1    方法的内部参数名和外部参数名"></a>11.1.1    方法的内部参数名和外部参数名</h3><blockquote>
<p><strong>说明：</strong>同函数。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> </span>&#123;</span><br><span class="line">    <span class="comment">//实例属性</span></span><br><span class="line">    <span class="keyword">var</span> <span class="built_in">count</span> = <span class="number">0</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">incrementBy</span><span class="params">(amount:Int, numberOfTime:Int)</span></span>&#123;</span><br><span class="line">        <span class="built_in">count</span> += amount * numberOfTime</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> counter = <span class="type">Counter</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">//第一个参数：不必为再定义一个外部变量名，因为通过incrementBy已经很清楚地看出它的作用</span></span><br><span class="line"><span class="comment">//其它参数：需要被一个外部参数名所限制，以便在方法呗调用时明确它的作用</span></span><br><span class="line">counter.incrementBy(<span class="number">5</span>, numberOfTime:<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<h3 id="11-1-2-修改方法的外部参数名称"><a href="#11-1-2-修改方法的外部参数名称" class="headerlink" title="11.1.2  修改方法的外部参数名称"></a>11.1.2  修改方法的外部参数名称</h3><blockquote>
<p><strong>说明：</strong>同函数。</p>
<ul>
<li>可以为第一个参数添加一个显式的外部名称</li>
<li>不想为方法的第二个及后续的参数提供一个外部名称，可以通过使用下划线<code>_</code>作为该参数的显式外部名称</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">*覆盖参数的默认行为</span><br><span class="line">*/</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> </span>&#123;</span><br><span class="line">    <span class="comment">//实例属性</span></span><br><span class="line">    <span class="keyword">var</span> <span class="built_in">count</span> = <span class="number">0</span></span><br><span class="line">    <span class="comment">//其它参数：使用_作为前缀，参数不在具有外部名称</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">incrementBy</span><span class="params">(amount:Int, <span class="number">_</span> numberOfTime:Int)</span></span>&#123;</span><br><span class="line">        <span class="built_in">count</span> += amount * numberOfTime</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> counter = <span class="type">Counter</span>()</span><br><span class="line">counter.incrementBy(amount:<span class="number">5</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<h3 id="11-1-3-self属性"><a href="#11-1-3-self属性" class="headerlink" title="11.1.3  self属性"></a>11.1.3  self属性</h3><blockquote>
<p><strong>说明：</strong>类型的每一个实例都有一个隐含属性叫做<code>self</code>，<code>self</code>完全等同于该实例本身。</p>
<ul>
<li>在方法中调用实例的其它方法和属性时可以省略<code>self</code>（除非需要区分参数名和属性名）</li>
</ul>
<p><strong>用途：</strong>在一个实例的实例方法中使用这个隐含的self属性来引用当前实例</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> x = <span class="number">0.0</span>, y = <span class="number">0.0</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">isToTheRightOfX</span><span class="params">(x:Double)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">self</span>.x &gt; x<span class="comment">//使用self.x指明使用属性x而不是参数x</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> somePoint = <span class="type">Point</span>(x:<span class="number">4.0</span>, y:<span class="number">5.0</span>)</span><br><span class="line"><span class="keyword">if</span> somePoint.isToTheRightOfX(<span class="number">1.0</span>)&#123;</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">"This point to the right of the line where x == 1.0"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="11-1-4-在实例方法中修改值类型"><a href="#11-1-4-在实例方法中修改值类型" class="headerlink" title="11.1.4  在实例方法中修改值类型"></a>11.1.4  在实例方法中修改值类型</h3><blockquote>
<p><strong>背景</strong>：值类型（结构体和枚举）的属性不能在普通实例方法中被修改<br><strong>说明</strong>：关键字<code>mutating</code> 放到方法的<code>func</code>关键字之前，使变量实例属性的方法具备修改实例中的属性（包括<code>self</code>）的能力。<br><strong>注意</strong>：不能在结构体类型的常量上调用可变方法，因为此时所有属性都无法修改。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> x = <span class="number">0.0</span>, y = <span class="number">0.0</span></span><br><span class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">moveByX</span><span class="params">(deltaX:Double,y deltaY:Double)</span></span>&#123;</span><br><span class="line">        x += deltaX</span><br><span class="line">        y += deltaY</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> somePoint = <span class="type">Point</span>(x:<span class="number">4.0</span>, y:<span class="number">5.0</span>)<span class="comment">//声明为let再调用mutating方法将报错</span></span><br><span class="line">somePoint.moveByX(<span class="number">2.0</span>, y: <span class="number">3.0</span>)</span><br></pre></td></tr></table></figure>
<h3 id="11-1-5-在变异方法中给self赋值-通过mutating"><a href="#11-1-5-在变异方法中给self赋值-通过mutating" class="headerlink" title="11.1.5  在变异方法中给self赋值(通过mutating)"></a>11.1.5  在变异方法中给self赋值(通过<code>mutating</code>)</h3><blockquote>
<p><strong>说明：</strong>可变方法能够赋给隐含属性self一个全新的实例</p>
<h4 id="结构体中使用"><a href="#结构体中使用" class="headerlink" title="结构体中使用"></a>结构体中使用</h4></blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> x = <span class="number">0.0</span>, y = <span class="number">0.0</span></span><br><span class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">moveByX</span><span class="params">(deltaX:Double,y deltaY:Double)</span></span>&#123;</span><br><span class="line">        <span class="keyword">self</span> = <span class="type">Point</span>(x: x + deltaX, y: y + deltaY)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> somePoint = <span class="type">Point</span>(x:<span class="number">4.0</span>, y:<span class="number">5.0</span>)<span class="comment">//声明为let再调用mutating方法将报错</span></span><br><span class="line">somePoint.moveByX(<span class="number">2.0</span>, y: <span class="number">3.0</span>)</span><br></pre></td></tr></table></figure>
<h4 id="枚举中使用"><a href="#枚举中使用" class="headerlink" title="枚举中使用"></a>枚举中使用</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义一个三态开关的枚举，具备循环切换状态的能力</span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">TriStateSwitch</span></span>&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Off</span>, <span class="type">Low</span>, <span class="type">High</span></span><br><span class="line">    <span class="comment">//该方法的每次调用都会导致值的改变（通过修改self）</span></span><br><span class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">next</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> <span class="keyword">self</span>&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="type">Off</span>:</span><br><span class="line">            <span class="keyword">self</span> = <span class="type">Low</span></span><br><span class="line">        <span class="keyword">case</span> <span class="type">Low</span>:</span><br><span class="line">            <span class="keyword">self</span> = <span class="type">High</span></span><br><span class="line">        <span class="keyword">case</span> <span class="type">High</span>:</span><br><span class="line">            <span class="keyword">self</span> = <span class="type">Off</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> ovenLight = <span class="type">TriStateSwitch</span>.<span class="type">Low</span></span><br><span class="line">ovenLight.next()<span class="comment">//.High</span></span><br><span class="line">ovenLight.next()<span class="comment">//.Off</span></span><br></pre></td></tr></table></figure>
<h2 id="11-2-类型（静态）方法"><a href="#11-2-类型（静态）方法" class="headerlink" title="11.2    类型（静态）方法"></a>11.2    类型（静态）方法</h2><blockquote>
<p><strong>关键字：</strong>使用的关键字同类型（静态）属性。</p>
</blockquote>
<table>
<thead>
<tr>
<th>类型</th>
<th>关键字</th>
</tr>
</thead>
<tbody>
<tr>
<td>类</td>
<td><code>class</code></td>
</tr>
<tr>
<td>结构体、枚举</td>
<td><code>static</code></td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>说明：</strong>类型方法和实例方法一样用<code>点语法</code>调用</p>
<ol>
<li><code>self</code>属性指向类型本身</li>
<li>静态(类型)方法法中<code>能也只能</code>直接（不需要类型名称前缀）访问其它静态方法和属性</li>
</ol>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">LevelTracker</span></span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> highestUnlocked = <span class="number">1</span></span><br><span class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">unlockLevel</span><span class="params">(level:Int)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> level &gt; highestUnlocked&#123;</span><br><span class="line">            highestUnlocked = level</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//静态方法中访问静态变量</span></span><br><span class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">levelIsUnlocked</span><span class="params">(level:Int)</span></span>-&gt;<span class="type">Bool</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> level &lt;= highestUnlocked</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> currentLevel = <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//变异实例方法中修改实例属性的值（只有当实例赋值为变量时）</span></span><br><span class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">advanceToLevel</span><span class="params">(level:Int)</span></span>-&gt;<span class="type">Bool</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="type">LevelTracker</span>.levelIsUnlocked(level)&#123;</span><br><span class="line">            currentLevel = level</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeClass</span> </span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">someMethod</span>()</span>&#123;</span><br><span class="line">        <span class="comment">//type method implementation goes here</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">SomeClass</span>.someMethod()</span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/13/TSPL2_10  属性/" itemprop="url">
                  10 属性
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-13T19:45:28+08:00" content="2016-05-13">
              2016-05-13
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/13/TSPL2_10  属性/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/13/TSPL2_10  属性/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p><strong>按从属区分</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th><strong>属性类型</strong></th>
<th><strong>特点</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>类型属性</td>
<td>类型本身的属性</td>
</tr>
<tr>
<td>实例属性</td>
<td>特定类型的实例的属性</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>按存储数据的方式区分</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th><strong>属性类型</strong></th>
<th><strong>特点</strong></th>
<th><strong>限制</strong></th>
<th><strong>定义方式</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>存储属性</td>
<td>存储常量或变量作为实例的一部分</td>
<td>类、结构体</td>
<td><code>let</code>、<code>var</code></td>
</tr>
<tr>
<td>计算属性</td>
<td>通过计算获取值的，值是不固定的</td>
<td>类、结构体、枚举</td>
<td><code>var</code></td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>计算属性分类</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th><strong>计算属性</strong></th>
<th><strong>特点</strong></th>
<th><strong>定义方式</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>读写计算属性</td>
<td>既可以获取值，也可以设置值</td>
<td>只提供getter没有setter</td>
</tr>
<tr>
<td>只读计算属性</td>
<td>总是返回一个值，可以通过点运算符访问，但不能设置新的值。</td>
<td>同时设置getter和setter</td>
</tr>
</tbody>
</table>
<h2 id="10-1-存储属性-Stored-Properties"><a href="#10-1-存储属性-Stored-Properties" class="headerlink" title="10.1    存储属性(Stored Properties)"></a>10.1    存储属性(Stored Properties)</h2><table>
<thead>
<tr>
<th><strong>存储属性类型</strong></th>
<th><strong>定义方式</strong></th>
<th><strong>特点</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>变量存储属性</td>
<td>使用<code>var</code>定义</td>
<td>可以修改</td>
</tr>
<tr>
<td>常量存储属性</td>
<td>使用<code>let</code>定义</td>
<td>初始化后不可修改</td>
</tr>
</tbody>
</table>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.声明一个结构体</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">FixedLengthRange</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> firstValue:<span class="type">Int</span></span><br><span class="line">    <span class="keyword">let</span> length:<span class="type">Int</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2.创建结构体实例</span></span><br><span class="line"><span class="keyword">var</span> rangeOfThreeItems = <span class="type">FixedLengthRange</span>(firstValue: <span class="number">0</span>, length: <span class="number">3</span>)</span><br><span class="line"><span class="comment">//3.修改结构体实例的变量存储属性</span></span><br><span class="line">rangeOfThreeItems.firstValue = <span class="number">6</span></span><br></pre></td></tr></table></figure>
<h3 id="10-1-1-常量结构体实例和常量类实例的存储属性"><a href="#10-1-1-常量结构体实例和常量类实例的存储属性" class="headerlink" title="10.1.1    常量结构体实例和常量类实例的存储属性"></a>10.1.1    常量结构体实例和常量类实例的存储属性</h3><blockquote>
<p><strong>说明：</strong>创建了一个结构体的实例并将其赋值给一个常量，则无法修改该实例的任何属性，即使定义了变量存储属性</p>
</blockquote>
<table>
<thead>
<tr>
<th><strong>特指</strong></th>
<th><strong>被赋值给常量</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>结构体(struct)实例</td>
<td>它的所有属性（包括<code>var</code>声明的）也就成了常量。</td>
</tr>
<tr>
<td>类(class)实例</td>
<td>仍然可以修改实例的变量属性（<code>var</code>）</td>
</tr>
</tbody>
</table>
<h3 id="10-1-2-延迟存储属性"><a href="#10-1-2-延迟存储属性" class="headerlink" title="10.1.2    延迟存储属性"></a>10.1.2    延迟存储属性</h3><blockquote>
<p><strong>关键字：</strong><code>lazy</code><br><strong>说明：</strong>第一次被调用的时候才会计算其初始值的属性<br><strong>注意：</strong>必须将延迟存储属性声明为变量(<code>var</code>)，因为常量属性在构造完成之前必须要有初始值，延迟属性不能保证这一点。<br><strong>应用</strong>：</p>
<ol>
<li>当属性的值依赖于在实例的构造过程结束前无法知道具体值的外部因素时</li>
<li>当属性的值需要复杂或大量计算时</li>
</ol>
</blockquote>
<pre><code>class DataImporter {
    /*
    DataImporter是一个将外部文件中的数据导入的类。这个类的初始化会消耗不少时间。
    */
    var fileName = &quot;data.txt&quot;;
}

class DataManager {
    lazy var impoter = DataImporter()
    var data = [String]()
    //这里提供数据管理功能
}
let manager = DataManager()
manager.data.append(&quot;Some data&quot;)
manager.data.append(&quot;Some more data&quot;)
//DataImporter实例的importer属性还没有被创建

println(manager.impoter.fileName)//DataImporter的实例现在被创建了，输出&quot;data.txt&quot;
</code></pre><h3 id="10-1-3-存储属性和实例变量"><a href="#10-1-3-存储属性和实例变量" class="headerlink" title="10.1.3    存储属性和实例变量"></a>10.1.3    存储属性和实例变量</h3><blockquote>
<p>说明：<code>swift</code>的属性没有对应的实例变量，属性的后端存储也无法直接访问。</p>
</blockquote>
<h2 id="10-2-计算属性"><a href="#10-2-计算属性" class="headerlink" title="10.2    计算属性"></a>10.2    计算属性</h2><blockquote>
<p><strong>说明：</strong>计算属性不直接存储值，而是提供一个 <code>getter</code> 和一个可选的 <code>setter</code>，来间接获取和设置其他属性或变量的值。</p>
<ul>
<li>定义<code>getter</code>计算并返回属性值</li>
<li>定义可选的<code>setter</code>间接设置其它属性或变量的值。</li>
</ul>
<p><strong>注意</strong>:创建实例时可以不必为计算属性赋值，因为计算属性并不存储值，而是通过计算动态得出的。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> x = <span class="number">0.0</span>,y = <span class="number">0.0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Size</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> width = <span class="number">0.0</span>, height = <span class="number">0.0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Rect</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> origin = <span class="type">Point</span>()</span><br><span class="line">    <span class="keyword">var</span> size = <span class="type">Size</span>()</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//计算属性</span></span><br><span class="line">    <span class="keyword">var</span> center:<span class="type">Point</span>&#123;</span><br><span class="line">        <span class="keyword">get</span>&#123;</span><br><span class="line">            <span class="keyword">let</span> centerX = origin.x + (size.width / <span class="number">2</span>)</span><br><span class="line">            <span class="keyword">let</span> centerY = origin.y + (size.height / <span class="number">2</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="type">Point</span>(x:centerX, y:centerY)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">set</span>(newCenter)&#123;</span><br><span class="line">            origin.x = newCenter.x - (size.width / <span class="number">2</span>)</span><br><span class="line">            origin.y = newCenter.y - (size.height / <span class="number">2</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> square = <span class="type">Rect</span>(origin: <span class="type">Point</span>(x:<span class="number">15.0</span>,y:<span class="number">0.0</span>), size: <span class="type">Size</span>(width: <span class="number">10.0</span>, height: <span class="number">10.0</span>))</span><br><span class="line"><span class="keyword">let</span> initialSquareCenter = <span class="type">Point</span>(x:<span class="number">15.0</span>, y:<span class="number">15.0</span>)</span><br><span class="line"><span class="built_in">println</span>(<span class="string">"Square.origin is now at (\(square.origin.x),\(square.origin.y))"</span>)</span><br></pre></td></tr></table></figure>
<h3 id="10-2-1-便捷setter声明"><a href="#10-2-1-便捷setter声明" class="headerlink" title="10.2.1    便捷setter声明"></a>10.2.1    便捷setter声明</h3><blockquote>
<p><strong>说明</strong>:如果计算属性的<code>setter</code>没有定义标识新值的参数名，则可以使用默认名称<code>newValue</code>。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//不使用便捷setter声明</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Rect</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> origin = <span class="type">Point</span>()</span><br><span class="line">    <span class="keyword">var</span> size = <span class="type">Size</span>()</span><br><span class="line">    <span class="keyword">var</span> center:<span class="type">Point</span>&#123;</span><br><span class="line">        <span class="keyword">get</span>&#123;</span><br><span class="line">            <span class="keyword">let</span> centerX = origin.x + (size.width / <span class="number">2</span>)</span><br><span class="line">            <span class="keyword">let</span> centerY = origin.y + (size.height / <span class="number">2</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="type">Point</span>(x:centerX, y:centerY)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">set</span>(newCenter)&#123;</span><br><span class="line">            origin.x = newCenter.x - (size.width / <span class="number">2</span>)</span><br><span class="line">            origin.y = newCenter.y - (size.height / <span class="number">2</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用便捷setter声明</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">AlternativeRect</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> origin = <span class="type">Point</span>()</span><br><span class="line">    <span class="keyword">var</span> size = <span class="type">Size</span>()</span><br><span class="line">    <span class="keyword">var</span> center:<span class="type">Point</span>&#123;</span><br><span class="line">        <span class="keyword">get</span>&#123;</span><br><span class="line">            <span class="keyword">let</span> centerX = origin.x + (size.width / <span class="number">2</span>)</span><br><span class="line">            <span class="keyword">let</span> centerY = origin.y + (size.height / <span class="number">2</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="type">Point</span>(x:centerX, y:centerY)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">set</span>&#123;</span><br><span class="line">            origin.x = newValue.x - (size.width / <span class="number">2</span>)</span><br><span class="line">            origin.y = newValue.y - (size.height / <span class="number">2</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">```	</span><br><span class="line"></span><br><span class="line">### <span class="number">10.2</span>.<span class="number">2</span> 只读计算属性</span><br><span class="line">&gt;**说明：**只有 `getter` 没有 `setter` 的计算属性就是只读计算属性</span><br><span class="line">&gt;**用途**：当一个属性的值完全只需要计算得出而不需要设置值时。</span><br><span class="line"></span><br><span class="line">```swift</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Cuboid</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> width = <span class="number">0.0</span>, height = <span class="number">0.0</span>, depth = <span class="number">0.0</span></span><br><span class="line">    <span class="keyword">var</span> volume:<span class="type">Double</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> width * height * depth</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> fourByFiveByTwo = <span class="type">Cuboid</span>(width: <span class="number">4.0</span>, height: <span class="number">5.0</span>, depth: <span class="number">2.0</span>)</span><br><span class="line"><span class="built_in">println</span>(<span class="string">"the volume of fourByFiveByTwo is 40.0"</span>)</span><br></pre></td></tr></table></figure>
<h2 id="10-3-属性观察器"><a href="#10-3-属性观察器" class="headerlink" title="10.3    属性观察器"></a>10.3    属性观察器</h2><blockquote>
<p><strong>说明：</strong>属性观察器监控和响应属性值的变化，每次属性被设置值的时候都会调用属性观察器，甚至新值和当前值相同的时候也不例外。</p>
</blockquote>
<h3 id="10-3-1-哪些属性可以定义属性观察器？"><a href="#10-3-1-哪些属性可以定义属性观察器？" class="headerlink" title="10.3.1    哪些属性可以定义属性观察器？"></a>10.3.1    哪些属性可以定义属性观察器？</h3><table>
<thead>
<tr>
<th><strong>可以设置属性观察器</strong></th>
<th><strong>不可以设置属性观察器</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>结构体、类的静态(类型)属性和实例属性</td>
<td>类无法重载的计算属性</td>
</tr>
<tr>
<td>类继承的属性</td>
<td>延迟存储属性</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>注意</strong>：不需要为无法重载的计算属性添加属性观察器，因为可以通过<code>setter</code>直接监控和响应值的变化。</p>
</blockquote>
<h3 id="10-3-2-属性观察器有哪几种？"><a href="#10-3-2-属性观察器有哪几种？" class="headerlink" title="10.3.2    属性观察器有哪几种？"></a>10.3.2    属性观察器有哪几种？</h3><table>
<thead>
<tr>
<th>属性观察器</th>
<th>调用时机</th>
<th>参数</th>
<th>参数默认名</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>willSet</code></td>
<td>在设置新的值之前调用</td>
<td>新的属性的值</td>
<td>newValue</td>
</tr>
<tr>
<td><code>didSet</code></td>
<td>在新的值被设置之后被调用</td>
<td>旧的属性值</td>
<td>oldValue</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>注意</strong>：<code>willSet</code>和<code>didSet</code>观察器只会当属性的值在初始化之外的地方被设置时调用。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StepCounter</span> </span>&#123;</span><br><span class="line">	    <span class="comment">//定义一个属性及其属性观察器</span></span><br><span class="line">    <span class="keyword">var</span> totalSteps:<span class="type">Int</span> = <span class="number">0</span>&#123;</span><br><span class="line">        <span class="comment">//在设置新值之前调用</span></span><br><span class="line">        <span class="keyword">willSet</span>(newTotalSteps)&#123;</span><br><span class="line">            <span class="built_in">println</span>(<span class="string">"About to set totalSteps to \(newTotalSteps)"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//在新值被设置之后调用</span></span><br><span class="line">        <span class="keyword">didSet</span>&#123;</span><br><span class="line">            <span class="keyword">if</span> totalSteps &gt; oldValue&#123;</span><br><span class="line">                <span class="built_in">println</span>(<span class="string">"aDDED \(totalSteps - oldValue) steps"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> stepCounter = <span class="type">StepCounter</span>()</span><br><span class="line">stepCounter.totalSteps = <span class="number">200</span></span><br><span class="line"><span class="comment">//About to set totalSteps to 200</span></span><br><span class="line"><span class="comment">//Added 200 steps</span></span><br></pre></td></tr></table></figure>
<h2 id="10-4-全局变量和局部变量"><a href="#10-4-全局变量和局部变量" class="headerlink" title="10.4 全局变量和局部变量"></a>10.4 全局变量和局部变量</h2><table>
<thead>
<tr>
<th><em>**</em></th>
<th>全局变量</th>
<th>局部变量</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>定义</strong></td>
<td>函数、方法、闭包或任何类型之外定义的变量</td>
<td>函数、方法或必包内部定义的变量</td>
</tr>
<tr>
<td><strong>默认是否延迟计算</strong></td>
<td>是</td>
<td>否（除非使用<code>lazy</code>）</td>
</tr>
<tr>
<td><strong>是否可以定义计算属性</strong></td>
<td>是</td>
<td>是</td>
</tr>
<tr>
<td><strong>是否可以为存储型变量定义观察器</strong></td>
<td>是</td>
<td>是</td>
</tr>
</tbody>
</table>
<h2 id="10-5-类型属性"><a href="#10-5-类型属性" class="headerlink" title="10.5    类型属性"></a>10.5    类型属性</h2><blockquote>
<p><strong>用途</strong>：用于定义特定类型所有实例共享的数据。<br><strong>注意</strong>：必须给存储类型属性设置默认值，因为类型本身无法在初始化过程中使用构造函器给类型属性赋值。<br><strong>说明：</strong>无论创建了多少个该类型的实例，这些属性都只有唯一一份。这种属性就是类型属性。</p>
</blockquote>
<table>
<thead>
<tr>
<th>分类</th>
<th>存储型类型属性</th>
<th>计算型类型属性</th>
</tr>
</thead>
<tbody>
<tr>
<td>可以定义该类型属性的类型</td>
<td><code>struct</code>、<code>enum</code></td>
<td><code>struct</code>、<code>enum</code>、<code>class</code></td>
</tr>
<tr>
<td>可以为变量或常量</td>
<td>变量、常量</td>
<td>变量</td>
</tr>
<tr>
<td>是否需要指定默认值</td>
<td>是</td>
<td>否</td>
</tr>
</tbody>
</table>
<h3 id="10-5-1-类型属性语法"><a href="#10-5-1-类型属性语法" class="headerlink" title="10.5.1  类型属性语法"></a>10.5.1  类型属性语法</h3><blockquote>
<p><strong>说明：</strong>使用关键字static来定义类型属性。在为类定义计算型类型属性时，可以改用关键字class来支持子类对父类的实现进行重写</p>
</blockquote>
<table>
<thead>
<tr>
<th>定义类型属性的关键字</th>
<th>使用类型</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>static</code></td>
<td>值类型（结构体、枚举）</td>
</tr>
<tr>
<td><code>class</code></td>
<td>类</td>
</tr>
</tbody>
</table>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//结构体</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SomeStructure</span> </span>&#123;</span><br><span class="line">    <span class="comment">//存储型类型属性</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> storedTypeProperty = <span class="string">"Some value"</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//计算型类型属性（只读）</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> computedTypeProperty:<span class="type">Int</span>&#123;</span><br><span class="line">        <span class="comment">//这里返回一个int值</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//枚举类型</span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">SomeEnumeration</span></span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> storedTypeProperty = <span class="string">"Some value"</span>  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeClass</span></span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">var</span> <span class="title">computedTypeProperty</span>:<span class="title">Int</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="10-5-2-获取和设置类型属性的值"><a href="#10-5-2-获取和设置类型属性的值" class="headerlink" title="10.5.2  获取和设置类型属性的值"></a>10.5.2  获取和设置类型属性的值</h3><blockquote>
<p><strong>说明：</strong><code>类型名.类型属性</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">AudioChannel</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">let</span> thresholdLevel = <span class="number">10</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> maxInputLevelForAllChannels = <span class="number">0</span></span><br><span class="line">    <span class="keyword">var</span> currentLevel:<span class="type">Int</span> = <span class="number">0</span> &#123;</span><br><span class="line">        <span class="keyword">didSet</span>&#123;</span><br><span class="line">            <span class="keyword">if</span> currentLevel &gt; <span class="type">AudioChannel</span>.thresholdLevel&#123;</span><br><span class="line">                <span class="comment">//将新电平值设置为阀值</span></span><br><span class="line">                currentLevel = <span class="type">AudioChannel</span>.thresholdLevel</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> currentLevel &gt; <span class="type">AudioChannel</span>.maxInputLevelForAllChannels&#123;</span><br><span class="line">                <span class="comment">//存储当前电平值作为新的最大输入电平</span></span><br><span class="line">                <span class="type">AudioChannel</span>.maxInputLevelForAllChannels = currentLevel</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> leftChannel = <span class="type">AudioChannel</span>()</span><br><span class="line"><span class="keyword">var</span> rightChannel = <span class="type">AudioChannel</span>()</span><br><span class="line"></span><br><span class="line">leftChannel.currentLevel = <span class="number">7</span></span><br><span class="line"><span class="built_in">println</span>(leftChannel.currentLevel)<span class="comment">//7</span></span><br><span class="line"><span class="built_in">println</span>(<span class="type">AudioChannel</span>.maxInputLevelForAllChannels)<span class="comment">//7</span></span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/13/TSPL2_09  类和结构体/" itemprop="url">
                  9 类和结构体
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-13T19:44:57+08:00" content="2016-05-13">
              2016-05-13
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/13/TSPL2_09  类和结构体/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/13/TSPL2_09  类和结构体/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="9-1-类和结构体对比"><a href="#9-1-类和结构体对比" class="headerlink" title="9.1    类和结构体对比"></a>9.1    类和结构体对比</h2><blockquote>
<p><strong>背景:</strong></p>
<ol>
<li>不需要为自定义类和结构创建独立的接口和实现文件，系统会自动生成面向其它代码的外部接口  </li>
<li>类和结构体的关系比其它语言更加紧密  </li>
<li>结构体总是通过被复制的方式在代码中传递，因此请不要使用引用计数</li>
</ol>
</blockquote>
<h3 id="相同点"><a href="#相同点" class="headerlink" title="相同点"></a>相同点</h3><ol>
<li>定义属性用于存储值</li>
<li>定义方法用于提供功能</li>
<li>定义附属脚本用于访问值</li>
<li>定义构造器用于生成初始化值</li>
<li>通过扩展增加默认实现的功能</li>
<li>实现协议以提供某种标准功能</li>
</ol>
<h3 id="类比结构体多的附加功能"><a href="#类比结构体多的附加功能" class="headerlink" title="类比结构体多的附加功能"></a>类比结构体多的附加功能</h3><ol>
<li>继承允许一个类继承另一个类的特征</li>
<li>类型转换允许在运行时检查和解释一个类实例的类型</li>
<li>解构器允许一个类实例释放任何其所分配的资源</li>
<li>引用计数允许对一个类的多次引用</li>
</ol>
<h3 id="9-1-1-定义"><a href="#9-1-1-定义" class="headerlink" title="9.1.1    定义"></a>9.1.1    定义</h3><blockquote>
<p><strong>语法：</strong>类和结构体</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeClass</span> </span>&#123;</span><br><span class="line">    <span class="comment">// class definition goes here</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 结构体</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SomeStructure</span> </span>&#123;</span><br><span class="line">    <span class="comment">// structure definition goes here</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>命名风格</strong>：为了将<code>Swift</code>类型和其它标记的命名区分开，命名最好遵从一定规范</p>
<ol>
<li>类或结构体的命名必须符合Swift类型的大写命名风格（<code>UpperCamelCase</code>）</li>
<li>属性和方法命名要符合Swift类型的小写命名风格（<code>lowerCamelCase</code>）</li>
</ol>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义一个结构体</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Resolution</span></span>&#123;</span><br><span class="line">    <span class="comment">//包含两个存储属性</span></span><br><span class="line">    <span class="keyword">var</span> width = <span class="number">0</span></span><br><span class="line">    <span class="keyword">var</span> height = <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//定义一个类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VideoMode</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> resolution = <span class="type">Resolution</span>()</span><br><span class="line">    <span class="keyword">var</span> interlaced = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">var</span> frameRate = <span class="number">0.0</span></span><br><span class="line">    <span class="keyword">var</span> name:<span class="type">String</span>?</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="9-1-2-类和结构体实例"><a href="#9-1-2-类和结构体实例" class="headerlink" title="9.1.2    类和结构体实例"></a>9.1.2    类和结构体实例</h3><blockquote>
<p><strong>最简单形式</strong>：<code>结构体或者类的类型名称()</code></p>
<ul>
<li>属性会被初始化为默认值</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> someResolution = <span class="type">Resolution</span>()<span class="comment">//创建结构体实例</span></span><br><span class="line"><span class="keyword">let</span> someVideoMode = <span class="type">VideoMode</span>()<span class="comment">//创建类实例</span></span><br></pre></td></tr></table></figure>
<h3 id="9-1-3-属性访问"><a href="#9-1-3-属性访问" class="headerlink" title="9.1.3    属性访问"></a>9.1.3    属性访问</h3><blockquote>
<p><strong>说明</strong>：点语法（dot syntax）<br><strong>注意</strong>：Swift允许直接设置结构体属性的<code>子属性</code>（不同于o-c）</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">println</span>(<span class="string">"The width of someResolution is \(someResolution.width)"</span>)<span class="comment">//访问结构体实例的属性</span></span><br><span class="line">someVideoMode.resolution.width = <span class="number">1280</span><span class="comment">//为结构体的属性的字属性赋值</span></span><br><span class="line"><span class="built_in">println</span>(<span class="string">"The width of someVideoMode is now \(someVideoMode.resolution.width)"</span>)<span class="comment">//访问结构体属性的字属性</span></span><br></pre></td></tr></table></figure>
<h3 id="9-1-4-结构体类型的成员逐一构造器"><a href="#9-1-4-结构体类型的成员逐一构造器" class="headerlink" title="9.1.4        结构体类型的成员逐一构造器"></a>9.1.4        结构体类型的成员逐一构造器</h3><blockquote>
<p><strong>说明</strong>：结构体自动生成（类实例没有默认的成员逐一构造器）<br><strong>用途：</strong>始化新结构体实例中成员的属性<br><strong>调用</strong>：将结构体实例中<code>各个属性的初始值</code>，通过<code>属性的名称</code>传递到<code>成员逐一构造器</code>之中</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 调用逐一成员构造器</span></span><br><span class="line"><span class="keyword">let</span> vga = <span class="type">Resolution</span>(width: <span class="number">640</span>, height: <span class="number">480</span>);</span><br></pre></td></tr></table></figure>
<h2 id="9-2-结构体和枚举是值类型"><a href="#9-2-结构体和枚举是值类型" class="headerlink" title="9.2    结构体和枚举是值类型"></a>9.2    结构体和枚举是值类型</h2><blockquote>
<p><strong>值类型特点</strong>：值类型被<code>赋给一个常量(变量)</code>或者被<code>传递给一个函数</code>的时候，实际上操作的是其<code>副本</code>。<br><strong>扩展</strong>：所有<code>基本数据类型</code>在都是通过<code>结构体</code>来实现的。</p>
</blockquote>
<table>
<thead>
<tr>
<th>值类型</th>
<th>引用类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>整数(Integer)</td>
<td>类(Class)</td>
</tr>
<tr>
<td>浮点数(floating-point)</td>
<td></td>
</tr>
<tr>
<td>布尔值(Booleans)</td>
<td></td>
</tr>
<tr>
<td>字符串(string)</td>
<td></td>
</tr>
<tr>
<td>数组(array)</td>
<td></td>
</tr>
<tr>
<td>字典(directionaries)</td>
<td></td>
</tr>
<tr>
<td>结构体(struc)</td>
<td></td>
</tr>
<tr>
<td>枚举(enum)</td>
</tr>
</tbody>
</table>
<p>&gt;</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//结构体是值类型</span></span><br><span class="line"><span class="keyword">let</span> hd = <span class="type">Resolution</span>(width: <span class="number">1920</span>, height: <span class="number">1080</span>)</span><br><span class="line"><span class="keyword">var</span> cinema = hd</span><br><span class="line">cinema.width = <span class="number">2048</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">println</span>(<span class="string">"cinema is now \(cinema.width) pixels wide"</span>)<span class="comment">//2048</span></span><br><span class="line"><span class="built_in">println</span>(<span class="string">"hd is still \(hd.width) pixels wide"</span>)<span class="comment">//1920</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//枚举类型也是值类型</span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">CompassPoint</span></span>&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">North</span>, <span class="type">South</span>, <span class="type">East</span>, <span class="type">West</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> currentDirection = <span class="type">CompassPoint</span>.<span class="type">West</span></span><br><span class="line"><span class="keyword">let</span> rememberedDirection = currentDirection</span><br><span class="line">currentDirection = .<span class="type">East</span></span><br><span class="line"><span class="keyword">if</span> rememberedDirection == .<span class="type">West</span>&#123;<span class="comment">//拷贝赋值并不影响原始值</span></span><br><span class="line">    <span class="built_in">println</span>(<span class="string">"The remembered direction is still .West"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="9-3-类是引用类型"><a href="#9-3-类是引用类型" class="headerlink" title="9.3    类是引用类型"></a>9.3    类是引用类型</h2><blockquote>
<p><strong>说明：</strong>被赋予到一个变量、常量或者被传递到一个函数时，引用的是已存在的实例本身而不是其拷贝。<br><strong>注意</strong>：用类型的实例即使被声明为常量，成员的值依然可以改变，因为改变实例的内容并没有改变引用用本身（因为引用不过是个地址）。</p>
</blockquote>
<pre><code class="swift"><span class="comment">//创建类实例</span>
<span class="keyword">let</span> tenEighty = <span class="type">VideoMode</span>()
tenEighty.resolution = hd
tenEighty.interlaced = <span class="literal">true</span>
tenEighty.name = <span class="string">"1080i"</span>
tenEighty.frameRate = <span class="number">25.0</span>

<span class="keyword">let</span> alseTenEighty = tenEighty
alseTenEighty.frameRate = <span class="number">30.0</span>

<span class="built_in">println</span>(<span class="string">"The frameRate property of tenEighty is now \(tenEighty.frameRate)"</span>)
</code></pre>
<h3 id="9-3-1-恒等运算符"><a href="#9-3-1-恒等运算符" class="headerlink" title="9.3.1    恒等运算符"></a>9.3.1    恒等运算符</h3><blockquote>
<p><strong>说明：</strong><code>!===</code>、<code>===</code></p>
</blockquote>
<table>
<thead>
<tr>
<th>区分</th>
<th>含义</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>===</code></td>
<td>恒等于</td>
<td>引用同一个类实例</td>
</tr>
<tr>
<td><code>==</code></td>
<td>等于</td>
<td>两个实例的值<code>相等</code>或<code>相同</code>（遵照设计者定义的评判标准）</td>
</tr>
</tbody>
</table>
<h3 id="9-3-2-指针"><a href="#9-3-2-指针" class="headerlink" title="9.3.2    指针"></a>9.3.2    指针</h3><blockquote>
<p><strong>说明：</strong>引用类似c中的指针（swift没有指针），区别于指针，引用的特点如下</p>
<ol>
<li>和其它常量或变量的定义方式相同</li>
<li>并不直接指向内存中的某个地址</li>
<li>不要求使用<code>*</code>来表明创建一个引用</li>
</ol>
</blockquote>
<h2 id="9-4-类和结构体的选择"><a href="#9-4-类和结构体的选择" class="headerlink" title="9.4    类和结构体的选择"></a>9.4    类和结构体的选择</h2><blockquote>
<p><strong>关键区别</strong>：结构体实例总是通过值传递，类实例总是通过引用传递。<br><strong>技巧</strong>：除非是以下情况，绝大多数自定义数据结构都应该该是类，而非结构体。</p>
<ul>
<li>封装少量相关简单数据值</li>
<li>封装的数据会被拷贝，而不是引用</li>
<li>属性会被拷贝而不是引用</li>
<li>不需要继承另一个已经存在的类型的属性或者行为</li>
</ul>
</blockquote>
<h2 id="9-5-集合类型的赋值与拷贝行为"><a href="#9-5-集合类型的赋值与拷贝行为" class="headerlink" title="9.5    集合类型的赋值与拷贝行为"></a>9.5    集合类型的赋值与拷贝行为</h2><blockquote>
<p><strong>集合类型：</strong><code>String</code>，<code>Array</code>和<code>Dictionary</code>（均以结构体的形式实现）<br><strong>说明</strong>：所有以结构体方式实现的数据类型在被赋值给常量（或变量）以及传入函数（或方法）中时，它们的值就会发生拷贝行为。<br><strong>注意</strong>：没必要避免拷贝来保证最有性能，因为在swift会进行相应优化：只有确有必要，实际的拷贝才会执行。<br><strong>扩展：</strong><code>Objective-C</code> 中<code>NSString</code>，<code>NSArray</code>和<code>NSDictionary</code>类型均以类的形式实现，而并非结构体。</p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/13/TSPL2_08  枚举类型/" itemprop="url">
                  8 枚举类型
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-13T19:44:27+08:00" content="2016-05-13">
              2016-05-13
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/13/TSPL2_08  枚举类型/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/13/TSPL2_08  枚举类型/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p><strong>说明：</strong>枚举为一组相关的值定义了一个共同的类型，使你可以在你的代码中以类型安全的方式来使用这些值。<br><strong>更加灵活：</strong></p>
<ul>
<li><strong>原始值不是必需的：</strong>不必给每一个枚举成员提供一个值（原始值）</li>
<li><strong>原始值类型：</strong>原始值的类型可以是<code>字符串</code>、<code>字符</code>、<code>整型值</code>或<code>浮点数</code></li>
<li><strong>关联值：</strong>枚举成员可以指定任意类型的关联值存储到枚举成员中</li>
</ul>
<p><strong>一等类型：</strong>采用了很多在传统上只被类（class）所支持的特性</p>
<ul>
<li><strong>计算型属性：</strong>用于提供枚举值的附加信息</li>
<li><strong>实例方法：</strong>用于提供和枚举值相关联的功能</li>
<li><strong>构造函数：</strong>来提供一个初始值</li>
<li><strong>动态扩展：</strong>可以在原始实现的基础上扩展它们的功能</li>
<li><strong>实现协议：</strong>还可以遵守协议（protocols）来提供标准的功能</li>
</ul>
</blockquote>
<h2 id="8-1-枚举语法"><a href="#8-1-枚举语法" class="headerlink" title="8.1    枚举语法"></a>8.1    枚举语法</h2><blockquote>
<p><strong>语法：</strong>使用<code>enum</code>关键词来创建枚举并且把它们的整个定义放在一对<code>{}</code>内，使用<code>case</code>关键字来定义一个新的枚举成员值。</p>
<ul>
<li><strong>没有默认原始值：</strong>枚举成员在被创建时<code>不会被赋予</code>一个<code>默认的整型值</code>(与 C 和 Objective-C 不同)</li>
<li><strong><code>case</code>后多个成员值：</strong>多个成员值可以出现在同一行上，用<code>,</code>隔开</li>
<li><strong>枚举类型名：</strong>每个枚举定义了一个全新的类型，它们的名字应该<code>以一个大写字母开头</code>（像 Swift 中其他类型一样）</li>
<li><strong>省略类型名：</strong>当变量或常量的类型已知是某种枚举类型时时，再次为其赋值可以省略相应枚举类型名。</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">SomeEnumeration</span></span>&#123;</span><br><span class="line">    <span class="keyword">case</span> 成员<span class="number">1</span></span><br><span class="line">    <span class="keyword">case</span> 成员<span class="number">2</span></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// case后一个成员值的情况</span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">CompassPoint</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">North</span></span><br><span class="line">    <span class="keyword">case</span> <span class="type">South</span></span><br><span class="line">    <span class="keyword">case</span> <span class="type">East</span></span><br><span class="line">    <span class="keyword">case</span> <span class="type">West</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// case后多个成员值的情况</span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Planet</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Mercury</span>, <span class="type">Venus</span>, <span class="type">Earth</span>, <span class="type">Mars</span>, <span class="type">Jupiter</span>, <span class="type">Saturn</span>, <span class="type">Uranus</span>, <span class="type">Neptune</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 枚举值的声明和赋值</span></span><br><span class="line"><span class="keyword">var</span> directionToHead = <span class="type">CompassPoint</span>.<span class="type">West</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 类型推断</span></span><br><span class="line">directionToHead = .<span class="type">East</span></span><br></pre></td></tr></table></figure>
<h2 id="8-2-使用switch语句匹配枚举值"><a href="#8-2-使用switch语句匹配枚举值" class="headerlink" title="8.2    使用switch语句匹配枚举值"></a>8.2    使用switch语句匹配枚举值</h2><blockquote>
<p><strong>注意：</strong>必须穷举所有枚举值的情况（<code>switch</code>的完备性）</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">directionToHead = .<span class="type">South</span></span><br><span class="line"><span class="keyword">switch</span> directionToHead &#123;</span><br><span class="line">    <span class="keyword">case</span> .<span class="type">North</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"Lots of planets have a north"</span>)</span><br><span class="line">    <span class="keyword">case</span> .<span class="type">South</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"watch out for penguins"</span>)</span><br><span class="line">    <span class="keyword">case</span> .<span class="type">East</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"Where the sun rises"</span>)</span><br><span class="line">    <span class="keyword">case</span> .<span class="type">West</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"Where the skies are blue"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="8-3-关联值"><a href="#8-3-关联值" class="headerlink" title="8.3    关联值"></a>8.3    关联值</h2><blockquote>
<p><strong>说明：</strong>连同成员值一起存储额外的自定义信息。</p>
<ul>
<li>每次在代码中使用该枚举成员时，还可以用不同的关联值</li>
<li>可以定义 Swift 枚举来存储任意类型的关联值</li>
</ul>
<p><strong>语法：</strong><code>case 成员名(关联值1类型, 关联值1类型, ...)</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 码</span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Barcode</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 条形码</span></span><br><span class="line">    <span class="keyword">case</span> <span class="type">UPCA</span>(<span class="type">Int</span>, <span class="type">Int</span>, <span class="type">Int</span>, <span class="type">Int</span>)</span><br><span class="line">    <span class="comment">// 二维码</span></span><br><span class="line">    <span class="keyword">case</span> <span class="type">QRCode</span>(<span class="type">String</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 条形码</span></span><br><span class="line"><span class="keyword">var</span> productBarcode = <span class="type">Barcode</span>.<span class="type">UPCA</span>(<span class="number">8</span>, <span class="number">85909</span>, <span class="number">51226</span>, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 二维码</span></span><br><span class="line">productBarcode = .<span class="type">QRCode</span>(<span class="string">"ABCDEFGHIJKLMNOP"</span>)</span><br></pre></td></tr></table></figure>
<h3 id="提取关联值"><a href="#提取关联值" class="headerlink" title="提取关联值"></a>提取关联值</h3><blockquote>
<p><strong>说明：</strong>可以在<code>switch</code>语句中提取一个枚举值的关联值。<br><strong>语法：</strong>需要声明提取关联值到常量（<code>let</code>）还是变量（<code>var</code>）</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> 枚举值 &#123;</span><br><span class="line">    <span class="keyword">case</span> .枚举成员<span class="number">1</span>(<span class="keyword">let</span> 关联值<span class="number">1</span>, ...)</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>技巧：</strong>当一个<code>enum</code>值关联的所有关联值都想提取为<code>let</code>或<code>var</code>时，为了简洁，可以只在成员名称前标注一个<code>let</code>或者<code>var</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 通过switch提取关联值</span></span><br><span class="line"><span class="keyword">switch</span> productBarcode &#123;</span><br><span class="line">    <span class="keyword">case</span> .<span class="type">UPCA</span>(<span class="keyword">let</span> numberSystem, <span class="keyword">let</span> manufacturer, <span class="keyword">let</span> product, <span class="keyword">let</span> check):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"UPC-A:\(numberSystem), \(manufacturer), \(product), \(check)"</span>)</span><br><span class="line">    <span class="keyword">case</span> .<span class="type">QRCode</span>(<span class="keyword">let</span> productCode):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"QR code:\(productCode)."</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 简写（仅用于所有关联值都要提取为为常量或变量时）:在成员名前标注一个let或var</span></span><br><span class="line"><span class="keyword">switch</span> productBarcode &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">let</span> .<span class="type">UPCA</span>(numberSystem, manufacturer, product, check):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"UPC-A: \(numberSystem), \(manufacturer), \(product), \(check)."</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">let</span> .<span class="type">QRCode</span>(productCode):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"QR code: \(productCode)."</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="8-4-原始值"><a href="#8-4-原始值" class="headerlink" title="8.4    原始值"></a>8.4    原始值</h2><blockquote>
<p><strong>说明：</strong>枚举成员都可以有一个默认值，也叫原始值</p>
<ul>
<li>原始值的类型必须相同</li>
<li>原始值可以是<code>字符串</code>，<code>字符</code>，或者<code>任意整型值</code>或<code>浮点型值</code></li>
</ul>
<p><strong>注意：</strong><code>原始值</code>和<code>关联值</code>不要混淆</p>
</blockquote>
<table>
<thead>
<tr>
<th>区分对象</th>
<th>设置的时间</th>
<th>是否可以改变</th>
</tr>
</thead>
<tbody>
<tr>
<td>关联值</td>
<td>创建一个基于枚举成员的常量或变量时</td>
<td>是</td>
</tr>
<tr>
<td>原始值</td>
<td>定义枚举类型时</td>
<td>否</td>
</tr>
</tbody>
</table>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">ASCIIControlCharacter</span>: <span class="title">Character</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Tab</span> = <span class="string">"\t"</span></span><br><span class="line">    <span class="keyword">case</span> <span class="type">LineFeed</span> = <span class="string">"\n"</span></span><br><span class="line">    <span class="keyword">case</span> <span class="type">CarriageReturn</span> = <span class="string">"\r"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="8-4-1-原始值的隐式赋值"><a href="#8-4-1-原始值的隐式赋值" class="headerlink" title="8.4.1    原始值的隐式赋值"></a>8.4.1    原始值的隐式赋值</h3><blockquote>
<p><strong>说明：</strong>在使用原始值为<code>整数</code>或者<code>字符串类型</code>的枚举时，不需要显式地为每一个枚举成员设置原始值，Swift 将会自动为你赋值。</p>
</blockquote>
<h4 id="原始值为整数"><a href="#原始值为整数" class="headerlink" title="原始值为整数"></a>原始值为整数</h4><blockquote>
<ul>
<li>隐式赋值的值依次递增1</li>
<li>如果第一个枚举成员没有设置原始值，其原始值将为0</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 原始值的隐式赋值</span></span><br><span class="line"><span class="comment">// 星球（带有Int型原始值）</span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Planet</span>: <span class="title">Int</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Mercury</span> = <span class="number">1</span>, <span class="type">Venus</span>, <span class="type">Earth</span>, <span class="type">Mars</span>, <span class="type">Jupiter</span>, <span class="type">Saturn</span>, <span class="type">Uranus</span>, <span class="type">Neptune</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 访问原始值</span></span><br><span class="line"><span class="keyword">let</span> earthsOrder = <span class="type">Planet</span>.<span class="type">Earth</span>.rawValue</span><br></pre></td></tr></table></figure>
<h4 id="原始值为字符串"><a href="#原始值为字符串" class="headerlink" title="原始值为字符串"></a>原始值为字符串</h4><blockquote>
<p><strong>说明：</strong>每个枚举成员的隐式原始值为该枚举成员的名称</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 指南针（带有String类型）</span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">CompassPoint</span>: <span class="title">String</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">North</span>, <span class="type">South</span>, <span class="type">East</span>, <span class="type">West</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> sunsetDirection = <span class="type">CompassPoint</span>.<span class="type">West</span>.rawValue</span><br></pre></td></tr></table></figure>
<h3 id="8-4-2-使用原始值初始化枚举实例"><a href="#8-4-2-使用原始值初始化枚举实例" class="headerlink" title="8.4.2    使用原始值初始化枚举实例"></a>8.4.2    使用原始值初始化枚举实例</h3><blockquote>
<p><strong>说明：</strong>在定义枚举类型的时候使用了<code>原始值</code>，那么将会自动获得一个初始化方法<br><strong>调用初始化方法：</strong><code>枚举类型名(rawValue: 原始值)</code></p>
<ul>
<li><strong>参数：</strong>接收一个叫做<code>rawValue</code>的参数，参数类型即为原始值类型</li>
<li><strong>返回值（可选型）：</strong><code>枚举成员</code>或<code>nil</code></li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 星球（带有Int型原始值）</span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Planet</span>: <span class="title">Int</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Mercury</span> = <span class="number">1</span>, <span class="type">Venus</span>, <span class="type">Earth</span>, <span class="type">Mars</span>, <span class="type">Jupiter</span>, <span class="type">Saturn</span>, <span class="type">Uranus</span>, <span class="type">Neptune</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用原始值初始化枚举实例</span></span><br><span class="line"><span class="keyword">let</span> passiblePlanet = <span class="type">Planet</span>(rawValue: <span class="number">7</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 枚举的可失败构造器</span></span><br><span class="line"><span class="keyword">let</span> positionToFind = <span class="number">9</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> somePlanet = <span class="type">Planet</span>(rawValue: positionToFind) &#123;</span><br><span class="line">    <span class="keyword">switch</span> somePlanet &#123;</span><br><span class="line">    <span class="keyword">case</span> .<span class="type">Earth</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"Mostly harmless"</span>)</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"Not a safe place for humans"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"There isn't a planet at position \(positionToFind)"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="8-5-递归枚举"><a href="#8-5-递归枚举" class="headerlink" title="8.5    递归枚举"></a>8.5    递归枚举</h2><blockquote>
<p><strong>说明：</strong>是一种特殊的枚举类型</p>
<ul>
<li>有一个或多个枚举成员<code>使用该枚举类型的实例作为关联值</code></li>
<li>使用递归枚举时，编译器会插入一个间接层</li>
<li>可以在枚举成员前加上<code>indirect</code>来表示该成员可递归</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 表达式</span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">ArithmeticExpression</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 纯数字</span></span><br><span class="line">    <span class="keyword">case</span> <span class="type">Number</span>(<span class="type">Int</span>)</span><br><span class="line">    <span class="comment">// 两个表达式的和</span></span><br><span class="line">    <span class="keyword">indirect</span> <span class="keyword">case</span> <span class="type">Addition</span>(<span class="type">ArithmeticExpression</span>, <span class="type">ArithmeticExpression</span>)</span><br><span class="line">    <span class="comment">// 两个表达式的积</span></span><br><span class="line">    <span class="keyword">indirect</span> <span class="keyword">case</span> <span class="type">Multiplication</span>(<span class="type">ArithmeticExpression</span>, <span class="type">ArithmeticExpression</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对表达式进行处理的函数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">evaluate</span><span class="params">(expression: ArithmeticExpression)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">switch</span> expression &#123;</span><br><span class="line">        <span class="keyword">case</span> .<span class="type">Number</span>(<span class="keyword">let</span> value):</span><br><span class="line">            <span class="keyword">return</span> value</span><br><span class="line">        <span class="keyword">case</span> .<span class="type">Addition</span>(<span class="keyword">let</span> <span class="keyword">left</span>, <span class="keyword">let</span> <span class="keyword">right</span>):</span><br><span class="line">            <span class="keyword">return</span> evaluate(<span class="keyword">left</span>) + evaluate(<span class="keyword">right</span>)</span><br><span class="line">        <span class="keyword">case</span> .<span class="type">Multiplication</span>(<span class="keyword">let</span> <span class="keyword">left</span>, <span class="keyword">let</span> <span class="keyword">right</span>):</span><br><span class="line">            <span class="keyword">return</span> evaluate(<span class="keyword">left</span>) * evaluate(<span class="keyword">right</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 计算 (5 + 4) * 2</span></span><br><span class="line"><span class="keyword">let</span> five = <span class="type">ArithmeticExpression</span>.<span class="type">Number</span>(<span class="number">5</span>)</span><br><span class="line"><span class="keyword">let</span> four = <span class="type">ArithmeticExpression</span>.<span class="type">Number</span>(<span class="number">4</span>)</span><br><span class="line"><span class="keyword">let</span> sum = <span class="type">ArithmeticExpression</span>.<span class="type">Addition</span>(five, four)</span><br><span class="line"><span class="keyword">let</span> product = <span class="type">ArithmeticExpression</span>.<span class="type">Multiplication</span>(sum, <span class="type">ArithmeticExpression</span>.<span class="type">Number</span>(<span class="number">2</span>))</span><br><span class="line"><span class="built_in">print</span>(evaluate(product))</span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/13/TSPL2_07  闭包/" itemprop="url">
                  7 闭包
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-13T19:40:46+08:00" content="2016-05-13">
              2016-05-13
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/13/TSPL2_07  闭包/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/13/TSPL2_07  闭包/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p><strong>描述：</strong>可以捕获和存储其所在上下文中任意常量或变量的引用的字包含的函数代码块。<br><strong>说明：</strong>由<code>3</code>种类型的闭包。</p>
</blockquote>
<table>
<thead>
<tr>
<th>分类</th>
<th>是否有名字</th>
<th>捕获内容</th>
<th>适用</th>
</tr>
</thead>
<tbody>
<tr>
<td>全局函数</td>
<td>是</td>
<td>无</td>
<td>严格说来不是闭包</td>
</tr>
<tr>
<td>嵌套函数</td>
<td>是</td>
<td>其封闭函数域内的变量或常量的引用</td>
<td>在较复杂函数中，需要命名和定义自包含代码模块的场景</td>
</tr>
<tr>
<td>闭合表达式</td>
<td>否</td>
<td>其上下文中的变量或常量的引用</td>
<td>处理一些函数并需要将另外一些函数作为该函数的参数时</td>
</tr>
</tbody>
</table>
<h2 id="7-1-闭包表达式"><a href="#7-1-闭包表达式" class="headerlink" title="7.1    闭包表达式"></a>7.1    闭包表达式</h2><blockquote>
<p><strong>描述：</strong>闭包表达式是一种利用简洁语法构建内联闭包的方式<br><strong>说明：</strong>和<code>全局函数</code>或<code>嵌套函数</code>相比有如下特点</p>
<ul>
<li><strong>类型推断：</strong>利用上下文推断<code>参数</code>和<code>返回值</code>类型</li>
<li><strong>隐式返回：</strong>隐式返回单表达式闭包，即单表达式闭包可以省略<code>return</code>语句。</li>
<li><strong>参数名称缩写</strong></li>
<li><strong>尾随闭包语法</strong></li>
</ul>
<p><strong>语法：</strong>一般形式</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123; (parameters) -&gt; returnType <span class="keyword">in</span></span><br><span class="line">    statements</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>可以使用<code>常量</code>、<code>变量</code>和<code>inout</code>类型作为参数</li>
<li>参数不支持设置<code>默认值</code></li>
<li>可以在参数列表的最后使用<code>可变参数</code></li>
<li><code>元组</code>也可以作为参数和返回值</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> names = [<span class="string">"Charis"</span>, <span class="string">"Alex"</span>, <span class="string">"Ewa"</span>, <span class="string">"Barry"</span>, <span class="string">"Daniella"</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个比较函数（按照字典顺序逆序排序）</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">backwards</span><span class="params">(s1: String, s2: String)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> s1 &gt; s2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// sort</span></span><br><span class="line"><span class="keyword">var</span> reversed = names.<span class="built_in">sort</span>(backwards)<span class="comment">// ["Ewa", "Daniella", "Chris", "Barry", "Alex"]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 闭包表达式</span></span><br><span class="line">reversed = names.<span class="built_in">sort</span>(&#123;(s1: <span class="type">String</span>, s2: <span class="type">String</span>) -&gt; <span class="type">Bool</span> <span class="keyword">in</span></span><br><span class="line">    <span class="keyword">return</span> s1 &gt; s2</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 闭包表达式：推断类型</span></span><br><span class="line">reversed = names.<span class="built_in">sort</span>(&#123;s1, s2 <span class="keyword">in</span> <span class="keyword">return</span> s1 &gt; s2&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 闭合表达式：推断类型、隐式返回</span></span><br><span class="line">reversed = names.<span class="built_in">sort</span>(&#123;s1, s2 <span class="keyword">in</span> s1 &gt; s2&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 闭合表达式：推断类型、隐式返回、参数名缩写</span></span><br><span class="line">reversed = names.<span class="built_in">sort</span>(&#123;$<span class="number">0</span> &gt; $<span class="number">1</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 闭合表达式：&gt;(一个字符串函数)</span></span><br><span class="line">reversed = names.<span class="built_in">sort</span>(&gt;)</span><br></pre></td></tr></table></figure>
<h2 id="7-2-尾随闭包"><a href="#7-2-尾随闭包" class="headerlink" title="7.2    尾随闭包"></a>7.2    尾随闭包</h2><blockquote>
<p><strong>条件：</strong>当将闭包作为最后一个参数传递给函数时<br><strong>用途：</strong>增强函数的<code>可读性</code>（其实就是一种特殊条件下的简写）<br><strong>语法：</strong>书写在函数<code>()</code>之后，用<code>{}</code>括起来。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 案例1：基本案例 */</span></span><br><span class="line"><span class="comment">/**</span><br><span class="line">* 用于展示尾随闭包的函数</span><br><span class="line">* @param &#123;() -&gt; Void&#125; closure 函数类型参数</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">someFunctionThatTakesAClosure</span><span class="params">(closure: <span class="params">()</span></span></span> -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">    <span class="comment">// 函数主体</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用：不使用尾随闭包</span></span><br><span class="line">someFunctionThatTakesAClosure(&#123;</span><br><span class="line">    <span class="comment">// 闭包主体</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用：使用尾随闭包</span></span><br><span class="line">someFunctionThatTakesAClosure() &#123;</span><br><span class="line">    <span class="comment">// 闭包主体</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 案例2：sort */</span></span><br><span class="line"><span class="comment">// sort使用尾随闭包</span></span><br><span class="line">reversed = names.<span class="built_in">sort</span>() &#123;$<span class="number">0</span> &gt; $<span class="number">1</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// sort使用尾随闭包：省略()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 案例3：map */</span></span><br><span class="line"><span class="keyword">let</span> digitNames = [</span><br><span class="line">    <span class="number">0</span>: <span class="string">"Zero"</span>,</span><br><span class="line">    <span class="number">1</span>: <span class="string">"One"</span>,</span><br><span class="line">    <span class="number">2</span>: <span class="string">"Two"</span>,</span><br><span class="line">    <span class="number">3</span>: <span class="string">"Three"</span>,</span><br><span class="line">    <span class="number">4</span>: <span class="string">"Four"</span>,</span><br><span class="line">    <span class="number">5</span>: <span class="string">"Five"</span>,</span><br><span class="line">    <span class="number">6</span>: <span class="string">"Six"</span>,</span><br><span class="line">    <span class="number">7</span>: <span class="string">"Seven"</span>,</span><br><span class="line">    <span class="number">8</span>: <span class="string">"Eight"</span>,</span><br><span class="line">    <span class="number">9</span>: <span class="string">"Nine"</span></span><br><span class="line">]</span><br><span class="line"><span class="keyword">let</span> numbers = [<span class="number">16</span>, <span class="number">58</span>, <span class="number">510</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用尾随闭包：["OneSix", "FiveEight", "FiveOneZero"]</span></span><br><span class="line"><span class="keyword">let</span> strings = numbers.<span class="built_in">map</span>&#123;</span><br><span class="line">    (<span class="keyword">var</span> number) -&gt; <span class="type">String</span> <span class="keyword">in</span></span><br><span class="line">    <span class="keyword">var</span> output = <span class="string">""</span></span><br><span class="line">    <span class="keyword">while</span> number &gt; <span class="number">0</span> &#123;</span><br><span class="line">        output = digitNames[number % <span class="number">10</span>]! + output</span><br><span class="line">        number /= <span class="number">10</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> output</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="7-3-捕获值"><a href="#7-3-捕获值" class="headerlink" title="7.3    捕获值"></a>7.3    捕获值</h2><blockquote>
<p><strong>说明：</strong>能够捕获值的闭包有<code>2</code>种</p>
<ul>
<li><strong>嵌套函数：</strong>捕获其外部函数所有的参数以及定义的常量和变量</li>
<li><strong>闭包表达式：</strong>闭包可以在其被定义的上下文中捕获常量或变量</li>
</ul>
<p><strong>注意：</strong></p>
<ol>
<li>如果一个值是不可变的，Swift 可能会改为捕获并保存一份对值的拷贝</li>
<li>Swift 也会负责被捕获变量的所有内存管理工作，包括释放不再需要的变量</li>
</ol>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 捕获值</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">makeIncrementor</span><span class="params">(froIncrement amount: Int)</span></span> -&gt; () -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> runningTotal = <span class="number">0</span><span class="comment">// 被捕获</span></span><br><span class="line">    <span class="comment">// 嵌套函数</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">incrementor</span><span class="params">()</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        runningTotal += amount</span><br><span class="line">        <span class="keyword">return</span> runningTotal</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> incrementor</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获得闭包1</span></span><br><span class="line"><span class="keyword">let</span> incrementByTen = makeIncrementor(froIncrement: <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用闭包</span></span><br><span class="line">incrementByTen()<span class="comment">// 10</span></span><br><span class="line">incrementByTen()<span class="comment">// 20</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 获得闭包2</span></span><br><span class="line"><span class="keyword">let</span> incrementBySeven = makeIncrementor(froIncrement: <span class="number">7</span>)</span><br><span class="line">incrementBySeven()<span class="comment">// 7</span></span><br></pre></td></tr></table></figure>
<h2 id="7-4-闭包是引用类型"><a href="#7-4-闭包是引用类型" class="headerlink" title="7.4    闭包是引用类型"></a>7.4    闭包是引用类型</h2><blockquote>
<p><strong>说明：</strong>这意味着不同的变量或常量可以引用同一个闭包。</p>
</blockquote>
<h2 id="7-5-逃逸闭包和非逃逸闭包"><a href="#7-5-逃逸闭包和非逃逸闭包" class="headerlink" title="7.5    逃逸闭包和非逃逸闭包"></a>7.5    逃逸闭包和非逃逸闭包</h2><blockquote>
<p><strong>逃逸：</strong>当一个闭包作为参数传到一个函数中，但是这个闭包在函数执行过程中没有执行，函数返回之后才被执行或者从来没有执行过，我们称该闭包从函数中逃逸。<br><strong>说明：</strong>通过标注传入闭包的闭包为<code>@noescape</code>，让编译器对<code>非逃逸闭包</code>进行优化。</p>
</blockquote>
<h3 id="noescape"><a href="#noescape" class="headerlink" title="@noescape"></a>@noescape</h3><blockquote>
<p><strong>说明：</strong>告诉编译器，闭包必须在被传入到的函数体中执行。</p>
<ul>
<li>将闭包标注为<code>@noescape</code>使你能在闭包中隐式地引用<code>self</code>（因为<code>@noescape</code>保障了成员方法）</li>
</ul>
<p><strong>用途：</strong>使编译器能够进行一些更加激进的优化。<br><strong>注意：</strong>如果被标注了<code>@noescape</code>的闭包没有在函数体中执行，编译器讲报错。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 参数带有@noescape标注（闭包不可以逃逸）</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">someFunctionWithNoescapeClosure</span><span class="params">(@noescape closure: <span class="params">()</span></span></span> -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">    closure()</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 参数不带@noescape标注（闭包可以逃逸）</span></span><br><span class="line"><span class="keyword">var</span> completionHandlers: [() -&gt; <span class="type">Void</span>] = []</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">someFunctionWithEscapingClosure</span><span class="params">(completionHandler: <span class="params">()</span></span></span> -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">    completionHandlers.append(completionHandler)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line">* 掩饰@noescape标注的闭包中隐式使用self</span><br><span class="line">* 成员函数doSomething会调用上面两个函数</span><br><span class="line">*/</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeClass</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> x = <span class="number">10</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">doSomething</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="comment">// 传入闭包：必须使用self</span></span><br><span class="line">        someFunctionWithEscapingClosure &#123;<span class="keyword">self</span>.x = <span class="number">100</span>&#125;</span><br><span class="line">        <span class="comment">// 传入闭包：self可以省略</span></span><br><span class="line">        someFunctionWithNoescapeClosure &#123;x = <span class="number">200</span>&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> instance = <span class="type">SomeClass</span>()</span><br><span class="line">instance.doSomething()</span><br><span class="line"><span class="built_in">print</span>(instance.x)<span class="comment">// 200(说明@noescape的闭包不使用self也成功调用了x)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用前面通过someFunctionWithEscapingClosure逃逸的闭包</span></span><br><span class="line">completionHandlers.first?()</span><br><span class="line"><span class="built_in">print</span>(instance.x)<span class="comment">// 100</span></span><br></pre></td></tr></table></figure>
<h2 id="7-6-自动闭包"><a href="#7-6-自动闭包" class="headerlink" title="7.6    自动闭包"></a>7.6    自动闭包</h2><blockquote>
<p><strong>描述：</strong><code>自动闭包</code>是一种自动创建的闭包，用于包装传递给函数作为参数的表达式。<br><strong>限制：</strong><br><strong>用途：</strong>这种便利语法让你能够用一个普通的表达式来代替显式的闭包，从而省略闭包的<code>{}</code>。<br><strong>说明：</strong>有<code>2</code>种方式</p>
<ul>
<li>显式创建：<code>{语句}</code></li>
<li></li>
</ul>
<p><strong>技巧：</strong>自动闭包让你能够<code>延迟求值</code>，因为代码段不会被执行直到你调用这个闭包。延迟求值对于那些有<code>副作用</code>和<code>代价昂贵</code>的代码来说是很有益处的，因为你能控制代码什么时候执行。</p>
</blockquote>
<h3 id="7-6-1-通过普通闭包实现延迟执行"><a href="#7-6-1-通过普通闭包实现延迟执行" class="headerlink" title="7.6.1    通过普通闭包实现延迟执行"></a>7.6.1    通过普通闭包实现延迟执行</h3><p><em>案例1：先创建闭包然后调用 </em></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> customersInLine = [<span class="string">"Chris"</span>, <span class="string">"Aelx"</span>, <span class="string">"Ewa"</span>, <span class="string">"Barry"</span>, <span class="string">"Daniella"</span>]</span><br><span class="line"><span class="built_in">print</span>(customersInLine.<span class="built_in">count</span>)</span><br><span class="line"><span class="comment">// 创建自动闭包</span></span><br><span class="line"><span class="keyword">let</span> customerProvider = &#123;customersInLine.removeAtIndex(<span class="number">0</span>)&#125;</span><br><span class="line"><span class="comment">// 执行闭包</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"Now serving\(customerProvider())!"</span>)</span><br></pre></td></tr></table></figure>
<p><em>案例2：将闭包作为参数传递</em></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">serveCustomer</span><span class="params">(customerProvider: <span class="params">()</span></span></span> -&gt; <span class="type">String</span>) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Now serving \(customerProvider())!"</span>)</span><br><span class="line">&#125;</span><br><span class="line">serveCustomer( &#123; customersInLine.removeAtIndex(<span class="number">0</span>) &#125; )</span><br></pre></td></tr></table></figure>
<h3 id="7-6-2-自动闭包实现延迟执行"><a href="#7-6-2-自动闭包实现延迟执行" class="headerlink" title="7.6.2    自动闭包实现延迟执行"></a>7.6.2    自动闭包实现延迟执行</h3><h4 id="autoclosure和-autoclosure-escaping"><a href="#autoclosure和-autoclosure-escaping" class="headerlink" title="@autoclosure和@autoclosure(escaping)"></a>@autoclosure和@autoclosure(escaping)</h4><blockquote>
<p><strong>说明：</strong>通过将参数标记为<code>@autoclosure</code>来接收一个自动闭包。</p>
</blockquote>
<table>
<thead>
<tr>
<th>分类</th>
<th>是否允许闭包逃逸</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>@autoclosure</td>
<td>不</td>
<td>暗含了<code>@noescape</code>特性</td>
</tr>
<tr>
<td>@autoclosure(escaping)</td>
<td>是</td>
</tr>
</tbody>
</table>
<h5 id="autoclosure"><a href="#autoclosure" class="headerlink" title="@autoclosure"></a>@autoclosure</h5><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 通过autoclosure标记，自动将传入的参数（语句）转换为闭包 */</span></span><br><span class="line"><span class="keyword">var</span> customersInLine = [<span class="string">"Barry"</span>, <span class="string">"Daniella"</span>]</span><br><span class="line"><span class="comment">/**</span><br><span class="line">* 包装（延迟执行）对顾客的服务</span><br><span class="line">* @param &#123;() -&gt; String&#125; @autoclosure customerProvider 将输参数（语句）自动转换为一个() -&gt; String的闭包</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">serveCustomer</span><span class="params">(@autoclosure customerProvider: <span class="params">()</span></span></span> -&gt; <span class="type">String</span>) &#123;</span><br><span class="line">    <span class="comment">// customerProvider是一个被自动封装好的闭包</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Now serving \(customerProvider())"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 调用：customersInLine.removeAtIndex(0)在serveCustomer中被调用（通过自动闭包）时才会执行</span></span><br><span class="line"></span><br><span class="line">serveCustomer(customersInLine.removeAtIndex(<span class="number">0</span>))</span><br></pre></td></tr></table></figure>
<h5 id="autoclosure-escaping"><a href="#autoclosure-escaping" class="headerlink" title="@autoclosure(escaping)"></a>@autoclosure(escaping)</h5><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> customersInLine = [<span class="string">"Barry"</span>, <span class="string">"Daniella"</span>]</span><br><span class="line"><span class="comment">// 存储() -&gt; String类型闭包的数组</span></span><br><span class="line"><span class="keyword">var</span> customerProviders: [() -&gt; <span class="type">String</span>] = []</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line">* 将闭包存入集合的工具函数</span><br><span class="line">* @param &#123;() -&gt; String&#125; @autoclosure(escaping) customerProvider 为语句自动创建() -&gt; String类型的封包</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">collectCustomerProvider</span><span class="params">(@autoclosure<span class="params">(escaping)</span></span></span> customerProvider: () -&gt; <span class="type">String</span>) &#123;</span><br><span class="line">    customerProviders.append(customerProvider)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用工具函数</span></span><br><span class="line">collectCustomerProvider(customersInLine.removeAtIndex(<span class="number">0</span>))</span><br><span class="line">collectCustomerProvider(customersInLine.removeAtIndex(<span class="number">0</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"Collected \(customersInLine.count)"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 执行集合中的闭包</span></span><br><span class="line"><span class="keyword">for</span> customerProvider <span class="keyword">in</span> customerProviders &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Now serving \(customerProviders)"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/13/TSPL2_06  函数/" itemprop="url">
                  6 函数
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-13T19:40:24+08:00" content="2016-05-13">
              2016-05-13
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/13/TSPL2_06  函数/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/13/TSPL2_06  函数/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p><strong>说明：</strong>用来完成特定任务的独立的代码。</p>
<ul>
<li><strong>从简单到复杂：</strong>既可以定义最简单的没有参数名字的 C 风格函数，也可以定义复杂的带局部和外部参数名的 Objective-C 风格函数</li>
<li><strong>默认参数值：</strong>参数可以提供默认值，以简化函数调用</li>
<li><strong>In-out参数：</strong>参数前加 <code>&amp;</code> 符,表示这个值可以被函数修改（只能针对变量参数，类似传引用）</li>
<li><strong>当作普通变量：</strong>可以把函数类型当做任何其他普通变量类型一样处理</li>
<li><strong>嵌套：</strong>函数的定义可以写在在其他函数定义中</li>
</ul>
</blockquote>
<h2 id="6-1-定义"><a href="#6-1-定义" class="headerlink" title="6.1    定义"></a>6.1    定义</h2><blockquote>
<p><strong>定义：</strong>使用<code>func</code>关键字</p>
<ul>
<li><strong>函数名：</strong>描述函数执行的任务</li>
<li><strong>参数：</strong>可以定义一个或多个有名字和类型的值，作为函数的输入</li>
<li><strong>返回值：</strong>可以定义某种类型的值作为函数执行结束的输出</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sayHelloAgain</span><span class="params">(personName: String)</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"Hello again, "</span> + personName + <span class="string">"!"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(sayHelloAgain(<span class="string">"Anna"</span>))</span><br></pre></td></tr></table></figure>
<h3 id="6-1-1-参数"><a href="#6-1-1-参数" class="headerlink" title="6.1.1    参数"></a>6.1.1    参数</h3><blockquote>
<p><strong>说明：</strong>特点总结</p>
<ul>
<li><strong>参数数量：</strong>参数可以没有、1个或多个（用<code>,</code>分隔）</li>
<li><strong>参数名：</strong>包括外部参数名（为了调用时的可读性）和内部参数名（内部调用）</li>
<li><strong>默认参数值：</strong>当默认值被定义后,调用这个函数时可以忽略这个 参数</li>
<li><strong>定义可变参数：</strong>可以用可变参数来传入不确定数 量的输入参数</li>
<li><strong>常量参数：</strong>函数参数默认是常量，在函数体中不能修改</li>
<li><strong>变量参数：</strong>可以在函数中把它当做新的可修改副本来使<br>用</li>
</ul>
</blockquote>
<h4 id="6-1-1-1-参数数量和类型"><a href="#6-1-1-1-参数数量和类型" class="headerlink" title="6.1.1.1    参数数量和类型"></a>6.1.1.1    参数数量和类型</h4><blockquote>
<p><strong>说明：</strong>参数具有以下特点</p>
<ul>
<li><strong>数量：</strong>可以有0个或多个输入参数</li>
<li><strong>类型：</strong>可以有多种类型的输入参数</li>
</ul>
</blockquote>
<table>
<thead>
<tr>
<th>类型</th>
<th>参数数量</th>
<th>参数类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>无参函数</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>多参量函数</td>
<td>大于1</td>
<td>多种类型</td>
</tr>
</tbody>
</table>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 无参函数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sayHelloWorld</span><span class="params">()</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"hello, world"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1个参数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sayHello</span><span class="params">(personName: String)</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> greeting = <span class="string">"Hello, "</span> + personName + <span class="string">"!"</span></span><br><span class="line">    <span class="keyword">return</span> greeting</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sayHelloAgain</span><span class="params">(personName: String)</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"Hello again, "</span> + personName + <span class="string">"!"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 多参量函数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sayHello</span><span class="params">(personName: String, alreadyGreeted: Bool)</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> alreadyGreeted &#123;</span><br><span class="line">        <span class="keyword">return</span> sayHelloAgain(personName)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> sayHello(personName)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(sayHello(<span class="string">"Tim"</span>, alreadyGreeted: <span class="literal">true</span>))</span><br></pre></td></tr></table></figure>
<h4 id="6-1-1-2-参数名"><a href="#6-1-1-2-参数名" class="headerlink" title="6.1.1.2    参数名"></a>6.1.1.2    参数名</h4><blockquote>
<p><strong>说明：</strong>包括<code>内部参数名</code>和<code>外部参数名</code></p>
</blockquote>
<table>
<thead>
<tr>
<th>特点</th>
<th>说明</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>内部参数名</td>
<td>在函数被调用时，函数内部用来访问参数相应副本</td>
<td>所有参数都必须有</td>
</tr>
<tr>
<td>外部参数名</td>
<td>往函数的调用语句中传递参数时使用</td>
<td>第一个参数可以指定，其它参数要么指定一个外部参数名，要么就默认和内部参数名相同（除非使用<code>_</code>声明不指定外部参数名）</td>
</tr>
</tbody>
</table>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 指定外部参数名</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sayHello</span><span class="params">(to person: String, and anotherPerson: String)</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"Hello \(person) and \(anotherPerson)!"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(sayHello(to: <span class="string">"Bill"</span>, and: <span class="string">"Ted"</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用_忽略外部参数名</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">someFunction</span><span class="params">(firstParameterName: Int, <span class="number">_</span> secondParameterName: Int)</span></span> &#123;</span><br><span class="line">    <span class="comment">// 函数体</span></span><br><span class="line">&#125;</span><br><span class="line">someFunction(<span class="number">1</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<h4 id="6-1-1-2-默认参数值"><a href="#6-1-1-2-默认参数值" class="headerlink" title="6.1.1.2    默认参数值"></a>6.1.1.2    默认参数值</h4><blockquote>
<p><strong>语法：</strong><code>部参数名: 参数类型 = 默认值</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">someFunction</span><span class="params">(parameterWithDefault: Int = <span class="number">12</span>)</span></span> &#123;</span><br><span class="line">	<span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>技巧：</strong>将带有默认值的参数放在函数参数列表的最后。这样可以保证在函数调用时，非默认参数的顺序是一致的，同时使得相同的函数在不同情况下调用时显得更为清晰。</p>
</blockquote>
<h4 id="6-1-1-3-可变参数"><a href="#6-1-1-3-可变参数" class="headerlink" title="6.1.1.3    可变参数"></a>6.1.1.3    可变参数</h4><blockquote>
<p><strong>说明：</strong>可以用可变参数来指定函数参数可以被传入不确定数量的输入值。</p>
<ul>
<li>可变参数的传入值在函数体中变为此类型的一个数组</li>
<li>一个函数<code>最多只能有一个</code>可变参数</li>
<li>如果函数有一个或多个带默认值的参数，而且还有一个可变参数，那么把可变参数放在参数表的最后</li>
</ul>
<p><strong>语法：</strong><code>部参数名: 参数类型 ...</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">arithmeticMean</span><span class="params">(numbers: Double...)</span></span> -&gt; <span class="type">Double</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> total: <span class="type">Double</span> = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> number <span class="keyword">in</span> numbers &#123;</span><br><span class="line">        total += number</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> total / <span class="type">Double</span>(numbers.<span class="built_in">count</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 调用</span></span><br><span class="line">arithmeticMean(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">arithmeticMean(<span class="number">3</span>, <span class="number">8.25</span>, <span class="number">18.75</span>)</span><br></pre></td></tr></table></figure>
<h4 id="6-1-1-4-常量参数和变量参数"><a href="#6-1-1-4-常量参数和变量参数" class="headerlink" title="6.1.1.4    常量参数和变量参数"></a>6.1.1.4    常量参数和变量参数</h4><blockquote>
<p><strong>说明：</strong>对于<code>值类型</code>(<code>class</code>之外的所有类型)，无论<code>常量参数</code>还是<code>变量参数</code>，函数使用的都是副本。</p>
</blockquote>
<table>
<thead>
<tr>
<th>分类</th>
<th>副本是否可以修改</th>
<th>语法</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>常量参数</td>
<td>否</td>
<td>默认</td>
<td></td>
</tr>
<tr>
<td>变量参数</td>
<td>是</td>
<td><code>var 参数名: 参数类型</code></td>
<td>仅存在于函数调用的声明周期中，调用结速后修改便消失了</td>
</tr>
</tbody>
</table>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;String|var&#125; string 字符串</span><br><span class="line">* @param &#123;Int&#125; totalLength 输出总长度</span><br><span class="line">* @param &#123;Character&#125; pad 填充使用的字符</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">alignRight</span> <span class="params">(<span class="keyword">var</span> string: String, totalLength: Int, pad: Character)</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="comment">// 要在前面填充的字符总数</span></span><br><span class="line">    <span class="keyword">let</span> amountToPad = totalLength - string.characters.<span class="built_in">count</span>;</span><br><span class="line">    <span class="keyword">if</span> amountToPad &lt; <span class="number">1</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> string</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> padString = <span class="type">String</span>(pad)</span><br><span class="line">    <span class="comment">// 补上填充字符</span></span><br><span class="line">    <span class="keyword">for</span> <span class="number">_</span> <span class="keyword">in</span> <span class="number">1</span>...amountToPad &#123;</span><br><span class="line">        string = padString + string</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 返回填充后的字符串</span></span><br><span class="line">    <span class="keyword">return</span> string</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="6-1-2-5-输入输出参数"><a href="#6-1-2-5-输入输出参数" class="headerlink" title="6.1.2.5    输入输出参数"></a>6.1.2.5    输入输出参数</h4><blockquote>
<p><strong>关键字：</strong><code>inout</code>(声明函数时使用)<br><strong>操作符：</strong><code>&amp;</code>（调用函数时使用）<br><strong>说明：</strong>相当于将原本针对值类型默认的<code>传值</code>转变为<code>传引用</code>。</p>
<ul>
<li>只能传递<code>变量</code>给<code>输入输出参数</code>（不能传入<code>常量</code>或者<code>字面量</code>）</li>
<li>不能用于<code>带默认值的参数</code>和<code>可变参数</code></li>
<li>参数被<code>inout</code>标记后就不能再被<code>let</code>或<code>var</code>标记</li>
</ul>
<p><strong>扩展：</strong>函数对函数体外进行影响的两个方式</p>
<ul>
<li>返回值</li>
<li>输入输出参数</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* 对调两个整数的值</span><br><span class="line">* @param &#123;Int|input&#125; a 第一个整数</span><br><span class="line">* @param &#123;Int|input&#125; b 第二个整数</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swapTwoInts</span><span class="params">(<span class="keyword">inout</span> a: Int, <span class="keyword">inout</span> <span class="number">_</span> b: Int)</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> temporaryA = a</span><br><span class="line">    a = b</span><br><span class="line">    b = temporaryA</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> someInt = <span class="number">3</span></span><br><span class="line"><span class="keyword">var</span> anotherInt = <span class="number">107</span></span><br><span class="line"><span class="comment">// &amp;</span></span><br><span class="line"><span class="built_in">swap</span>(&amp;someInt, &amp;anotherInt)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"someInt is now \(someInt), and anotherInt is now \(anotherInt)"</span>)</span><br></pre></td></tr></table></figure>
<h3 id="6-1-2-返回值"><a href="#6-1-2-返回值" class="headerlink" title="6.1.2    返回值"></a>6.1.2    返回值</h3><blockquote>
<p><strong>声明返回值语法：</strong><code>func 函数名 () -&gt; 返回值类型 {...}</code><br><strong>说明：</strong>分为3种情况</p>
</blockquote>
<table>
<thead>
<tr>
<th>返回值</th>
<th>说明</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>无</td>
<td>严格说来函数依然返回了值<code>Void</code>（空元组）</td>
<td></td>
</tr>
<tr>
<td>一个返回值</td>
<td>任意类型</td>
<td></td>
</tr>
<tr>
<td>多个返回值</td>
<td>用元组让多个值作为一个符合值返回</td>
<td>也可以是可选型元组</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>注意：</strong>函数一旦设置了返回值，则必须通过<code>return</code>返回相应类型的返回值。</p>
</blockquote>
<h4 id="无返回值函数"><a href="#无返回值函数" class="headerlink" title="无返回值函数"></a>无返回值函数</h4><blockquote>
<p><strong>说明：</strong>声明方式有3种</p>
<ul>
<li>省略<code>-&gt; 返回值类型</code></li>
<li><code>-&gt; Void</code></li>
<li><code>-&gt; ()</code></li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 无返回值</span></span><br><span class="line"><span class="comment">// 1. 不使用 -&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sayGoodbye</span><span class="params">(personName: String)</span></span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Bye, \(personName)"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. -&gt; Void</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sayGoodbye2</span><span class="params">(personName: String)</span></span> -&gt; <span class="type">Void</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Bye, \(personName)"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. -&gt; ()</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sayGoodsbye3</span><span class="params">(personName: String)</span></span> -&gt; () &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Bye, \(personName)"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="返回元组"><a href="#返回元组" class="headerlink" title="返回元组"></a>返回元组</h4><blockquote>
<p><strong>技巧：</strong>声明返回的元组时，为每一项设置名字，以便通过名字访问每一项。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* 返回数组种的最大值和最小值</span><br><span class="line">* @param &#123;Array&lt;Int&gt;&#125; array 数组</span><br><span class="line">* @return &#123;(min: Int, max: Int)&#125; 元组</span><br><span class="line">*</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">minMax</span><span class="params">(array: [Int])</span></span> -&gt; (<span class="built_in">min</span>: <span class="type">Int</span>, <span class="built_in">max</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> currentMin = array[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">var</span> currentMax = array[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">for</span> value <span class="keyword">in</span> array[<span class="number">1</span>..&lt;array.<span class="built_in">count</span>] &#123;</span><br><span class="line">        <span class="keyword">if</span> value &lt; currentMin &#123;</span><br><span class="line">            currentMin = value</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> value &gt; currentMax &#123;</span><br><span class="line">            currentMax = value</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (currentMin, currentMin)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> bounds = minMax([<span class="number">8</span>, -<span class="number">6</span>, <span class="number">2</span>, <span class="number">109</span>, <span class="number">3</span>, <span class="number">71</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"min is \(bounds.min) and max is \(bounds.max)"</span>)</span><br></pre></td></tr></table></figure>
<h4 id="返回可选型元组"><a href="#返回可选型元组" class="headerlink" title="返回可选型元组"></a>返回可选型元组</h4><blockquote>
<p><strong>语法：</strong><code>-&gt; (...)?</code><br><strong>应用：</strong>当返回的元组可能是一个<code>nil</code>值时必须将返回的元组定义为可选型</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* 返回数组种的最大值和最小值</span><br><span class="line">* @param &#123;Array&lt;Int&gt;&#125; array 数组</span><br><span class="line">* @return &#123;(min: Int, max: Int)?&#125; 元组</span><br><span class="line">*</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">minMax</span><span class="params">(array: [Int])</span></span> -&gt; (<span class="built_in">min</span>: <span class="type">Int</span>, <span class="built_in">max</span>: <span class="type">Int</span>)? &#123;</span><br><span class="line">    <span class="comment">// 如果数组为空，返回nil</span></span><br><span class="line">    <span class="keyword">if</span> array.isEmpty &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> currentMin = array[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">var</span> currentMax = array[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">for</span> value <span class="keyword">in</span> array[<span class="number">1</span>..&lt;array.<span class="built_in">count</span>] &#123;</span><br><span class="line">        <span class="keyword">if</span> value &lt; currentMin &#123;</span><br><span class="line">            currentMin = value</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> value &gt; currentMax &#123;</span><br><span class="line">            currentMax = value</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (currentMin, currentMin)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> bounds = minMax([<span class="number">8</span>, -<span class="number">6</span>, <span class="number">2</span>, <span class="number">109</span>, <span class="number">3</span>, <span class="number">71</span>]) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"min is \(bounds.min) and max is \(bounds.max)"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="6-2-函数类型"><a href="#6-2-函数类型" class="headerlink" title="6.2    函数类型"></a>6.2    函数类型</h2><blockquote>
<p><strong>说明：</strong>函数的类型由函数的<code>参数类型</code>和<code>返回值类型</code>决定。项其它类型一样：</p>
<ul>
<li><strong>常量或变量：</strong>可以定义一个类型为函数的常量或变量，并将函数赋值给它</li>
<li><strong>赋值：</strong>如果变量或常量是某种函数类型，那么只有匹配的函数才能进行赋值</li>
<li><strong>类型推断：</strong>当赋值一个函数给常量或变量时，Swift可以推断其函数类型</li>
<li><strong>作为参数</strong></li>
<li><strong>作为返回值类型</strong></li>
</ul>
</blockquote>
<h3 id="6-2-1-基本使用"><a href="#6-2-1-基本使用" class="headerlink" title="6.2.1    基本使用"></a>6.2.1    基本使用</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 函数类型：(Int, Int) -&gt; Int</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">addTwoInts</span><span class="params">(a: Int, <span class="number">_</span> b: Int)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">multiplyTwoInts</span><span class="params">(a: Int, <span class="number">_</span> b: Int)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> a * b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数类型：() -&gt; Void</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printHelloWorld</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"hello, world"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用函数类型变量</span></span><br><span class="line"><span class="keyword">var</span> mathFunction: (<span class="type">Int</span>, <span class="type">Int</span>) -&gt; <span class="type">Int</span> = addTwoInts</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"Result: \(mathFunction(2, 3))"</span>)<span class="comment">// 声明并赋值</span></span><br><span class="line"></span><br><span class="line">mathFunction = multiplyTwoInts<span class="comment">// 重新赋值</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"Result: \(mathFunction(2, 3))"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> anotherMathFunction = addTwoInts<span class="comment">// 自动类型推断</span></span><br></pre></td></tr></table></figure>
<h3 id="6-2-2-作为参数"><a href="#6-2-2-作为参数" class="headerlink" title="6.2.2    作为参数"></a>6.2.2    作为参数</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 作为参数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printMathResult</span><span class="params">(mathFunction: <span class="params">(Int, Int)</span></span></span> -&gt; <span class="type">Int</span>, <span class="number">_</span> a: <span class="type">Int</span>, <span class="number">_</span> b: <span class="type">Int</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Result: \(mathFunction(a, b))"</span>)</span><br><span class="line">&#125;</span><br><span class="line">printMathResult(addTwoInts, <span class="number">3</span>, <span class="number">5</span>)</span><br></pre></td></tr></table></figure>
<h3 id="6-2-3-作为返回值"><a href="#6-2-3-作为返回值" class="headerlink" title="6.2.3    作为返回值"></a>6.2.3    作为返回值</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 作为返回值</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">stepForward</span><span class="params">(input: Int)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> input + <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">stepBackward</span><span class="params">(input: Int)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> input - <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line">* 选择相应步骤的函数</span><br><span class="line">* @param &#123;Bool&#125; backwards 返回哪个函数的依据</span><br><span class="line">* @return &#123;(Int) -&gt; Int&#125; 函数类型返回值</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">chooseStepFunction</span><span class="params">(backwards: Bool)</span></span> -&gt; (<span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> backwards ? stepBackward : stepBackward</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> currentValue = <span class="number">3</span></span><br><span class="line"><span class="keyword">let</span> moveNearerToZero = chooseStepFunction(currentValue &gt; <span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<h2 id="6-3-嵌套函数"><a href="#6-3-嵌套函数" class="headerlink" title="6.3    嵌套函数"></a>6.3    嵌套函数</h2><blockquote>
<p><strong>说明：</strong>定义在其他函数中的函数。</p>
<ul>
<li>对外界不可见</li>
<li>可以通过被函数返回使其对外界可见</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/13/TSPL2_05  控制流/" itemprop="url">
                  5 控制流
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-13T19:38:49+08:00" content="2016-05-13">
              2016-05-13
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/13/TSPL2_05  控制流/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/13/TSPL2_05  控制流/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="5-1-for循环"><a href="#5-1-for循环" class="headerlink" title="5.1    for循环"></a>5.1    for循环</h2><blockquote>
<p><strong>说明：</strong>有两种形式</p>
<ul>
<li><code>for-in</code></li>
<li><code>for initialization; condition; increment</code>（c语言形式）</li>
</ul>
</blockquote>
<h3 id="5-1-1-for-in"><a href="#5-1-1-for-in" class="headerlink" title="5.1.1    for-in"></a>5.1.1    for-in</h3><blockquote>
<p><strong>说明：</strong>可以遍历的集合包括<code>区间</code>、<code>Array</code>、<code>Set</code>、<code>String中的字符</code>。</p>
<ul>
<li>其中每次循环都会被赋值的常量不需要声明</li>
<li>可以使用<code>_</code>忽略每个数据项中具体的值</li>
<li>字典内部是无序的，不经处理不能保证遍历顺序</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 区间</span></span><br><span class="line"><span class="keyword">for</span> index <span class="keyword">in</span> <span class="number">1</span>...<span class="number">5</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"\(index) times 5 is \(index * 5)"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组</span></span><br><span class="line"><span class="keyword">let</span> names = [<span class="string">"Anna"</span>, <span class="string">"Alex"</span>, <span class="string">"Brian"</span>, <span class="string">"Jack"</span>]</span><br><span class="line"><span class="keyword">for</span> name <span class="keyword">in</span> names &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Hello, \(name)!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 字典</span></span><br><span class="line"><span class="keyword">let</span> numberOfLegs = [<span class="string">"spider"</span>: <span class="number">8</span>, <span class="string">"ant"</span>: <span class="number">6</span>, <span class="string">"cat"</span>: <span class="number">4</span>]</span><br><span class="line"><span class="keyword">for</span> (animalName, <span class="number">_</span>) <span class="keyword">in</span> numberOfLegs &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"\(animalName)s"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-1-2-C语言形式"><a href="#5-1-2-C语言形式" class="headerlink" title="5.1.2    C语言形式"></a>5.1.2    C语言形式</h3><blockquote>
<p><strong>语法：</strong>标准C样式。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="keyword">for</span> initialization; condition; increment &#123;</span><br><span class="line">&gt;    statements</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> <span class="keyword">var</span> index = <span class="number">0</span>; index &lt; <span class="number">3</span>; ++index &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"index is \(index)"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-2-while循环"><a href="#5-2-while循环" class="headerlink" title="5.2    while循环"></a>5.2    while循环</h2><blockquote>
<p><strong>说明：</strong>分两类</p>
<ul>
<li><code>while</code></li>
<li><code>repeat-while</code></li>
</ul>
</blockquote>
<h3 id="5-2-1-while"><a href="#5-2-1-while" class="headerlink" title="5.2.1    while"></a>5.2.1    while</h3><blockquote>
<p><strong>说明：</strong>每次在循环开始时计算条件是否符合。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> condition &#123;  </span><br><span class="line">    statements</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-2-2-repeat-while"><a href="#5-2-2-repeat-while" class="headerlink" title="5.2.2    repeat-while"></a>5.2.2    repeat-while</h3><blockquote>
<p><strong>说明：</strong>和<code>while</code>的区别是在判断循环条件之前，先执行一次循环的代码块，然后重复循环直到条件为<code>false</code>。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="keyword">repeat</span> &#123;</span><br><span class="line">    statements</span><br><span class="line">&#125; <span class="keyword">while</span> condition</span><br></pre></td></tr></table></figure>
<h2 id="5-3-条件语句"><a href="#5-3-条件语句" class="headerlink" title="5.3    条件语句"></a>5.3    条件语句</h2><blockquote>
<p><strong>说明：</strong><code>if</code>、<code>switch</code></p>
<ul>
<li><code>if</code>：当条件较为简单且可能的情况很少时使用</li>
<li><code>switch</code>：当条件较复杂、可能情况较多且需要模式匹配的情景使用</li>
</ul>
</blockquote>
<h3 id="5-3-1-if"><a href="#5-3-1-if" class="headerlink" title="5.3.1    if"></a>5.3.1    if</h3><blockquote>
<p><strong>语法：</strong><code>if-[else]</code>、<code>if-else if-...-[else]</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> condition1 &#123;</span><br><span class="line">    <span class="comment">// 处理</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> condition2 &#123;</span><br><span class="line">    <span class="comment">// 处理</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 处理</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> temperatureInFahrenheit = <span class="number">90</span></span><br><span class="line"><span class="keyword">if</span> temperatureInFahrenheit &lt;= <span class="number">32</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"It's very cold. Consider wearing a scarf."</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> temperatureInFahrenheit &gt;= <span class="number">86</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"It's really warm. Don't forget to wear sunscreen."</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"It's not that cold. Wear a t-shirt."</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-3-2-switch"><a href="#5-3-2-switch" class="headerlink" title="5.3.2    switch"></a>5.3.2    switch</h3><blockquote>
<p><strong>语法：</strong>类似C语言</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> some value to consider &#123;</span><br><span class="line">	<span class="keyword">case</span> value <span class="number">1</span>:</span><br><span class="line">	    respond to value <span class="number">1</span></span><br><span class="line">	<span class="keyword">case</span> value <span class="number">2</span>, value <span class="number">3</span>:</span><br><span class="line">	    respond to value <span class="number">2</span> or <span class="number">3</span></span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">	    otherwise, <span class="keyword">do</span> something <span class="keyword">else</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>说明：</strong>和C语言的<code>switch</code>相比更加强悍。<br><strong>更安全：</strong></p>
<ol>
<li>每个<code>case</code>分支都必须包含至少一条语句</li>
<li><code>case</code>和<code>default</code>必须包含所有可能的情况，否则报错</li>
<li>当匹配的<code>case</code>分支中的代码执行完毕，<code>switch</code>终止（不需要手动<code>break</code>）</li>
</ol>
<p><strong>更强大：</strong></p>
<ol>
<li><code>case</code>可以包含多个模式，用<code>,</code>分隔</li>
<li><code>case</code>分支的模式可以是：<code>区间</code>、<code>元组</code></li>
<li>允许多个<code>case</code>匹配到一个值，但执行时只有最前面的被匹配到的分支会执行</li>
<li>值绑定</li>
<li><code>where</code></li>
</ol>
</blockquote>
<h4 id="case多个模式"><a href="#case多个模式" class="headerlink" title="case多个模式"></a><code>case</code>多个模式</h4><blockquote>
<p><strong>用途：</strong>多个值匹配到一种<code>case</code>中。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> someCharacter: <span class="type">Character</span> = <span class="string">"e"</span></span><br><span class="line"><span class="keyword">switch</span> someCharacter &#123;</span><br><span class="line">    <span class="comment">// 原音字符</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">"a"</span>, <span class="string">"e"</span>, <span class="string">"i"</span>, <span class="string">"o"</span>, <span class="string">"u"</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"\(someCharacter) is a vowel"</span>)</span><br><span class="line">    <span class="comment">// 辅音字符</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="string">"d"</span>, <span class="string">"f"</span>, <span class="string">"g"</span>, <span class="string">"h"</span>, <span class="string">"j"</span>, <span class="string">"k"</span>, <span class="string">"l"</span>, <span class="string">"m"</span>,</span><br><span class="line"><span class="string">"n"</span>, <span class="string">"p"</span>, <span class="string">"q"</span>, <span class="string">"r"</span>, <span class="string">"s"</span>, <span class="string">"t"</span>, <span class="string">"v"</span>, <span class="string">"w"</span>, <span class="string">"x"</span>, <span class="string">"y"</span>, <span class="string">"z"</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"\(someCharacter) is a consonant"</span>)</span><br><span class="line">    <span class="comment">// 不匹配24个英文字符</span></span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"\(someCharacter) is not a vowel or a consonant"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="区间"><a href="#区间" class="headerlink" title="区间"></a>区间</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> approximateCount = <span class="number">62</span></span><br><span class="line"><span class="keyword">let</span> countedThings = <span class="string">"moons orbiting saturn"</span></span><br><span class="line"><span class="keyword">var</span> naturalCount: <span class="type">String</span></span><br><span class="line"><span class="keyword">switch</span> approximateCount &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">        naturalCount = <span class="string">"no"</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>..&lt;<span class="number">5</span>:</span><br><span class="line">        naturalCount = <span class="string">"a few"</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">5</span>..&lt;<span class="number">12</span>:</span><br><span class="line">        naturalCount = <span class="string">"several"</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">12</span>..&lt;<span class="number">100</span>:</span><br><span class="line">        naturalCount = <span class="string">"dozens of"</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">100</span>..&lt;<span class="number">1000</span>:</span><br><span class="line">        naturalCount = <span class="string">"hundreds of"</span></span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        naturalCount = <span class="string">"many"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"There are \(naturalCount) \(countedThings)."</span>)</span><br></pre></td></tr></table></figure>
<h4 id="元组"><a href="#元组" class="headerlink" title="元组"></a>元组</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> yetAnotherPoint = (<span class="number">1</span>, -<span class="number">1</span>)</span><br><span class="line"><span class="keyword">switch</span> yetAnotherPoint &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">let</span> (x, y) <span class="keyword">where</span> x == y:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"(\(x), \(y)) is on the line x == y"</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">let</span> (x, y) <span class="keyword">where</span> x == -y:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"(\(x), \(y)) is on the line x == -y"</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">let</span> (x, y):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"(\(x), \(y)) is just some arbitrary point"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="值绑定"><a href="#值绑定" class="headerlink" title="值绑定"></a>值绑定</h4><blockquote>
<p><strong>说明：</strong>在<code>case</code> 分支的模式将匹配的值绑定到一个临时的常量或变量，然后就可以在分之内使用这些常量或变量。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> anotherPoint = (<span class="number">2</span>, <span class="number">0</span>)</span><br><span class="line"><span class="keyword">switch</span> anotherPoint &#123;</span><br><span class="line">	<span class="keyword">case</span> (<span class="keyword">let</span> x, <span class="number">0</span>):</span><br><span class="line">	    <span class="built_in">print</span>(<span class="string">"on the x-axis with an x value of \(x)"</span>)</span><br><span class="line">	<span class="keyword">case</span> (<span class="number">0</span>, <span class="keyword">let</span> y):</span><br><span class="line">	    <span class="built_in">print</span>(<span class="string">"on the y-axis with a y value of \(y)"</span>)</span><br><span class="line">	<span class="keyword">case</span> <span class="keyword">let</span> (x, y):</span><br><span class="line">	    <span class="built_in">print</span>(<span class="string">"somewhere else at (\(x), \(y))"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="where表达式"><a href="#where表达式" class="headerlink" title="where表达式"></a><code>where</code>表达式</h4><blockquote>
<p><strong>说明：</strong><code>case</code> 分支的模式可以使用where语句来判断额外的条件。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> yetAnotherPoint = (<span class="number">1</span>, -<span class="number">1</span>)</span><br><span class="line"><span class="keyword">switch</span> yetAnotherPoint &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">let</span> (x, y) <span class="keyword">where</span> x == y:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"(\(x), \(y)) is on the line x == y"</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">let</span> (x, y) <span class="keyword">where</span> x == -y:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"(\(x), \(y)) is on the line x == -y"</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">let</span> (x, y):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"(\(x), \(y)) is just some arbitrary point"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-4-控制转移语句"><a href="#5-4-控制转移语句" class="headerlink" title="5.4    控制转移语句"></a>5.4    控制转移语句</h2><blockquote>
<p><strong>说明：</strong>Swift 有<code>5</code>种控制转移语句</p>
<ul>
<li><code>continue</code></li>
<li><code>break</code></li>
<li><code>fallthrough</code></li>
<li><code>return</code></li>
<li><code>throw</code></li>
</ul>
</blockquote>
<h3 id="5-4-1-continue"><a href="#5-4-1-continue" class="headerlink" title="5.4.1    continue"></a>5.4.1    continue</h3><blockquote>
<p><strong>说明：</strong>告诉一个循环体立刻停止本次循环迭代，重新开始下次循环迭代。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> puzzleInput = <span class="string">"great minds think alike"</span></span><br><span class="line"><span class="keyword">var</span> puzzleOutput = <span class="string">""</span></span><br><span class="line"><span class="keyword">for</span> character <span class="keyword">in</span> puzzleInput.characters &#123;</span><br><span class="line">    <span class="keyword">switch</span> character &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"a"</span>, <span class="string">"e"</span>, <span class="string">"i"</span>, <span class="string">"o"</span>, <span class="string">"u"</span>, <span class="string">" "</span>:</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        puzzleOutput.append(character)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(puzzleOutput)</span><br></pre></td></tr></table></figure>
<h3 id="5-4-2-break"><a href="#5-4-2-break" class="headerlink" title="5.4.2    break"></a>5.4.2    break</h3><blockquote>
<p><strong>说明：</strong>立刻结束整个控制流的执行。</p>
</blockquote>
<h4 id="switch语句中的break"><a href="#switch语句中的break" class="headerlink" title="switch语句中的break"></a>switch语句中的break</h4><blockquote>
<p><strong>背景：</strong><code>switch</code>的完备性使所有值的情况都要求有对应的分支（但是有的分支內并不需要执行任何代码）<br><strong>说明：</strong>立即结束<code>switch</code>代码块<br><strong>用途：</strong>用来匹配或者忽略一个或多个分支</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> numberSymbol: <span class="type">Character</span> = <span class="string">"三"</span>  <span class="comment">// 简体中文里的数字 3</span></span><br><span class="line"><span class="keyword">var</span> possibleIntegerValue: <span class="type">Int</span>?</span><br><span class="line"><span class="keyword">switch</span> numberSymbol &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="string">"1"</span>, <span class="string">"١"</span>, <span class="string">"一"</span>, <span class="string">"๑"</span>:</span><br><span class="line">    possibleIntegerValue = <span class="number">1</span></span><br><span class="line"><span class="keyword">case</span> <span class="string">"2"</span>, <span class="string">"٢"</span>, <span class="string">"二"</span>, <span class="string">"๒"</span>:</span><br><span class="line">    possibleIntegerValue = <span class="number">2</span></span><br><span class="line"><span class="keyword">case</span> <span class="string">"3"</span>, <span class="string">"٣"</span>, <span class="string">"三"</span>, <span class="string">"๓"</span>:</span><br><span class="line">    possibleIntegerValue = <span class="number">3</span></span><br><span class="line"><span class="keyword">case</span> <span class="string">"4"</span>, <span class="string">"٤"</span>, <span class="string">"四"</span>, <span class="string">"๔"</span>:</span><br><span class="line">    possibleIntegerValue = <span class="number">4</span></span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> integerValue = possibleIntegerValue &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"The integer value of \(numberSymbol) is \(integerValue)."</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"An integer value could not be found for \(numberSymbol)."</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-4-3-fallthrough"><a href="#5-4-3-fallthrough" class="headerlink" title="5.4.3    fallthrough"></a>5.4.3    fallthrough</h3><blockquote>
<p><strong>说明：</strong>使代码执行继续到下一个 <code>case</code> 中的执行代码</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> integerToDescribe = <span class="number">5</span></span><br><span class="line"><span class="keyword">var</span> description = <span class="string">"The number \(integerToDescribe) is"</span></span><br><span class="line"><span class="keyword">switch</span> integerToDescribe &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">11</span>, <span class="number">13</span>, <span class="number">17</span>, <span class="number">19</span>:</span><br><span class="line">    description += <span class="string">" a prime number, and also"</span></span><br><span class="line">    <span class="keyword">fallthrough</span></span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">    description += <span class="string">" an integer."</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-4-4-标签"><a href="#5-4-4-标签" class="headerlink" title="5.4.4    标签"></a>5.4.4    标签</h3><blockquote>
<p><strong>说明：</strong>配合<code>continue</code>或 <code>break</code>实现跳转。适用的语句包括</p>
<ul>
<li><code>while</code>、<code>repeat-while</code></li>
<li><code>for</code></li>
<li><code>switch</code></li>
</ul>
<p><strong>语法：</strong>以<code>while</code>为例子</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">label name: <span class="keyword">while</span> condition &#123;</span><br><span class="line">    statements</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//寻找二维数组中的特殊值</span></span><br><span class="line"><span class="keyword">var</span> board = <span class="type">Array</span>&lt;<span class="type">Array</span>&lt;<span class="type">Int</span>&gt;&gt;()<span class="comment">//声明二维数组</span></span><br><span class="line"><span class="comment">//初始化二维数组</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>...<span class="number">10</span>&#123;</span><br><span class="line">    board.append(<span class="type">Array</span>(<span class="built_in">count</span>:<span class="number">10</span>,repeatedValue:<span class="number">0</span>))</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//随机给二维数组中某个元素赋值1</span></span><br><span class="line"><span class="keyword">let</span> randx = <span class="type">Int</span>(arc4random()%<span class="number">10</span>)</span><br><span class="line"><span class="keyword">let</span> randy = <span class="type">Int</span>(arc4random()%<span class="number">10</span>)</span><br><span class="line">board[randx][randy] = <span class="number">1</span></span><br><span class="line"><span class="comment">//找到这个值为1的元素的位置</span></span><br><span class="line"><span class="keyword">var</span> i = <span class="number">0</span> , j = <span class="number">0</span></span><br><span class="line">mainloop:<span class="keyword">for</span> i = <span class="number">0</span> ; i &lt; <span class="number">10</span> ; i++ &#123;</span><br><span class="line">    <span class="keyword">for</span> j = <span class="number">0</span> ; j &lt; <span class="number">10</span> ; j++ &#123;</span><br><span class="line">        <span class="keyword">if</span> board[i][j] == <span class="number">1</span>&#123;</span><br><span class="line">            <span class="keyword">break</span> mainloop</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">println</span>(<span class="string">"board[\(i)][\(j)] = 1"</span>)</span><br></pre></td></tr></table></figure>
<h2 id="5-5-提前退出"><a href="#5-5-提前退出" class="headerlink" title="5.5    提前退出"></a>5.5    提前退出</h2><blockquote>
<p><strong>说明：</strong>条件为真时，执行<code>guard</code>语句后的代码；不为真则执行<code>else</code>分句中的代码。</p>
<ul>
<li>一个<code>guard</code>语句总是有一个<code>else</code>分句</li>
<li><code>else</code>分支必须通过<code>return</code>、<code>break</code>、<code>continue</code>、<code>throw</code>，或者调用一个不返回的方法或函数（比如<code>fatalError</code>函数）来退出<code>guard</code>所在的代码段。</li>
</ul>
<p><strong>用途：</strong>相比于可以实现同样功能的if语句，按需使用<code>guard</code>语句会提升我们代码的可靠性和可读性。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">greet</span><span class="params">(person: [String: String])</span></span> &#123;</span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> name = person[<span class="string">"name"</span>] <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Hello \(name)"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> location = person[<span class="string">"location"</span>] <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"I hope the weather is nice near you."</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"I hope the weather is nice in \(location)."</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">greet([<span class="string">"name"</span>: <span class="string">"John"</span>])</span><br><span class="line">greet([<span class="string">"name"</span>: <span class="string">"Jane"</span>, <span class="string">"location"</span>: <span class="string">"Cupertino"</span>])</span><br></pre></td></tr></table></figure>
<h2 id="5-6-检测API是否可用"><a href="#5-6-检测API是否可用" class="headerlink" title="5.6    检测API是否可用"></a>5.6    检测API是否可用</h2><blockquote>
<p><strong>用途：</strong>确保我们不会不小心地使用对于当前部署目标不可用的 API。<br><strong>语法：</strong>最后一个参数<code>*</code>是必须写的，用于处理未来潜在的平台。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> #available(platform name version, ..., *) &#123;</span><br><span class="line">    <span class="comment">// 验证的API可用</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 不可用</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>说明：</strong>平台名字可以是<code>iOS</code>，<code>OSX</code>或<code>watchOS</code>，除了特定的主板本号像 <code>iOS 8</code>，我们可以指定较小的版本号像 <code>iOS 8.3</code> 以及 <code>OS X v10.10.3</code>。</p>
<ol>
<li>编译器使用从可用性条件语句中获取的信息去验证在代码块中调用的 <code>API</code> 是否都可用</li>
<li>根据步骤<code>1</code>，在一个<code>if</code>或<code>guard</code>语句中去有条件的执行一段代码</li>
</ol>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> #available(iOS <span class="number">9</span>, <span class="type">OSX</span> <span class="number">10.10</span>, *) &#123;</span><br><span class="line">    <span class="comment">// 在 iOS 使用 iOS 9 的 API, 在 OS X 使用 OS X v10.10 的 API</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 使用先前版本的 iOS 和 OS X 的 API</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/13/TSPL2_04  集合类型/" itemprop="url">
                  4 集合类型
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-13T19:33:00+08:00" content="2016-05-13">
              2016-05-13
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/13/TSPL2_04  集合类型/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/13/TSPL2_04  集合类型/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p><strong>说明：</strong><code>Array、Sets、Dictionary</code>(Swift将这3中类型使纤维范型集合)</p>
</blockquote>
<table>
<thead>
<tr>
<th>集合类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>数组（Array）</td>
<td>有序数据集合</td>
</tr>
<tr>
<td>集合（Sets）</td>
<td>无序无重复数据的集</td>
</tr>
<tr>
<td>字典（Dictionaries）</td>
<td>无序的键值对的值</td>
</tr>
</tbody>
</table>
<p><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202015-11-25%20%E4%B8%8B%E5%8D%8811.16.16.png" alt="Alt text"></p>
<h2 id="4-1-集合的可变性"><a href="#4-1-集合的可变性" class="headerlink" title="4.1    集合的可变性"></a>4.1    集合的可变性</h2><blockquote>
<p><strong>说明：</strong>集合的可变性依赖于声明为常量或变量。</p>
</blockquote>
<table>
<thead>
<tr>
<th>声明</th>
<th>可变性</th>
</tr>
</thead>
<tbody>
<tr>
<td>常量（<code>let</code>）</td>
<td>大小不可改变</td>
</tr>
<tr>
<td>变量（<code>var</code>）</td>
<td>可以添加或移除集合中的项</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>技巧：</strong>不可变的集合性能更好。</p>
</blockquote>
<h2 id="4-2-数组"><a href="#4-2-数组" class="headerlink" title="4.2 数组"></a>4.2 数组</h2><blockquote>
<p><strong>扩展：</strong>Swift中的<code>Array</code>可以桥接到Foundation中的<code>NSArray</code>。</p>
</blockquote>
<h3 id="4-2-1-创建数组"><a href="#4-2-1-创建数组" class="headerlink" title="4.2.1 创建数组"></a>4.2.1 创建数组</h3><blockquote>
<p><strong>说明：</strong>有3种声明数组的形式</p>
</blockquote>
<table>
<thead>
<tr>
<th>形式</th>
<th>说明</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Array&lt;ElementType&gt;(count: Int, repeatedValue)</code></td>
<td>调用数组的<code>构造器</code></td>
<td>如果不提供参数，则会调用另一个构造器（创建空数组）</td>
</tr>
</tbody>
</table>
<p>|<code>[ElementType]（count: Int, repeatedValue）</code>|调用<code>构造器</code>的方式|另一种调用构造器的方式，和上面等价，更常用|<br>|<code>[Element, ...]</code>|数组字面量|<code>[]</code>表示空数组|</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明数组：形式一（构造器，不常用）</span></span><br><span class="line"><span class="keyword">var</span> anotherInts = <span class="type">Array</span>&lt;<span class="type">Int</span>&gt;(<span class="built_in">count</span>: <span class="number">3</span>, repeatedValue: <span class="number">5</span>)</span><br><span class="line"><span class="keyword">var</span> anotherInts2 = <span class="type">Array</span>(<span class="built_in">count</span>: <span class="number">3</span>, repeatedValue: <span class="number">5</span>);</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"someInts is of type [Int] with \(someInts.count) items."</span>)</span><br><span class="line"><span class="comment">// 声明数组：形式二（构造器）</span></span><br><span class="line"><span class="keyword">var</span> someInts = [<span class="type">Int</span>]()</span><br><span class="line"><span class="comment">// 声明数组：形式三（数组字面量）</span></span><br><span class="line"><span class="keyword">var</span> shoppingList1: [<span class="type">String</span>] = [<span class="string">"Eggs"</span>, <span class="string">"Milk"</span>]<span class="comment">// 指定类型</span></span><br><span class="line"><span class="keyword">var</span> shoppingList2 = [<span class="string">"Eggs"</span>, <span class="string">"Milk"</span>]<span class="comment">// 类型推断</span></span><br></pre></td></tr></table></figure>
<h3 id="4-2-2-空数组"><a href="#4-2-2-空数组" class="headerlink" title="4.2.2 空数组"></a>4.2.2 空数组</h3><blockquote>
<p><strong>说明：</strong>3种方式（对应数组声明的3种方式）</p>
<ol>
<li><code>Array[ElementType]（）</code></li>
<li><code>[ElementType] ()</code></li>
<li><code>[]</code>(空数组字面量无法推断类型，声明常量或变量时需指定类型)</li>
</ol>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 空数组</span></span><br><span class="line"><span class="keyword">var</span> emptyArray1 = <span class="type">Array</span>&lt;<span class="type">Int</span>&gt;()</span><br><span class="line"><span class="keyword">var</span> emptyArray2 = [<span class="type">Int</span>]()</span><br><span class="line"><span class="keyword">var</span> emptyArray3: [<span class="type">Int</span>] = []</span><br></pre></td></tr></table></figure>
<h3 id="4-2-3-数组相加"><a href="#4-2-3-数组相加" class="headerlink" title="4.2.3 数组相加"></a>4.2.3 数组相加</h3><blockquote>
<p><strong>说明：</strong><code>+</code>、<code>+=</code>在数组之间起到拼接的作用。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> threeDoubles = [<span class="type">Double</span>](<span class="built_in">count</span>:<span class="number">3</span>, repeatedValue: <span class="number">0</span>)<span class="comment">// [0.0, 0.0, 0.0]</span></span><br><span class="line"><span class="keyword">let</span> anotherThreeDoubles = <span class="type">Array</span>(<span class="built_in">count</span>: <span class="number">3</span>, repeatedValue: <span class="number">2.5</span>)<span class="comment">// [2.5, 2.5, 2.5]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// +</span></span><br><span class="line"><span class="keyword">var</span> sixDouble = threeDoubles + anotherThreeDoubles</span><br><span class="line"></span><br><span class="line"><span class="comment">// +=</span></span><br><span class="line">sixDouble += [<span class="number">3</span>, <span class="number">3</span>]<span class="comment">// [0, 0, 0, 2.5, 2.5, 2.5, 3, 3]</span></span><br></pre></td></tr></table></figure>
<h3 id="4-2-4-数组字面量"><a href="#4-2-4-数组字面量" class="headerlink" title="4.2.4 数组字面量"></a>4.2.4 数组字面量</h3><blockquote>
<p><strong>语法：</strong>一系列由<code>,</code>分割并由<code>[]</code>包含的数值。</p>
<ul>
<li>只能拥有相同类型值</li>
<li>当数组不为<code>[]</code>的时候，不必把数组的类型定义清楚</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> shoppingList = [<span class="string">"Eggs"</span>, <span class="string">"Milk"</span>]</span><br></pre></td></tr></table></figure>
<h3 id="4-2-5-属性和方法（访问和修改数组）"><a href="#4-2-5-属性和方法（访问和修改数组）" class="headerlink" title="4.2.5 属性和方法（访问和修改数组）"></a>4.2.5 属性和方法（访问和修改数组）</h3><h4 id="下标"><a href="#下标" class="headerlink" title="下标"></a>下标</h4><blockquote>
<p><strong>说明：</strong><code>arr[下标或下标区间]</code></p>
<ul>
<li>可以通过<code>下标</code>(<code>下标区间</code>)改变某个(些)已有索引值对应的数据项（<code>下标</code>或<code>下标区间</code>不能超过数组的下标范围）</li>
<li><code>下标区间</code>中<code>下标</code>的数量可以和用来替换其对应的数据项的新数据项数量不同</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> shoppingList = [<span class="string">"Eggs"</span>, <span class="string">"Milk"</span>, <span class="string">"Maple Syrup"</span>, <span class="string">"Flour"</span>]<span class="comment">// 0...3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 将前3项（0, 1, 2）替换为 ["Bananas", "Apples"]</span></span><br><span class="line">shoppingList[<span class="number">0</span>...<span class="number">2</span>] = [<span class="string">"Bananas"</span>, <span class="string">"Apples"</span>]<span class="comment">// ["Bananas", "Apples", "Flour"]</span></span><br></pre></td></tr></table></figure>
<h4 id="count属性"><a href="#count属性" class="headerlink" title="count属性"></a>count属性</h4><blockquote>
<p><strong>类型：</strong><code>Int</code><br><strong>说明：</strong>只读属性，用来获取数组中的数据项数量。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> shoppingList = [<span class="string">"Eggs"</span>, <span class="string">"Milk"</span>]</span><br><span class="line"><span class="comment">// count</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"The shopping list contains \(shoppingList.count) items."</span>)</span><br></pre></td></tr></table></figure>
<h4 id="isEmpty属性"><a href="#isEmpty属性" class="headerlink" title="isEmpty属性"></a>isEmpty属性</h4><blockquote>
<p><strong>类型：</strong><code>Bool</code><br><strong>说明：</strong>用来判断数组是否为空。<br><strong>技巧：</strong>可以作为检查<code>count</code>属性的值是否为0的捷径。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 字面量</span></span><br><span class="line"><span class="keyword">var</span> shoppingList = [<span class="string">"Eggs"</span>, <span class="string">"Milk"</span>]</span><br><span class="line"><span class="keyword">if</span> shoppingList.isEmpty &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"The shopping list is empty."</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"The shopping list is not empty."</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="append方法"><a href="#append方法" class="headerlink" title="append方法"></a>append方法</h4><blockquote>
<p><strong>说明：</strong>在数组后面添加新的数据项。<br><strong>原型：</strong><code>String类型的实例方法</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @param &#123;ElementType&#125; newElement 要被添加的数据项</span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">func</span> <span class="title">append</span><span class="params">(newElement: ElementType)</span></span> -&gt; <span class="type">Void</span></span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> shoppingList = [<span class="string">"Eggs"</span>, <span class="string">"Milk"</span>]</span><br><span class="line">shoppingList.append(<span class="string">"Flour"</span>)<span class="comment">// ["Eggs", "Milk", "Flour"]</span></span><br></pre></td></tr></table></figure>
<h4 id="insert方法"><a href="#insert方法" class="headerlink" title="insert方法"></a>insert方法</h4><blockquote>
<p><strong>说明：</strong>在某个具体索引项之前添加数据项。<br><strong>原型：</strong><code>String类型的实例方法</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @param &#123;ElementType&#125; newElement 要插入的数据项</span><br><span class="line">&gt;* @param &#123;Int&#125; atIndex 下标（插入的位置）</span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">func</span> <span class="title">insert</span><span class="params">(newElement: String, atIndex: Int)</span></span> -&gt; <span class="type">Void</span></span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shoppingList.insert(<span class="string">"Flour"</span>, atIndex: <span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<h4 id="removeAtIndex方法"><a href="#removeAtIndex方法" class="headerlink" title="removeAtIndex方法"></a>removeAtIndex方法</h4><blockquote>
<p><strong>说明：</strong>移除数组中的某一项。<br><strong>原型：</strong><code>String类型的实例方法</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @param &#123;Int&#125; index 要删除的数据项的下标</span><br><span class="line">&gt;* @return &#123;ElementType&#125; 要删除的数据项的类型</span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">func</span> <span class="title">removeAtIndex</span><span class="params">(index: Int)</span></span> -&gt;<span class="type">ElementType</span></span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> shoppingList = [<span class="string">"Eggs"</span>, <span class="string">"Milk"</span>, <span class="string">"Maple Syrup"</span>]</span><br><span class="line"><span class="comment">// 删除第一项</span></span><br><span class="line">shoppingList.removeAtIndex(<span class="number">0</span>)<span class="comment">// "flour"</span></span><br></pre></td></tr></table></figure>
<h4 id="removeFirst函数"><a href="#removeFirst函数" class="headerlink" title="removeFirst函数"></a>removeFirst函数</h4><blockquote>
<p><strong>说明：</strong>删除第一项<br><strong>原型：</strong><code>String类型的实例方法</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @return &#123;ElementType&#125; 删除的数组项</span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">func</span> <span class="title">removeFirst</span><span class="params">()</span></span> -&gt; <span class="type">ElementType</span></span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> shoppingList = [<span class="string">"Eggs"</span>, <span class="string">"Milk"</span>, <span class="string">"Maple Syrup"</span>]</span><br><span class="line"><span class="comment">// 删除第一项</span></span><br><span class="line">shoppingList.removeFirst()<span class="comment">// "Eggs"</span></span><br></pre></td></tr></table></figure>
<h4 id="removeLast函数"><a href="#removeLast函数" class="headerlink" title="removeLast函数"></a>removeLast函数</h4><blockquote>
<p><strong>说明：</strong>删除最后一项<br><strong>原型：</strong><code>String类型的实例方法</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @return &#123;ElementType&#125; 删除的数组项</span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">func</span> <span class="title">removeLast</span><span class="params">()</span></span> -&gt; <span class="type">ElementType</span></span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> shoppingList = [<span class="string">"Eggs"</span>, <span class="string">"Milk"</span>, <span class="string">"Maple Syrup"</span>]</span><br><span class="line"><span class="comment">// 删除第一项</span></span><br><span class="line">shoppingList.removeLast()<span class="comment">// "Maple Syrup"</span></span><br></pre></td></tr></table></figure>
<h3 id="4-2-6-数组遍历"><a href="#4-2-6-数组遍历" class="headerlink" title="4.2.6 数组遍历"></a>4.2.6 数组遍历</h3><blockquote>
<p><strong>说明：</strong>有两种方式</p>
<ul>
<li><code>for-in</code>：只在遍历时获得元素项</li>
<li><code>for-in</code>配合<code>enumerate</code>：遍历时获得元素项和对应下标</li>
</ul>
</blockquote>
<h4 id="enumerate方法"><a href="#enumerate方法" class="headerlink" title="enumerate方法"></a>enumerate方法</h4><blockquote>
<p><strong>说明：</strong>配合<code>for-in</code>使用，返回一个由每一个数据项索引和数据值组成的元组。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// for-in</span></span><br><span class="line"><span class="keyword">var</span> shoppingList = [<span class="string">"Eggs"</span>, <span class="string">"Milk"</span>, <span class="string">"Maple Syrup"</span>]</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> shoppingList &#123;</span><br><span class="line">    <span class="built_in">print</span>(item)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// enumerate属性</span></span><br><span class="line"><span class="keyword">for</span> (index, value) <span class="keyword">in</span> shoppingList.<span class="built_in">enumerate</span>() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Item \(String(index + 1)): \(value)"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-3-集合"><a href="#4-3-集合" class="headerlink" title="4.3    集合"></a>4.3    集合</h2><blockquote>
<p><strong>关键字：</strong><code>Set</code></p>
<ul>
<li>元素类型相同</li>
<li>没有确定顺序</li>
<li>每个元素只出现一次</li>
</ul>
<p><strong>扩展：</strong>Swift中的<code>Set</code>类型被桥接到<code>Foundation</code>中的<code>NSSet</code>类。</p>
</blockquote>
<h3 id="4-3-1-集合类型的哈希值"><a href="#4-3-1-集合类型的哈希值" class="headerlink" title="4.3.1    集合类型的哈希值"></a>4.3.1    集合类型的哈希值</h3><blockquote>
<p><strong>说明：</strong>存储在<code>Set</code>中的类型必须是可<code>哈希化</code>的。</p>
</blockquote>
<table>
<thead>
<tr>
<th>值类型（可哈细化）</th>
<th>条件</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>String</code>、<code>Int</code>、<code>Double</code>、<code>Bool</code></td>
<td>无</td>
<td>所有基本类型（既可以作为值，也可以作为键）</td>
</tr>
<tr>
<td><code>enum</code>类型值</td>
<td>没有关联值</td>
</tr>
<tr>
<td>自定义类型</td>
<td>实现<code>Hashable</code>协议（符合<code>Equatable</code>协议）</td>
<td><code>1.</code>需要提供一个类型为<code>Int</code>的可读属性<code>hashValue</code>；<code>2.</code>提供一个是否相等运算符<code>==</code>的实现</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>注意：</strong>Hashable协议的<code>==</code>实现必须满足三种情况</p>
<ul>
<li>自反性：<code>a == a</code></li>
<li>对称性：<code>a == b</code>意味着<code>b == a</code></li>
<li>传递性：<code>a == b</code> &amp;&amp; <code>b == c</code>意味着<code>a == c</code></li>
</ul>
</blockquote>
<h3 id="4-3-2-声明集合类型"><a href="#4-3-2-声明集合类型" class="headerlink" title="4.3.2    声明集合类型"></a>4.3.2    声明集合类型</h3><blockquote>
<p><strong>说明：</strong>有2种类型</p>
</blockquote>
<table>
<thead>
<tr>
<th>形式</th>
<th>说明</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Set&lt;ElementType&gt;()</code></td>
<td>调用构造器</td>
<td>没有类似<code>[ElementType] ()</code>的简化形式</td>
</tr>
<tr>
<td><code>Set()</code></td>
<td>调用构造器</td>
<td>必要条件是声明的变量或常量不仅制定了<code>Set</code>，而且明确了<code>&lt;ElementType&gt;</code></td>
</tr>
<tr>
<td><code>[Element, ...]</code></td>
<td>字面量</td>
<td>需要明确指定<code>标记名:Set&lt;ElementType&gt;</code>，其中<code>&lt;ElementType&gt;</code>在集合字面量不是<code>[]</code>的情况下可以省略（类型推断）</td>
</tr>
</tbody>
</table>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建空Set（形式1）</span></span><br><span class="line"><span class="keyword">var</span> letters = <span class="type">Set</span>&lt;<span class="type">Character</span>&gt;()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"letters is of type Set&lt;Character&gt; with \(letters.count) items."</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 字面量（形式2）</span></span><br><span class="line"><span class="keyword">var</span> favoriteGenres: <span class="type">Set</span>&lt;<span class="type">String</span>&gt; = [<span class="string">"Rock"</span>, <span class="string">"Classical"</span>, <span class="string">"Hip hop"</span>]</span><br></pre></td></tr></table></figure>
<h3 id="4-3-3-创建和构造一个空的集合"><a href="#4-3-3-创建和构造一个空的集合" class="headerlink" title="4.3.3    创建和构造一个空的集合"></a>4.3.3    创建和构造一个空的集合</h3><blockquote>
<p><strong>说明：</strong>2种形式（对应两种声明方式）</p>
<ul>
<li><code>Set&lt;ElementType&gt;()</code></li>
<li><code>Set()</code></li>
<li><code>[]</code>(无法进行类型推断，需要指定<code>ElementType</code>)</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 形式1</span></span><br><span class="line"><span class="keyword">var</span> emptySet1: <span class="type">Set</span>&lt;<span class="type">String</span>&gt; = []</span><br><span class="line"><span class="comment">// 形式2</span></span><br><span class="line"><span class="keyword">var</span> emptySet2: <span class="type">Set</span>&lt;<span class="type">String</span>&gt; = <span class="type">Set</span>()</span><br><span class="line"><span class="comment">// 形式3</span></span><br><span class="line"><span class="keyword">var</span> emptySet3: <span class="type">Set</span> = <span class="type">Set</span>&lt;<span class="type">String</span>&gt;()</span><br></pre></td></tr></table></figure>
<h3 id="4-3-4-用数组字面量创建集合"><a href="#4-3-4-用数组字面量创建集合" class="headerlink" title="4.3.4    用数组字面量创建集合"></a>4.3.4    用数组字面量创建集合</h3><blockquote>
<p><strong>注意：</strong>对应的常量或变量必须指定了<code>Set</code>类型，否则会被默认为<code>Array</code>。</p>
</blockquote>
<h3 id="4-3-5-属性和方法（访问和修改一个集合）"><a href="#4-3-5-属性和方法（访问和修改一个集合）" class="headerlink" title="4.3.5    属性和方法（访问和修改一个集合）"></a>4.3.5    属性和方法（访问和修改一个集合）</h3><h4 id="count属性-1"><a href="#count属性-1" class="headerlink" title="count属性"></a>count属性</h4><blockquote>
<p><strong>类型：</strong><code>Int</code><br><strong>说明：</strong>只读属性，用来获取<code>Set</code>中的数据项数量。</p>
</blockquote>
<h4 id="isEmpty属性-1"><a href="#isEmpty属性-1" class="headerlink" title="isEmpty属性"></a>isEmpty属性</h4><blockquote>
<p><strong>类型：</strong><code>Bool</code><br><strong>说明：</strong>用来判断数组是否为空。<br><strong>技巧：</strong>可以作为检查<code>count</code>属性的值是否为0的捷径。</p>
</blockquote>
<h4 id="insert方法-1"><a href="#insert方法-1" class="headerlink" title="insert方法"></a>insert方法</h4><blockquote>
<p><strong>说明：</strong>在<code>Set</code>中插入一个元素。<br><strong>原型：</strong><code>Set类型的实例方法</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @param &#123;Hashable&#125; member 新数据项</span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">func</span> <span class="title">insert</span><span class="params">(member: Hashable)</span></span> -&gt; <span class="type">Void</span></span><br></pre></td></tr></table></figure>
<h4 id="remove方法"><a href="#remove方法" class="headerlink" title="remove方法"></a>remove方法</h4><blockquote>
<p><strong>说明：</strong>移除一个数据项<br><strong>原型：</strong><code>Set类型的实例方法</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @param &#123;Hashable&#125; member 要移除的数据项的键</span><br><span class="line">&gt;* @return &#123;Hashable?&#125; 移除的数据项</span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">func</span> <span class="title">remove</span><span class="params">(member: Hashable)</span></span> -&gt; <span class="type">Hashable</span>?</span><br></pre></td></tr></table></figure>
<h4 id="contain方法"><a href="#contain方法" class="headerlink" title="contain方法"></a>contain方法</h4><blockquote>
<p><strong>说明：</strong>检查<code>Set</code>中是否包含一个特定的值。<br><strong>原型：</strong><code>Set类型的实例方法</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @param &#123;Hashable&#125; member 数据项值</span><br><span class="line">&gt;* @return &#123;Bool&#125; 是否包含 </span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">func</span> <span class="title">contains</span><span class="params">(member: Hashable)</span></span> -&gt; <span class="type">Bool</span></span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建空Set（形式1）</span></span><br><span class="line"><span class="keyword">var</span> letters = <span class="type">Set</span>&lt;<span class="type">Character</span>&gt;()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"letters is of type Set&lt;Character&gt; with \(letters.count) items."</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 空Set</span></span><br><span class="line"><span class="comment">// 形式1</span></span><br><span class="line"><span class="keyword">var</span> emptySet1: <span class="type">Set</span>&lt;<span class="type">String</span>&gt; = []</span><br><span class="line"><span class="comment">// 形式2</span></span><br><span class="line"><span class="keyword">var</span> emptySet2: <span class="type">Set</span>&lt;<span class="type">String</span>&gt; = <span class="type">Set</span>()</span><br><span class="line"><span class="comment">// 形式3</span></span><br><span class="line"><span class="keyword">var</span> emptySet3: <span class="type">Set</span> = <span class="type">Set</span>&lt;<span class="type">String</span>&gt;()</span><br><span class="line"><span class="comment">// 清空Set</span></span><br><span class="line">letters = []</span><br><span class="line"></span><br><span class="line"><span class="comment">// 字面量（形式2）</span></span><br><span class="line"><span class="keyword">var</span> favoriteGenres: <span class="type">Set</span>&lt;<span class="type">String</span>&gt; = [<span class="string">"Rock"</span>, <span class="string">"Classical"</span>, <span class="string">"Hip hop"</span>]</span><br><span class="line"><span class="comment">// count</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"I have \(favoriteGenres.count) favorite music genres."</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// isEmpty</span></span><br><span class="line"><span class="keyword">if</span> favoriteGenres.isEmpty &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"As far as music goes, I'm not picky."</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"I have particular music preferences."</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// insert</span></span><br><span class="line">favoriteGenres.insert(<span class="string">"Jazz"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// remove</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> removedGenre = favoriteGenres.remove(<span class="string">"Rock"</span>) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"\(removedGenre) ? I'm over it."</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"I never much cared for thar."</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// contains</span></span><br><span class="line"><span class="keyword">if</span> favoriteGenres.<span class="built_in">contains</span>(<span class="string">"Funk"</span>) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"I get up on the good foot."</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"It's too funky here."</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-3-6-遍历一个集合"><a href="#4-3-6-遍历一个集合" class="headerlink" title="4.3.6    遍历一个集合"></a>4.3.6    遍历一个集合</h3><blockquote>
<p><strong>说明：</strong>如果不做任何处理，使用<code>for-in</code>遍历时<code>Set</code>时并没有确定的顺序。</p>
</blockquote>
<h4 id="sort方法"><a href="#sort方法" class="headerlink" title="sort方法"></a>sort方法</h4><blockquote>
<p><strong>说明：</strong>根据提供的序列返回一个有序<code>Set</code>。<br><strong>原型：</strong><code>Set类型的实例方法</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @return &#123;Set&#125; 带顺序的Set</span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">func</span> <span class="title">sort</span><span class="params">()</span></span> -&gt; <span class="type">Set</span></span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> favoriteGenres: <span class="type">Set</span>&lt;<span class="type">String</span>&gt; = [<span class="string">"Rock"</span>, <span class="string">"Classical"</span>, <span class="string">"Hip hop"</span>]</span><br><span class="line"><span class="comment">// 遍历</span></span><br><span class="line"><span class="keyword">for</span> genre <span class="keyword">in</span> favoriteGenres &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"\(genre)"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// sort</span></span><br><span class="line"><span class="keyword">for</span> genre <span class="keyword">in</span> favoriteGenres.<span class="built_in">sort</span>() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"\(genre)"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-3-7-完成集合操作"><a href="#4-3-7-完成集合操作" class="headerlink" title="4.3.7    完成集合操作"></a>4.3.7    完成集合操作</h3><h4 id="4-3-7-1-基本集合操作"><a href="#4-3-7-1-基本集合操作" class="headerlink" title="4.3.7.1    基本集合操作"></a>4.3.7.1    基本集合操作</h4><blockquote>
<p><strong>说明：</strong>交、差、并、补</p>
</blockquote>
<table>
<thead>
<tr>
<th>集合操作</th>
<th>方法</th>
</tr>
</thead>
<tbody>
<tr>
<td>交</td>
<td>intersect</td>
</tr>
<tr>
<td>差</td>
<td>exclusive</td>
</tr>
<tr>
<td>并</td>
<td>union</td>
</tr>
<tr>
<td>补</td>
<td>subtract</td>
</tr>
</tbody>
</table>
<p><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202015-11-29%20%E4%B8%8B%E5%8D%884.04.29.png" alt="Alt text"></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 奇数</span></span><br><span class="line"><span class="keyword">let</span> oddDigits: <span class="type">Set</span> = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>]</span><br><span class="line"><span class="comment">// 偶数</span></span><br><span class="line"><span class="keyword">let</span> evenDigits: <span class="type">Set</span> = [<span class="number">0</span> ,<span class="number">2</span> ,<span class="number">4</span> ,<span class="number">6</span>, <span class="number">8</span>]</span><br><span class="line"><span class="comment">// 素数</span></span><br><span class="line"><span class="keyword">let</span> singleDigitPrimeNumbers: <span class="type">Set</span> = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 并</span></span><br><span class="line">oddDigits.union(evenDigits).<span class="built_in">sort</span>()<span class="comment">// [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 交</span></span><br><span class="line">oddDigits.intersect(evenDigits).<span class="built_in">sort</span>()<span class="comment">// []</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 差</span></span><br><span class="line">oddDigits.subtract(singleDigitPrimeNumbers)<span class="comment">// [9, 1]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 补</span></span><br><span class="line">oddDigits.exclusiveOr(singleDigitPrimeNumbers).<span class="built_in">sort</span>()<span class="comment">// [1, 2, 9]</span></span><br></pre></td></tr></table></figure>
<h4 id="4-3-7-2-集合成员关系和相等"><a href="#4-3-7-2-集合成员关系和相等" class="headerlink" title="4.3.7.2    集合成员关系和相等"></a>4.3.7.2    集合成员关系和相等</h4><blockquote>
<p><strong>说明：</strong>集合之间的关系可以分为6中情况</p>
</blockquote>
<table>
<thead>
<tr>
<th>关系</th>
<th>判定方式</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>相等</td>
<td><code>==</code></td>
<td>判断两个集合是否包含全部相同的值</td>
</tr>
<tr>
<td>被包含</td>
<td><code>isSubsetOf</code></td>
<td>判断一个集合中的值是否也被包含在另外一个集合中</td>
</tr>
<tr>
<td>包含</td>
<td><code>isSupersetOf</code></td>
<td>判断一个集合中包含另一个集合的所有值</td>
</tr>
<tr>
<td>被包含且不想等</td>
<td><code>isStrucxtSubsetOf</code></td>
<td>判定一个集合是另外一个集合的真子集</td>
</tr>
<tr>
<td>包含且不想等</td>
<td><code>isStructSupersetOf</code></td>
<td>判定一个集合是另外一个集合的父集且不想等</td>
</tr>
<tr>
<td>不相交</td>
<td><code>isDisjoinWith</code></td>
<td>判断两个集合不包含相同的值</td>
</tr>
</tbody>
</table>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> houseAnimals: <span class="type">Set</span> = [<span class="string">"dog"</span>, <span class="string">"cat"</span>]</span><br><span class="line"><span class="keyword">let</span> farmAnimals: <span class="type">Set</span> = [<span class="string">"pig"</span>, <span class="string">"chicken"</span>, <span class="string">"sheep"</span>, <span class="string">"dog"</span>, <span class="string">"cat"</span>]</span><br><span class="line"><span class="keyword">let</span> cityAnimal: <span class="type">Set</span> = [<span class="string">"Dove"</span>, <span class="string">"Mouse"</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 被包含</span></span><br><span class="line">houseAnimals.isSubsetOf(farmAnimals)<span class="comment">// true</span></span><br><span class="line"><span class="comment">// 包含</span></span><br><span class="line">farmAnimals.isSupersetOf(houseAnimals)<span class="comment">// true</span></span><br><span class="line"><span class="comment">// 不相交</span></span><br><span class="line">farmAnimals.isDisjointWith(cityAnimal)<span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<h2 id="4-4-字典"><a href="#4-4-字典" class="headerlink" title="4.4    字典"></a>4.4    字典</h2><blockquote>
<p><strong>类型关键字：</strong><code>Dictionary</code><br><strong>说明：</strong>其实就是键值对容器。</p>
<ul>
<li>每个<code>value</code>都关联唯一的<code>key</code></li>
<li><code>key</code>作为字典中的这个值数据的标示符</li>
<li>没有具体顺序</li>
</ul>
<p><strong>限制：</strong>对<code>key</code>和<code>value</code>的类型要求有所不同</p>
<ul>
<li><code>key</code>：其类型必须遵循<code>Hashable</code>协议</li>
<li><code>value</code>：所有数据类型</li>
</ul>
<p><strong>扩展：</strong>Swift中的<code>Dictionary</code></p>
</blockquote>
<h3 id="4-4-1-创建字典"><a href="#4-4-1-创建字典" class="headerlink" title="4.4.1    创建字典"></a>4.4.1    创建字典</h3><blockquote>
<p><strong>说明：</strong>可划分为<code>3</code>种方式</p>
</blockquote>
<table>
<thead>
<tr>
<th>创建形式</th>
<th>说明</th>
<th>是否只能创建空字典</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>[keyType: valueType] ()</code></td>
<td>调用构造器的简化形式</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td><code>[key1: value1, ...]</code></td>
<td>字面量</td>
<td>否，空字典字面量为<code>[:]</code></td>
<td></td>
</tr>
<tr>
<td><code>Dictionary&lt;Int, String&gt;()</code></td>
<td>调用构造器</td>
<td>是</td>
<td><code>&lt;Int, String&gt;</code>可省略（当变量或常量的键值对类型已指定过时）</td>
</tr>
</tbody>
</table>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方式1：构造器的简化方式</span></span><br><span class="line"><span class="comment">// 指定键值对类型</span></span><br><span class="line"><span class="keyword">var</span> dictionary1 = [<span class="type">Int</span>: <span class="type">String</span>]()</span><br><span class="line"><span class="comment">// 方式2:字面量形式</span></span><br><span class="line"><span class="keyword">var</span> dictionary2: [<span class="type">Int</span>: <span class="type">String</span>] = [<span class="string">"YYZ"</span>: <span class="string">"Toronto"</span>, <span class="string">"DUB"</span>: <span class="string">"Dublin"</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方式3：构造器</span></span><br><span class="line"><span class="comment">// 指定键值对类型</span></span><br><span class="line"><span class="keyword">var</span> dictionary3 = <span class="type">Dictionary</span>&lt;<span class="type">Int</span>, <span class="type">String</span>&gt;()</span><br><span class="line"><span class="comment">// 键值对类型已确定</span></span><br><span class="line"><span class="keyword">var</span> dictionary4: [<span class="type">Int</span>: <span class="type">String</span>] = <span class="type">Dictionary</span>()</span><br></pre></td></tr></table></figure>
<h3 id="4-4-2-访问和修改字典"><a href="#4-4-2-访问和修改字典" class="headerlink" title="4.4.2    访问和修改字典"></a>4.4.2    访问和修改字典</h3><h4 id="下标-1"><a href="#下标-1" class="headerlink" title="下标"></a>下标</h4><blockquote>
<p><strong>说明：</strong>通过下标可以实现字典中<code>key-value</code>的增删改查。<br><strong>注意：</strong>当通过下标使用<code>key</code>访问字典中的<code>value</code>时，返回的是相应的可选型。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> airports: [<span class="type">String</span>: <span class="type">String</span>] = [<span class="string">"YYZ"</span>: <span class="string">"Toronto"</span>, <span class="string">"DUB"</span>: <span class="string">"Dublin"</span>]</span><br><span class="line"><span class="comment">// 添加新key-value</span></span><br><span class="line">airports[<span class="string">"LHR"</span>] = <span class="string">"London"</span></span><br><span class="line"><span class="comment">// 修改value</span></span><br><span class="line">airports[<span class="string">"LHR"</span>] = <span class="string">"London Heathrow"</span></span><br><span class="line"><span class="comment">// 访问</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> airportName = airports[<span class="string">"DUB"</span>] &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"The name of the airport is \(airportName)"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"The airport is not in the aitpoorts dictionary."</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 移除</span></span><br><span class="line">airports[<span class="string">"LHR"</span>] = <span class="literal">nil</span></span><br></pre></td></tr></table></figure>
<h4 id="count属性-2"><a href="#count属性-2" class="headerlink" title="count属性"></a>count属性</h4><blockquote>
<p><strong>类型说明：</strong><code>Int</code><br><strong>说明：</strong>记录着字典中着键值对的数量的只读属性。</p>
</blockquote>
<h4 id="isEmpty属性-2"><a href="#isEmpty属性-2" class="headerlink" title="isEmpty属性"></a>isEmpty属性</h4><blockquote>
<p><strong>类型说明：</strong><code>Bool</code><br><strong>说明：</strong>判断字典是否为空字典。</p>
</blockquote>
<h4 id="keys属性"><a href="#keys属性" class="headerlink" title="keys属性"></a>keys属性</h4><blockquote>
<p><strong>类型：</strong><code>[key1, key2, ...]</code><br><strong>说明：</strong>字典中所有数据项的<code>key</code>构成的数组。</p>
</blockquote>
<h4 id="values属性"><a href="#values属性" class="headerlink" title="values属性"></a>values属性</h4><blockquote>
<p><strong>类型：</strong><code>[value1, value2, ...]</code><br><strong>说明：</strong>字典中所有数据项的<code>value</code>构成的数组。</p>
</blockquote>
<h4 id="removeValueForKey方法"><a href="#removeValueForKey方法" class="headerlink" title="removeValueForKey方法"></a>removeValueForKey方法</h4><blockquote>
<p><strong>说明：</strong>通过<code>key</code>移除键值对。<br><strong>原型：</strong><code>Dictionary类型的实例方法</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @param &#123;Hashable&#125; key 要删除的键值对的键</span><br><span class="line">&gt;* @return &#123;ValueType?&#125; 对应value的可选型</span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">func</span> <span class="title">removeValueForKey</span><span class="params">(key: Hashable)</span></span> -&gt; <span class="type">ValueType</span>?</span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// count</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"The dictionary if airports contains \(airports.count) items."</span>)</span><br><span class="line"><span class="comment">// isEmpty</span></span><br><span class="line"><span class="keyword">if</span> airports.isEmpty &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"The airports dictionary is empty."</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Tge airports dictionary is not empty."</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// removeValueForKey</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> removedValue = airports.removeValueForKey(<span class="string">"DUB"</span>) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"The airports dictionary does not contain a value for DUB."</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"The airports dictionary does not contain a value fot DUB."</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-4-3-字典遍历"><a href="#4-4-3-字典遍历" class="headerlink" title="4.4.3    字典遍历"></a>4.4.3    字典遍历</h3><blockquote>
<p><strong>说明：</strong>通过<code>for-in</code>便利字典时，每一个数据项都以<code>(key, value)</code>元组形式返回。<br><strong>技巧：</strong></p>
<ul>
<li>可以通过临时常量或变量分解<code>(key, value)</code></li>
<li>可以使用<code>keys</code>或<code>values</code>属性获取相应的数组单独进行遍历</li>
<li>字典是无序的，可以通过对<code>keys</code>或<code>values</code>属性使用<code>sort方法</code>获得特定顺序</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 遍历字典</span></span><br><span class="line"><span class="keyword">for</span> (airportCode, airportName) <span class="keyword">in</span> airports &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"\(airportCode): \(airportName)"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 遍历字典的key</span></span><br><span class="line"><span class="keyword">for</span> airportCode <span class="keyword">in</span> airports.keys &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Airport code: \(airportCode)"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 遍历字典的value</span></span><br><span class="line"><span class="keyword">for</span> airportName <span class="keyword">in</span> airports.values &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Airport name: \(airportName)"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 提取key或value构成的数组</span></span><br><span class="line"><span class="keyword">let</span> airportCodes = [<span class="type">String</span>](airports.keys)</span><br><span class="line"><span class="keyword">let</span> airportNames = [<span class="type">String</span>](airports.values)</span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/13/TSPL2_03  字符串和字符/" itemprop="url">
                  3 字符串和字符
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-13T19:32:42+08:00" content="2016-05-13">
              2016-05-13
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/13/TSPL2_03  字符串和字符/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/13/TSPL2_03  字符串和字符/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p><strong>说明：</strong>有序的<code>Character</code>类型的值的集合，通过<code>String类</code>来表示。</p>
<ul>
<li>每一个字符串都是由编码无关的<code>Unicide</code>字符组成</li>
<li>可以通过內插的方式将字符串插入到常量、变量、字面量表达式中</li>
</ul>
<p><strong>扩展：</strong>和Cocoa中的Foundation框架中的<code>NSString类</code>进行了无缝对接</p>
<ul>
<li>可以将创建的任何字符串的值转换成<code>NSString</code></li>
<li>可以调用任意的<code>NSString</code>API</li>
<li>可以在任意要求传入<code>NSString</code>实例作为参数的API中用<code>String类</code>的值代替</li>
</ul>
</blockquote>
<p>##3.1    字符串字面量</p>
<blockquote>
<p><strong>格式：</strong><code>&quot;固定顺序的文本字符集&quot;</code><br><strong>应用：</strong>为常量或变量提供初始值</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> someString = <span class="string">"Some string literal value"</span></span><br></pre></td></tr></table></figure>
<p>##3.2    初始化空字符串</p>
<blockquote>
<p><strong>说明：</strong>2种形式</p>
<ol>
<li>将空的字符串字面量赋值给变量</li>
<li>初始化一个新的<code>String</code>实例</li>
</ol>
<p><strong>判空：</strong>可以通过字符串实例的<code>isEmpty</code>属性(Boolean)来判断字符串是否为空。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 形式1</span></span><br><span class="line"><span class="keyword">var</span> emptyString = <span class="string">""</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 形式2</span></span><br><span class="line"><span class="keyword">var</span> anotherEmptyString = <span class="type">String</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判空</span></span><br><span class="line"><span class="keyword">if</span> emptyString.isEmpty &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Nothing to see here"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>##3.3    字符串可变性</p>
<blockquote>
<p><strong>说明：</strong>和Swift中其它值类型一样，可变性取决于定义为常量还是变量</p>
<ul>
<li>常量：不可改变</li>
<li>变量：可以改变</li>
</ul>
<p><strong>扩展：</strong>在O-C和Cocoa中，字符串的可变性取决于使用<code>NSString类</code>还是<code>NSMutableString类</code>。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义为变量</span></span><br><span class="line"><span class="keyword">var</span> variableString = <span class="string">"Hourse"</span></span><br><span class="line"><span class="comment">// 所以可以修改</span></span><br><span class="line">variableString += <span class="string">" add carriage"</span></span><br></pre></td></tr></table></figure>
<p>##3.4    字符串是值类型</p>
<blockquote>
<p><strong>说明：</strong>意味着在以下操作中通过拷贝来传递值</p>
<ul>
<li>常量、变量赋值操作</li>
<li>在函数、方法中传参</li>
</ul>
<p><strong>意义：</strong>确保传递的字符串不会被意外修改。<br><strong>扩展：</strong>为了保证性能，Swift编译器只会在绝对必要的情况下才进行复制。</p>
<p>##3.5    使用字符<br><strong>说明：</strong><code>Character</code></p>
<ul>
<li>字符类型的常量和字符串相似，不同点在于自能包含一个字符。</li>
<li>用字符常量初始化字符类型必须指定常量或变量为<code>Character</code>，否则默认为字符串类型。</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> exclamatuinMark: <span class="type">Character</span> = <span class="string">"!"</span></span><br></pre></td></tr></table></figure>
<p>###3.5.1    字符串的Chracters属性</p>
<blockquote>
<p><strong>说明：</strong>可以通过该属性遍历字符串对应的字符数组。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 遍历字符串中的字符</span></span><br><span class="line"><span class="keyword">for</span> character <span class="keyword">in</span> <span class="string">"Dog"</span>.characters &#123;</span><br><span class="line">    <span class="built_in">print</span>(character)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>###3.5.2    字符数组转换为字符串</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明字符数组</span></span><br><span class="line"><span class="keyword">let</span> catCharacters: [<span class="type">Character</span>] = [<span class="string">"C"</span>, <span class="string">"a"</span>, <span class="string">"t"</span>]</span><br><span class="line"><span class="comment">// 将字符数组转换为字符串</span></span><br><span class="line"><span class="keyword">let</span> catString = <span class="type">String</span>(catCharacters)</span><br><span class="line"><span class="built_in">print</span>(catString)<span class="comment">// "Cat"</span></span><br></pre></td></tr></table></figure>
<p>##3.6    连接字符串和字符</p>
<blockquote>
<p><strong>说明：</strong>两种方式</p>
<ul>
<li><code>+</code>、<code>+=</code>：字符串拼接</li>
<li><code>append方法</code><br>###append方法<br><strong>说明：</strong>将一个字符附加到字符串变量的尾部<br><strong>原型：</strong><code>String类实例方法</code></li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @param &#123;Character&#125; c 字符</span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;void append(<span class="built_in">c</span>: <span class="type">Character</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>注意：</strong>参数只能是<code>Character</code>常量或变量，不能是字面量(因为存在歧义)</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str1 = <span class="string">"hello"</span></span><br><span class="line"><span class="keyword">let</span> str2 = <span class="string">" there"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//+</span></span><br><span class="line"><span class="keyword">var</span> welcome = str1 + str2<span class="comment">// hello there</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//+=</span></span><br><span class="line"><span class="keyword">var</span> instruction = <span class="string">"look over"</span></span><br><span class="line">instruction += str2<span class="comment">// look over there</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//append</span></span><br><span class="line"><span class="keyword">let</span> exclamationMark: <span class="type">Character</span> = <span class="string">"!"</span></span><br><span class="line">instruction.append(exclamationMark)</span><br></pre></td></tr></table></figure>
<p>##3.7    字符串插值</p>
<blockquote>
<p><strong>用途：</strong>构建新的字符串。<br><strong>语法：</strong><code>\(表达式)</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> multiplier = <span class="number">3</span></span><br><span class="line"><span class="comment">// 通过插值构建新的字符串</span></span><br><span class="line"><span class="keyword">let</span> message = <span class="string">"\(multiplier) times 2.5 is \(Double(multiplier) * 2.5)"</span></span><br></pre></td></tr></table></figure>
<p>##3.8    Unicode</p>
<p>###3.8.1    Unicode标量</p>
<blockquote>
<p><strong>Unicode码位：</strong>格式为<code>U+[1到8位16进制数字]</code></p>
<ul>
<li><strong>Unicode标量码位：</strong>是对应字符或者修饰符的唯一的21位数字，每个<code>Unicode标量</code>都对应着一个<code>Unicode码位</code>，但反过来不成立。</li>
<li><strong>Unicode代理项码位：</strong>Unicode码位中不属于Unicode标量的部分。</li>
</ul>
</blockquote>
<table>
<thead>
<tr>
<th>U+0000~U+D7FF</th>
<th>U+D800~U+DFFF</th>
<th>U+E000~U+10FFF</th>
</tr>
</thead>
<tbody>
<tr>
<td>Unicode标量</td>
<td>unicode代理项</td>
<td>Unicode标量</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>应用：</strong>Swift的<code>String</code>类型是基于Unicode标量建立的。</p>
</blockquote>
<p>###3.8.2    字符串字面量的特殊字符</p>
<blockquote>
<p><strong>说明：</strong>分两类</p>
<ul>
<li>转义字符</li>
<li>Unicode标量</li>
</ul>
</blockquote>
<table>
<thead>
<tr>
<th>特殊字符</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>\0</code></td>
<td>空字符</td>
</tr>
<tr>
<td><code>\\</code></td>
<td>反斜线</td>
</tr>
<tr>
<td><code>\t</code></td>
<td>水平制表符</td>
</tr>
<tr>
<td><code>\n</code></td>
<td>换行符</td>
</tr>
<tr>
<td><code>\r</code></td>
<td>回车符</td>
</tr>
<tr>
<td><code>\&quot;</code></td>
<td>双引号</td>
</tr>
<tr>
<td><code>\&#39;</code></td>
<td>单引号</td>
</tr>
<tr>
<td><code>\u{1到8位16进制数}</code></td>
<td>Unicode标量</td>
</tr>
</tbody>
</table>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// \"</span></span><br><span class="line"><span class="keyword">let</span> wiseWords = <span class="string">"\"Imagination is more importent than knowledge\" - Einstein"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Unocode标量</span></span><br><span class="line"><span class="keyword">let</span> dollarSign = <span class="string">"\u&#123;24&#125;"</span></span><br></pre></td></tr></table></figure>
<p>###3.8.3    可扩展的字形群集</p>
<blockquote>
<p><strong>说明：</strong>有些字符由多个部分组成，每个部分都可以用一个Unicode标量表示。组合起来就形成了一个新字符。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é</span></span><br><span class="line"><span class="keyword">let</span> eAcute: <span class="type">Character</span> = <span class="string">"\u&#123;E9&#125;"</span><span class="comment">// é</span></span><br><span class="line"><span class="keyword">let</span> combinedEAcute: <span class="type">Character</span> = <span class="string">"\u&#123;65&#125;\u&#123;301&#125;"</span><span class="comment">// é</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 한</span></span><br><span class="line"><span class="keyword">let</span> precomposed: <span class="type">Character</span> = <span class="string">"\u&#123;D55C&#125;"</span><span class="comment">// 한</span></span><br><span class="line"><span class="keyword">let</span> decomposed: <span class="type">Character</span> = <span class="string">"\u&#123;1112&#125;\u&#123;1161&#125;\u&#123;11AB&#125;"</span><span class="comment">// 한</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é⃝</span></span><br><span class="line"><span class="keyword">let</span> encosedEAcute: <span class="type">Character</span> = <span class="string">"\u&#123;E9&#125;\u&#123;20DD&#125;"</span><span class="comment">// é⃝</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 🇺🇸</span></span><br><span class="line"><span class="keyword">let</span> regionalIndicatorForUS: <span class="type">Character</span> = <span class="string">"\u&#123;1F1FA&#125;\u&#123;1F1F8&#125;"</span><span class="comment">// 🇺🇸</span></span><br></pre></td></tr></table></figure>
<p>##3.9    计算字符数量</p>
<p>###characters.count属性</p>
<blockquote>
<p><strong>说明：</strong><code>String</code>类实例成员<code>characters</code>提供的记录字符总数的属性。<br><strong>性能问题：</strong>字符串中可能包含可扩展字符群，只有遍历<code>Unicode</code>标量确定字符群表示的字符后才能确定字符串的长度<br><strong>扩展：</strong><code>NSString</code>的<code>length</code>属性不同于swift的<code>String</code>的<code>count</code>属性。前者利用<code>UTF-16</code>表示的16位代码单元数字。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> unusualMenagerie = <span class="string">"Koala, Snail, Penguin, Dromedary"</span></span><br><span class="line"><span class="comment">// 获得字符串中字符的数量</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"unusualMenagerie has \(unusualMenagerie.characters.count)"</span>)<span class="comment">// 32</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用可扩展的群组作为Character拼接到字符串时，字符串的字符数量并不一定会改变</span></span><br><span class="line"><span class="keyword">var</span> word = <span class="string">"cafe"</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"the number of characters in \(word) is \(word.characters.count)"</span>)<span class="comment">// 4</span></span><br><span class="line"></span><br><span class="line">word += <span class="string">"\u&#123;301&#125;"</span><span class="comment">// café</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"the number of characters in \(word) is \(word.characters.count)"</span>)<span class="comment">// 4</span></span><br></pre></td></tr></table></figure>
<p>##3.10    访问和修改字符串</p>
<blockquote>
<p><strong>说明：</strong>两种方式</p>
<ul>
<li>字符串的属性和方法</li>
<li>下标语法<br>###3.10.1    字符串索引<br>####相关属性(2个)</li>
</ul>
</blockquote>
<table>
<thead>
<tr>
<th>字符串实例属性</th>
<th>说明</th>
<th>空字符串相应属性值</th>
</tr>
</thead>
<tbody>
<tr>
<td>startIndex</td>
<td>第一个<code>Character</code>的下标</td>
<td>0</td>
</tr>
<tr>
<td>endIndex</td>
<td>最后一个<code>Character</code>的下标 + 1</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>####predecessor方法</p>
<blockquote>
<p><strong>说明：</strong>通过当前下标获得前一个下标<br><strong>原型：</strong><code>Index类型的成员方法</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @return  &#123;String.CharacterView.Index&#125; 下标索引</span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">func</span> <span class="title">predecessor</span> -&gt; <span class="title">String</span>.<span class="title">CharacterView</span>.<span class="title">Index</span></span></span><br></pre></td></tr></table></figure>
<p>####successor方法</p>
<blockquote>
<p><strong>说明：</strong>通过当前索引获得后面一个索引。<br><strong>原型：</strong><code>Index类型的成员方法</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @return  &#123;String.CharacterView.Index&#125; 下标索引</span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">func</span> <span class="title">successor</span> -&gt; <span class="title">String</span>.<span class="title">CharacterView</span>.<span class="title">Index</span></span></span><br></pre></td></tr></table></figure>
<p>####indices属性</p>
<blockquote>
<p><strong>说明：</strong>包含全部索引的<code>Range</code><br><strong>类型：</strong><code>Range &lt;Index&gt;</code><br><strong>原型：</strong><code>String&gt;characters的成员属性</code></p>
</blockquote>
<p>####advancedBy方法</p>
<blockquote>
<p><strong>说明：</strong>以当前位置为参照，获得相隔指定数量个下标的位置处的下标。<br><strong>原型：</strong><code>String.CharacterView.Index类型的成员方法</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @param &#123;Int&#125; n 距离（正数代表向右移动，负数代表向左移动）</span><br><span class="line">&gt;* @return &#123;Index&#125; 下标</span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">func</span> <span class="title">advancedBy</span><span class="params">(n: Int)</span></span> -&gt; <span class="type">String</span>.<span class="type">CharacterView</span>.<span class="type">Index</span></span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> greeting = <span class="string">"Gunten Tag!"</span></span><br><span class="line"><span class="comment">// 访问第一个字符</span></span><br><span class="line">greeting[greeting.startIndex]<span class="comment">// G</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 访问最后一个字符</span></span><br><span class="line">greeting[greeting.endIndex.predecessor()]<span class="comment">// !</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 访问第二个字符</span></span><br><span class="line">greeting[greeting.startIndex.successor()]<span class="comment">// u</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 访问最后一个字符</span></span><br><span class="line">greeting[greeting.endIndex.advancedBy(-<span class="number">1</span>)] <span class="comment">// !</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// indices属性</span></span><br><span class="line"><span class="keyword">for</span> index <span class="keyword">in</span> greeting.characters.<span class="built_in">indices</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"\(greeting[index])"</span>, terminator: <span class="string">""</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>###3.10.2    插入和删除</p>
<p>####insert函数</p>
<blockquote>
<p><strong>说明：</strong>在一个字符串的指定索引插入一个字符串。<br><strong>原型：</strong><code>String类型的实例方法</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @param &#123;Character&#125; newElement 要插入的字符</span><br><span class="line">&gt;* @param &#123;Index&#125; atIndex 插入的位置</span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">func</span> <span class="title">insert</span><span class="params">(newElement: Character, atIndex: Index)</span></span> -&gt; void</span><br></pre></td></tr></table></figure>
<p>####insertContentsOf函数</p>
<blockquote>
<p><strong>说明：</strong>在一个字符串的指定索引插入一个字符串。<br><strong>原型：</strong><code>String类型的实例方法</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @param &#123;CollectionType&#125; newElements 插入的集合</span><br><span class="line">&gt;* @param &#123;Index&#125; at 插入位置</span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">func</span> <span class="title">insertContentsOf</span><span class="params">(newElements: CollectionType, at: Index)</span></span> -&gt; void</span><br></pre></td></tr></table></figure>
<p>####removeAtIndex函数</p>
<blockquote>
<p><strong>说明：</strong>在一个字符串中的指定索引删除一个字符<br><strong>原型：</strong><code>String类型的实例方法</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @param  &#123;Index&#125; i 要删除的字符对应的索引</span><br><span class="line">&gt;* @return &#123;Character&#125; 删除的字符</span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">func</span> <span class="title">removeAtIndex</span><span class="params">(i: Index)</span></span> -&gt; <span class="type">Character</span></span><br></pre></td></tr></table></figure>
<p>####removeRange函数</p>
<blockquote>
<p><strong>说明：</strong>在一个字符串的指定索引删除一个字串<br><strong>原型：</strong><code>String类型的实例方法</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="function"><span class="keyword">func</span> <span class="title">removeRange</span><span class="params">(subRange: Range&lt;Index&gt;)</span></span> -&gt; void</span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> welcome = <span class="string">"hello"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 在字符串尾部插入一个字符</span></span><br><span class="line">welcome.insert(<span class="string">"!"</span>, atIndex: welcome.endIndex)<span class="comment">// hello</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 在字符串倒数第二个位置插入另一个字符串</span></span><br><span class="line">welcome.insertContentsOf(<span class="string">" there"</span>.characters, at: welcome.endIndex.predecessor())<span class="comment">// hello!</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除指定索引处的字符</span></span><br><span class="line">welcome.removeAtIndex(welcome.endIndex.predecessor())<span class="comment">// hello there!</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除子串</span></span><br><span class="line"><span class="keyword">let</span> range = welcome.endIndex.advancedBy(-<span class="number">6</span>)..&lt;welcome.endIndex<span class="comment">// 5..&lt;11</span></span><br><span class="line">welcome.removeRange(range)<span class="comment">// hello</span></span><br></pre></td></tr></table></figure>
<p>##3.11    比较字符串</p>
<p>###3.11.1    字符串/字符相等</p>
<blockquote>
<p><strong>说明：</strong>使用<code>!=</code>和<code>==</code></p>
<ul>
<li>如果两个字符串（或字符）的可扩展字形群集是标准相等（Unicode标量不同，语言外观相同）的，那就认为它们是相等的</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 比较普通两个字符串</span></span><br><span class="line"><span class="keyword">let</span> quotation = <span class="string">"we're a lot alike, you and I."</span></span><br><span class="line"><span class="keyword">let</span> sameQuotation = <span class="string">"we're a lot alike, you and I."</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> quotation == sameQuotation &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"There two strings are considered equal"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 比较两个Unicode标量不同但外观相同的字符串</span></span><br><span class="line"><span class="keyword">let</span> eAcuteQuestion = <span class="string">"Voulez-vous un caf\u&#123;E9&#125;?"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> combinedEAcuteQuestion = <span class="string">"Voulez-vous uncaf\u&#123;65&#125;\u&#123;301&#125;?"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> eAcuteQuestion == combinedEAcuteQuestion &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"These twostrings are considered equal"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>###33.11.2        前缀/后缀相等</p>
<p>####hasPrefix函数</p>
<blockquote>
<p><strong>说明：</strong>判断字符串是否包含某种前缀。<br><strong>原型：</strong><code>String类型的实例方法</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @param &#123;String&#125; prefix 前缀</span><br><span class="line">&gt;* @return &#123;Boolean&#125; true : 包含前缀；false : 不包含前缀</span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">func</span> <span class="title">hasPrefix</span><span class="params">(<span class="keyword">prefix</span>: String)</span></span> -&gt; <span class="type">Boolean</span></span><br></pre></td></tr></table></figure>
<p>####hasSuffix函数</p>
<blockquote>
<p><strong>说明：</strong>判断字符串是否包含某种后缀。<br><strong>原型：</strong><code>String类型的实例方法</code></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @param &#123;String&#125; suffix 前缀</span><br><span class="line">&gt;* @return &#123;Boolean&#125; true : 包含后缀；false : 不包含后缀</span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">func</span> <span class="title">hasSuffix</span><span class="params">(<span class="keyword">prefix</span>: String)</span></span> -&gt; <span class="type">Boolean</span></span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 场景位置</span></span><br><span class="line"><span class="keyword">let</span> romeoAndJuliet = [</span><br><span class="line">    <span class="string">"Act 1 Scene 1: Verona, A public place"</span>,</span><br><span class="line">    <span class="string">"Act 1 Scene 2: Capulet's mansion"</span>,</span><br><span class="line">    <span class="string">"Act 1 Scene 3: A room in Capulet's room"</span>,</span><br><span class="line">    <span class="string">"Act 2 Scene 1: Outside Capulet's mansion"</span>,</span><br><span class="line">    <span class="string">"Act 2 Scene 2: Capulet's orchard"</span>,</span><br><span class="line">    <span class="string">"Act 2 Scene 3: Ouside Friar Lawrence's cell"</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> act1SceneCount = <span class="number">0</span><span class="comment">// 场景一数量</span></span><br><span class="line"><span class="comment">// 根据前缀删选数据项</span></span><br><span class="line"><span class="keyword">for</span> scene <span class="keyword">in</span> romeoAndJuliet &#123;</span><br><span class="line">    <span class="keyword">if</span> scene.hasPrefix(<span class="string">"Act 1 "</span>) &#123;</span><br><span class="line">        ++act1SceneCount</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"There are \(act1SceneCount) scenes in Act 1"</span>)</span><br></pre></td></tr></table></figure>
<p>##3.12    字符串的Unicode表示形式</p>
<blockquote>
<p><strong>编码方式和字符集：</strong>事实上，计算机存储任何数据（包括文本文件）都是以<code>二进制方式</code>存储的，但字符如何对应到二进制数据，或者说二进制数据如何解读成字符是由<code>编码方式</code>和<code>字符集</code>决定的。每种<code>字符集</code>都对应一种或多种<code>编码方式</code>。<br><strong>说明：</strong>当字符串被保存到文本文件时，会按照某种编码方式存储。而Unicode标量对应的编码方式包括以下三种。</p>
</blockquote>
<table>
<thead>
<tr>
<th>Unicode字符集对应的编码方式</th>
<th>代码单元大小（bit）</th>
<th>对应的String的成员属性</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>UTF-8</strong></td>
<td>8</td>
<td>utf8</td>
</tr>
<tr>
<td><strong>UTF-16</strong></td>
<td>16</td>
<td>utf16</td>
</tr>
<tr>
<td><strong>UTF-32(Unicode标量集合)</strong></td>
<td>32</td>
<td>unicodeScalars</td>
</tr>
</tbody>
</table>
<p>###举个例子：<code>Dog‼🐶</code></p>
<table>
<thead>
<tr>
<th>code unit(十进制)</th>
<th>D</th>
<th>o</th>
<th>g</th>
<th>!!</th>
<th>🐶</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>UTF-8编码</strong></td>
<td>68</td>
<td>111</td>
<td>103</td>
<td>226 128 188</td>
<td>240 159 144 182</td>
</tr>
<tr>
<td><strong>UTF-16编码</strong></td>
<td>68</td>
<td>111</td>
<td>103</td>
<td>8252</td>
<td>55357 56374</td>
</tr>
<tr>
<td><strong>UTF-32(Unicode标量)</strong></td>
<td>68</td>
<td>111</td>
<td>103</td>
<td>8252</td>
<td>128054</td>
</tr>
</tbody>
</table>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/13/TSPL2_02  基本运算符/" itemprop="url">
                  2 基本运算符
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-13T19:32:24+08:00" content="2016-05-13">
              2016-05-13
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/13/TSPL2_02  基本运算符/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/13/TSPL2_02  基本运算符/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <table>
<thead>
<tr>
<th>基本运算</th>
<th>正负</th>
<th>自加/减</th>
<th>自返运算</th>
</tr>
</thead>
<tbody>
<tr>
<td>a+b</td>
<td>+a</td>
<td>a++/++a</td>
<td>a+=b</td>
</tr>
<tr>
<td>a-b</td>
<td>-b</td>
<td><code>b--/--b</code></td>
<td>a-=b</td>
</tr>
<tr>
<td>a*b</td>
<td></td>
<td></td>
<td>a*=b</td>
</tr>
<tr>
<td>a/b</td>
<td></td>
<td></td>
<td>a/=b</td>
</tr>
<tr>
<td>a%b</td>
<td></td>
<td></td>
<td>a%=b</td>
</tr>
</tbody>
</table>
<p>[toc]</p>
<h2 id="2-1-术语"><a href="#2-1-术语" class="headerlink" title="2.1    术语"></a>2.1    术语</h2><ul>
<li>运算符</li>
</ul>
<table>
<thead>
<tr>
<th>按照操作数数量分类</th>
<th>说明</th>
<th>举例</th>
</tr>
</thead>
<tbody>
<tr>
<td>一元运算符</td>
<td>分为前值运算符和后值运算符</td>
<td><code>!</code>、<code>++</code>、<code>--</code>等</td>
</tr>
<tr>
<td>二元运算符</td>
<td>在两个操作数之间</td>
<td>大部分运算符都属于二元运算符</td>
</tr>
<tr>
<td>三元运算符</td>
<td>和C语言一样只有一个三目运算符</td>
<td><code>a ? b : c</code></td>
</tr>
</tbody>
</table>
<ul>
<li>操作数：受运算影响的值叫做操作数</li>
</ul>
<h2 id="2-2-赋值运算符"><a href="#2-2-赋值运算符" class="headerlink" title="2.2    赋值运算符"></a>2.2    赋值运算符</h2><blockquote>
<p><strong>说明：</strong>用来跟新或初始化变量或常量。</p>
<ul>
<li>右边如果是元组，会被分解成多个常量或变量</li>
<li>不返回值（不同于c和o-c）</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> (x, y) = (<span class="number">1</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<h2 id="2-3-算术运算符"><a href="#2-3-算术运算符" class="headerlink" title="2.3    算术运算符"></a>2.3    算术运算符</h2><h3 id="2-3-1-四则运算"><a href="#2-3-1-四则运算" class="headerlink" title="2.3.1    四则运算"></a>2.3.1    四则运算</h3><blockquote>
<p><strong>说明：</strong>其中<code>+</code>允许操作数为字符串，此时不再是四则运算中的加法运算，而是用来拼接字符串。</p>
</blockquote>
<table>
<thead>
<tr>
<th>四则运算符</th>
<th>说明</th>
<th>操作数类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>+</td>
<td>加法或连接符</td>
<td>数值类型或字符串</td>
</tr>
<tr>
<td>-</td>
<td>减法</td>
<td>数值类型</td>
</tr>
<tr>
<td>*</td>
<td>乘法</td>
<td>数值类型</td>
</tr>
<tr>
<td>/</td>
<td>除法</td>
<td>数值类型（两个操作数都是整数则结果取整(<code>Int</code>)，否则为<code>Double</code>）</td>
</tr>
</tbody>
</table>
<h3 id="2-3-2-求余运算符"><a href="#2-3-2-求余运算符" class="headerlink" title="2.3.2    求余运算符"></a>2.3.2    求余运算符</h3><blockquote>
<p><strong>说明：</strong>在其它语言中也叫做取膜运算。<br><strong>规则：</strong><code>余数 = a % b</code>，其中<code>a = (|b| x 倍数) + 余数</code></p>
<ul>
<li><code>b</code>的符号将会被忽略，也就是说 <code>a % b</code>和<code>a % -b</code>相同</li>
</ul>
</blockquote>
<h3 id="2-3-3-浮点数求余运算"><a href="#2-3-3-浮点数求余运算" class="headerlink" title="2.3.3    浮点数求余运算"></a>2.3.3    浮点数求余运算</h3><blockquote>
<p><strong>说明：</strong>不同于<code>c</code>和<code>o-c</code>，<code>Swift</code>中可以对浮点数进行求余。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">8</span> % <span class="number">2.5</span><span class="comment">// 0.5</span></span><br></pre></td></tr></table></figure>
<h3 id="2-3-4-自增和自减运算"><a href="#2-3-4-自增和自减运算" class="headerlink" title="2.3.4    自增和自减运算"></a>2.3.4    自增和自减运算</h3><blockquote>
<p><strong>操作对象：</strong>整型和浮点型<br><strong>技巧：</strong>先修改后返回更符合我们的逻辑，因此除非需要<code>i++（i--）</code>的特性，否则推荐使用<code>++i(--i)</code></p>
</blockquote>
<table>
<thead>
<tr>
<th>相对操作数的位置</th>
<th>自增</th>
<th>自减</th>
<th>返回值</th>
</tr>
</thead>
<tbody>
<tr>
<td>前置</td>
<td><code>++i</code></td>
<td><code>--i</code></td>
<td>先自增，后返回</td>
</tr>
<tr>
<td>后置</td>
<td><code>i++</code></td>
<td><code>i++</code></td>
<td>先返回，后自增</td>
</tr>
</tbody>
</table>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">0</span></span><br><span class="line"><span class="keyword">let</span> b = ++a<span class="comment">// a 1, b 1</span></span><br><span class="line"><span class="keyword">let</span> <span class="built_in">c</span> = a++<span class="comment">// a 2, c 1</span></span><br></pre></td></tr></table></figure>
<h3 id="2-3-5-一元负号运算符"><a href="#2-3-5-一元负号运算符" class="headerlink" title="2.3.5    一元负号运算符"></a>2.3.5    一元负号运算符</h3><blockquote>
<p><strong>符号：</strong><code>-</code><br><strong>说明：</strong>写在操作数之前，中间没有空格</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> three = <span class="number">3</span></span><br><span class="line"><span class="keyword">let</span> minusThree = -three</span><br><span class="line"><span class="keyword">let</span> plusThree = -minusThree</span><br></pre></td></tr></table></figure>
<h3 id="2-3-6-一元正号运算符"><a href="#2-3-6-一元正号运算符" class="headerlink" title="2.3.6    一元正号运算符"></a>2.3.6    一元正号运算符</h3><blockquote>
<p><strong>说明：</strong>不做任何改变地返回操作数的值<br><strong>用途：</strong>和负数一起使用时为整数添加<code>+</code>符号使代码看起来更加对称。</p>
</blockquote>
<h2 id="2-4-复合赋值"><a href="#2-4-复合赋值" class="headerlink" title="2.4    复合赋值"></a>2.4    复合赋值</h2><table>
<thead>
<tr>
<th>自返运算(复合赋值)</th>
</tr>
</thead>
<tbody>
<tr>
<td>a+=2</td>
</tr>
<tr>
<td>a-=2</td>
</tr>
<tr>
<td>a*=2</td>
</tr>
<tr>
<td>a/=2</td>
</tr>
<tr>
<td>a%=2</td>
</tr>
</tbody>
</table>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line">a += <span class="number">2</span><span class="comment">// a 3</span></span><br></pre></td></tr></table></figure>
<h2 id="2-5-比较运算符"><a href="#2-5-比较运算符" class="headerlink" title="2.5    比较运算符"></a>2.5    比较运算符</h2><blockquote>
<p><strong>应用：</strong>多用于<code>if</code>语句</p>
</blockquote>
<table>
<thead>
<tr>
<th>运算符</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>a == b</td>
<td>等于</td>
</tr>
<tr>
<td>a != b</td>
<td>不等于</td>
</tr>
<tr>
<td>a &gt; b</td>
<td>大于</td>
</tr>
<tr>
<td>a &lt; b</td>
<td>小于</td>
</tr>
<tr>
<td>a === b</td>
<td>两个引用指向同一个对象实例</td>
</tr>
<tr>
<td>a !== b</td>
<td>两个引用不指向同一个对象实例</td>
</tr>
</tbody>
</table>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">"word"</span></span><br><span class="line"><span class="keyword">if</span> name == <span class="string">"wword"</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"hello world"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"I'm sorry \(name), but I don't recognize you"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-6-三目运算符"><a href="#2-6-三目运算符" class="headerlink" title="2.6    三目运算符"></a>2.6    三目运算符</h2><blockquote>
<p><strong>语法：</strong><code>问题 ? 答案1 : 答案2</code><br><strong>技巧：</strong>过度使用三目运算符会使简洁的代码变得难懂。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> contentHeight = <span class="number">40</span></span><br><span class="line"><span class="keyword">let</span> hasHeader = <span class="literal">true</span></span><br><span class="line"><span class="keyword">let</span> rowHeight = contentHeight + (hasHeader ? <span class="number">50</span> : <span class="number">20</span>)</span><br></pre></td></tr></table></figure>
<h2 id="2-7-空合运算符"><a href="#2-7-空合运算符" class="headerlink" title="2.7    空合运算符"></a>2.7    空合运算符</h2><blockquote>
<p><strong>语法：</strong><code>a ?? b</code><br><strong>说明：</strong>对可选类型<code>a</code>进行空判断，如果<code>a</code>包含一个值就进行解封，否则就返回一个默认值<code>b</code>。</p>
<ul>
<li><code>a ?? b</code>等价于<code>a != nil ? a! : b</code></li>
<li>表达式<code>a</code>必须是<code>Optional</code>类型</li>
<li>默认值<code>b</code>的类型必须要和<code>a</code>存储的类型保持一致</li>
<li>短路求值：如果<code>a</code>不是<code>nil</code>，则<code>b</code>不会被估值</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> defaultColorName = <span class="string">"red"</span></span><br><span class="line"><span class="keyword">var</span> userDefinedColorName: <span class="type">String</span>?<span class="comment">// nil</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> colorNameToUse = userDefinedColorName ?? defaultColorName<span class="comment">// red</span></span><br></pre></td></tr></table></figure>
<h2 id="2-8-区间运算符"><a href="#2-8-区间运算符" class="headerlink" title="2.8    区间运算符"></a>2.8    区间运算符</h2><blockquote>
<p><strong>说明：</strong>分两种</p>
<ul>
<li>闭区间运算符（<code>a...b</code>）：包含a和b</li>
<li>半开区间运算符（<code>a..&lt;b</code>）：包含a不包含b</li>
</ul>
<p><strong>应用：</strong>在迭代一个区间的所有值时非常有用，比如在<code>for-in</code>循环中。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> names = [<span class="string">"Anna"</span>, <span class="string">"Alex"</span>, <span class="string">"Brain"</span>, <span class="string">"Jack"</span>]</span><br><span class="line"><span class="keyword">let</span> <span class="built_in">count</span> = names.<span class="built_in">count</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;<span class="built_in">count</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"第 \(i + 1) 个人叫 \(names[i])"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-9-逻辑运算符"><a href="#2-9-逻辑运算符" class="headerlink" title="2.9    逻辑运算符"></a>2.9    逻辑运算符</h2><blockquote>
<p><strong>说明：</strong>一共3个</p>
</blockquote>
<table>
<thead>
<tr>
<th>逻辑运算符</th>
<th>说明</th>
<th>是否短路</th>
<th>结合性</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>!a</code></td>
<td>逻辑非</td>
<td></td>
</tr>
<tr>
<td><code>a &amp;&amp; b</code></td>
<td>逻辑与</td>
<td>是</td>
<td>左结合</td>
</tr>
<tr>
<td><code>a｜｜b</code></td>
<td>逻辑或</td>
<td>是</td>
<td>左结合</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>提高可读性：</strong></p>
<ul>
<li>多个逻辑运算符组合运算时使用括号来明确优先级</li>
<li>小心地选择布尔常量或变量</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (enteredDoorCode &amp;&amp; passedRetinaScan) || hasDoorKey || knowsOverridePassword &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Welcome!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"ACCESS DENIED"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="Sean" />
          <p class="site-author-name" itemprop="name">Sean</p>
          <p class="site-description motion-element" itemprop="description">整理了一批过去一段时间ios相关的笔记，其它的笔记也整理下？源码分享出来？再说吧...反正也只有自己会看吧...</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">98</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">13</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Sean</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"lapuda-er"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    <script src="/vendors/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  






  
  

  

  

  

</body>
</html>
