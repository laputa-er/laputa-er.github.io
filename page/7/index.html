<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="整理了一批过去一段时间ios相关的笔记，其它的笔记也整理下？源码分享出来？再说吧...反正也只有自己会看吧...">
<meta property="og:type" content="website">
<meta property="og:title" content="Sean">
<meta property="og:url" content="http://laputa-er.github.io/page/7/index.html">
<meta property="og:site_name" content="Sean">
<meta property="og:description" content="整理了一批过去一段时间ios相关的笔记，其它的笔记也整理下？源码分享出来？再说吧...反正也只有自己会看吧...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Sean">
<meta name="twitter:description" content="整理了一批过去一段时间ios相关的笔记，其它的笔记也整理下？源码分享出来？再说吧...反正也只有自己会看吧...">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://laputa-er.github.io/page/7/"/>

  <title> Sean </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Sean</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">笔记分享</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/13/o-c基础教程第二版_08  Foundation Kit介绍/" itemprop="url">
                  8 Foundation Kit介绍
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-13T10:38:55+08:00" content="2016-05-13">
              2016-05-13
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/13/o-c基础教程第二版_08  Foundation Kit介绍/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/13/o-c基础教程第二版_08  Foundation Kit介绍/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p><strong>说明：</strong><code>Cocoa</code>的几个重要框架</p>
</blockquote>
<table>
<thead>
<tr>
<th>框架</th>
<th>说明</th>
<th>兼容</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>Foundation Kit</td>
<td>两类UI框架的基础，包含很多有用的、面向数据的简单类和数据类型</td>
<td>ios和OS X</td>
<td>基于CoreFoundation框架</td>
</tr>
<tr>
<td>Application Kit(Appkit)</td>
<td>包含所有用户界面对象和高级类</td>
<td>OS X</td>
<td><a href="">16章</a></td>
</tr>
<tr>
<td>User Interface Kit(UIKit)</td>
<td>用户界面</td>
<td>ios</td>
<td><a href="">15章</a></td>
</tr>
</tbody>
</table>
<h2 id="8-1-稳固的-Foundation"><a href="#8-1-稳固的-Foundation" class="headerlink" title="8.1    稳固的 Foundation"></a>8.1    稳固的 Foundation</h2><blockquote>
<p><strong>说明：</strong>两类UI框架的基础，包含很多有用的、面向数据的简单类和数据类型。包含<code>NSString</code>、<code>NSArray</code>、<code>NSEnumerator</code>、和<code>NSNumber</code>等100多个类。<br><strong>扩展：</strong><code>Foundation</code>框架以<code>CoreFoundation</code>框架为（纯C编写）基础，<code>CoreFoundation</code>中的函数和变量的名称以<code>CF</code>开头。</p>
</blockquote>
<h2 id="8-2-使用项目样本代码"><a href="#8-2-使用项目样本代码" class="headerlink" title="8.2    使用项目样本代码"></a>8.2    使用项目样本代码</h2><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> main(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[]) &#123;</span><br><span class="line">    <span class="keyword">@autoreleasepool</span> &#123;</span><br><span class="line">        <span class="comment">// insert code here...</span></span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"Hello, World!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="8-3-一些有用的数据类型"><a href="#8-3-一些有用的数据类型" class="headerlink" title="8.3    一些有用的数据类型"></a>8.3    一些有用的数据类型</h2><h3 id="8-3-1-范围"><a href="#8-3-1-范围" class="headerlink" title="8.3.1    范围"></a>8.3.1    范围</h3><blockquote>
<p><strong>类型：</strong><code>NSRange</code><br><strong>原型描述：</strong><code>Foundation.h</code></p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="keyword">typedef</span> <span class="keyword">struct</span> _<span class="built_in">NSRange</span> &#123;</span><br><span class="line">&gt;    <span class="keyword">unsigned</span> <span class="keyword">int</span> location;</span><br><span class="line">&gt;    <span class="keyword">unsigned</span> <span class="keyword">int</span> length;</span><br><span class="line">&gt;&#125; <span class="built_in">NSRange</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>说明：</strong>用来表示相关事物的范围，通常是字符串里字符范围或者数组里的元素范围。有<code>3</code>中创建方式</p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方式一：直接给字段赋值</span></span><br><span class="line"><span class="built_in">NSRange</span> range1;</span><br><span class="line">range.location = <span class="number">17</span>;</span><br><span class="line">range.length = <span class="number">4</span>;</span><br><span class="line"><span class="comment">// 方式二：利用c语言的聚合结构赋值机制</span></span><br><span class="line"><span class="built_in">NSRange</span> range2 = &#123;<span class="number">17</span>, <span class="number">4</span>&#125;;</span><br><span class="line"><span class="comment">// 方式三：Cocoa提供的一个快捷函数NSMakeRange，优点是能够在任何能够使用函数的地方使用</span></span><br><span class="line"><span class="built_in">NSRange</span> range3 = <span class="built_in">NSMakeRange</span>(<span class="number">17</span>, <span class="number">4</span>);</span><br></pre></td></tr></table></figure>
<h3 id="8-3-2-几何数据类型"><a href="#8-3-2-几何数据类型" class="headerlink" title="8.3.2    几何数据类型"></a>8.3.2    几何数据类型</h3><blockquote>
<p><strong>源：</strong><code>Cocoa</code>（引用<code>C</code>语言编写的<code>Core Graphics</code>框架）<br><strong>说明：</strong>包括一些用来处理图形的<code>数据类型</code>和创建这些数据类型的<code>快捷方法</code>。<br><strong>原型：</strong></p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="built_in">CGPoint</span> &#123;</span><br><span class="line">	<span class="keyword">float</span> x;</span><br><span class="line">	<span class="keyword">float</span> y;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">struct</span> <span class="built_in">CGSize</span> &#123;</span><br><span class="line">	<span class="keyword">float</span> width;</span><br><span class="line">	<span class="keyword">float</span> height;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">struct</span> <span class="built_in">CGRect</span> &#123;</span><br><span class="line">	<span class="built_in">CGPoint</span> origin;</span><br><span class="line">	<span class="built_in">CGSize</span> size;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>扩展：</strong>所有的<code>O-C</code>对象都是动态分配的，而动态分配是一个代价较大的操作，会消耗大量的时间。所以为了性能，<code>GUI</code>程序更倾向使用结构体。</p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> main(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[]) &#123;</span><br><span class="line">    <span class="comment">// 矩形原点</span></span><br><span class="line">    <span class="built_in">CGPoint</span> point = <span class="built_in">CGPointMake</span>(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="comment">// 矩形大小</span></span><br><span class="line">    <span class="built_in">CGSize</span> size = <span class="built_in">CGSizeMake</span>(<span class="number">8</span>, <span class="number">10</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 矩形</span></span><br><span class="line">    <span class="built_in">CGRect</span> rect = <span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">8</span>, <span class="number">10</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="8-4-字符串"><a href="#8-4-字符串" class="headerlink" title="8.4    字符串"></a>8.4    字符串</h2><h3 id="8-4-1-创建字符串"><a href="#8-4-1-创建字符串" class="headerlink" title="8.4.1    创建字符串"></a>8.4.1    创建字符串</h3><h4 id="stringWithFormat方法"><a href="#stringWithFormat方法" class="headerlink" title="stringWithFormat方法"></a>stringWithFormat方法</h4><blockquote>
<p><strong>说明：</strong>通过格式字符串和参数来创建<code>NSString</code><br><strong>原型：</strong><code>NSString</code></p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;NSString *&#125; format 格式串</span><br><span class="line">* @param &#123;...&#125; 对应参数</span><br><span class="line">* @reuturn &#123;id&#125; NSString对象</span><br><span class="line">*/</span></span><br><span class="line">+ (<span class="keyword">id</span>) stringWithFormat: (<span class="built_in">NSString</span> *) format, ...;</span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSString</span> *height;</span><br><span class="line">height = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"Your height is %d feet, %d inches"</span>, <span class="number">5</span>, <span class="number">11</span>];</span><br></pre></td></tr></table></figure>
<h3 id="8-4-2-类方法"><a href="#8-4-2-类方法" class="headerlink" title="8.4.2    类方法"></a>8.4.2    类方法</h3><blockquote>
<p><strong>说明：</strong>如果在声明方法时添加了<code>+</code>，就是把这个方法定义为<code>类方法(class method)</code>。</p>
<ul>
<li>通常用于工厂方法</li>
<li>也可以用来访问全局数据</li>
</ul>
<p><strong>原理：</strong><code>Objective-C</code>运行时生成一个类的时候，会创建一个代表该类的<code>类对象（class object）</code>，包含了指向超类、类名和类方法列表的指针，还包含一个<code>long</code>类型的数据，为新创建的实例对象指定大小（以字节为单位）。</p>
<p><strong>扩展：</strong>类方法和实例方法</p>
</blockquote>
<table>
<thead>
<tr>
<th>标识</th>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>+</td>
<td>类方法</td>
<td>属于类的方法</td>
</tr>
<tr>
<td>-</td>
<td>实例方法</td>
<td>将会在指定的对象实例中起作用</td>
</tr>
</tbody>
</table>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// UIColor的类方法：redColor（访问全局数据）</span></span><br><span class="line"><span class="built_in">NSColor</span> *haveTheBlues = [<span class="built_in">NSColor</span> blueColor];</span><br><span class="line"><span class="built_in">UIColor</span> *blueMan = [<span class="built_in">UIColor</span> blueColor];</span><br></pre></td></tr></table></figure>
<h3 id="8-4-4-关于大小"><a href="#8-4-4-关于大小" class="headerlink" title="8.4.4    关于大小"></a>8.4.4    关于大小</h3><h4 id="length实例方法"><a href="#length实例方法" class="headerlink" title="length实例方法"></a>length实例方法</h4><blockquote>
<p><strong>说明：</strong>返回字符串中字符的个数，能够准确无误地处理各种语言的字符串。<br><strong>原型：</strong><code>NSString</code></p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span><br><span class="line">&gt;* @return &#123;NSUInter&#125; 字符串中字符的数目</span><br><span class="line">&gt;*/</span></span><br><span class="line">&gt;- (<span class="built_in">NSUInter</span>) length;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>扩展：</strong>在C语言中处理这些国际字符串很麻烦，因为一个字符占用的空间可能多于一个字节，使用<code>strlen</code>只能计算字节数的函数会返回错误的数值。</p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSString</span> height = <span class="string">@"Hello world!"</span>;</span><br><span class="line"><span class="keyword">if</span> ([height length] &gt; <span class="number">35</span>) &#123;</span><br><span class="line">	<span class="built_in">NSLog</span>(<span class="string">@"wow, you're really tail!"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="8-4-4-字符串比较"><a href="#8-4-4-字符串比较" class="headerlink" title="8.4.4    字符串比较"></a>8.4.4    字符串比较</h3><h4 id="isEqualToString实例方法"><a href="#isEqualToString实例方法" class="headerlink" title="isEqualToString实例方法"></a>isEqualToString实例方法</h4><blockquote>
<p><strong>说明：</strong>比较接收方和作为参数传递过来的字符串。<br><strong>原型：</strong><code>NSString</code></p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;NSString *&#125; aString 字符串</span><br><span class="line">* @return &#123;BOOL&#125; YES 内容相同，NO 内容不同</span><br><span class="line">*/</span></span><br><span class="line">- (<span class="built_in">BOOL</span>) isEqualToString: (<span class="built_in">NSString</span> *) aString</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>扩展：</strong><code>==</code>运算符用来检查两个对象是否为同一事物；<code>isEqualToString</code>用来检查两个字符串的内容是否相等。</p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 字符串比较</span></span><br><span class="line"><span class="built_in">NSString</span> *thing1 = <span class="string">@"hello 5"</span>;</span><br><span class="line"><span class="built_in">NSString</span> *thing2 = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"hello %d"</span>, <span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ([thing1 isEqualToString:thing2]) &#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"They are the same."</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="compare实例方法"><a href="#compare实例方法" class="headerlink" title="compare实例方法"></a>compare实例方法</h4><blockquote>
<p><strong>说明：</strong>将接收对象和传递过来的字符串逐个进行比较</p>
<ul>
<li>区分大小写</li>
<li>返回一个显示比较结果的枚举类型</li>
</ul>
<p><strong>原型：</strong><code>NSString</code></p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;NSString *&#125; aString 字符串</span><br><span class="line">* @return &#123;NSComparisonResult&#125; 包含比较结果的枚举类型</span><br><span class="line">*/</span></span><br><span class="line">- (<span class="built_in">NSComparisonResult</span>) compare: (<span class="built_in">NSString</span> *) aString;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>返回值原型：</strong></p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> &#123;</span><br><span class="line">    <span class="built_in">NSOrderedAscending</span> = <span class="number">-1</span>;<span class="comment">// 左侧小于右侧</span></span><br><span class="line">    <span class="built_in">NSOrderdSame</span>,<span class="comment">// 两侧字符串相同</span></span><br><span class="line">    <span class="built_in">NSOrderdDescending</span><span class="comment">// 左侧大于右侧</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">NSInteger</span> <span class="built_in">NSComparisonResult</span>;</span><br></pre></td></tr></table></figure>
<h3 id="8-4-5-不区分大小写的比较"><a href="#8-4-5-不区分大小写的比较" class="headerlink" title="8.4.5    不区分大小写的比较"></a>8.4.5    不区分大小写的比较</h3><h4 id="compare实例方法（2个参数）"><a href="#compare实例方法（2个参数）" class="headerlink" title="compare实例方法（2个参数）"></a>compare实例方法（2个参数）</h4><blockquote>
<p><strong>说明：</strong>比较字符串，有更多选择权，可以使用<code>位</code>或<code>bitwise-OR远端符（|）</code>来添加选项标记。</p>
</blockquote>
<table>
<thead>
<tr>
<th>选项标记</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>NSCaseInsensitiveSearch</td>
<td>不区分大小写字符</td>
</tr>
<tr>
<td>NSLiteralSearch</td>
<td>进行完全比较，区分大小写</td>
</tr>
<tr>
<td>NSNumericSearch</td>
<td>比较字符串的字符个数，而不是字符串值</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>原型：</strong><code>NSString</code></p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;NSString *&#125; aString 字符串</span><br><span class="line">* @option &#123;NSStringCompareOption&#125; mask 比较选项</span><br><span class="line">* @return &#123;NSComparisonResult&#125; 包含比较结果的枚举类型</span><br><span class="line">*/</span></span><br><span class="line">- (<span class="built_in">NSComparisonResult</span>) compare: (<span class="built_in">NSString</span> *) aString</span><br><span class="line">options: (<span class="built_in">NSStringCompareOption</span>) mask;</span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 不区分大小写、比较字符串的字符个数（而不是值）</span></span><br><span class="line"><span class="keyword">if</span> ([thing1 compare:thing2 options:<span class="built_in">NSCaseInsensitiveSearch</span> | <span class="built_in">NSNumericSearch</span>] == <span class="built_in">NSOrderedSame</span>) &#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"They match!"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="8-4-6-字符串是否还包含别的字符串"><a href="#8-4-6-字符串是否还包含别的字符串" class="headerlink" title="8.4.6    字符串是否还包含别的字符串"></a>8.4.6    字符串是否还包含别的字符串</h3><h3 id="hasPrefix实例方法"><a href="#hasPrefix实例方法" class="headerlink" title="hasPrefix实例方法"></a>hasPrefix实例方法</h3><blockquote>
<p><strong>说明：</strong>检查字符串是否是以另一个字符串开头<br><strong>原型：</strong><code>NSString</code></p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">*@param &#123;NSString *&#125; aString 子字符串</span><br><span class="line">*@return &#123;BOOL&#125; YES， NO</span><br><span class="line">*/</span></span><br><span class="line">- (<span class="built_in">BOOL</span>) hasPrefix: (<span class="built_in">NSString</span> *) aString;</span><br></pre></td></tr></table></figure>
<h3 id="hasSuffix实例方法"><a href="#hasSuffix实例方法" class="headerlink" title="hasSuffix实例方法"></a>hasSuffix实例方法</h3><blockquote>
<p><strong>说明：</strong>检查字符串是否是以另一个字符串结尾<br><strong>原型：</strong><code>NSString</code></p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">*@param &#123;NSString *&#125; aString 子字符串</span><br><span class="line">*@return &#123;BOOL&#125; YES ， NO</span><br><span class="line">*/</span></span><br><span class="line">- (<span class="built_in">BOOL</span>) hasSuffix: (<span class="built_in">NSString</span> *) aString;</span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSString</span> *fileName = <span class="string">@"draft-chapter.pages"</span>;</span><br><span class="line"><span class="keyword">if</span> ([fileName hasPrefix:<span class="string">@"draft"</span>]) &#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"this is a draft."</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> ([fileName hasSuffix:<span class="string">@".mov"</span>]) &#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"this is a movie"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="rangeOfString实例方法"><a href="#rangeOfString实例方法" class="headerlink" title="rangeOfString实例方法"></a>rangeOfString实例方法</h4><blockquote>
<p><strong>说明：</strong>查看字符串的某处是否包含指定子字符串。<br><strong>原型：</strong><code>NSString</code></p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;NSString *&#125; rangeOfString 子字符串</span><br><span class="line">* @return &#123;NSRange&#125; 包含匹配的位置信息和能够匹配上的字符个数</span><br><span class="line">*/</span></span><br><span class="line">- (<span class="built_in">NSRange</span>) rangeOfString: (<span class="built_in">NSString</span> *) aString;</span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 任意位置</span></span><br><span class="line"><span class="built_in">NSRange</span> range = [fileName rangeOfString:<span class="string">@"chapter"</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"range.location:%d, range.length: %d"</span>, range.location, range.length);</span><br></pre></td></tr></table></figure>
<h3 id="8-4-7-可变性"><a href="#8-4-7-可变性" class="headerlink" title="8.4.7    可变性"></a>8.4.7    可变性</h3><blockquote>
<p><strong>说明：</strong><code>NSString</code>是不可变（不能通过删除字符或添加字符的方式改变它）。的，<code>NSMutableString</code>是可变的。<br><strong>注意：</strong><code>NSMutableString</code>是<code>NSString</code>的子类。</p>
</blockquote>
<h4 id="stringWithCapacity类方法"><a href="#stringWithCapacity类方法" class="headerlink" title="stringWithCapacity类方法"></a>stringWithCapacity类方法</h4><blockquote>
<p><strong>说明：</strong>创建一个新的<code>NSMutableString</code></p>
<ul>
<li><strong>参数：</strong>字符串的大小并不限于所提供的容量，这个容量仅是最优值，用来预分配一块内存，这样后续操作的速度会快很多。</li>
</ul>
<p><strong>原型：</strong><code>NSString</code></p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;NSInteger&#125; 最优容量</span><br><span class="line">* @return &#123;id&#125; NSMutable对象</span><br><span class="line">*/</span></span><br><span class="line">+ <span class="keyword">id</span> stringWithCapacity: (<span class="built_in">NSUInteger</span>) capacity;</span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建可变字符串对象</span></span><br><span class="line"><span class="built_in">NSMutableString</span> *string = [<span class="built_in">NSMutableString</span> stringWithCapacity: <span class="number">42</span>];</span><br></pre></td></tr></table></figure>
<h4 id="appendString实例方法"><a href="#appendString实例方法" class="headerlink" title="appendString实例方法"></a>appendString实例方法</h4><blockquote>
<p><strong>说明：</strong>接收参数<code>aString</code>，然后将其复制到接收对象的末尾。<br><strong>原型：</strong><code>NSString</code></p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;NSString *&#125; aString 子字符串</span><br><span class="line">*/</span></span><br><span class="line">- (<span class="keyword">void</span>) appendString: (<span class="built_in">NSString</span> *) aString;</span><br></pre></td></tr></table></figure>
<h4 id="appendFormat实例方法"><a href="#appendFormat实例方法" class="headerlink" title="appendFormat实例方法"></a>appendFormat实例方法</h4><blockquote>
<p><strong>说明：</strong>将格式化的字符串附加在接收字符串的末尾<br><strong>原型：</strong><code>NSString</code></p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;NSString *&#125; format 格式串</span><br><span class="line">* @param &#123;...&#125; 格式串对应的值</span><br><span class="line">*/</span></span><br><span class="line">- (<span class="keyword">void</span>) appendFormat: (<span class="built_in">NSString</span> *) format, ...;</span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 可变字符串方法</span></span><br><span class="line"><span class="built_in">NSMutableString</span> *mString = [<span class="built_in">NSMutableString</span> stringWithCapacity:<span class="number">50</span>];</span><br><span class="line">[mString appendString:<span class="string">@"Hello there!"</span>];</span><br><span class="line">[mString appendFormat:<span class="string">@"human %d"</span>, <span class="number">42</span>];</span><br></pre></td></tr></table></figure>
<h4 id="deleteCharactersInRange实例方法"><a href="#deleteCharactersInRange实例方法" class="headerlink" title="deleteCharactersInRange实例方法"></a>deleteCharactersInRange实例方法</h4><blockquote>
<p><strong>说明：</strong>删除字符串中的字符。<br><strong>原型：</strong><code>NSString</code></p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;NSRange&#125; aRange 指定删除的部分坐在的区域</span><br><span class="line">*/</span></span><br><span class="line">- (<span class="keyword">void</span>) deleteCharactersInRange: (<span class="built_in">NSRange</span>) aRange;</span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建可变字符串对象</span></span><br><span class="line"><span class="built_in">NSMutableString</span> *friends = [<span class="built_in">NSMutableString</span> stringWithCapacity: <span class="number">50</span>];</span><br><span class="line"><span class="comment">// 查找子串</span></span><br><span class="line"><span class="built_in">NSRange</span> jackRange = [friends tangeOfString: <span class="string">@"Jack"</span>];</span><br><span class="line">jackRange.length++;<span class="comment">// eat the space that follows</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除"Jack"</span></span><br><span class="line">[friends deleteCharactersInRange: jackRange];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用继承自NSString的实例方法</span></span><br><span class="line"><span class="built_in">NSMutableString</span> *string = [<span class="built_in">NSMutableString</span> strringWithFormat: <span class="string">@"jo%dy"</span>, <span class="number">2</span>];</span><br></pre></td></tr></table></figure>
<h2 id="8-5-集合大家族"><a href="#8-5-集合大家族" class="headerlink" title="8.5    集合大家族"></a>8.5    集合大家族</h2><h3 id="8-5-1-NSArray"><a href="#8-5-1-NSArray" class="headerlink" title="8.5.1    NSArray"></a>8.5.1    NSArray</h3><blockquote>
<p><strong>说明：</strong>一个<code>Cocoa</code>类，用来存储对象的有序列表</p>
<ul>
<li>通过<code>工厂方法</code>创建</li>
<li>通过<code>字面量</code>创建（不需要在结尾处不上<code>nil</code>）</li>
</ul>
<p><strong>限制：</strong>有2个限制</p>
<ul>
<li>只能存储<code>Object-C</code>对象，不能存储原始的C语言基础数据类型</li>
<li>不能使用<code>nil（对象的零值）</code></li>
</ul>
<p><strong>技巧：</strong>可以通过一些<code>NSArray</code>的方法避开这些限制<br><strong>注意：</strong>为什么不能在<code>NSArray</code>中存放<code>nil</code>？</p>
<ul>
<li>使用工厂方法创建数组时，最后一个参数<code>nil</code>用来表示参数列表的末尾</li>
<li>没有办法判断<code>nil</code>是存储在数组中的数值还是代表循环结束的标志。</li>
</ul>
</blockquote>
<h4 id="arrayWithObjects类方法"><a href="#arrayWithObjects类方法" class="headerlink" title="arrayWithObjects类方法"></a>arrayWithObjects类方法</h4><blockquote>
<p><strong>说明：</strong>创建一个新的<code>NSArray</code>，可以发送一个以<code>,</code>分隔的对象列表，在列表结尾添加<code>nil</code>代表列表结束。<br><strong>原型：</strong><code>NSArray</code></p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;id ...&#125; 对象列表</span><br><span class="line">* @return &#123;NSArray&#125; 数组</span><br><span class="line">*/</span></span><br><span class="line">+ (<span class="built_in">NSArray</span>) arrayWithObjects(<span class="keyword">id</span> ...);</span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 通过工厂方法创建数组</span></span><br><span class="line"><span class="built_in">NSArray</span> *array = [<span class="built_in">NSArray</span> arrayWithObjects: <span class="string">@"one"</span>, <span class="string">@"two"</span>, <span class="string">@"three"</span>, <span class="literal">nil</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过字面量创建数组</span></span><br><span class="line"><span class="built_in">NSArray</span> *array2 = @[<span class="string">@"one"</span>, <span class="string">@"two"</span>, <span class="string">@"three"</span>];</span><br></pre></td></tr></table></figure>
<h4 id="objectAtIndex实例方法"><a href="#objectAtIndex实例方法" class="headerlink" title="objectAtIndex实例方法"></a>objectAtIndex实例方法</h4><blockquote>
<p><strong>说明：</strong>索引数组元素。</p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 访问数组中的对象</span></span><br><span class="line"><span class="keyword">id</span> *myObject = array1[<span class="number">1</span>];</span><br><span class="line"><span class="keyword">for</span> (NAInteger i = <span class="number">0</span>; i &lt; [array count]; i++) &#123;</span><br><span class="line">    <span class="comment">// 通过方法索引</span></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"index %d has %@."</span>, i, [array1 objectAtIndex:i]);</span><br><span class="line">    <span class="comment">// 通过下标（字面量方式）索引</span></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"index %d has %@."</span>, i, array1[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="切分数组"><a href="#切分数组" class="headerlink" title="切分数组"></a>切分数组</h3><h4 id="componentsSepartedByString实例方法"><a href="#componentsSepartedByString实例方法" class="headerlink" title="componentsSepartedByString实例方法"></a>componentsSepartedByString实例方法</h4><blockquote>
<p><strong>说明：</strong>将字符串切分为数组。</p>
</blockquote>
<h4 id="componentsJoinedByString实例方法"><a href="#componentsJoinedByString实例方法" class="headerlink" title="componentsJoinedByString实例方法"></a>componentsJoinedByString实例方法</h4><blockquote>
<p><strong>说明：</strong>合并<code>NSArray</code>中的元素并创建字符串。</p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSString</span> *string = <span class="string">@"oop:ack:bork:greeble:poines"</span>;</span><br><span class="line"><span class="built_in">NSArray</span> *chunks = [string componentsSeparatedByString:<span class="string">@":"</span>];</span><br><span class="line">string = [chunks componentsJoinedByString:<span class="string">@":-)"</span>];</span><br></pre></td></tr></table></figure>
<h3 id="8-5-2-可变数组"><a href="#8-5-2-可变数组" class="headerlink" title="8.5.2    可变数组"></a>8.5.2    可变数组</h3><blockquote>
<p><strong>说明：</strong><code>NSArray</code>是不可变对象的数组，<code>NSMutableArray</code>是可变数组。<br><strong>注意：</strong>没有可以用来创建<code>NSMutableArray</code>对象的字面量语法。</p>
</blockquote>
<h4 id="arrayWithCapacity类方法"><a href="#arrayWithCapacity类方法" class="headerlink" title="arrayWithCapacity类方法"></a>arrayWithCapacity类方法</h4><blockquote>
<p><strong>说明：</strong>创建新的可变数组。<br><strong>原型：</strong><code>NSMutableString</code></p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;NSInteger&#125; 容量</span><br><span class="line">* @return &#123;id&#125; 可变数组</span><br><span class="line">*/</span></span><br><span class="line">+ (<span class="keyword">id</span>) arrayWithCapacity: (<span class="built_in">NSInteger</span>) numItems;</span><br></pre></td></tr></table></figure>
<h4 id="removeObjectAtIndex实例方法"><a href="#removeObjectAtIndex实例方法" class="headerlink" title="removeObjectAtIndex实例方法"></a>removeObjectAtIndex实例方法</h4><blockquote>
<p><strong>说明：</strong>删除指定索引处的对象。<br><strong>原型：</strong><code>NSArray</code></p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;NSUInteger&#125; index 下标</span><br><span class="line">*/</span></span><br><span class="line">- (<span class="keyword">void</span>) removeObjectAtIndex: (<span class="built_in">NSUInteger</span>) index;</span><br></pre></td></tr></table></figure>
<h3 id="8-5-3-遍历"><a href="#8-5-3-遍历" class="headerlink" title="8.5.3    遍历"></a>8.5.3    遍历</h3><blockquote>
<p><strong>说明：</strong>有<code>4</code>种方式</p>
<ul>
<li>从0到<code>[array count]</code>循环</li>
<li>使用迭代器：<code>NSEnumerator</code></li>
<li>使用快速迭代：<code>for-in</code>（10.5+）</li>
<li>使用代码块（依赖苹果最新的编译器：基于<code>CLang</code>和<code>LLVM</code>项目）</li>
</ul>
</blockquote>
<h4 id="NSEnumerator"><a href="#NSEnumerator" class="headerlink" title="NSEnumerator"></a>NSEnumerator</h4><blockquote>
<p><strong>说明：</strong>迭代器，<code>Cocoa</code>用它来表示集合中迭代出的对象。</p>
</blockquote>
<h4 id="objectEnumerator实例方法"><a href="#objectEnumerator实例方法" class="headerlink" title="objectEnumerator实例方法"></a>objectEnumerator实例方法</h4><blockquote>
<p><strong>说明：</strong>获取数组对应的迭代器(从前往后迭代)。<br><strong>原型：</strong><code>NSArray</code></p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @return &#123;NSEnumerator *&#125; 迭代器</span><br><span class="line">*/</span></span><br><span class="line">- (<span class="built_in">NSEnumerator</span> *)objectEnumerator;</span><br></pre></td></tr></table></figure>
<h4 id="reverseObjectEnumerator实例方法"><a href="#reverseObjectEnumerator实例方法" class="headerlink" title="reverseObjectEnumerator实例方法"></a>reverseObjectEnumerator实例方法</h4><blockquote>
<p><strong>说明：</strong>获取数组对应的迭代器(从后往前迭代)。<br><strong>原型：</strong><code>NSArray</code></p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @return &#123;NSEnumerator *&#125; 迭代器</span><br><span class="line">*/</span></span><br><span class="line">- (<span class="built_in">NSEnumerator</span> *)reverseObjectEnumerator;</span><br></pre></td></tr></table></figure>
<h4 id="nextObject实例方法"><a href="#nextObject实例方法" class="headerlink" title="nextObject实例方法"></a>nextObject实例方法</h4><blockquote>
<p><strong>说明：</strong>请求迭代器的下一个对象，返回<code>nil</code>时迭代结束。<br><strong>原型：</strong><code>NSEnumerator</code></p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @return &#123;id&#125; 迭代器迭代的一个对象</span><br><span class="line">*/</span></span><br><span class="line">- (<span class="keyword">id</span>) nextObject;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>限制：</strong>获取<code>可变数组</code>的迭代器后，如果再通过添加或删除对象<code>改变了数组的容量</code>，枚举起就会出现混乱。</p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 通过字面量创建数组</span></span><br><span class="line"><span class="built_in">NSArray</span> *array = @[<span class="string">@"one"</span>, <span class="string">@"two"</span>, <span class="string">@"three"</span>];</span><br><span class="line"><span class="comment">// 获取迭代器</span></span><br><span class="line"><span class="built_in">NSEnumerator</span> *enumerator = [array objectEnumerator];</span><br><span class="line"><span class="comment">// 使用迭代器遍历</span></span><br><span class="line"><span class="keyword">while</span> (<span class="keyword">id</span> thingie = [enumerator nextObject]) &#123;</span><br><span class="line">	<span class="built_in">NSLog</span>(<span class="string">@"I found %@"</span>, thingie);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="8-5-4-快速迭代"><a href="#8-5-4-快速迭代" class="headerlink" title="8.5.4    快速迭代"></a>8.5.4    快速迭代</h3><blockquote>
<p><strong>说明：</strong>在<code>Mac OS x 10.5</code>，<code>O-C</code>升级到<code>2.0</code>，引入了<code>快速枚举（迭代）</code>，类似一些脚本语言的<code>for-in</code></p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="built_in">NSString</span> *string <span class="keyword">in</span> array) &#123;</span><br><span class="line">	<span class="built_in">NSLog</span>(<span class="string">@"I found %@"</span>, string);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="enumerateObjectsUsingBlock实例方法"><a href="#enumerateObjectsUsingBlock实例方法" class="headerlink" title="enumerateObjectsUsingBlock实例方法"></a>enumerateObjectsUsingBlock实例方法</h4><blockquote>
<p><strong>说明：</strong>为了支持C语言的代码块功能，苹果公司添加了一个能在<code>NSArray</code>中通过<code>代码块</code>迭代对象的方法。<br><strong>优点：</strong>通过代码块可以让循环操作并发执行，而通过快速枚举，执行操作要一项项线性完成。<br><strong>原型：</strong><code>NSArray</code></p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;NSString *&#125; string 迭代项</span><br><span class="line">* @param &#123;NSUInteger&#125; index 下标</span><br><span class="line">* @param &#123;BOOL *&#125; stop </span><br><span class="line">*/</span></span><br><span class="line">- (<span class="keyword">void</span>) enumerateObjectUsingBlock:^(<span class="built_in">NSString</span> *string, <span class="built_in">NSUInteger</span> index, <span class="built_in">BOOL</span> *stop);</span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[array enumerateObjectsUsingBlock:^(<span class="built_in">NSString</span> *string, <span class="built_in">NSUInteger</span> index, <span class="built_in">BOOL</span> *stop) &#123;</span><br><span class="line">	<span class="built_in">NSLog</span>(<span class="string">@"I found %@"</span>, string);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<h3 id="8-5-5-NSDictionary"><a href="#8-5-5-NSDictionary" class="headerlink" title="8.5.5    NSDictionary"></a>8.5.5    NSDictionary</h3><blockquote>
<p><strong>说明：</strong>字典是关键字及其定义的合集。<br><strong>扩展：</strong>字典使用的是键查询的优化方式，可以立即找到要查询的数据，而不需要遍历整个数组。</p>
</blockquote>
<h4 id="字面量"><a href="#字面量" class="headerlink" title="字面量"></a>字面量</h4><blockquote>
<p><strong>说明：</strong>创建字典最简单的方式就是用字典字面量。<br><strong>语法：</strong><code>@{key: value, ...}</code></p>
</blockquote>
<h4 id="dictionaryWithObjectsAndKeys类方法"><a href="#dictionaryWithObjectsAndKeys类方法" class="headerlink" title="dictionaryWithObjectsAndKeys类方法"></a>dictionaryWithObjectsAndKeys类方法</h4><blockquote>
<p><strong>说明：</strong>创建字典对象<br><strong>原型：</strong><code>NSDictionary</code></p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;id ...&#125; 键值对列表</span><br><span class="line">* @return &#123;id&#125; 字典对象</span><br><span class="line">*/</span></span><br><span class="line">+ (<span class="keyword">id</span>) dictionaryWithObjectsAndKeys: (<span class="keyword">id</span>) firstObject, ...;</span><br></pre></td></tr></table></figure>
<h4 id="objectForKey实例方法"><a href="#objectForKey实例方法" class="headerlink" title="objectForKey实例方法"></a>objectForKey实例方法</h4><blockquote>
<p><strong>说明：</strong>根据<code>关键字</code>访问字典中的<code>值</code>。<br><strong>原型：</strong><code>NSDictionary</code></p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;id&#125; aKey 键</span><br><span class="line">* @return &#123;id&#125; 值</span><br><span class="line">*/</span></span><br><span class="line">- (<span class="keyword">id</span>) objectForKey: (<span class="keyword">id</span>) aKey;</span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 对象实例</span></span><br><span class="line">Tire *t1 = [Tire new];</span><br><span class="line">Tire *t2 = [Tire new];</span><br><span class="line">Tire *t3 = [Tire new];</span><br><span class="line">Tire *t4 = [Tire new];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用对象实例构建字典（工厂方法）</span></span><br><span class="line"><span class="built_in">NSDictionary</span> *tires1 = [<span class="built_in">NSDictionary</span> dictionaryWithObjectsAndKeys: t1, <span class="string">@"front-left"</span>, t2, <span class="string">@"front-right"</span>, t3, <span class="string">@"back-left"</span>, t3, <span class="string">@"back-left"</span>, t4, <span class="string">@"back-right"</span>, <span class="literal">nil</span>];</span><br><span class="line"><span class="comment">// 使用对象实例构建字典（字面量）</span></span><br><span class="line"><span class="built_in">NSDictionary</span> *tires2 = @&#123;<span class="string">@"front-left"</span>: t1, <span class="string">@"front-right"</span>: t2, <span class="string">@"back-left"</span>: t3, <span class="string">@"back-right"</span>: t4&#125;;</span><br><span class="line"><span class="comment">// 通过方法索引</span></span><br><span class="line">Tire *tire = [tires objectForKey: <span class="string">@"back-right"</span>];</span><br><span class="line"><span class="comment">// 通过字面量索引</span></span><br><span class="line">tire = tires[<span class="string">@"back-right"</span>];</span><br></pre></td></tr></table></figure>
<h4 id="可变字典"><a href="#可变字典" class="headerlink" title="可变字典"></a>可变字典</h4><blockquote>
<p><strong>说明：</strong><code>NSDictionary</code>容量是不可变的，<code>NSMutableDictionary</code>是可变的。<br><strong>注意：</strong>没有适用于<code>NSMutableDictionary</code>的字面量初始化语法。</p>
</blockquote>
<h5 id="dictionary类方法"><a href="#dictionary类方法" class="headerlink" title="dictionary类方法"></a>dictionary类方法</h5><blockquote>
<p><strong>说明：</strong>创建<code>NSMutableDictionary</code>实例。<br><strong>原型：</strong><code>NSMutableDictionary</code></p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @return &#123;id&#125; NSMutableDictionary实例</span><br><span class="line">*/</span></span><br><span class="line">+ (<span class="keyword">id</span>) dictionary;</span><br></pre></td></tr></table></figure>
<h5 id="dictionaryWithCapacity类方法"><a href="#dictionaryWithCapacity类方法" class="headerlink" title="dictionaryWithCapacity类方法"></a>dictionaryWithCapacity类方法</h5><blockquote>
<p><strong>说明：</strong>创建新的可变字典并告诉<code>Cocoa</code>该字典的最优大小。<br><strong>原型：</strong><code>NSMutableDictionary</code></p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;NSUInteger&#125; numItems 最优容量</span><br><span class="line">*/</span></span><br><span class="line">- (<span class="keyword">void</span>) dictionaryWithCapacity: (<span class="built_in">NSUInteger</span>) numItems;</span><br></pre></td></tr></table></figure>
<h5 id="setObject实例方法"><a href="#setObject实例方法" class="headerlink" title="setObject实例方法"></a>setObject实例方法</h5><blockquote>
<p><strong>说明：</strong>为字典添加（设置）元素<br><strong>原型：</strong><code>NSMutableDictionary</code></p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;id&#125; anObject 值</span><br><span class="line">* @param &#123;id&#125; aKey  键</span><br><span class="line">*/</span></span><br><span class="line">- (<span class="keyword">void</span>) setObject: (<span class="keyword">id</span>)anObject forKey: (<span class="keyword">id</span>)aKey;</span><br></pre></td></tr></table></figure>
<h5 id="removeObjectForKey实例方法"><a href="#removeObjectForKey实例方法" class="headerlink" title="removeObjectForKey实例方法"></a>removeObjectForKey实例方法</h5><blockquote>
<p><strong>说明：</strong>在可变字典中删除元素<br><strong>原型：</strong><code>NSMutableDictionary</code></p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;id&#125; aKey 要删除的元素的键</span><br><span class="line">*/</span></span><br><span class="line">- (<span class="keyword">void</span>) removeObjectForKey: (<span class="keyword">id</span>) aKey;</span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建可变字典</span></span><br><span class="line"><span class="built_in">NSMutableDictionary</span> *tires = [<span class="built_in">NSMutableDictionary</span> dictionary];</span><br><span class="line"><span class="comment">// 对象实例</span></span><br><span class="line">Tire *t1 = [Tire new];</span><br><span class="line">Tire *t2 = [Tire new];</span><br><span class="line">Tire *t3 = [Tire new];</span><br><span class="line">Tire *t4 = [Tire new];</span><br><span class="line"><span class="comment">// 为字典添加元素</span></span><br><span class="line">[tires setObject: t1 forKey: <span class="string">@"front-left"</span>];</span><br><span class="line">[tires setObject: t2 forKey: <span class="string">@"front-right"</span>];</span><br><span class="line">[tires setObject: t3 forKey: <span class="string">@"back-left"</span>];</span><br><span class="line">[tires setObject: t4 forKey: <span class="string">@"back-right"</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除元素</span></span><br><span class="line">[tires removeObjectForKey: <span class="string">@"back-left"</span>];</span><br></pre></td></tr></table></figure>
<h3 id="8-5-6-请不要乱来"><a href="#8-5-6-请不要乱来" class="headerlink" title="8.5.6    请不要乱来"></a>8.5.6    请不要乱来</h3><blockquote>
<p><strong>类蔟：</strong>一群隐藏在通用接口之下与实现相关的类。<br><strong>说明：</strong>在<code>Cocoa</code>中，许多类实际上是以<code>类蔟</code>的方式实现。比如，创建<code>NSString</code>对象时，实际上获得的可能是<code>NSLiteralString</code>、<code>NSCFString</code>、<code>NSSimpleCString</code>、<code>NSBallOfString</code>或者其他未写入文档的与实现相关的对象。<br><strong>技巧：</strong>不要尝试给一个<code>类蔟</code>创建子类，可以将<code>NSString</code>或<code>NSArray</code>复合到某个类中或者使用别类。</p>
</blockquote>
<h2 id="8-6-其他数值"><a href="#8-6-其他数值" class="headerlink" title="8.6    其他数值"></a>8.6    其他数值</h2><blockquote>
<p><strong>说明：</strong><code>NSArray</code>和<code>NSDictionary</code>只能存储对象，而不能直接存储任何基本类型的数据，如<code>int</code>、<code>float</code>和<code>struct</code>。<br><strong>技巧：</strong>可以用对象封装基本数据类型，然后再放入<code>NSArray</code>或<code>NSDictionary</code>。<br><strong>注意：</strong><code>Objective-C</code>不支持<code>自动开箱</code>和<code>自动装箱</code>。</p>
</blockquote>
<h3 id="8-6-1-NSNumber"><a href="#8-6-1-NSNumber" class="headerlink" title="8.6.1    NSNumber"></a>8.6.1    NSNumber</h3><blockquote>
<p><strong>说明：</strong>可以用来封装和数字相关的一些基本数据类型。<br><strong>工厂方法：</strong>以最常用的为例</p>
<ul>
<li><code>+ (NSNumber *) numberWithChar: (char) value;</code></li>
<li><code>+ (NSNumber *) numberWithInt: (int) value;</code></li>
<li><code>+ (NSNumber *) numberWithFloat: (float) value;</code></li>
<li><code>+ (NSNumber *) numberWithBool: (BOOL) value;</code></li>
</ul>
<p><strong>实例方法：</strong>从<code>NSNumber</code>中提取数值</p>
<ul>
<li><code>- (char) charValue</code></li>
<li><code>- (int) intValue</code></li>
<li><code>- (float) floatValue</code></li>
<li><code>- (BOOL) boolValue</code></li>
<li><code>- (NSString *) stringValue</code></li>
</ul>
<p><strong>字面量：</strong>可以使用字面量语法创建<code>NSNumber</code>对象</p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 封装几本类型</span></span><br><span class="line"><span class="built_in">NSNumber</span> *number;</span><br><span class="line">number = @<span class="string">'X'</span>;<span class="comment">// 字符型</span></span><br><span class="line">number = @<span class="number">12345</span>;<span class="comment">// 整型</span></span><br><span class="line">number = @<span class="number">12345</span>ul;<span class="comment">// 无符号长整数</span></span><br><span class="line">number = @<span class="number">12345</span>ll;<span class="comment">// long long</span></span><br><span class="line">number = @<span class="number">123</span>,<span class="number">45</span>f;<span class="comment">// 浮点型</span></span><br><span class="line">number = @<span class="number">123</span>,<span class="number">45</span>;<span class="comment">// 双浮点型</span></span><br><span class="line">number = @YES;<span class="comment">// 布尔值</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">NSMutableArray</span> *array = [<span class="built_in">NSMutableArray</span> arrayWithCapacity];</span><br><span class="line"><span class="comment">// 存储到数组中</span></span><br><span class="line">[array addObject number];</span><br><span class="line">[dictionary setObject: number forKey: @:<span class="string">"Bork"</span>];</span><br></pre></td></tr></table></figure>
<h3 id="8-6-2-NSValue"><a href="#8-6-2-NSValue" class="headerlink" title="8.6.2    NSValue"></a>8.6.2    NSValue</h3><blockquote>
<p><strong>说明：</strong><code>NSValue</code>可以封装任意值。<br><strong>扩展：</strong><code>NSNumber</code>是<code>NSValue</code>的子类。</p>
</blockquote>
<h4 id="valueWithBytes类方法"><a href="#valueWithBytes类方法" class="headerlink" title="valueWithBytes类方法"></a>valueWithBytes类方法</h4><blockquote>
<p><strong>说明：</strong>创建新的<code>NSValue</code>对象。<br><strong>原型：</strong><code>NSValue</code></p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;const void *&#125; value 要存储的变量的地址</span><br><span class="line">* @param &#123;const char *&#125; type 描述数据类的字符串</span><br><span class="line">* @return &#123;NSValue *&#125; NSValue对象</span><br><span class="line">*/</span></span><br><span class="line">+ (<span class="built_in">NSValue</span> *) valueWithBytes: (<span class="keyword">const</span> <span class="keyword">void</span> *) value objCType: (<span class="keyword">const</span> <span class="keyword">char</span> *) type;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>工厂方法：</strong><code>NSValue</code>，举例</p>
<ul>
<li><code>(NSValue *)valueWithPoint: (NSPoint) aPoint;</code></li>
<li><code>(NSValue *)valueWithSize: (NSSize) size;</code></li>
<li><code>(NSValue *)valueWithRect: (NSRect);</code></li>
</ul>
<p><strong>实例方法：</strong><code>NSValue</code>, 会进行类型转换</p>
<ul>
<li><code>(NSPoint)pointValue;</code></li>
<li><code>(NSSize)sizeValue;</code></li>
<li><code>(NSRect)rectValue;</code></li>
</ul>
</blockquote>
<h4 id="getValue实例方法"><a href="#getValue实例方法" class="headerlink" title="getValue实例方法"></a>getValue实例方法</h4><blockquote>
<p><strong>说明：</strong>提取数值，返回一个<code>NSValue</code>型值。<br><strong>注意：</strong>方法名中使用了<code>get</code>，表明我们提供的是一个指针，而指针所指向的空间则用来存储该方法生成的数据。</p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建一个对象（struct）</span></span><br><span class="line"><span class="built_in">NSRect</span> rect = <span class="built_in">NSMakeRect</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">30</span>, <span class="number">40</span>);</span><br><span class="line"><span class="comment">// 包装包NSValue型值中</span></span><br><span class="line"><span class="built_in">NSValue</span> *value = [<span class="built_in">NSValue</span> valueWithBytes:&amp;rect objCType:@encode(<span class="built_in">NSRect</span>)];</span><br><span class="line"><span class="comment">// 添加到数组中</span></span><br><span class="line">[array addObject:value];</span><br><span class="line">value = [array objectAtIndex:<span class="number">0</span>];</span><br><span class="line"><span class="comment">// 提取数值</span></span><br><span class="line">[value getValue:&amp;rect];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 疯转NSRect</span></span><br><span class="line">value = [<span class="built_in">NSValue</span> valueWithRect:rect];</span><br><span class="line"><span class="comment">// 添加到数组</span></span><br><span class="line">[array addObject:value];</span><br><span class="line"><span class="comment">// 提取NSRect型值</span></span><br><span class="line"><span class="built_in">NSRect</span> anotherRect = [value rectValue];</span><br></pre></td></tr></table></figure>
<h3 id="8-6-3-NSNull"><a href="#8-6-3-NSNull" class="headerlink" title="8.6.3    NSNull"></a>8.6.3    NSNull</h3><blockquote>
<p><strong>说明：</strong>集合中不能放入<code>nil</code>，但可以放入<code>NSNull</code>。</p>
</blockquote>
<h4 id="null类方法"><a href="#null类方法" class="headerlink" title="null类方法"></a>null类方法</h4><blockquote>
<p><strong>说明：</strong>创建一个<code>NSNull</code>实例<br><strong>原型：</strong><code>NSNull</code></p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @return &#123;NSNull *&#125; NSNull实例</span><br><span class="line">*/</span></span><br><span class="line">+ (<span class="built_in">NSNull</span> *) null;</span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 想通讯录中加入一条信息（没有传真号）</span></span><br><span class="line">[contact setObject: [<span class="built_in">NSNull</span> null] forKey: <span class="string">@"home fax machine"</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 索引这条信息</span></span><br><span class="line"><span class="keyword">id</span> homefax = [contact objectForKey: <span class="string">@"home fax machine"</span>];</span><br><span class="line"><span class="keyword">if</span> (homefax == [<span class="built_in">NSNull</span> null]) &#123;</span><br><span class="line">	<span class="comment">// 确实没有传真机</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="8-7-示例：查找文件"><a href="#8-7-示例：查找文件" class="headerlink" title="8.7    示例：查找文件"></a>8.7    示例：查找文件</h2><h3 id="8-7-1-使用迭代器的版本"><a href="#8-7-1-使用迭代器的版本" class="headerlink" title="8.7.1    使用迭代器的版本"></a>8.7.1    使用迭代器的版本</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> main(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[])</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">@autoreleasepool</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 创建文件管理器</span></span><br><span class="line">        <span class="built_in">NSFileManager</span> *manager;</span><br><span class="line">        manager = [<span class="built_in">NSFileManager</span> defaultManager];</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 将~替换为相应的绝对目录</span></span><br><span class="line">        <span class="built_in">NSString</span> *home;</span><br><span class="line">        home = [<span class="string">@"~"</span> stringByExpandingTildeInPath];</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 获取相应路径下文件集合的迭代器</span></span><br><span class="line">        <span class="built_in">NSDirectoryEnumerator</span> *direnum;</span><br><span class="line">        direnum = [manager enumeratorAtPath:home];</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 创建存放文件的可变数组</span></span><br><span class="line">        <span class="built_in">NSMutableArray</span> *files;</span><br><span class="line">        files = [<span class="built_in">NSMutableArray</span> arrayWithCapacity:<span class="number">42</span>];</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 通过迭代器遍历寻找目标文件</span></span><br><span class="line">        <span class="built_in">NSString</span> *filename;</span><br><span class="line">        <span class="keyword">while</span> (filename = [direnum nextObject])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// 查看扩展名是否匹配</span></span><br><span class="line">            <span class="keyword">if</span> ([[filename pathExtension] isEqualTo: <span class="string">@"jpg"</span>]) &#123;</span><br><span class="line">                [files addObject: filename];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 通过迭代器遍历匹配到的文件的文件名</span></span><br><span class="line">        <span class="built_in">NSEnumerator</span> *fileenum;</span><br><span class="line">        fileenum = [files objectEnumerator];</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> (filename = [fileenum nextObject])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">NSLog</span> (<span class="string">@"%@"</span>, filename);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="8-7-2-使用快速迭代的版本"><a href="#8-7-2-使用快速迭代的版本" class="headerlink" title="8.7.2    使用快速迭代的版本"></a>8.7.2    使用快速迭代的版本</h3><blockquote>
<p><strong>说明：</strong>不支持<code>Leopard</code>之前的版本。</p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="8-8-小结"><a href="#8-8-小结" class="headerlink" title="8.8    小结"></a>8.8    小结</h2>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/13/o-c基础教程第二版_07  深入了解Xcode/" itemprop="url">
                  7 深入了解Xcode
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-13T10:38:28+08:00" content="2016-05-13">
              2016-05-13
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/13/o-c基础教程第二版_07  深入了解Xcode/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/13/o-c基础教程第二版_07  深入了解Xcode/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="7-1-窗口布局一览"><a href="#7-1-窗口布局一览" class="headerlink" title="7.1    窗口布局一览"></a>7.1    窗口布局一览</h2><blockquote>
<p><strong>说明：</strong>窗口的组成部分</p>
</blockquote>
<table>
<thead>
<tr>
<th>组成</th>
<th>说明</th>
<th>相关功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>工具栏</td>
<td>位于窗口的最顶端</td>
<td>上面由很多工具按钮</td>
</tr>
<tr>
<td>导航器面板</td>
<td>位于窗口的左边，通常用来显示项目中的文件列表，也可以浏览其他内容</td>
<td>符号(symbol)、搜索(Search)、问题(Issue)、调试(Debug)、断点(BreakPoints)、和日志(Logs)</td>
</tr>
<tr>
<td>编辑器面板</td>
<td>卫浴中间偏右的位置</td>
<td>大部分时间都在这里工作</td>
</tr>
<tr>
<td>检查器面板</td>
<td>位于窗口右边</td>
<td>显示的是与上下文有关的信息，以及修改选中项属性值的按钮</td>
</tr>
<tr>
<td>调试器面板</td>
<td>位于底部居中位置</td>
<td>调试器运行的时候，堆栈和调试器控制器会出现在这里</td>
</tr>
<tr>
<td>库面板</td>
<td>隐藏在窗口右下角</td>
<td>列有项目资源、对象、代码片段和其他在项目中可能会用到的东西</td>
</tr>
</tbody>
</table>
<p><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-01-03%20%E4%B8%8B%E5%8D%8810.16.15.png" alt="Alt text"></p>
<h2 id="7-2-改变公司名称"><a href="#7-2-改变公司名称" class="headerlink" title="7.2    改变公司名称"></a>7.2    改变公司名称</h2><blockquote>
<p><strong>说明：</strong>公司的名称会出现在创建文件时自动生成的注释中。<br><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-01-04%20%E4%B8%8A%E5%8D%8810.02.06.png" alt="Alt text"></p>
</blockquote>
<h2 id="7-3-使用编辑器的技巧"><a href="#7-3-使用编辑器的技巧" class="headerlink" title="7.3    使用编辑器的技巧"></a>7.3    使用编辑器的技巧</h2><blockquote>
<p><strong>说明：</strong>列举一下不同区域的使用的技巧<br><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-01-03%20%E4%B8%8B%E5%8D%8810.16.15.png" alt="Alt text"></p>
</blockquote>
<h3 id="7-3-1-导航器面板"><a href="#7-3-1-导航器面板" class="headerlink" title="7.3.1    导航器面板"></a>7.3.1    导航器面板</h3><blockquote>
<ol>
<li>导航器视图中使用<code>过滤搜索框</code>过滤列表文件（可以在任意导航器视图中使用）</li>
<li>双击源文件在新窗口中打开它</li>
</ol>
</blockquote>
<h3 id="7-3-2-工具栏"><a href="#7-3-2-工具栏" class="headerlink" title="7.3.2    工具栏"></a>7.3.2    工具栏</h3><blockquote>
<ol>
<li>右上方有一组标记为View的工具栏按钮，用来显示／隐藏部分窗口</li>
</ol>
</blockquote>
<h3 id="7-3-2-其它"><a href="#7-3-2-其它" class="headerlink" title="7.3.2    其它"></a>7.3.2    其它</h3><blockquote>
<ol>
<li>窗口顶端的工具栏下面看文件的路径</li>
<li>在多个标签页中打开多个视图：View(菜单) -&gt; Show Tab Bar -&gt; +</li>
</ol>
</blockquote>
<h2 id="7-4-在Xcode的帮助下编写代码"><a href="#7-4-在Xcode的帮助下编写代码" class="headerlink" title="7.4    在Xcode的帮助下编写代码"></a>7.4    在Xcode的帮助下编写代码</h2><h3 id="7-4-1-首行缩进（美观排版）"><a href="#7-4-1-首行缩进（美观排版）" class="headerlink" title="7.4.1    首行缩进（美观排版）"></a>7.4.1    首行缩进（美观排版）</h3><blockquote>
<p><strong>说明：</strong><code>O-C</code>并不要求缩进代码，但这么做是个好习惯。</p>
</blockquote>
<table>
<thead>
<tr>
<th>整理缩进</th>
<th>快捷键</th>
<th>菜单</th>
</tr>
</thead>
<tbody>
<tr>
<td>自动整理缩进</td>
<td>Control + I</td>
<td>右键（代码编辑区）-&gt; Structure -&gt; Re Indent</td>
</tr>
<tr>
<td>向左缩进</td>
<td>Command + [</td>
<td>右键（代码编辑区）-&gt; Structure -&gt; Shift Right</td>
</tr>
<tr>
<td>向右缩进</td>
<td>Command + [</td>
<td>左键（代码编辑区）-&gt; Structure -&gt; Shift Left</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>扩展：</strong>设置<code>自动整理</code>的风格：Xcode(菜单) -&gt; Preferences -&gt; Text Editing -&gt; Indentation</p>
</blockquote>
<h3 id="7-4-2-代码自动完成"><a href="#7-4-2-代码自动完成" class="headerlink" title="7.4.2    代码自动完成"></a>7.4.2    代码自动完成</h3><blockquote>
<p><strong>说明：</strong>当输入代码时，Xcode 会不断地比较你输入的代码和它生成的符号索引，如果两者匹配，Xcode就会给出建议。</p>
</blockquote>
<table>
<thead>
<tr>
<th>相关快捷键</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td>Control + .(半角句号)</td>
<td>使推荐列表向后翻页</td>
</tr>
<tr>
<td>Shift + Control + .(半角句号)</td>
<td>使推荐列表向前翻页</td>
</tr>
<tr>
<td>esc</td>
<td>切换推荐列表的显示和隐藏</td>
</tr>
<tr>
<td>tap(或Enter)</td>
<td>使用推荐列表中高，亮的推荐项</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>技巧：</strong></p>
<ol>
<li>查看对象或类可用消息：<code>[对象或类 + 空格 + esc键</code></li>
<li>打开推荐列表中推荐方法的迷你帮助窗口：将鼠标悬停在推荐列表中的方法名上，便会看法哦窗口右边由一个<code>?</code>，点击它</li>
</ol>
</blockquote>
<h3 id="7-4-3-括号配对"><a href="#7-4-3-括号配对" class="headerlink" title="7.4.3    括号配对"></a>7.4.3    括号配对</h3><blockquote>
<p><strong>说明：</strong>输入某些<code>闭括号</code>（比如<code>)、}、]</code>）时，如果匹配到对应的<code>开括号</code>，屏幕会闪烁。如果没有正确闭合，<code>Xcode</code>会发出警报声。这个功能叫做<code>括号配对</code>。<br><strong>技巧：</strong>双击某个<code>分隔符</code>，<code>Xcode</code>会选定它以及与它匹配的货号之间的全部代码。</p>
</blockquote>
<h3 id="7-4-4-批量编辑"><a href="#7-4-4-批量编辑" class="headerlink" title="7.4.4    批量编辑"></a>7.4.4    批量编辑</h3><blockquote>
<p><strong>注意：</strong>批量操作是一件危险的操作，因此可以先创建一个<code>快照</code>用来恢复项目，但是<code>Xcode7</code>已经将此功能移除。</p>
</blockquote>
<h4 id="查找和替换"><a href="#查找和替换" class="headerlink" title="查找和替换"></a>查找和替换</h4><blockquote>
<p><strong>说明：</strong><code>Edit -&gt; Find</code>子菜单中包含几个非常方便的选项</p>
</blockquote>
<table>
<thead>
<tr>
<th>功能</th>
<th>说明</th>
<th>快捷键</th>
</tr>
</thead>
<tbody>
<tr>
<td>Find in Workspace…</td>
<td>Command + Shift + F</td>
<td>在当前工作区中搜索</td>
</tr>
<tr>
<td>Find and Replace in Workspace…</td>
<td>Command + Alt + Shift + F</td>
<td>在当前工作区中搜索并替换</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>缺点：</strong>对于一些替换任务，查找和替换的功能并不好用</p>
<ul>
<li>修改的过于彻底，比如只想重命名函数中的变量，但事实上整个文件中的变量名都被修改了</li>
<li>不能修改文件名（修改类需要同时修改文件名）</li>
</ul>
</blockquote>
<h4 id="Edit-all-in-Scope"><a href="#Edit-all-in-Scope" class="headerlink" title="Edit all in Scope"></a>Edit all in Scope</h4><blockquote>
<p><strong>说明：</strong>在范围内编辑全部内容。</p>
<ol>
<li>在编辑器中选中要修改的<code>标记名</code></li>
<li>点击它，右边出现一个向下的箭头，点击箭头出现一个菜单</li>
<li>选择菜单，选择Edit all in Scope</li>
</ol>
<p><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-01-05%20%E4%B8%8A%E5%8D%888.14.05.png" alt="Alt text"><br><strong>注意：</strong>如果Xcode中的语法高亮功能被关闭或改动很多，<code>Edit in all Scope</code>功能也许就会拒绝工作</p>
</blockquote>
<h4 id="Xcode内置的重构工具"><a href="#Xcode内置的重构工具" class="headerlink" title="Xcode内置的重构工具"></a>Xcode内置的重构工具</h4><blockquote>
<p><strong>说明：</strong>不仅能重命名类，还能重命名相应源文件。</p>
<ol>
<li>打开存在要修改的类名的文件，将光标放到类名中</li>
<li>Edit(菜单)-&gt;Refactor-&gt;Rename</li>
</ol>
<p><strong>注意：</strong>重构不能重命名注释中的文字。所以，<code>类里面的注释</code>、<code>Xcode生成的文件头注释</code>或者任何你编写的<code>文档注释</code>都需要手工编辑（可以通过查找和替换简化这一过程）。</p>
</blockquote>
<h3 id="7-4-5-代码导航"><a href="#7-4-5-代码导航" class="headerlink" title="7.4.5    代码导航"></a>7.4.5    代码导航</h3><h4 id="快捷键"><a href="#快捷键" class="headerlink" title="快捷键"></a>快捷键</h4><blockquote>
<p><strong>说明：</strong>源自<code>emacs</code>，同时适用于Xcode、TextEdit、Safari的地址栏和文本域、Pages和Keynote文本域。<br><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-01-05%20%E4%B8%8A%E5%8D%888.44.02.png" alt="Alt text"></p>
</blockquote>
<h4 id="快速打开"><a href="#快速打开" class="headerlink" title="快速打开"></a>快速打开</h4><blockquote>
<p><strong>说明：</strong>大致有2种方式</p>
</blockquote>
<table>
<thead>
<tr>
<th>用途</th>
<th>操作</th>
<th>快捷键</th>
</tr>
</thead>
<tbody>
<tr>
<td>项目文件搜索</td>
<td>File(菜单)-&gt;Open Quickly</td>
<td>Command + Shift + D</td>
</tr>
<tr>
<td>辅助窗口（默认打开当前文件对应的<code>.m</code>文件或<code>.h</code>文件）</td>
<td>View(菜单)-&gt;Assistant Editor-&gt;Show Assistant Editor</td>
<td><strong>打开：</strong>Command + alt + Enter  <strong>关闭：</strong>Command + Enter</td>
</tr>
</tbody>
</table>
<h3 id="7-4-6-集中精力"><a href="#7-4-6-集中精力" class="headerlink" title="7.4.6    集中精力"></a>7.4.6    集中精力</h3><blockquote>
<p><strong>说明：</strong><code>边栏（gutter）</code>和<code>聚焦栏（focus ribbon）</code></p>
</blockquote>
<table>
<thead>
<tr>
<th><em>**</em></th>
<th>说明</th>
<th>操作</th>
</tr>
</thead>
<tbody>
<tr>
<td>边栏</td>
<td>代码调试</td>
</tr>
<tr>
<td>聚焦栏</td>
<td>代码折叠</td>
<td><strong>显示聚焦栏：</strong><code>Xcode(菜单)-&gt;Preferences...-&gt;Text Editing-&gt;勾选Code folding ribbon</code>；<strong>更多代码折叠操作：</strong><code>Editor-&gt;Code Folding</code></td>
</tr>
</tbody>
</table>
<p><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-01-05%20%E4%B8%8A%E5%8D%889.13.08.png" alt="Alt text"></p>
<h3 id="7-4-7-使用导航条"><a href="#7-4-7-使用导航条" class="headerlink" title="7.4.7    使用导航条"></a>7.4.7    使用导航条</h3><blockquote>
<p><strong>说明：</strong>里面的很多空间可以让你在项目中的原文件之间快速切换。<br><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-01-05%2011.05.05.png" alt="Alt text"></p>
</blockquote>
<h4 id="pragma指令"><a href="#pragma指令" class="headerlink" title="#pragma指令"></a><code>#pragma</code>指令</h4><blockquote>
<p><strong>说明：</strong>可以将<code>O-C</code>常规代码之外的一些信息或说明传递给编译器和代码编辑器。</p>
<ul>
<li><code>#pragma mark 说明</code>：添加标记到功能菜单</li>
<li><code>#pragma mark -</code>：在菜单中插入一条分割线</li>
</ul>
</blockquote>
<h4 id="注释中使用特殊字符"><a href="#注释中使用特殊字符" class="headerlink" title="注释中使用特殊字符"></a>注释中使用特殊字符</h4><blockquote>
<p><strong>说明：</strong>会将相应的注释信息放入功能菜单中，类似<code>#pragma mark</code>的效果。例如：</p>
<ul>
<li><code>MARK:说明</code></li>
<li><code>TODO:说明</code></li>
<li><code>FIXME:说明</code></li>
<li><code>!!!:说明</code></li>
<li><code>???:说明</code></li>
</ul>
</blockquote>
<p><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-01-05%2013.13.37.png" alt="Alt text"></p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">id</span>) init</span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">#pragma mark 初始化父类</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span> = [<span class="keyword">super</span> init]) &#123;</span><br><span class="line">        engine = [Engine new];</span><br><span class="line">        <span class="comment">// MARK:初始化实例属性</span></span><br><span class="line">        tires[<span class="number">0</span>] = [Tire new];</span><br><span class="line">        tires[<span class="number">1</span>] = [Tire new];</span><br><span class="line">        tires[<span class="number">2</span>] = [Tire new];</span><br><span class="line">        tires[<span class="number">3</span>] = [Tire new];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (<span class="keyword">self</span>);</span><br><span class="line">&#125; <span class="comment">// init</span></span><br></pre></td></tr></table></figure>
<h3 id="7-4-8-获取信息"><a href="#7-4-8-获取信息" class="headerlink" title="7.4.8    获取信息"></a>7.4.8    获取信息</h3><h4 id="7-4-8-1-获得帮助"><a href="#7-4-8-1-获得帮助" class="headerlink" title="7.4.8.1    获得帮助"></a>7.4.8.1    获得帮助</h4><p><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-01-05%2013.52.23.png" alt="Alt text"></p>
<h4 id="7-4-8-2-文档管理程序"><a href="#7-4-8-2-文档管理程序" class="headerlink" title="7.4.8.2    文档管理程序"></a>7.4.8.2    文档管理程序</h4><blockquote>
<p><strong>说明：</strong>访问苹果官方API文档有以下方式</p>
</blockquote>
<table>
<thead>
<tr>
<th>情景</th>
<th>操作</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>quick search</td>
<td>option + 单击某个标记</td>
<td>只弹出一个包含概要信息的帮助窗口</td>
</tr>
<tr>
<td>在文档浏览窗口查看相应文档</td>
<td>option + 双击某个标记（或 将光标移动到标记內  + control + option + command + /）</td>
</tr>
</tbody>
</table>
<h2 id="7-5-调试"><a href="#7-5-调试" class="headerlink" title="7.5    调试"></a>7.5    调试</h2><h3 id="7-5-1-暴力测试"><a href="#7-5-1-暴力测试" class="headerlink" title="7.5.1    暴力测试"></a>7.5.1    暴力测试</h3><blockquote>
<p><strong>说明：</strong>在程序中写入语句（如<code>NSLog</code>）来输出程序中的控制流程和一些数据值。</p>
</blockquote>
<h3 id="7-5-2-Xcode的调试器"><a href="#7-5-2-Xcode的调试器" class="headerlink" title="7.5.2    Xcode的调试器"></a>7.5.2    Xcode的调试器</h3><blockquote>
<p><strong>调试器：</strong>位于程序和操作系统之间的程序，能够</p>
<ul>
<li>中断程序，这样就可以检查程序的数据，甚至修改程序，然后恢复程序并查看运行结果</li>
<li>可以单步执行代码，减缓程序运行的速度，细致地查看代码会对数据进行哪些改动</li>
</ul>
<p><strong>调试窗口：</strong>可以提供大量概述信息<br><strong>调试控制台：</strong>可以直接向调试器发送调试命令的调试控制台。<br><strong>说明：</strong>调试窗口可以选择两种调试器，<code>GDB</code>和<code>LLDB</code>，区别主要是精细度和内联性。</p>
<ul>
<li><strong>GDB：</strong>GNU计划的一部分，可以在各种平台上兼容，享誉已久</li>
<li><strong>LLDB：</strong>LLVM计划多个Xcode工具中的一员</li>
</ul>
</blockquote>
<h3 id="7-5-3-精巧的调试符号"><a href="#7-5-3-精巧的调试符号" class="headerlink" title="7.5.3    精巧的调试符号"></a>7.5.3    精巧的调试符号</h3><blockquote>
<p><strong>说明：</strong>调试程序时可以让编译器发出额外的调试符号，可以使用Debug构建配置（Product-&gt;Schema-&gt;Edit Schema）。</p>
</blockquote>
<h3 id="7-5-4-开始调试"><a href="#7-5-4-开始调试" class="headerlink" title="7.5.4    开始调试"></a>7.5.4    开始调试</h3><blockquote>
<p><strong>说明：</strong>使用GUI比命令行进行调试更加容易一些</p>
<ol>
<li>设置断点</li>
<li>运行程序</li>
<li>调试</li>
</ol>
</blockquote>
<p><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-01-06%20%E4%B8%8A%E5%8D%8810.52.03.png" alt="Alt text"></p>
<h3 id="7-5-5-检查程序"><a href="#7-5-5-检查程序" class="headerlink" title="7.5.5    检查程序"></a>7.5.5    检查程序</h3><blockquote>
<p><strong>说明：</strong>在调试状态下，将鼠标放在变量名上时，会弹出一个<code>显示</code>当前数值信息的弹出窗，点击里面的值还可以<code>修改</code>当前值。</p>
</blockquote>
<h2 id="7-6-备忘表"><a href="#7-6-备忘表" class="headerlink" title="7.6    备忘表"></a>7.6    备忘表</h2><blockquote>
<p><strong>说明：</strong>Xcode键盘快捷键<br><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-01-06%20%E4%B8%8B%E5%8D%8812.14.31.png" alt="Alt text"><br><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-01-06%20%E4%B8%8B%E5%8D%8812.15.11.png" alt="Alt text"></p>
</blockquote>
<h2 id="7-7-小结"><a href="#7-7-小结" class="headerlink" title="7.7    小结"></a>7.7    小结</h2>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/13/o-c基础教程第二版_06  源文件组织/" itemprop="url">
                  6 源文件组织
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-13T10:38:06+08:00" content="2016-05-13">
              2016-05-13
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/13/o-c基础教程第二版_06  源文件组织/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/13/o-c基础教程第二版_06  源文件组织/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p><strong>说明：</strong>将程序拆分为多个小文件有助于更快地找到重要的代码。</p>
</blockquote>
<h2 id="6-1-拆分接口与实现"><a href="#6-1-拆分接口与实现" class="headerlink" title="6.1    拆分接口与实现"></a>6.1    拆分接口与实现</h2><blockquote>
<p><strong>说明：</strong>接口放在<code>.h</code>文件，实现放在<code>.m</code>文件。</p>
</blockquote>
<table>
<thead>
<tr>
<th>文件</th>
<th>存放代码</th>
</tr>
</thead>
<tbody>
<tr>
<td>头文件(.h)</td>
<td>类的<code>@interface</code>指令、公共<code>struct</code>定义、<code>enum</code>常量、<code>#defines</code>和<code>extern</code>全局变量等</td>
</tr>
<tr>
<td>和类同名的.m(或.mm)文件</td>
<td>类的<code>@implementation</code>指令、全局变量的定义、私有struct等</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>注意：</strong>如果用<code>.mm</code>做文件扩展名，编译器就会认为你是用<code>Objective-C++</code>（同时使用<code>C++</code>和<code>Objective-C</code>）编写的代码</p>
</blockquote>
<h3 id="在Xcode中创建新文件"><a href="#在Xcode中创建新文件" class="headerlink" title="在Xcode中创建新文件"></a>在Xcode中创建新文件</h3><blockquote>
<p><strong>说明：</strong>创建包含类的文件</p>
<ol>
<li>File（菜单）-&gt; New -&gt; File…</li>
<li>选择模版：ios -&gt; Source -&gt; Cocoa Class</li>
<li>填写类名</li>
<li>选择父类（默认NSObject）</li>
<li>选择群组和目标</li>
<li>选择存储位置并保存</li>
</ol>
</blockquote>
<table>
<thead>
<tr>
<th>术语</th>
<th>说明</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>群组（Group）</td>
<td>文件都放在群组内的文件夹中，将代码分组存放可以帮助组织项目中的源文件</td>
<td><code>1.</code> 设置群组时，Xcode并不会在硬盘上移动文件或者创建目录，群组关系仅仅是Xcode负责管理的一项奇妙的功能；<code>2.</code> 可以设置群组指向文件系统中某个特定的目录，Xcode会新建的文件放入该目录中</td>
</tr>
<tr>
<td>目标（Target）</td>
<td>复杂的项目可以拥有多个目标，它们源文件的配置各不相同，构建规则也不同</td>
</tr>
</tbody>
</table>
<h2 id="6-2-拆分-Car-程序"><a href="#6-2-拆分-Car-程序" class="headerlink" title="6.2    拆分 Car 程序"></a>6.2    拆分 Car 程序</h2><blockquote>
<p><strong>说明：</strong>每个类都由头文件（<code>.h</code>）和实现文件（<code>.m</code>）组成，入口在<code>main.m</code></p>
<ul>
<li><strong>头文件（<code>.h</code>文件）：</strong>通过<code>import</code>引入模块的过程放在头文件</li>
<li><strong>实现文件（<code>.m</code>文件）：</strong>文件中需要引入相应的头文件（<code>.h</code>）文件</li>
</ul>
<p><strong>技巧：</strong>复合的程序文件中使用了其它类，如果只是通过指针引用了相应的类实例，可以用<code>@class</code>声明引用的类而不需要<code>import</code>，从而提升重新编译时的性能。</p>
<p><strong>导入文件：</strong><code>import</code>文件有两种方式</p>
</blockquote>
<table>
<thead>
<tr>
<th>导入</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>#import &quot;文件&quot;</code></td>
<td>导入项目本地的头文件</td>
</tr>
<tr>
<td><code>#import &lt;文件&gt;</code></td>
<td>导入系统文件（只读）</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── 6.2\ CarPaers-Split<span class="comment"># 存放代码的群组</span></span><br><span class="line">│   ├── AllWeatherRadial.h</span><br><span class="line">│   ├── AllWeatherRadial.m</span><br><span class="line">│   ├── Car.h</span><br><span class="line">│   ├── Car.m</span><br><span class="line">│   ├── Engine.h</span><br><span class="line">│   ├── Engine.m</span><br><span class="line">│   ├── Slant6.h</span><br><span class="line">│   ├── Slant6.m</span><br><span class="line">│   ├── Tire.h</span><br><span class="line">│   ├── Tire.m</span><br><span class="line">│   └── main.m<span class="comment"># 入口文件</span></span><br><span class="line">└── 6.2\ CarPaers-Split.xcodeproj</span><br><span class="line">    ├── project.pbxproj</span><br><span class="line">    └── xcuserdata</span><br><span class="line">        └── tonyearth.xcuserdatad</span><br></pre></td></tr></table></figure>
<h2 id="6-3-使用快文件依赖关系"><a href="#6-3-使用快文件依赖关系" class="headerlink" title="6.3    使用快文件依赖关系"></a>6.3    使用快文件依赖关系</h2><blockquote>
<p><strong>说明：</strong>依赖关系可以存在于两个或多个文件之间，并且具有传递性，如果其中一个文件发生变化，其它文件都会被重新编译。</p>
</blockquote>
<h3 id="6-3-1-重新编译须知"><a href="#6-3-1-重新编译须知" class="headerlink" title="6.3.1    重新编译须知"></a>6.3.1    重新编译须知</h3><blockquote>
<p><strong>说明：</strong>文件导入过于混乱会延长编译时间，也会导致不必要的重复编译，可以通过<code>@class</code>减少必需导入的头文件的数量，从而可以缩短编译时间。</p>
</blockquote>
<h4 id="class"><a href="#class" class="headerlink" title="@class"></a>@class</h4><blockquote>
<p><strong>说明：</strong>创建一个前向引导，用在程序不需要知道类的所有信息的场景（比如创建了相应的变量，但没有向变量发送消息）。<br><strong>技巧：</strong>如果试图通过<code>#import</code>语句让两个类相互引用，那么就会出现编译错误，可以用<code>@class</code>替代。</p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">&lt;Cocoa/Cocoa.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@class</span> <span class="title">Tire</span>;</span></span><br><span class="line"><span class="class"><span class="keyword">@class</span> <span class="title">Engine</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Car</span> : <span class="title">NSObject</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>) setEngine: (Engine *) newEngine;</span><br><span class="line"></span><br><span class="line">- (Engine *) engine;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>) setTire: (Tire *) tire</span><br><span class="line">         atIndex: (<span class="keyword">int</span>) index;</span><br><span class="line"></span><br><span class="line">- (Tire *) tireAtIndex: (<span class="keyword">int</span>) index;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>) print;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span> <span class="comment">// Car</span></span><br></pre></td></tr></table></figure>
<h3 id="6-3-2-让汽车跑一会儿"><a href="#6-3-2-让汽车跑一会儿" class="headerlink" title="6.3.2    让汽车跑一会儿"></a>6.3.2    让汽车跑一会儿</h3><p><em>Car.m</em></p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">"Car.h"</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">"Engine.h"</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">"Tire.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">Car</span></span></span><br><span class="line">&#123;</span><br><span class="line">    Tire *tires[<span class="number">4</span>];</span><br><span class="line">    Engine *engine;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">id</span>) init</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span> = [<span class="keyword">super</span> init]) &#123;</span><br><span class="line">        engine = [Engine new];</span><br><span class="line"></span><br><span class="line">        tires[<span class="number">0</span>] = [Tire new];</span><br><span class="line">        tires[<span class="number">1</span>] = [Tire new];</span><br><span class="line">        tires[<span class="number">2</span>] = [Tire new];</span><br><span class="line">        tires[<span class="number">3</span>] = [Tire new];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (<span class="keyword">self</span>);</span><br><span class="line"></span><br><span class="line">&#125; <span class="comment">// init</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- (Engine *) engine</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> (engine);</span><br><span class="line">&#125; <span class="comment">// engine</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>) setEngine: (Engine *) newEngine</span><br><span class="line">&#123;</span><br><span class="line">    engine = newEngine;</span><br><span class="line">&#125; <span class="comment">// setEngine</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>) setTire: (Tire *) tire</span><br><span class="line">         atIndex: (<span class="keyword">int</span>) index</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (index &lt; <span class="number">0</span> || index &gt; <span class="number">3</span>) &#123;</span><br><span class="line">        <span class="built_in">NSLog</span> (<span class="string">@"bad index (%d) in setTire:atIndex:"</span>,</span><br><span class="line">               index);</span><br><span class="line">        exit (<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    tires[index] = tire;</span><br><span class="line"></span><br><span class="line">&#125; <span class="comment">// setTire:atIndex:</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- (Tire *) tireAtIndex: (<span class="keyword">int</span>) index</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (index &lt; <span class="number">0</span> || index &gt; <span class="number">3</span>) &#123;</span><br><span class="line">        <span class="built_in">NSLog</span> (<span class="string">@"bad index (%d) in tireAtIndex:"</span>,</span><br><span class="line">               index);</span><br><span class="line">        exit (<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (tires[index]);</span><br><span class="line"></span><br><span class="line">&#125; <span class="comment">// tireAtIndex:</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>) print</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSLog</span> (<span class="string">@"%@"</span>, engine);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">NSLog</span> (<span class="string">@"%@"</span>, tires[<span class="number">0</span>]);</span><br><span class="line">    <span class="built_in">NSLog</span> (<span class="string">@"%@"</span>, tires[<span class="number">1</span>]);</span><br><span class="line">    <span class="built_in">NSLog</span> (<span class="string">@"%@"</span>, tires[<span class="number">2</span>]);</span><br><span class="line">    <span class="built_in">NSLog</span> (<span class="string">@"%@"</span>, tires[<span class="number">3</span>]);</span><br><span class="line"></span><br><span class="line">&#125; <span class="comment">// print</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span> <span class="comment">// Car</span></span><br></pre></td></tr></table></figure>
<h3 id="6-3-3-导入和继承"><a href="#6-3-3-导入和继承" class="headerlink" title="6.3.3    导入和继承"></a>6.3.3    导入和继承</h3><blockquote>
<p><strong>说明：</strong>如果当前的文件头文件中的类会<code>继承</code>要引入的类，则不能通过<code>@class</code>引入，因为编译器需要知道父类中实例变量的完整信息。</p>
</blockquote>
<p><em>Slant6.h</em></p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">"Engine.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Slant6</span> : <span class="title">Engine</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h2 id="6-4-小结"><a href="#6-4-小结" class="headerlink" title="6.4    小结"></a>6.4    小结</h2>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/13/o-c基础教程第二版_05  复合/" itemprop="url">
                  5 复合
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-13T10:37:38+08:00" content="2016-05-13">
              2016-05-13
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/13/o-c基础教程第二版_05  复合/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/13/o-c基础教程第二版_05  复合/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p><strong>说明：</strong>建立类之间的关系除了<code>继承</code>还有<code>复合</code></p>
</blockquote>
<h2 id="5-1-什么是复合"><a href="#5-1-什么是复合" class="headerlink" title="5.1    什么是复合"></a>5.1    什么是复合</h2><blockquote>
<p><strong>说明：</strong>使用复合可组合多个对象，让它们分工协作<br><strong>原理：</strong>在<code>0-C</code> 中，复合是通过包含作为实例变量的对象指针实现的。</p>
</blockquote>
<h2 id="5-2-自定义NSLog"><a href="#5-2-自定义NSLog" class="headerlink" title="5.2    自定义NSLog()"></a>5.2    自定义NSLog()</h2><blockquote>
<p><strong>说明：</strong>在类中提供<code>description方法</code>就可以自定义<code>NSLog()</code>会如何输出对象。</p>
</blockquote>
<h3 id="在init中初始化实例属性"><a href="#在init中初始化实例属性" class="headerlink" title="在init中初始化实例属性"></a>在init中初始化实例属性</h3><blockquote>
<p><strong>说明：</strong>使用<code>new</code>创建新对象时后台进行了两步</p>
<ol>
<li>为对象分配内存，用来存放<code>实例变量</code>（如果实例属性是对象，被初始化为<code>nil</code>）</li>
<li>自动调用<code>init方法</code>，之后对象进入可用状态</li>
</ol>
<p><strong>扩展：</strong>在<code>init方法中</code>使用<code>if (self = [super init])</code>是为了完成父类的初始化并确保父类返回的对象和一开始创建的对象是一致的。</p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// --------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Tire</span> : <span class="title">NSObject</span></span></span><br><span class="line"><span class="keyword">@end</span> <span class="comment">// Tire</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">Tire</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="built_in">NSString</span> *) description</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="string">@"I am a tire. I last a while"</span>);</span><br><span class="line">&#125; <span class="comment">// description</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span> <span class="comment">// Tire</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// --------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Engine</span> : <span class="title">NSObject</span></span></span><br><span class="line"><span class="keyword">@end</span> <span class="comment">// Engine</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">Engine</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="built_in">NSString</span> *) description</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="string">@"I am an engine.  Vrooom!"</span>);</span><br><span class="line">&#125; <span class="comment">// description</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span> <span class="comment">// Engine</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// --------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Car</span> : <span class="title">NSObject</span></span></span><br><span class="line">&#123;</span><br><span class="line">    Engine *engine;</span><br><span class="line">    Tire *tires[<span class="number">4</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>) print;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span> <span class="comment">// Car</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">Car</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">id</span>) init</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span> = [<span class="keyword">super</span> init]) &#123;</span><br><span class="line">        engine = [Engine new];</span><br><span class="line">        </span><br><span class="line">        tires[<span class="number">0</span>] = [Tire new];</span><br><span class="line">        tires[<span class="number">1</span>] = [Tire new];</span><br><span class="line">        tires[<span class="number">2</span>] = [Tire new];</span><br><span class="line">        tires[<span class="number">3</span>] = [Tire new];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> (<span class="keyword">self</span>);</span><br><span class="line">    </span><br><span class="line">&#125; <span class="comment">// init</span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>) print</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSLog</span> (<span class="string">@"%@"</span>, engine);</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSLog</span> (<span class="string">@"%@"</span>, tires[<span class="number">0</span>]);</span><br><span class="line">    <span class="built_in">NSLog</span> (<span class="string">@"%@"</span>, tires[<span class="number">1</span>]);</span><br><span class="line">    <span class="built_in">NSLog</span> (<span class="string">@"%@"</span>, tires[<span class="number">2</span>]);</span><br><span class="line">    <span class="built_in">NSLog</span> (<span class="string">@"%@"</span>, tires[<span class="number">3</span>]);</span><br><span class="line">    </span><br><span class="line">&#125; <span class="comment">// print</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span> <span class="comment">// Car</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// --------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> main (<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[])</span><br><span class="line">&#123;</span><br><span class="line">    Car *car;</span><br><span class="line">    </span><br><span class="line">    car = [Car new];</span><br><span class="line">    [car print];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> (<span class="number">0</span>);</span><br><span class="line">    </span><br><span class="line">&#125; <span class="comment">// main</span></span><br></pre></td></tr></table></figure>
<h2 id="5-3-存取方法"><a href="#5-3-存取方法" class="headerlink" title="5.3    存取方法"></a>5.3    存取方法</h2><blockquote>
<p><strong>说明：</strong>是用来读取或改变某个对象属性的方法。</p>
</blockquote>
<table>
<thead>
<tr>
<th>存取方法</th>
<th>方法命名（Cocoa惯例）</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td>getter</td>
<td>getPropertyName</td>
<td>返回实例变量的值</td>
</tr>
<tr>
<td>setter</td>
<td>propertyName</td>
<td>将实例变量的值赋为参数所指向的值</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>建议：</strong>如果要对对象中的属性进行操作，因该尽量使用对象提供的存取方法，而不是直接改变对象里面的值。<br><strong>注意：</strong>不要将<code>get</code>作为getter方法的前缀，因为<code>get</code>出现在<code>Cocoa</code>的方法名称中意味着这个方法会将你传递的参数作为指针来返回数值。</p>
</blockquote>
<h3 id="5-3-1-设置-engine-属性的存取方法"><a href="#5-3-1-设置-engine-属性的存取方法" class="headerlink" title="5.3.1    设置 engine 属性的存取方法"></a>5.3.1    设置 engine 属性的存取方法</h3><blockquote>
<p><strong>说明：</strong>在<code>@interface</code>和<code>@implementation</code>中同时增加存取方法。<br><strong>扩展：</strong>在内存管理和对象的多有权方面<code>Engin</code>的<code>getter</code>方法和<code>setter</code>方法还存在着问题。</p>
</blockquote>
<h3 id="5-3-2-设置-tires-属性的存取方法"><a href="#5-3-2-设置-tires-属性的存取方法" class="headerlink" title="5.3.2    设置 tires 属性的存取方法"></a>5.3.2    设置 tires 属性的存取方法</h3><blockquote>
<p><strong>说明：</strong>不仅要知道新轮胎，还要知道新轮胎的位置。<br><strong>注意：</strong><code>防御式编程</code><br>对无效索引进行防御。</p>
</blockquote>
<h3 id="5-3-3-Car-类代码的其他变化"><a href="#5-3-3-Car-类代码的其他变化" class="headerlink" title="5.3.3    Car 类代码的其他变化"></a>5.3.3    Car 类代码的其他变化</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// --------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Tire</span> : <span class="title">NSObject</span></span></span><br><span class="line"><span class="keyword">@end</span> <span class="comment">// Tire</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">Tire</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="built_in">NSString</span> *) description</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="string">@"I am a tire. I last a while"</span>);</span><br><span class="line">&#125; <span class="comment">// description</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span> <span class="comment">// Tire</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// --------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Engine</span> : <span class="title">NSObject</span></span></span><br><span class="line"><span class="keyword">@end</span> <span class="comment">// Engine</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">Engine</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="built_in">NSString</span> *) description</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> (<span class="string">@"I am an engine.  Vrooom!"</span>);</span><br><span class="line">&#125; <span class="comment">// description</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span> <span class="comment">// Engine</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// --------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Car</span> : <span class="title">NSObject</span></span></span><br><span class="line">&#123;</span><br><span class="line">	Engine *engine;</span><br><span class="line">	Tire *tires[<span class="number">4</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (Engine *) engine;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>) setEngine: (Engine *) newEngine;</span><br><span class="line"></span><br><span class="line">- (Tire *) tireAtIndex: (<span class="keyword">int</span>) index;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>) setTire: (Tire *) tire</span><br><span class="line">		 atIndex: (<span class="keyword">int</span>) index;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>) print;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span> <span class="comment">// Car</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">Car</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">id</span>) init</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">self</span> = [<span class="keyword">super</span> init]) &#123;</span><br><span class="line">		engine = [Engine new];</span><br><span class="line">		</span><br><span class="line">		tires[<span class="number">0</span>] = [Tire new];</span><br><span class="line">		tires[<span class="number">1</span>] = [Tire new];</span><br><span class="line">		tires[<span class="number">2</span>] = [Tire new];</span><br><span class="line">		tires[<span class="number">3</span>] = [Tire new];</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> (<span class="keyword">self</span>);</span><br><span class="line">	</span><br><span class="line">&#125; <span class="comment">// init</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- (Engine *) engine</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> (engine);</span><br><span class="line">&#125; <span class="comment">// engine</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>) setEngine: (Engine *) newEngine</span><br><span class="line">&#123;</span><br><span class="line">	engine = newEngine;</span><br><span class="line">&#125; <span class="comment">// setEngine</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>) setTire: (Tire *) tire</span><br><span class="line">		 atIndex: (<span class="keyword">int</span>) index</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span> (index &lt; <span class="number">0</span> || index &gt; <span class="number">3</span>) &#123;</span><br><span class="line">		<span class="built_in">NSLog</span> (<span class="string">@"bad index (%d) in setTire:atIndex:"</span>,</span><br><span class="line">			   index);</span><br><span class="line">		exit (<span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	tires[index] = tire;</span><br><span class="line">	</span><br><span class="line">&#125; <span class="comment">// setTire:atIndex:</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- (Tire *) tireAtIndex: (<span class="keyword">int</span>) index</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span> (index &lt; <span class="number">0</span> || index &gt; <span class="number">3</span>) &#123;</span><br><span class="line">		<span class="built_in">NSLog</span> (<span class="string">@"bad index (%d) in tireAtIndex:"</span>,</span><br><span class="line">			   index);</span><br><span class="line">		exit (<span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> (tires[index]);</span><br><span class="line">	</span><br><span class="line">&#125; <span class="comment">// tireAtIndex:</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>) print</span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">NSLog</span> (<span class="string">@"%@"</span>, engine);</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">NSLog</span> (<span class="string">@"%@"</span>, tires[<span class="number">0</span>]);</span><br><span class="line">	<span class="built_in">NSLog</span> (<span class="string">@"%@"</span>, tires[<span class="number">1</span>]);</span><br><span class="line">	<span class="built_in">NSLog</span> (<span class="string">@"%@"</span>, tires[<span class="number">2</span>]);</span><br><span class="line">	<span class="built_in">NSLog</span> (<span class="string">@"%@"</span>, tires[<span class="number">3</span>]);</span><br><span class="line">	</span><br><span class="line">&#125; <span class="comment">// print</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span> <span class="comment">// Car</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// --------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> main (<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[]) </span><br><span class="line">&#123;</span><br><span class="line">	Car *car = [Car new];</span><br><span class="line">	</span><br><span class="line">	Engine *engine = [Engine new];</span><br><span class="line">	[car setEngine: engine];</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">		Tire *tire = [Tire new];</span><br><span class="line">		</span><br><span class="line">		[car setTire: tire atIndex: i];</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	[car print];</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> (<span class="number">0</span>);</span><br><span class="line">	</span><br><span class="line">&#125; <span class="comment">// main</span></span><br></pre></td></tr></table></figure>
<h2 id="5-4-扩展-CarParts-程序"><a href="#5-4-扩展-CarParts-程序" class="headerlink" title="5.4    扩展 CarParts 程序"></a>5.4    扩展 CarParts 程序</h2><blockquote>
<p><strong>说明：</strong>结合<code>继承</code>和<code>复合</code></p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// --------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Tire</span> : <span class="title">NSObject</span></span></span><br><span class="line"><span class="keyword">@end</span> <span class="comment">// Tire</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">Tire</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="built_in">NSString</span> *) description</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="string">@"I am a tire. I last a while"</span>);</span><br><span class="line">&#125; <span class="comment">// description</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span> <span class="comment">// Tire</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// --------------------------------------------------</span></span><br><span class="line"><span class="comment">// 新型轮胎</span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">AllWeatherRadial</span> : <span class="title">Tire</span></span></span><br><span class="line"><span class="keyword">@end</span> <span class="comment">// AllWeatherRadial</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">AllWeatherRadial</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="built_in">NSString</span> *) description</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> (<span class="string">@"I am a tire for rain or shine."</span>);</span><br><span class="line">&#125; <span class="comment">// description</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span> <span class="comment">// AllWeatherRadial</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// --------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Engine</span> : <span class="title">NSObject</span></span></span><br><span class="line"><span class="keyword">@end</span> <span class="comment">// Engine</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">Engine</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="built_in">NSString</span> *) description</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> (<span class="string">@"I am an engine.  Vrooom!"</span>);</span><br><span class="line">&#125; <span class="comment">// description</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span> <span class="comment">// Engine</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// --------------------------------------------------</span></span><br><span class="line"><span class="comment">// 新型引擎</span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Slant6</span> : <span class="title">Engine</span></span></span><br><span class="line"><span class="keyword">@end</span> <span class="comment">// Slant6</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">Slant6</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="built_in">NSString</span> *) description</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> (<span class="string">@"I am a slant-6. VROOOM!"</span>);</span><br><span class="line">&#125; <span class="comment">// description</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span> <span class="comment">// Slant6</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// --------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Car</span> : <span class="title">NSObject</span></span></span><br><span class="line">&#123;</span><br><span class="line">	Engine *engine;</span><br><span class="line">	Tire *tires[<span class="number">4</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (Engine *) engine;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>) setEngine: (Engine *) newEngine;</span><br><span class="line"></span><br><span class="line">- (Tire *) tireAtIndex: (<span class="keyword">int</span>) index;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>) setTire: (Tire *) tire atIndex: (<span class="keyword">int</span>) index;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>) print;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span> <span class="comment">// Car</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">Car</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">id</span>) init</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">self</span> = [<span class="keyword">super</span> init]) &#123;</span><br><span class="line">		engine = [Engine new];</span><br><span class="line">		</span><br><span class="line">		tires[<span class="number">0</span>] = [Tire new];</span><br><span class="line">		tires[<span class="number">1</span>] = [Tire new];</span><br><span class="line">		tires[<span class="number">2</span>] = [Tire new];</span><br><span class="line">		tires[<span class="number">3</span>] = [Tire new];</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> (<span class="keyword">self</span>);</span><br><span class="line">	</span><br><span class="line">&#125; <span class="comment">// init</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- (Engine *) engine</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> (engine);</span><br><span class="line">&#125; <span class="comment">// engine</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>) setEngine: (Engine *) newEngine</span><br><span class="line">&#123;</span><br><span class="line">	engine = newEngine;</span><br><span class="line">&#125; <span class="comment">// setEngine</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>) setTire: (Tire *) tire atIndex: (<span class="keyword">int</span>) index</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span> (index &lt; <span class="number">0</span> || index &gt; <span class="number">3</span>) &#123;</span><br><span class="line">		<span class="built_in">NSLog</span> (<span class="string">@"bad index (%d) in setTire:atIndex:"</span>, index);</span><br><span class="line">		exit (<span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	tires[index] = tire;</span><br><span class="line">	</span><br><span class="line">&#125; <span class="comment">// setTire:atIndex:</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- (Tire *) tireAtIndex: (<span class="keyword">int</span>) index</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span> (index &lt; <span class="number">0</span> || index &gt; <span class="number">3</span>) &#123;</span><br><span class="line">		<span class="built_in">NSLog</span> (<span class="string">@"bad index (%d) in tireAtIndex:"</span>, index);</span><br><span class="line">		exit (<span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> (tires[index]);</span><br><span class="line">	</span><br><span class="line">&#125; <span class="comment">// tireAtIndex:</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>) print</span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">NSLog</span> (<span class="string">@"%@"</span>, engine);</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">NSLog</span> (<span class="string">@"%@"</span>, tires[<span class="number">0</span>]);</span><br><span class="line">	<span class="built_in">NSLog</span> (<span class="string">@"%@"</span>, tires[<span class="number">1</span>]);</span><br><span class="line">	<span class="built_in">NSLog</span> (<span class="string">@"%@"</span>, tires[<span class="number">2</span>]);</span><br><span class="line">	<span class="built_in">NSLog</span> (<span class="string">@"%@"</span>, tires[<span class="number">3</span>]);</span><br><span class="line">	</span><br><span class="line">&#125; <span class="comment">// print</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span> <span class="comment">// Car</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// --------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> main (<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[]) </span><br><span class="line">&#123;</span><br><span class="line">	Car *car = [Car new];</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">		Tire *tire = [AllWeatherRadial new];</span><br><span class="line">		</span><br><span class="line">		[car setTire: tire</span><br><span class="line">			 atIndex: i];</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	Engine *engine = [Slant6 new];</span><br><span class="line">	[car setEngine: engine];</span><br><span class="line">	</span><br><span class="line">	[car print];</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> (<span class="number">0</span>);</span><br><span class="line">	</span><br><span class="line">&#125; <span class="comment">// main</span></span><br></pre></td></tr></table></figure>
<h2 id="5-5-复合还是继承"><a href="#5-5-复合还是继承" class="headerlink" title="5.5    复合还是继承"></a>5.5    复合还是继承</h2><blockquote>
<p><strong>说明：</strong>在进行面向对象编程时通常会犯这样的错误－任何东西都想使用继承。</p>
</blockquote>
<table>
<thead>
<tr>
<th>比较</th>
<th>类之间的关系</th>
</tr>
</thead>
<tbody>
<tr>
<td>继承</td>
<td><code>is a</code></td>
</tr>
<tr>
<td>复合</td>
<td><code>has a</code></td>
</tr>
</tbody>
</table>
<h2 id="5-6-小结"><a href="#5-6-小结" class="headerlink" title="5.6    小结"></a>5.6    小结</h2>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/13/o-c基础教程第二版_04  继承/" itemprop="url">
                  4 继承
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-13T10:36:44+08:00" content="2016-05-13">
              2016-05-13
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/13/o-c基础教程第二版_04  继承/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/13/o-c基础教程第二版_04  继承/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p><strong>说明：</strong>处理类和对象的关系时，要重视<code>OOP</code>的两个方面</p>
<ul>
<li><strong>继承：</strong>定义一个具有父类所有功能的新类</li>
<li><strong>复合：</strong>在对象中引用其他对象</li>
</ul>
</blockquote>
<h2 id="4-1-为何使用继承"><a href="#4-1-为何使用继承" class="headerlink" title="4.1    为何使用继承"></a>4.1    为何使用继承</h2><blockquote>
<p><strong>说明：</strong>将所有重复的内容合并在一起，并在需要的地方拥有自定义的方法。<br><strong>不使用继承的架构</strong><br><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-01-02%20%E4%B8%8B%E5%8D%887.34.10.png" alt="Alt text"><br><strong>使用继承后的架构</strong><br><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-01-02%20%E4%B8%8B%E5%8D%887.35.04.png" alt="Alt text"></p>
</blockquote>
<h2 id="4-2-继承的语法格式"><a href="#4-2-继承的语法格式" class="headerlink" title="4.2    继承的语法格式"></a>4.2    继承的语法格式</h2><blockquote>
<p><strong>说明：</strong><code>@interface 子类名: 父类名</code></p>
</blockquote>
<table>
<thead>
<tr>
<th>术语</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>超类（或父类）</td>
<td>继承的类</td>
</tr>
<tr>
<td>子类（或孩子类）</td>
<td>执行继承的类</td>
</tr>
<tr>
<td>重写</td>
<td>如果想改变方法的实现，需要重写继承的方法</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>注意：</strong><code>O-C</code>不支持多继承（可以使用类别和协议模拟多继承效果）</p>
</blockquote>
<h2 id="4-3-继承的工作机制"><a href="#4-3-继承的工作机制" class="headerlink" title="4.3    继承的工作机制"></a>4.3    继承的工作机制</h2><h3 id="4-3-1-方法调度"><a href="#4-3-1-方法调度" class="headerlink" title="4.3.1    方法调度"></a>4.3.1    方法调度</h3><blockquote>
<p><strong>说明：</strong>当发送消息时，<code>O-C</code>的方法调度机制将在当前的类中搜索相应的方法。如果无法在接收消息的对象的类文件中找到相应的方法，它就会在该对象的超类中进行查找。<br><strong>注意：</strong>如果在最顶层的<code>NSObject</code>类中也没有找到该方法，则会出现一个运行时错误。</p>
</blockquote>
<h3 id="4-3-2-实例变量"><a href="#4-3-2-实例变量" class="headerlink" title="4.3.2    实例变量"></a>4.3.2    实例变量</h3><blockquote>
<p><strong>说明：</strong><code>O-C</code> 中图和访问实例变量</p>
<ul>
<li>子类会从父类继承实例变量</li>
<li>子类根据自己的情况添加额外的自己的实例变量</li>
<li>每个方法被调用时都获得了一个名为<code>self</code>的参数，<code>self</code>指向继承链中第一个类中的第一个实例变量。</li>
</ul>
<p><strong>多态性：</strong>使用更具体种类的对象来代替一般类型，这种能力被称为<code>多态性</code>。<br><strong>扩展：</strong>通过<code>对象基地址</code>（第一个实例变量的首个字节在内存中的位置）加上<code>偏移地址</code>，编译器就可以查找其他实例变量的位置。这个机制叫做<code>基地址加偏移</code>，通过硬编码实现，但存在<code>脆弱的基类问题</code>，<code>Leopard</code>系统中通过引入64位<code>Objective-C</code>运行时（使用间接寻址方式确定变量的位置）解决了这个问题。</p>
</blockquote>
<h2 id="4-4-重写方法"><a href="#4-4-重写方法" class="headerlink" title="4.4    重写方法"></a>4.4    重写方法</h2><h3 id="super关键字"><a href="#super关键字" class="headerlink" title="super关键字"></a>super关键字</h3><blockquote>
<p><strong>说明：</strong>利用<code>super</code>，既可以重写方法的实现，又能调用超类中的实现方式。<br><strong>原理：</strong>既不是参数也不是实例变量，而是由<code>Objective-C</code>编译器提供的一种神奇的功能。当想<code>super</code>发送消息时，实际上是在请求<code>Obective-C</code>向该类的超类发送消息。如果超类中没有定义该消息，则向平常一样继续在<code>继承链</code>上一级中查找。</p>
</blockquote>
<h2 id="4-5-小结"><a href="#4-5-小结" class="headerlink" title="4.5    小结"></a>4.5    小结</h2><h2 id="4-6-举个栗子"><a href="#4-6-举个栗子" class="headerlink" title="4.6    举个栗子"></a>4.6    举个栗子</h2><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/13/o-c基础教程第二版_03  面向对象编程的基础知识/" itemprop="url">
                  3 面向对象编程的基础知识
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-13T10:35:54+08:00" content="2016-05-13">
              2016-05-13
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/13/o-c基础教程第二版_03  面向对象编程的基础知识/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/13/o-c基础教程第二版_03  面向对象编程的基础知识/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p><strong>OOP历史：</strong>演变自20世纪60年代的<code>Simula</code>、70年代的<code>SmallTalk</code>、80年代的<code>Clascal</code>以及其他相关语言。<code>C++</code>、<code>Java</code>、<code>Python</code>和<code>Objective-C</code>等现代编程语言都从这个早期的语言中获得了灵感。</p>
</blockquote>
<h2 id="3-1-间接"><a href="#3-1-间接" class="headerlink" title="3.1    间接"></a>3.1    间接</h2><p><code>只要在多加一层间接，计算机科学中就没有解决不了的问题</code>。</p>
<blockquote>
<p><strong>说明：</strong>指的就是面向对象的<code>多态性</code>。<br><strong>原理：</strong>在程序运行期间，通过指针间接获取某个值，而不是直接获取（<code>指针指向</code>的变化对程序员不可见）。</p>
</blockquote>
<h3 id="3-1-1-变量与间接"><a href="#3-1-1-变量与间接" class="headerlink" title="3.1.1    变量与间接"></a>3.1.1    变量与间接</h3><blockquote>
<p><strong>说明：</strong>基本变量就是间接思想的一种实际应用。</p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> main(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[]) &#123;</span><br><span class="line">    <span class="comment">// 通过修改 count 间接控制后面循环的次数，本身就蕴含着间接的思想</span></span><br><span class="line">    <span class="keyword">int</span> count = <span class="number">5</span>;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"The numbers from 1 to %d:"</span>, count);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= count; i++) &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"%d\n"</span>, i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-1-2-使用文件名的间接"><a href="#3-1-2-使用文件名的间接" class="headerlink" title="3.1.2    使用文件名的间接"></a>3.1.2    使用文件名的间接</h3><blockquote>
<p><strong>说明：</strong>程序中使用文件（而不是写死在代码中）也是间接思想的运用。<br><strong>技巧：</strong><code>xcode</code>中运行程序时提供文件路径的方式</p>
<ol>
<li>打开设置面板：Product（菜单）-&gt; Scheme -&gt; Edit Scheme</li>
<li>在面板中添加参数：Arguments -&gt; Arguments Passed On Launch—&gt;点击<code>+</code>添加</li>
</ol>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> main(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[]) &#123;</span><br><span class="line">    <span class="comment">// 命令中没有提供文件名，则退出程序</span></span><br><span class="line">    <span class="keyword">if</span> (argc == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"you need to provide a file name"</span>);</span><br><span class="line">        <span class="keyword">return</span> (<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 1. 打开文件</span></span><br><span class="line">    FILE *wordFile = fopen(argv[<span class="number">1</span>], <span class="string">"r"</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 2. 访问文件</span></span><br><span class="line">    <span class="keyword">char</span> word[<span class="number">100</span>];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 一行一行地读区</span></span><br><span class="line">    <span class="keyword">while</span> (fgets(word, <span class="number">100</span>, wordFile)) &#123;</span><br><span class="line">        <span class="comment">// 将每行最后的换行符替换为字符串结束符（从而不会被后面的 strlen 计入字符串的长度）</span></span><br><span class="line">        word[strlen(word) - <span class="number">1</span>] = <span class="string">'\0'</span>;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"%s is %lu characters long"</span>, word, strlen(word));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 3. 关闭文件</span></span><br><span class="line">    fclose(wordFile);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-2-在面向对象编程中使用间接"><a href="#3-2-在面向对象编程中使用间接" class="headerlink" title="3.2    在面向对象编程中使用间接"></a>3.2    在面向对象编程中使用间接</h2><blockquote>
<p><strong>说明：</strong><code>OOP</code>的核心在于使用间接来调用代码（而不是直接调用函数）</p>
</blockquote>
<h3 id="3-2-1-过程式编程"><a href="#3-2-1-过程式编程" class="headerlink" title="3.2.1    过程式编程"></a>3.2.1    过程式编程</h3><blockquote>
<p><strong>说明：</strong>在过程式编程中，数据通常保存在简单的数据结构中。要花时间连接数据和用来处理数据的函数。<br><strong>语言举例：</strong><code>BASIC</code>、<code>C</code>、<code>Tcl</code>和<code>Perl</code></p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"><span class="comment">/******* 枚举：图形的基本元素 *******/</span></span><br><span class="line"><span class="comment">// 图形类型</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">enum</span> &#123;</span><br><span class="line">    kCircle,</span><br><span class="line">    kRectangle,</span><br><span class="line">    kEgg</span><br><span class="line">&#125; ShapeType;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 图形颜色</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">enum</span> &#123;</span><br><span class="line">    kRedColor,</span><br><span class="line">    kGreenColor,</span><br><span class="line">    kBlueColor</span><br><span class="line">&#125; ShapeColor;</span><br><span class="line"></span><br><span class="line"><span class="comment">/****** 结构体：图形类型 ******/</span></span><br><span class="line"><span class="comment">// 绘图区域</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> &#123;</span><br><span class="line">    <span class="keyword">int</span> x, y, width, height;<span class="comment">// 坐标和边长</span></span><br><span class="line">&#125; ShapeRect;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 图形</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> &#123;</span><br><span class="line">    ShapeType type;<span class="comment">// 类型</span></span><br><span class="line">    ShapeColor fillColor;<span class="comment">// 填充色</span></span><br><span class="line">    ShapeRect bounds;<span class="comment">// 边框</span></span><br><span class="line">&#125; Shape;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 将传入的颜色值转换为字符串描述</span><br><span class="line"> * @param &#123;ShapeColor&#125; colorName 图形颜色</span><br><span class="line"> * @return &#123;NSString&#125; 枚举类型的颜色对应的字符串</span><br><span class="line"> */</span></span><br><span class="line"><span class="built_in">NSString</span> *colorName (ShapeColor colorName) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (colorName) &#123;</span><br><span class="line">        <span class="keyword">case</span> kRedColor:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">@"red"</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> kGreenColor:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">@"green"</span>;</span><br><span class="line">        <span class="keyword">case</span> kBlueColor:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">@"blue"</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 绘制圆形</span><br><span class="line"> * @param &#123;ShapeRect&#125; bounds 绘制区域</span><br><span class="line"> * @param &#123;ShapeColor&#125; fillColor 图形填充色</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">void</span> drawCircle (ShapeRect bounds, ShapeColor fillColor) &#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"drawing a circle at (%d %d %d %d) in %@"</span>, bounds.x, bounds.y, bounds.height, bounds.width, colorName(fillColor));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 绘制矩形</span><br><span class="line"> * @param &#123;ShapeRect&#125; bounds 绘制区域</span><br><span class="line"> * @param &#123;ShapeColor&#125; fillColor 图形填充色</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">void</span> drawRectangle (ShapeRect bounds, ShapeColor fillColor) &#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"drawing a rectangle at (%d %d %d %d) in %@"</span>, bounds.x, bounds.y, bounds.height, bounds.width, colorName(fillColor));&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 绘制椭圆形</span><br><span class="line"> * @param &#123;ShapeRect&#125; bounds 绘制区域</span><br><span class="line"> * @param &#123;ShapeColor&#125; fillColor 图形填充色</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">void</span> drawEgg (ShapeRect bounds, ShapeColor fillColor) &#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"drawing a egg at (%d %d %d %d) in %@"</span>, bounds.x, bounds.y, bounds.height, bounds.width, colorName(fillColor));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *  绘制图形</span><br><span class="line"> * @param &#123;Shape[]&#125; shapes 要绘制的一组图形</span><br><span class="line"> * @param &#123;int&#125; count 绘制数组中的前count个图形</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">void</span> drawShapes (Shape shapes[], <span class="keyword">int</span> count) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">        <span class="keyword">switch</span> (shapes[i].type) &#123;</span><br><span class="line">            <span class="keyword">case</span> kCircle:</span><br><span class="line">                drawCircle (shapes[i].bounds, shapes[i].fillColor);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> kRectangle:</span><br><span class="line">                drawRectangle (shapes[i].bounds, shapes[i].fillColor);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> kEgg:</span><br><span class="line">                drawEgg(shapes[i].bounds, shapes[i].fillColor);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> main(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[]) &#123;</span><br><span class="line">    <span class="comment">// 存放图形实例的数组</span></span><br><span class="line">    Shape shapes[<span class="number">3</span>];</span><br><span class="line">    <span class="comment">// 红色圆形</span></span><br><span class="line">    ShapeRect rect0 = &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">10</span>, <span class="number">30</span>&#125;;</span><br><span class="line">    shapes[<span class="number">0</span>].type = kCircle;</span><br><span class="line">    shapes[<span class="number">0</span>].fillColor = kRedColor;</span><br><span class="line">    shapes[<span class="number">0</span>].bounds = rect0;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 绿色矩形</span></span><br><span class="line">    ShapeRect rect1 = &#123;<span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>, <span class="number">60</span>&#125;;</span><br><span class="line">    shapes[<span class="number">1</span>].type = kRectangle;</span><br><span class="line">    shapes[<span class="number">1</span>].fillColor = kGreenColor;</span><br><span class="line">    shapes[<span class="number">1</span>].bounds = rect1;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 蓝色椭圆</span></span><br><span class="line">    ShapeRect rect2 = &#123;<span class="number">15</span>, <span class="number">18</span>, <span class="number">37</span>, <span class="number">29</span>&#125;;</span><br><span class="line">    shapes[<span class="number">2</span>].type = kEgg;</span><br><span class="line">    shapes[<span class="number">2</span>].fillColor = kBlueColor;</span><br><span class="line">    shapes[<span class="number">2</span>].bounds = rect2;</span><br><span class="line">    </span><br><span class="line">    drawShapes(shapes, <span class="number">3</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">2016-01-02 00:50:43.911 3.2.1-procedureOriented[834:55458] drawing a circle at (0 0 30 10) <span class="keyword">in</span> red</span><br><span class="line">2016-01-02 00:50:43.912 3.2.1-procedureOriented[834:55458] drawing a rectangle at (30 40 60 50) <span class="keyword">in</span> green</span><br><span class="line">2016-01-02 00:50:43.912 3.2.1-procedureOriented[834:55458] drawing a egg at (15 18 29 37) <span class="keyword">in</span> blue</span><br><span class="line">Program ended with <span class="built_in">exit</span> code: 0</span><br></pre></td></tr></table></figure>
<h3 id="3-2-2-实现面向对象编程"><a href="#3-2-2-实现面向对象编程" class="headerlink" title="3.2.2    实现面向对象编程"></a>3.2.2    实现面向对象编程</h3><blockquote>
<p><strong>说明：</strong>过程式编程建立在函数之上，数据为函数服务，而面向对象编程则以程序的数据为中心，函数为数据服务。<br><strong>原理：</strong>数据通过<code>间接方式</code>引用相应代码对数据进行操作（数据能够知道如何查找相应的函数）。</p>
</blockquote>
<h4 id="id（标识符）"><a href="#id（标识符）" class="headerlink" title="id（标识符）"></a>id（标识符）</h4><blockquote>
<p><strong>说明：</strong><code>identifier</code>，是一种泛型，可以用来定义引用任何类型对象的变量。</p>
</blockquote>
<h4 id="发送消息"><a href="#发送消息" class="headerlink" title="发送消息"></a>发送消息</h4><blockquote>
<p><strong>说明：</strong>通知对象执行某种操作，也叫做<code>调用方法</code></p>
</blockquote>
<h4 id="类"><a href="#类" class="headerlink" title="类"></a>类</h4><blockquote>
<p><strong>说明：</strong>不同于其他<code>OOP</code>系统，在<code>O-C</code>中，如果在运行时改变某个类，则该类的所有对象会<code>自动继承这些变化</code>。</p>
</blockquote>
<h2 id="3-3-有关术语"><a href="#3-3-有关术语" class="headerlink" title="3.3    有关术语"></a>3.3    有关术语</h2><blockquote>
<p><strong>说明：</strong>有关<code>面向对象</code>的术语</p>
</blockquote>
<table>
<thead>
<tr>
<th>术语</th>
<th>说明</th>
<th>语法</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>类(class)</strong></td>
<td>一种表示对象类型的结构体</td>
<td>类名首字母大写</td>
<td>对象通过它的类来获取自身的各种信息</td>
</tr>
<tr>
<td><strong>对象或实例(object)</strong></td>
<td>一种包含值和指向其类的隐藏指针的结构体</td>
<td>指向对象的变量通常首字母不要大些</td>
<td></td>
</tr>
<tr>
<td><strong>消息(message)</strong></td>
<td>对象可以执行的操作，用于通知对象做什么</td>
<td></td>
</tr>
<tr>
<td><strong>方法(method)</strong></td>
<td>响应消息运行的代码</td>
<td></td>
<td>根据对象的类，消息可以调用不同的方法</td>
</tr>
<tr>
<td><strong>方法调度(method dispatcher)</strong></td>
<td>用于推测执行什么方法以响应某个特定的消息</td>
<td></td>
</tr>
<tr>
<td><strong>接口(interface)</strong></td>
<td>类为对象提供的特性描述</td>
<td></td>
</tr>
<tr>
<td><strong>实现(implementation)</strong></td>
<td>使接口能正常工作的代码</td>
</tr>
</tbody>
</table>
<h2 id="3-4-Object-C语言中的OOP"><a href="#3-4-Object-C语言中的OOP" class="headerlink" title="3.4    Object-C语言中的OOP"></a>3.4    Object-C语言中的OOP</h2><h3 id="3-4-1-interface部分"><a href="#3-4-1-interface部分" class="headerlink" title="3.4.1    @interface部分"></a>3.4.1    @interface部分</h3><blockquote>
<p><strong>说明：</strong>定义类的公共接口，真正运行的代码位于<code>@implementation</code>中。<br><strong>用途：</strong>在特定类的对象被创建时，为编译器提供有关该类的信息，尤其是对象的数据成员及其提供的功能。<br><strong>组成：</strong>语法上包含以下几个部分</p>
<ul>
<li>继承其它<code>interface</code></li>
<li>实现<code>protocol</code></li>
<li>实例变量</li>
<li>方法声明</li>
</ul>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> 类名: 父类名 </span>&#123;</span><br><span class="line">	<span class="comment">// 实例属性</span></span><br><span class="line">	属性类型 属性名;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 方法声明</span></span><br><span class="line">- (返回值类型) 方法名: (参数<span class="number">1</span>类型)参数<span class="number">1</span>名称, (参数<span class="number">2</span>类型)参数<span class="number">2</span>名称;</span><br><span class="line"><span class="keyword">@end</span><span class="comment">// 类名（便于代码阅读）</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>注意：</strong>在声明方法时，如果方法有参数，则需要冒号，否则不需要。</p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Circle类</span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Circle</span>: <span class="title">NSObject</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 实例变量</span></span><br><span class="line">    <span class="keyword">@private</span></span><br><span class="line">    ShapeColor fillColor;</span><br><span class="line">    ShapeRect bounds;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 方法声明</span></span><br><span class="line">- (<span class="keyword">void</span>) setFillCollor: (ShapeColor) fillColor;</span><br><span class="line">- (<span class="keyword">void</span>) setBounds: (ShapeRect) bounds;</span><br><span class="line">- (<span class="keyword">void</span>) draw;</span><br><span class="line"><span class="keyword">@end</span><span class="comment">// Circle</span></span><br></pre></td></tr></table></figure>
<h3 id="3-4-2-implementation部分"><a href="#3-4-2-implementation部分" class="headerlink" title="3.4.2    @implementation部分"></a>3.4.2    @implementation部分</h3><blockquote>
<p><strong>说明：</strong><code>@implementation</code>是一个编译器指令，表明将为某个类提供代码</p>
<ul>
<li>方法的定义不必按照在<code>@interface</code>指令中的顺序出现</li>
<li>可以定义没有在<code>@interface</code>中声明过的方法</li>
<li>同一个类中，方法的参数名不可以和实例属性名相同，否则方法被调用时会覆盖实例属性的值</li>
</ul>
<p><strong>扩展：</strong></p>
<ul>
<li><strong>实例变量名：</strong>如果实例变量取一个和方法名相同的名字，<code>Cocoa</code>还可以发挥出某些神奇的威力</li>
<li><strong>运行时：</strong><code>O-C运行时</code>是指用户应用程序时，支持这些应用程序的代码块</li>
<li><strong>self：</strong>类的方法被调用时，一个名为<code>self</code>的秘密隐藏参数将被传递给接受对象，而这个参数引用的就是该接收对象</li>
</ul>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">Circle</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 设置图形填充色</span><br><span class="line"> * @param &#123;ShapeColor&#125; c 颜色</span><br><span class="line"> */</span></span><br><span class="line">- (<span class="keyword">void</span>) setFillCollor:(ShapeColor)c &#123;</span><br><span class="line">    fillColor = c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 设置绘图区域</span><br><span class="line"> * @param &#123;ShapeRect&#125; b 绘图区域</span><br><span class="line"> */</span></span><br><span class="line">- (<span class="keyword">void</span>) setBounds:(ShapeRect)b &#123;</span><br><span class="line">    bounds = b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h3 id="3-4-3-实例化对象"><a href="#3-4-3-实例化对象" class="headerlink" title="3.4.3    实例化对象"></a>3.4.3    实例化对象</h3><blockquote>
<p><strong>说明：</strong>实例化对象时，需要分配内存，然后将这些内存初始化并保存为有用的默认值。<br><strong>语法：</strong>向相应的<code>类</code>(或已经存在的<code>对象</code>)发送<code>new</code>消息，该类接收并处理完<code>new</code>消息后，我们就会得到一个可以使用的新对象实例。</p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"><span class="comment">// --------------------------------------------------</span></span><br><span class="line"><span class="comment">// 图形类型</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">enum</span> &#123;</span><br><span class="line">    kCircle,</span><br><span class="line">    kRectangle,</span><br><span class="line">    kEgg</span><br><span class="line">&#125; ShapeType;</span><br><span class="line"></span><br><span class="line"><span class="comment">// --------------------------------------------------</span></span><br><span class="line"><span class="comment">// 图形颜色</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">enum</span> &#123;</span><br><span class="line">    kRedColor,</span><br><span class="line">    kGreenColor,</span><br><span class="line">    kBlueColor</span><br><span class="line">&#125; ShapeColor;</span><br><span class="line"></span><br><span class="line"><span class="comment">// --------------------------------------------------</span></span><br><span class="line"><span class="comment">// 绘图区域</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> &#123;</span><br><span class="line">    <span class="keyword">int</span> x, y, width, height;<span class="comment">// 坐标和边长</span></span><br><span class="line">&#125; ShapeRect;</span><br><span class="line"></span><br><span class="line"><span class="comment">// --------------------------------------------------</span></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 将传入的颜色值转换为字符串描述</span><br><span class="line"> * @param &#123;ShapeColor&#125; colorName 图形颜色</span><br><span class="line"> * @return &#123;NSString&#125; 枚举类型的颜色对应的字符串</span><br><span class="line"> */</span></span><br><span class="line"><span class="built_in">NSString</span> *colorName (ShapeColor colorName) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (colorName) &#123;</span><br><span class="line">        <span class="keyword">case</span> kRedColor:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">@"red"</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> kGreenColor:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">@"green"</span>;</span><br><span class="line">        <span class="keyword">case</span> kBlueColor:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">@"blue"</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// --------------------------------------------------</span></span><br><span class="line"><span class="comment">// Circle类</span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Circle</span>: <span class="title">NSObject</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 实例变量</span></span><br><span class="line">    <span class="keyword">@private</span></span><br><span class="line">    ShapeColor fillColor;</span><br><span class="line">    ShapeRect bounds;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 方法声明</span></span><br><span class="line">- (<span class="keyword">void</span>) setFillCollor: (ShapeColor) fillColor;</span><br><span class="line">- (<span class="keyword">void</span>) setBounds: (ShapeRect) bounds;</span><br><span class="line">- (<span class="keyword">void</span>) draw;</span><br><span class="line"><span class="keyword">@end</span><span class="comment">// Circle</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Circle类的实现</span></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">Circle</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 设置图形填充色</span><br><span class="line"> * @param &#123;ShapeColor&#125; c 颜色</span><br><span class="line"> */</span></span><br><span class="line">- (<span class="keyword">void</span>) setFillCollor:(ShapeColor)c &#123;</span><br><span class="line">    fillColor = c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 设置绘图区域</span><br><span class="line"> * @param &#123;ShapeRect&#125; b 绘图区域</span><br><span class="line"> */</span></span><br><span class="line">- (<span class="keyword">void</span>) setBounds:(ShapeRect)b &#123;</span><br><span class="line">    bounds = b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 绘制</span><br><span class="line"> */</span></span><br><span class="line">- (<span class="keyword">void</span>) draw &#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"drawing a circle at (%d %d %d %d) in %@"</span>, bounds.x, bounds.y, bounds.width, bounds.height, colorName(fillColor));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// --------------------------------------------------</span></span><br><span class="line"><span class="comment">// Rectangle类</span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Rectangle</span>: <span class="title">NSObject</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 实例变量</span></span><br><span class="line"><span class="keyword">@private</span></span><br><span class="line">    ShapeColor fillColor;</span><br><span class="line">    ShapeRect bounds;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 方法声明</span></span><br><span class="line">- (<span class="keyword">void</span>) setFillCollor: (ShapeColor) fillColor;</span><br><span class="line">- (<span class="keyword">void</span>) setBounds: (ShapeRect) bounds;</span><br><span class="line">- (<span class="keyword">void</span>) draw;</span><br><span class="line"><span class="keyword">@end</span><span class="comment">// Rectangle</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Rectangle类的实现</span></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">Rectangle</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 设置图形填充色</span><br><span class="line"> * @param &#123;ShapeColor&#125; c 颜色</span><br><span class="line"> */</span></span><br><span class="line">- (<span class="keyword">void</span>) setFillCollor:(ShapeColor)c &#123;</span><br><span class="line">    fillColor = c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 设置绘图区域</span><br><span class="line"> * @param &#123;ShapeRect&#125; b 绘图区域</span><br><span class="line"> */</span></span><br><span class="line">- (<span class="keyword">void</span>) setBounds:(ShapeRect)b &#123;</span><br><span class="line">    bounds = b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 绘制</span><br><span class="line"> */</span></span><br><span class="line">- (<span class="keyword">void</span>) draw &#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"drawing a rectangle at (%d %d %d %d) in %@"</span>, bounds.x, bounds.y, bounds.width, bounds.height, colorName(fillColor));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// --------------------------------------------------</span></span><br><span class="line"><span class="comment">// Egg类</span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Egg</span>: <span class="title">NSObject</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 实例变量</span></span><br><span class="line"><span class="keyword">@private</span></span><br><span class="line">    ShapeColor fillColor;</span><br><span class="line">    ShapeRect bounds;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 方法声明</span></span><br><span class="line">- (<span class="keyword">void</span>) setFillCollor: (ShapeColor) fillColor;</span><br><span class="line">- (<span class="keyword">void</span>) setBounds: (ShapeRect) bounds;</span><br><span class="line">- (<span class="keyword">void</span>) draw;</span><br><span class="line"><span class="keyword">@end</span><span class="comment">// Egg</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Egg类的实现</span></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">Egg</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 设置图形填充色</span><br><span class="line"> * @param &#123;ShapeColor&#125; c 颜色</span><br><span class="line"> */</span></span><br><span class="line">- (<span class="keyword">void</span>) setFillCollor:(ShapeColor)c &#123;</span><br><span class="line">    fillColor = c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 设置绘图区域</span><br><span class="line"> * @param &#123;ShapeRect&#125; b 绘图区域</span><br><span class="line"> */</span></span><br><span class="line">- (<span class="keyword">void</span>) setBounds:(ShapeRect)b &#123;</span><br><span class="line">    bounds = b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 绘制</span><br><span class="line"> */</span></span><br><span class="line">- (<span class="keyword">void</span>) draw &#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"drawing a egg at (%d %d %d %d) in %@"</span>, bounds.x, bounds.y, bounds.width, bounds.height, colorName(fillColor));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// --------------------------------------------------</span></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *  绘制图形</span><br><span class="line"> * @param &#123;id[]&#125; shapes 要绘制的一组图形</span><br><span class="line"> * @param &#123;int&#125; count 绘制数组中的前count个图形</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">void</span> drawShapes (<span class="keyword">id</span> shapes[], <span class="keyword">int</span> count) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">        <span class="keyword">id</span> shape = shapes[i];</span><br><span class="line">        [shape draw];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> main(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[]) &#123;</span><br><span class="line">    <span class="keyword">id</span> shapes[<span class="number">3</span>];</span><br><span class="line">    <span class="comment">// 红色圆形</span></span><br><span class="line">    ShapeRect rect0 =&#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">10</span>, <span class="number">30</span>&#125;;</span><br><span class="line">    shapes[<span class="number">0</span>] = [Circle new];</span><br><span class="line">    [shapes[<span class="number">0</span>] setBounds: rect0];</span><br><span class="line">    [shapes[<span class="number">0</span>] setFillCollor:kRedColor];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 绿色矩形</span></span><br><span class="line">    ShapeRect rect1 = &#123;<span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>, <span class="number">60</span>&#125;;</span><br><span class="line">    shapes[<span class="number">1</span>] = [Rectangle new];</span><br><span class="line">    [shapes[<span class="number">1</span>] setBounds: rect1];</span><br><span class="line">    [shapes[<span class="number">1</span>] setFillCollor:kGreenColor];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 蓝色椭圆</span></span><br><span class="line">    ShapeRect rect2 = &#123;<span class="number">15</span>, <span class="number">18</span>, <span class="number">37</span>, <span class="number">29</span>&#125;;</span><br><span class="line">    shapes[<span class="number">2</span>] = [Egg new];</span><br><span class="line">    [shapes[<span class="number">2</span>] setBounds: rect2];</span><br><span class="line">    [shapes[<span class="number">2</span>] setFillCollor:kBlueColor];</span><br><span class="line">    </span><br><span class="line">    drawShapes(shapes, <span class="number">3</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-4-4-扩展-Shapes-Object-程序"><a href="#3-4-4-扩展-Shapes-Object-程序" class="headerlink" title="3.4.4    扩展 Shapes-Object 程序"></a>3.4.4    扩展 Shapes-Object 程序</h3><blockquote>
<p><strong>说明：</strong>软件实体应该对扩展开放，而对修改关闭</p>
</blockquote>
<h2 id="3-5-小结"><a href="#3-5-小结" class="headerlink" title="3.5    小结"></a>3.5    小结</h2>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/12/o-c基础教程第二版_02  对C的扩展/" itemprop="url">
                  2 对c的扩展
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-12T22:36:43+08:00" content="2016-05-12">
              2016-05-12
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/12/o-c基础教程第二版_02  对C的扩展/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/12/o-c基础教程第二版_02  对C的扩展/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="2-1-最简单的-Objective-C-程序"><a href="#2-1-最简单的-Objective-C-程序" class="headerlink" title="2.1   最简单的 Objective-C 程序"></a>2.1   最简单的 Objective-C 程序</h2><blockquote>
<p><strong>说明：</strong>项目创建过程如下</p>
<ol>
<li>创建 workspace：File-New-Workspace</li>
<li>创建 project：File-New-&gt;Project</li>
</ol>
<ul>
<li>选择模版：OS X-&gt;Applicetion-&gt; Command Line</li>
<li>选择语言：Object-C</li>
<li>选择 Workspace</li>
</ul>
</blockquote>
<h2 id="2-2-解构-Hello-Objective-C-程序"><a href="#2-2-解构-Hello-Objective-C-程序" class="headerlink" title="2.2   解构 Hello Objective-C 程序"></a>2.2   解构 Hello Objective-C 程序</h2><blockquote>
<p><strong>默认编译器：</strong> XCode 的默认编译器为<code>LLVM</code>，可以处理<code>C</code>（.c文件）、<code>C++</code>（.cpp）、<code>Objective-C</code>（.m）。<br><strong>扩展：</strong>扩展名<code>.m</code>代表<code>message</code>，它值得是<code>Object-C</code>的一个主要特征。</p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// O-C 支持的模块导入方式</span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// main 的声明语句和结尾的 return 语句和 C 一样</span></span><br><span class="line"><span class="keyword">int</span> main(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[]) &#123;</span><br><span class="line">    <span class="keyword">@autoreleasepool</span> &#123;</span><br><span class="line">        <span class="comment">// insert code here...</span></span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"Hello, World!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-2-1-import-语句"><a href="#2-2-1-import-语句" class="headerlink" title="2.2.1    #import 语句"></a>2.2.1    #import 语句</h3><blockquote>
<p><strong>功能：</strong>通知编译器查询头文件中相应的代码并导入，一个文件中只会被包含一次（无论调用多少次<code>#import</code>语句）<br><strong>说明：</strong>相比<code>C</code>的<code>#include</code>，<code>#import</code>能避免文件相互包含的情况导致的错误（<code>C</code>语言通过<code>ifdef</code>实现）。<br><strong>注意：</strong><code>Foundation</code>框架的头文件占用了近1MB的磁盘空间，使用<code>#import &lt;Foundation/Foundation.h&gt;</code>包含头文件时，Xcode使用<code>预编译头文件</code>加快读取速度。</p>
</blockquote>
<h3 id="2-2-2-框架"><a href="#2-2-2-框架" class="headerlink" title="2.2.2    框架"></a>2.2.2    框架</h3><blockquote>
<p><strong>框架：</strong>是一种把<code>头文件、库、图片、声音等内容</code>聚集在一个独立单元中的集合体。<br><strong>框架集：</strong>一系列框架的集合。</p>
</blockquote>
<h4 id="苹果公司提供的框架集"><a href="#苹果公司提供的框架集" class="headerlink" title="苹果公司提供的框架集"></a>苹果公司提供的框架集</h4><blockquote>
<p><strong>说明：</strong>苹果公司将<code>Cocoa</code>、<code>Carbon</code>、<code>QuickTime</code>、<code>OpenGL</code>等技术作为框架集来提供。<br><strong>Cocoa框架集：</strong>包括以下框架</p>
<ul>
<li>Foundation</li>
<li>Application Kit（简称AppKit）</li>
<li>支持性框架（Core Animation 和 Core Image）</li>
</ul>
<p><strong>扩展：</strong><a href="">Learn Cocoa On The Mac</a></p>
</blockquote>
<h3 id="2-2-3-NSLog-和-quot-字符串-quot"><a href="#2-2-3-NSLog-和-quot-字符串-quot" class="headerlink" title="2.2.3    NSLog()和@&quot;字符串&quot;"></a>2.2.3    <code>NSLog()</code>和<code>@&quot;字符串&quot;</code></h3><blockquote>
<p><strong>说明：</strong><code>Cocoa</code>给其所有函数、常量和类型名都添加了<code>NS前缀</code>（使用<code>NS</code>而不是<code>Cocoa</code>源自历史遗留：<code>Cocoa</code>的前身为<code>NextSTEP</code>工具包）。</p>
</blockquote>
<h4 id="NSLog函数"><a href="#NSLog函数" class="headerlink" title="NSLog函数"></a>NSLog函数</h4><blockquote>
<p><strong>说明：</strong>用于向控制台输出内容<br><strong>原型：</strong><code>NSObjCRuntime.h</code><br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">** @param &#123;NSString *&#125; format 字符串（可以包含格式说明符） </span><br><span class="line">** @param &#123;...&#125; 对应格式串中格式说明符可变参数</span><br><span class="line">*/</span></span><br><span class="line"><span class="keyword">void</span> <span class="built_in">NSLog</span>(<span class="built_in">NSString</span> *format, ...)</span><br></pre></td></tr></table></figure></p>
<p><strong>技巧：</strong>建议在<code>O-C</code>中使用<code>NSLog</code>替代<code>printf</code>，因为它添加了一些特性，比如</p>
<ul>
<li>时间戳</li>
<li>日期戳</li>
<li>自动附带换行符<code>\n</code>等</li>
</ul>
</blockquote>
<h4 id="NSString-quot-字符串-quot"><a href="#NSString-quot-字符串-quot" class="headerlink" title="NSString(@&quot;字符串&quot;)"></a>NSString(<code>@&quot;字符串&quot;</code>)</h4><blockquote>
<p><strong>说明：</strong><code>Cocoa</code>提供的<code>NSString</code>集成了大量<code>C</code>语言字符串没有的特性。<code>@&quot;字符串&quot;</code>表明其中的<code>字符串</code>作为<code>Cocoa</code>的<code>NSString</code>元素来处理。</p>
<ul>
<li>字符串的长度</li>
<li>字符串比较</li>
<li>转换为整数和浮点数</li>
</ul>
<p><strong>格式串：</strong>输出对象使用<code>%@</code>，会调用对象的<code>description</code>方法</p>
</blockquote>
<h2 id="2-3-布尔类型"><a href="#2-3-布尔类型" class="headerlink" title="2.3   布尔类型"></a>2.3   布尔类型</h2><blockquote>
<p><strong>关键字：</strong><code>BOOL</code>(比<code>C</code>语言的<code>bool</code>早十多年)<br><strong>说明：</strong>本质是<code>signed char</code>（通过<code>typedef</code>定义），使用8位存储空间</p>
<ul>
<li><code>NO</code>：本质是<code>signed char</code>值0</li>
<li><code>YES</code>：本质是<code>signed char</code>值1</li>
</ul>
<p><strong>注意：</strong><code>O-C</code>的<code>BOOL</code>不仅能保存<code>NO</code>和<code>YES</code>，编译器将其作为<code>8位二进制数</code>处理，也就是说可以赋值其它整数和<code>char</code>类型值（大于一个字节将溢出）。</p>
</blockquote>
<h3 id="2-3-1-BOOL-强大的实用功能"><a href="#2-3-1-BOOL-强大的实用功能" class="headerlink" title="2.3.1    BOOL 强大的实用功能"></a>2.3.1    BOOL 强大的实用功能</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 比较两个 int 型值是否相等</span><br><span class="line"> * @param &#123;int&#125; thing1 第一个值</span><br><span class="line"> * @param &#123;int&#125; thing2 第二个值</span><br><span class="line"> * @return &#123;BOOL&#125; YES 相等， NO 不相等</span><br><span class="line"> */</span></span><br><span class="line"><span class="built_in">BOOL</span> areIntsDifferent (<span class="keyword">int</span> thing1, <span class="keyword">int</span> thing2) &#123;</span><br><span class="line">    <span class="keyword">if</span> (thing1 == thing2) &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="literal">NO</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="literal">YES</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 输出 BOOL 值对应的描述</span><br><span class="line"> * @param &#123;BOOL&#125; yesNo BOOL值</span><br><span class="line"> * @return &#123;NSString&#125; YES "YES", NO "NO"</span><br><span class="line"> */</span></span><br><span class="line"><span class="built_in">NSString</span> *boolString (<span class="built_in">BOOL</span> yesNo) &#123;</span><br><span class="line">    <span class="keyword">if</span> (yesNo == <span class="literal">NO</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="string">@"NO"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="string">@"YES"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> main(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[]) &#123;</span><br><span class="line">    <span class="built_in">BOOL</span> areTheyDifferent;</span><br><span class="line">    <span class="comment">// 调用areTheDifferent函数</span></span><br><span class="line">    areTheyDifferent = areIntsDifferent(<span class="number">5</span>, <span class="number">5</span>);</span><br><span class="line">    <span class="comment">// 调用boolString函数</span></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"are %d and %d different? %@"</span>, <span class="number">5</span>, <span class="number">5</span>, boolString(areTheyDifferent));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-4-小结"><a href="#2-4-小结" class="headerlink" title="2.4   小结"></a>2.4   小结</h2>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/12/o-c基础教程第二版_01 启程/" itemprop="url">
                  1 启程
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-12T11:14:49+08:00" content="2016-05-12">
              2016-05-12
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/12/o-c基础教程第二版_01 启程/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/12/o-c基础教程第二版_01 启程/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-1-预备知识"><a href="#1-1-预备知识" class="headerlink" title="1.1 预备知识"></a>1.1 预备知识</h2><h2 id="1-2-历史"><a href="#1-2-历史" class="headerlink" title="1.2 历史"></a>1.2 历史</h2><blockquote>
<p><strong>Objective-C：</strong>20世纪80年代，<code>Brad Cox</code>为了融合流行的、可移植的<code>C语言</code>和<code>Smalltalk语言</code>的优势，设计出了<code>Objective-C语言</code>。 <strong>NeXT公司：</strong>1985年，<code>史蒂夫.乔布斯</code>创建，致力于创建功能强大且经济实惠的工作站。<br><strong>NextSTEP：</strong>使用<code>Object-C</code>开发的一款功能强大的用户界面工具包。 <strong>Cocoa：</strong>1996年，苹果收购了<code>NeXT</code>,之后<code>NextSTEP</code>更名为<code>Cocoa</code>。</p>
</blockquote>
<h2 id="1-3-内容简介"><a href="#1-3-内容简介" class="headerlink" title="1.3 内容简介"></a>1.3 内容简介</h2><h2 id="1-4-准备工作"><a href="#1-4-准备工作" class="headerlink" title="1.4 准备工作"></a>1.4 准备工作</h2>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/11/25 国际化特性/" itemprop="url">
                  25 国际化特性
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-11T21:30:56+08:00" content="2016-05-11">
              2016-05-11
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/11/25 国际化特性/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/11/25 国际化特性/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p><strong>地区：</strong>可能是国家、洲或省活着一种特定的文化。<br><strong>扩展：</strong>1994年通过的<code>ISO C标准修正草案1</code>提供了编写额外国际化程序增加的额外库</p>
<ul>
<li>iso646.h</li>
<li>wctype.h</li>
<li>wchar.h</li>
</ul>
</blockquote>
<h2 id="25-1-locale-h：本地化"><a href="#25-1-locale-h：本地化" class="headerlink" title="25.1 locale.h：本地化"></a>25.1 locale.h：本地化</h2><blockquote>
<p><strong>标准库中依赖地区的部分：</strong></p>
<ul>
<li><strong>数值的格式：</strong>例如，一些地区小数点是一个圆点（297.48），而在另一些地方则是逗号（297,48）<br><strong>货币的格式：</strong>例如，不同国家的货币符号不同<br><strong>字符集：</strong>例如，亚洲国家通常比西方国家需要更大的字符集<br><strong>日期和时间的表示形式：</strong>例如，一些地方习惯在写日期时先写月（8/24/97），而另一些地方习惯先写日（24/8/97）</li>
</ul>
</blockquote>
<h3 id="25-1-1-类别"><a href="#25-1-1-类别" class="headerlink" title="25.1.1    类别"></a>25.1.1    类别</h3><blockquote>
<p><strong>说明：</strong><code>locale.h</code>提供了一系列的以<code>LC_</code>开头的宏来，这些宏分别对某些库的某些方面的行为产生影响。<br><strong>扩展：</strong>C语言的实现提供了其它类型并且定义了上面未列出的以<code>LC_</code>开头的宏。</p>
</blockquote>
<table>
<thead>
<tr>
<th>宏</th>
<th>影响</th>
<th>头文件</th>
<th>相关章节</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>LC_COLLATE</td>
<td>strcoll函数</td>
<td>string.h</td>
<td><a href="">23.5</a></td>
<td>字符串比较函数</td>
</tr>
<tr>
<td></td>
<td>strxfrm函数</td>
<td>string.h</td>
<td><a href="">23.5</a></td>
<td>字符串比较函数</td>
</tr>
<tr>
<td>LC_CTYPES</td>
<td>isdigit函数</td>
<td>ctype.h</td>
<td><a href="">23.4</a></td>
<td></td>
</tr>
<tr>
<td></td>
<td>isxdigit函数</td>
<td>ctype.h</td>
<td><a href="">23.4</a></td>
<td></td>
</tr>
<tr>
<td></td>
<td>多字节函数</td>
<td>stdlib.h</td>
<td><a href="">25.2.1</a></td>
<td></td>
</tr>
<tr>
<td>LC_MONETARY</td>
<td>localeconv函数</td>
<td>locale.h</td>
<td></td>
<td>影响该函数返回的货币格式信息</td>
</tr>
<tr>
<td>LC_NUMERIC</td>
<td>格式化输入输出函数中使用的小数点字符</td>
<td>stdio.h</td>
<td><a href="">22</a></td>
<td>比如<code>printf</code>和<code>scanf</code></td>
</tr>
<tr>
<td></td>
<td>字符串转换函数</td>
<td>stdlib.h</td>
<td><a href="">26.2.1</a></td>
<td><code>atof</code>和<code>strtod</code></td>
</tr>
<tr>
<td></td>
<td>localeconv函数</td>
<td>locale.h</td>
<td></td>
<td>该函数返回的非货币格式信息</td>
</tr>
<tr>
<td>LC_TIME</td>
<td>strftime函数</td>
<td>time.h</td>
<td><a href="">26.3.2</a></td>
<td>该函数用于将时间转换为字符串</td>
</tr>
</tbody>
</table>
<h3 id="25-1-2-setlocale函数"><a href="#25-1-2-setlocale函数" class="headerlink" title="25.1.2    setlocale函数"></a>25.1.2    setlocale函数</h3><hr>
<blockquote>
<p><strong>描述：</strong>用来修改当前的地区，也可以用来获取当前地区的信息。<br><strong>参数：</strong><br><strong>1：</strong> 可以针对一种类型，也可以针对所有类型</p>
</blockquote>
<table>
<thead>
<tr>
<th>参数1取值</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>LC_COLLATE、LC_CTYPE、LC_MONETARY 、LC_NUMERIC、LC_TIME</td>
<td>针对一种类型</td>
</tr>
<tr>
<td>LC_ALL</td>
<td>针对所有类型</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>2：</strong> C语言标准为第二个参数仅定义了两种可能值：”c”或” “。其他地区可以针对不同的实现定义。</p>
</blockquote>
<table>
<thead>
<tr>
<th>参数二取值</th>
<th>说明</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&quot;C&quot;</code></td>
<td>按正常方式执行，小数点是一个句点</td>
<td></td>
</tr>
<tr>
<td><code>&quot; &quot;</code></td>
<td>换到<code>本地模式（native locale）</code></td>
<td><code>C语言标准</code>没有定义切换到本地模式的具体影响</td>
</tr>
<tr>
<td><code>&quot;Germany&quot;</code></td>
<td>德国</td>
<td>部分编译器支持</td>
</tr>
<tr>
<td>类似<code>en_GB.WIN1252</code>格式的字符串</td>
<td>英语_英国.Windows多语言字符集</td>
<td>一些常用编译器支持</td>
</tr>
<tr>
<td><code>NULL</code></td>
<td>不设置任何东西</td>
<td>仅仅返回指向与当前地区类型的设置相关联的字符串</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>技巧：</strong>如果需要获得与当前地区关联字符串，可以在调用setlocale函数时第一个参数给<code>LC_ALL</code>，第二个参数给<code>NULL</code>.<br><strong>原型：</strong><code>locale.h</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;int&#125; category  指定影响哪些库的哪些方面</span><br><span class="line">* @param &#123;char *&#125; locale 指定地区</span><br><span class="line">* @return &#123;char *&#125; 指向字符串（可能是地点名字自身）：成功；空指针：调用失败</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">char</span> *<span class="title">setlocale</span><span class="params">(<span class="keyword">int</span> category, <span class="keyword">const</span> <span class="keyword">char</span> *locale)</span></span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 任意程序执行开始时，都会隐含执行调用</span></span><br><span class="line">setlocale(LC_ALL, <span class="string">"C"</span>);</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 获取地区信息字符串 */</span></span><br><span class="line"><span class="keyword">char</span> *temp, *old_locale;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 获取当前地区信息 */</span></span><br><span class="line">temp = setlocale(LC_ALL, NULL);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 检查是否获取到信息 */</span></span><br><span class="line"><span class="keyword">if</span> (temp == <span class="literal">NULL</span>) &#123;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 为信息的副本分配空间 */</span></span><br><span class="line">old_locale = <span class="built_in">malloc</span>(strlen(temp) + <span class="number">1</span>);</span><br><span class="line"><span class="keyword">if</span> (old_locale == <span class="literal">NULL</span>) &#123;</span><br><span class="line">	<span class="comment">/* 分配内存失败 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 将信息拷贝进去 */</span></span><br><span class="line"><span class="built_in">strcpy</span>(old_locale, temp);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 切换到本地模式 */</span></span><br><span class="line">setlocale(LC_ALL, <span class="string">""</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 按照存储的信息恢复就的地区设置 */</span></span><br><span class="line">setlocale(LU_ALL, old_locale);</span><br></pre></td></tr></table></figure>
<h3 id="25-1-3-localeconv函数"><a href="#25-1-3-localeconv函数" class="headerlink" title="25.1.3    localeconv函数"></a>25.1.3    localeconv函数</h3><hr>
<blockquote>
<p><strong>描述：</strong>获取当前地区的各种信息<br><strong>原型：</strong><code>locale.h</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @return &#123;struct lconv *&#125; 指向包含当前地区的详细信息的结构体指针</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">struct</span> lconv *<span class="title">localeconv</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br></pre></td></tr></table></figure>
<h4 id="struct-lconv"><a href="#struct-lconv" class="headerlink" title="struct lconv"></a>struct lconv</h4><hr>
<blockquote>
<p><strong>说明：</strong>存储当前地区的各种信息的结构体<br><strong>结构成员：</strong>有<code>char *</code>和<code>char</code>两种类型</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:center">char *型成员</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202015-10-18%20%E4%B8%8B%E5%8D%889.50.57.png" alt="Alt text"></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center">char型成员</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202015-10-18%20%E4%B8%8B%E5%8D%889.53.18.png" alt="Alt text"></td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>p_sign_posn和n_sign_posn的值：</strong><br><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202015-10-18%20%E4%B8%8B%E5%8D%889.56.18.png" alt="Alt text"></p>
</blockquote>
<p><strong>案例：用于美国和意大利两国的lconv结构成员的货币型常用值</strong><br><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202015-10-18%20%E4%B8%8B%E5%8D%889.57.34.png" alt="Alt text"></p>
<p><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202015-10-18%20%E4%B8%8B%E5%8D%889.59.18.png" alt="Alt text"></p>
<h2 id="25-2-多字节字符和宽字符"><a href="#25-2-多字节字符和宽字符" class="headerlink" title="25.2 多字节字符和宽字符"></a>25.2 多字节字符和宽字符</h2><blockquote>
<p><strong>字符集（美国）：</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th>分类</th>
<th>地位</th>
</tr>
</thead>
<tbody>
<tr>
<td>ASCII</td>
<td>主流计算机采用</td>
</tr>
<tr>
<td>EBCDIC</td>
<td>其他计算机</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>可扩展字符集：</strong>C语言允许编译器提供一种可扩展的字符集</p>
</blockquote>
<table>
<thead>
<tr>
<th>可扩展字符集编码</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>多字节字符（multibyte character）</td>
<td>一个或多个字节表示一个可扩展的字符</td>
</tr>
<tr>
<td>宽字符（wide character）</td>
<td>一种其值表示字符的整数，具有相同的字节数</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>基本字符：</strong>任何可扩展的字符集必须包含C语言要求的<code>基本字符</code>（即<code>字母</code>、<code>数字</code>、<code>运算符</code>、<code>标点符</code>、<code>空白字符</code>），而且这些字符要求是单字节的。<br><strong>用途：</strong>c语言同时提供了多字节字符和宽字符用于不同的目的</p>
<ul>
<li><strong>多字节字符：</strong>多用于输入／输出，因为输入／输出设备经常是面向字节的</li>
<li><strong>宽字符：</strong>更适用于程序内部，因为没个宽字符占有相同的空间，便于程序内部操作。</li>
</ul>
<p><strong>技巧：</strong>程序可以读入多字节字符，然后转为便于程序内部操作的宽字符格式，谈后再把宽字符转换回用于输出的多字节格式。</p>
</blockquote>
<h3 id="25-2-1-多字节字符"><a href="#25-2-1-多字节字符" class="headerlink" title="25.2.1    多字节字符"></a>25.2.1    多字节字符</h3><blockquote>
<p><strong>空字符(<code>\0</code>)：</strong>无论移位状态如何，c标准都要求<code>\0</code>始终用来表示空字符。而且，<code>\0</code>不能是多字节字符的第二个（或之后）字节。<br><strong>按是否依赖状态分类：</strong><code>mblen函数</code>、<code>mbtowc函数</code>、<code>wctomb函数</code>都可用检测对字节字符是否是依赖状态的。只要其char *型参数给予NULL实参，则返回非零说明依赖状态；返回零说明依赖状态。</p>
</blockquote>
<table>
<thead>
<tr>
<th>分类</th>
<th>说明</th>
<th>例子</th>
</tr>
</thead>
<tbody>
<tr>
<td>依赖状态编码（state-dependent enciding）</td>
<td>每个多字节字符序列都以<code>初始移位状态（initial shift state）</code>开始，序列中稍后遇到的一些多字节字符会改变移位状态，并且会影响后续字节的含义</td>
<td>日本的JIS编码</td>
</tr>
<tr>
<td>不依赖状态编码</td>
<td>每个字符要求一个或者两个字节，但是双字节字符的第一个字节可以始终区别与单字节字符</td>
<td>日本的Shift-JIS编码</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>相关宏：</strong>两个</p>
</blockquote>
<table>
<thead>
<tr>
<th>宏</th>
<th>头文件</th>
<th>含义</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>MB_LEN_MAX</td>
<td>limit.h</td>
<td>任意支持区域的最大值</td>
<td></td>
</tr>
<tr>
<td>MB_CUR_MAX</td>
<td>stdlib.h</td>
<td>当前区域的最大值</td>
<td>改变地区可能会影响多字节字符的解释</td>
</tr>
</tbody>
</table>
<h3 id="25-2-2-宽字符"><a href="#25-2-2-宽字符" class="headerlink" title="25.2.2    宽字符"></a>25.2.2    宽字符</h3><blockquote>
<p><strong>说明：</strong>采用特殊实现（比如<code>unsigned short int</code>）支持的所有宽字符都要求相同的字节数。<br><strong>宽字符类型：</strong><code>wchar_t</code> (<code>stddef.h</code>、<code>stdlib.h</code>)<br><strong>宽字符常量和宽字符串常量：</strong><code>L字符（串）常量</code></p>
<ul>
<li>宽字符常量：<code>L&#39;a&#39;</code></li>
<li>宽字符串常量：<code>L&quot;abc&quot;</code></li>
</ul>
</blockquote>
<h4 id="Unicode"><a href="#Unicode" class="headerlink" title="Unicode"></a>Unicode</h4><blockquote>
<p><strong>说明：</strong>非常重要的固定长度编码的字符集。<br><strong>字符宽度：</strong>两个字节</p>
</blockquote>
<h3 id="25-2-3-多字节字符／宽字符转换函数"><a href="#25-2-3-多字节字符／宽字符转换函数" class="headerlink" title="25.2.3    多字节字符／宽字符转换函数"></a>25.2.3    多字节字符／宽字符转换函数</h3><h4 id="mblen函数"><a href="#mblen函数" class="headerlink" title="mblen函数"></a>mblen函数</h4><hr>
<blockquote>
<p><strong>说明：</strong>检测s是否指向形成由效多字节字符的字节序列<br><strong>原型：</strong><code>stdlib.h</code><br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;char *&#125; s 多字节字符的字节序列</span><br><span class="line">* @param &#123;size_t&#125; a 最多能将测的字节的数量（通常为MB_CUR_MAX）</span><br><span class="line">* @return &#123;int&#125;  字符中的字节数：是多字节字符序列；0:空字符；-1：不是多字节字符序列</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">mblen</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *s, size_t a)</span></span>;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* 确定字符串是否由有效的多字节字符构成</span><br><span class="line">* @param &#123;char *s&#125; 指向以空字符结尾的普通字符串</span><br><span class="line">* @return &#123;int&#125; 0或－1</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">mbcheck</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *s)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> n;</span><br><span class="line">	<span class="comment">// 通过mblen(NULL, 0)设置该函数的移位状态，以便可以正确解释字符串中稍后的字符</span></span><br><span class="line">	<span class="keyword">for</span> (mblen(NULL, <span class="number">0</span>); ; s += n) &#123;</span><br><span class="line">		<span class="comment">// 当</span></span><br><span class="line">		<span class="keyword">if</span> ((n = mblen(s, MB_CUR_MAX)) &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">			return n;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="mbtowc函数"><a href="#mbtowc函数" class="headerlink" title="mbtowc函数"></a>mbtowc函数</h4><hr>
<blockquote>
<p><strong>说明：</strong>将多字节字符串转换为宽字符<br><strong>原型：</strong><code>stdlib.h.h</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;wchar_t *&#125; pwc 函数将存储结果的变量</span><br><span class="line">* @para &#123;char *&#125; s 多字节字符</span><br><span class="line">* @param &#123;size_t&#125; n 最大将检测的字节的数量</span><br><span class="line">* @return &#123;int&#125;  字符中的字节数：是多字节字符；0:空字符；-1：不是多字节字符</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">mbtowc</span><span class="params">(wchar_t *pwc, <span class="keyword">const</span> <span class="keyword">char</span> *s, size_t n)</span></span>;</span><br></pre></td></tr></table></figure>
<h4 id="wctomb函数"><a href="#wctomb函数" class="headerlink" title="wctomb函数"></a>wctomb函数</h4><hr>
<blockquote>
<p><strong>说明：</strong>把宽字符转换为多字节字符<br><strong>原型：</strong><code>stdlib.h</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;char *&#125; s 存储结果的变量（不回附加空字符）</span><br><span class="line">* @param &#123;wchar_t&#125; wchar 多字节字符</span><br><span class="line">* @return &#123;int&#125; 字符中的字节数：有效；1：空字符；-1：无效</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">wctomb</span><span class="params">(<span class="keyword">char</span> *s, wchar_t wchar)</span></span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* 将测是否可以把宽字符的字符串转换为有效的多字节字符</span><br><span class="line">* @param &#123;wchar_t *&#125; wcs 宽字符序列</span><br><span class="line">* @return &#123;int&#125; -1：不可以；0：可以</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">wccheck</span> <span class="params">(wchar_t *wcs)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">char</span> buf[MB_len_max];</span><br><span class="line">	<span class="keyword">int</span> n;</span><br><span class="line">	<span class="keyword">for</span> (wctpmb (NULL, <span class="number">0</span>); ; ++wcs) &#123;</span><br><span class="line">		<span class="keyword">if</span> ((n = wctomb(buf, *wcs)) &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">			return <span class="number">-1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (buf[n - <span class="number">1</span>] == <span class="string">'\0'</span>) &#123;</span><br><span class="line">			return <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="25-2-4-多字节字符／宽字符串函数"><a href="#25-2-4-多字节字符／宽字符串函数" class="headerlink" title="25.2.4    多字节字符／宽字符串函数"></a>25.2.4    多字节字符／宽字符串函数</h3><h4 id="mbstowcs函数"><a href="#mbstowcs函数" class="headerlink" title="mbstowcs函数"></a>mbstowcs函数</h4><hr>
<blockquote>
<p><strong>说明：</strong>把多字节字符序列转换为宽字符序列</p>
<ul>
<li>如何进行转换依赖于当前地区的<code>LC_CTYPES</code>类别</li>
<li>当达到上限或者遇到（存储在宽字符数组中的)<code>\0</code>时，函数停止</li>
<li>假设要转换的字符串以初始迁移状态开始</li>
</ul>
<p><strong>原型：</strong><code>stdlib.h</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;whcar_t *&#125; pwcs 宽字符数组</span><br><span class="line">* @param &#123;char *&#125; s 待转换的多字节字符数组</span><br><span class="line">* @param &#123;size_t&#125; 可以存储在数组中的宽字符数量</span><br><span class="line">* @return &#123;size_t&#125; 修改的数组元素的数量（不包括末尾的`\0`）：一切顺利；-1：遇到无效的多字节字符</span><br><span class="line">*/</span></span><br><span class="line"><span class="keyword">size_t</span> mbstowcs(<span class="keyword">wchar_t</span> * <span class="keyword">restrict</span> pwcs, <span class="keyword">const</span> <span class="keyword">char</span> * <span class="keyword">restrict</span> s, <span class="keyword">size_t</span> n);</span><br></pre></td></tr></table></figure>
<h4 id="wcstombs函数"><a href="#wcstombs函数" class="headerlink" title="wcstombs函数"></a>wcstombs函数</h4><blockquote>
<p><strong>说明：</strong>把宽字符序列转换为多字节字符序列</p>
<ul>
<li>如何进行转换依赖于当前地区的<code>LC_CTYPES</code>类别</li>
<li>当达到上限或者遇到（自己存入的)<code>\0</code>时，函数停止</li>
<li>产生的字符串是以初始迁移状态开始的</li>
</ul>
<p><strong>原型：</strong><code>stdlib.h</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;char *&#125; s 多字节字符数组</span><br><span class="line">* @param &#123;whcar_t *&#125; pwcs 待转换的宽字符数组</span><br><span class="line">* @param &#123;size_t&#125; 可以存储在数组中的多字节字符数量</span><br><span class="line">* @return &#123;size_t&#125; 修改的数组元素的数量（不包括末尾的`\0`）：一切顺利；-1：遇到无法转换为对应多字节字符的宽字符</span><br><span class="line">*/</span></span><br><span class="line"><span class="keyword">size_t</span> wcstombs(<span class="keyword">const</span> <span class="keyword">char</span> * <span class="keyword">restrict</span> s, <span class="keyword">wchar_t</span> * <span class="keyword">restrict</span> pwcs, <span class="keyword">size_t</span> n);</span><br></pre></td></tr></table></figure>
<h2 id="25-3-三字符序列"><a href="#25-3-三字符序列" class="headerlink" title="25.3    三字符序列"></a>25.3    三字符序列</h2><blockquote>
<p><strong>三字符序列（trigraph sequence）：</strong>简称“三字符”，是一种三个字符的字符码。以<code>??字符</code>的形式出现。<br><strong>用途：</strong>可以替换ASCII中的一些特殊字符。<br><strong>兼容性：</strong>尽管不是一直需要，但是所有标准C编译器都要求接受三字符序列。<br><strong>技巧：</strong>字符串中的<code>??</code>可能会被编译器作为三字符序列的开始标志，可以通过使用<code>\</code>将第二个<code>?</code>转义（即<code>?\?</code>）来避免。<br><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202015-10-21%20%E4%B8%8A%E5%8D%889.53.05.png" alt="Alt text"></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"Hello, world\n"</span>);</span><br><span class="line">	return <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">??=include &lt;stdio.h&gt;</span><br><span class="line"><span class="keyword">int</span> main () ??&lt;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"Hello, world??/n"</span>); </span><br><span class="line">	return <span class="number">0</span>;</span><br><span class="line">??&gt;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/11/26 其它库函数/" itemprop="url">
                  26 其他库函数
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-11T21:25:08+08:00" content="2016-05-11">
              2016-05-11
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/11/26 其它库函数/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/11/26 其它库函数/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="26-1-stdarg-h：可变实参"><a href="#26-1-stdarg-h：可变实参" class="headerlink" title="26.1    stdarg.h：可变实参"></a>26.1    stdarg.h：可变实参</h2><blockquote>
<p><strong>带有可变参数的函数：</strong>带有可变数量参数的函数必须至少有一个“正常的”形式参数，在最后一个正常参数的后边始终会有省略号出现在参数列表的末尾。<br><strong>可变部分实参提升：</strong>当调用带有可变实参列表的函数时，编译器会在匹配省略号的全部参数上执行默认的<code>实参提升</code>（<a href="">9.3</a>）</p>
<ul>
<li>char -&gt; int</li>
<li>short -&gt; int</li>
<li>float -&gt; double</li>
</ul>
</blockquote>
<h4 id="va-arg宏（函数）"><a href="#va-arg宏（函数）" class="headerlink" title="va_arg宏（函数）"></a>va_arg宏（函数）</h4><hr>
<blockquote>
<p><strong>说明：</strong>获得所在函数的可变参数中的下一个参数<br><strong>原型：</strong><code>stdarg.h</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;va_list&#125; ap 指向可变参数列表的某个位置</span><br><span class="line">* @param &#123;类型&#125; 期待相应位置实参的类型</span><br><span class="line">* @return &#123;类型&#125; 相应位置(下一个)实参</span><br><span class="line">*/</span></span><br><span class="line">类型 va_arg(va_list ap, 类型);</span><br></pre></td></tr></table></figure>
<h4 id="va-start宏（函数）"><a href="#va-start宏（函数）" class="headerlink" title="va_start宏（函数）"></a>va_start宏（函数）</h4><hr>
<blockquote>
<p><strong>说明：</strong>通过支持实参列表中可变长度部分开始的位置初始化<code>va_list</code>类型的实参列表。<br><strong>原型：</strong><code>stdarg.h</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;va_list&#125; ap 存储参数列表的变量</span><br><span class="line">* @param &#123;*&#125; paramN 可变参数前的最后一个正常实参</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">va_start</span><span class="params">(va_list ap, paramN)</span></span>;</span><br></pre></td></tr></table></figure>
<h4 id="va-end宏（函数）"><a href="#va-end宏（函数）" class="headerlink" title="va_end宏（函数）"></a>va_end宏（函数）</h4><hr>
<blockquote>
<p><strong>说明：</strong>执行对<code>va_list</code>类型变量的清理，使其无法被继续使用。<br><strong>原型：</strong><code>stdarg.h</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;va_list&#125; ap 可变实参部分的列表</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">va_end</span><span class="params">(va_list ap)</span></span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;int&#125; n 后面可变参数的数量</span><br><span class="line">* @param &#123;*&#125; ... 可变参数部分</span><br><span class="line">* @return &#123;int&#125; 可变实参中的最大值</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">max_int</span> <span class="params">(<span class="keyword">int</span> n, ...)</span> </span>&#123;</span><br><span class="line">	<span class="comment">// 声明存储可变实参列表的变量</span></span><br><span class="line">	va_list ap;</span><br><span class="line">	<span class="keyword">int</span> i, current, largest;</span><br><span class="line">	<span class="comment">// 初始化存储可变部分的实参的列表</span></span><br><span class="line">	va_start(ap, n);</span><br><span class="line">	<span class="comment">// 遍历寻找最大值</span></span><br><span class="line">	largest = va_arg(ap, int);</span><br><span class="line">	<span class="keyword">for</span> (i = i; i &lt; n; i ++) &#123;</span><br><span class="line">		current = va_arg(ap, int);</span><br><span class="line">		<span class="keyword">if</span> (current &gt; largest) &#123;</span><br><span class="line">			largest = current;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 清理存储可变实参的列表</span></span><br><span class="line">	va_end(ap);</span><br><span class="line">	return largest;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="26-1-1-调用可变实参列表的函数"><a href="#26-1-1-调用可变实参列表的函数" class="headerlink" title="26.1.1    调用可变实参列表的函数"></a>26.1.1    调用可变实参列表的函数</h3><blockquote>
<p><strong>说明：</strong>调用带有可变实参列表的函数带有一定风险，需要一些措施规避</p>
<ul>
<li><p>确定可变参数数量</p>
<blockquote>
<p><strong>例子：</strong>max_int函数依靠第一个是惨知名跟随其后的其他参数的数量</p>
</blockquote>
</li>
<li><p>确定每种参数的类型</p>
<blockquote>
<p><strong>例子：</strong>像printf函数和scanf函数依靠格式化字符串来描述其他的参数的数量和每种参数的类型</p>
</blockquote>
</li>
<li><p>特别处理<code>NULL</code>作为参数：当把<code>NULL</code>(0)传递给带有可变实参列表的函数时，编译器会假定它表示的是一个整数</p>
<blockquote>
<p><strong>强制类型转换：</strong><code>(void *) NULL</code>代替<code>NULL</code></p>
</blockquote>
</li>
</ul>
</blockquote>
<h3 id="26-1-2-v…printf类函数"><a href="#26-1-2-v…printf类函数" class="headerlink" title="26.1.2    v…printf类函数"></a>26.1.2    v…printf类函数</h3><blockquote>
<p><strong>说明：</strong>和<code>...printf类函数</code>相比，由一个<code>va_list</code>类型的参数取代了可变参数部分。<br><strong>用途：</strong>编写“包装”函数。外部的包装函数接受可变数量的实参，并且稍后把这些参数传递给<code>v...printf类函数</code>。</p>
</blockquote>
<h4 id="vfprintf函数"><a href="#vfprintf函数" class="headerlink" title="vfprintf函数"></a>vfprintf函数</h4><hr>
<blockquote>
<p><strong>说明：</strong>向第一个参数说明的流（任何输出流）中写输出。<br><strong>关联的函数：</strong><code>vfprintf函数</code>(<a href="">22.3.1</a>)<br><strong>原型：</strong><code>stdio.h</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;FILE *&#125; stream 文件指针（流）</span><br><span class="line">* @param &#123;char *&#125; format 格式串</span><br><span class="line">* @param &#123;va_list&#125; arg 可变参数数组</span><br><span class="line">* @return &#123;int&#125; 写入的字符数：成功；负值：写入出错</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">vfprintf</span><span class="params">(FILE * <span class="keyword">restrict</span> stream, <span class="keyword">const</span> <span class="keyword">char</span> * <span class="keyword">restrict</span> format, va_list arg)</span></span>;</span><br></pre></td></tr></table></figure>
<h4 id="vprintf函数"><a href="#vprintf函数" class="headerlink" title="vprintf函数"></a>vprintf函数</h4><hr>
<blockquote>
<p><strong>说明：</strong>向stdout输出，利用格式串控制输出的形式<br><strong>关联的函数：</strong><code>vprintf函数</code>(<a href="">22.3.1</a>)<br><strong>原型：</strong><code>stdio.h</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;char *&#125; format 格式串</span><br><span class="line">* @param &#123;va_list&#125; arg 可变参数数组</span><br><span class="line">* @param &#123;int&#125; 写入的字符数：成功；负值：写入出错</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">vprintf</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> * <span class="keyword">restrict</span> format, va_list rga)</span></span>;</span><br></pre></td></tr></table></figure>
<h4 id="vsprintf函数"><a href="#vsprintf函数" class="headerlink" title="vsprintf函数"></a>vsprintf函数</h4><hr>
<blockquote>
<p><strong>说明：</strong>类似printf函数和fprintf函数，唯一的不同是该函数会把输出写入指定字符数组而不是流中（会在末尾添加一个空字符）。<br><strong>原型：</strong><code>stdio.h</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;char *&#125; s 字符数组</span><br><span class="line">* @param &#123;char *&#125; format 格式串</span><br><span class="line">* @param &#123;va_list&#125; arg 可变参数数组</span><br><span class="line">* @return &#123;int&#125; 写入的字符数（不包括空字符）：成功；负值：写入出错</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">vsprintf</span><span class="params">(<span class="keyword">char</span> * <span class="keyword">restrict</span> s, <span class="keyword">const</span> <span class="keyword">char</span> * <span class="keyword">restrict</span> format, va_list arg)</span></span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* 定制错误输出</span><br><span class="line">* @param &#123;char *&#125; format 格式化字符串</span><br><span class="line">* @param &#123;...*&#125; 可变参数部分</span><br><span class="line">* @return &#123;int&#125; 输出的字符数</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">errorf</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *format, ...)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">int</span> num_errors = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span> n;</span><br><span class="line">	<span class="comment">// 声明可变数组列表</span></span><br><span class="line">	va_list ap;</span><br><span class="line">	num_errors++;</span><br><span class="line">	<span class="comment">// 打印需要增强的部分</span></span><br><span class="line">	<span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"** Error %d: "</span>, num_errors);</span><br><span class="line">	<span class="comment">// 初始化可变数组列表</span></span><br><span class="line">	va_start(ap, format);</span><br><span class="line">	<span class="comment">// 按照格式串向stderr写入字符串（打印到屏幕）</span></span><br><span class="line">	n = <span class="built_in">vfprintf</span>(stderr, format, ap);</span><br><span class="line">	<span class="comment">// 清理可变参数列表</span></span><br><span class="line">	va_end(ap);</span><br><span class="line">	<span class="comment">// 按照格式串向stderr写入“换行”</span></span><br><span class="line">	<span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"\n"</span>);</span><br><span class="line">	return n;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="26-2-stdlib-h-通用的使用工具"><a href="#26-2-stdlib-h-通用的使用工具" class="headerlink" title="26.2    stdlib.h:    通用的使用工具"></a>26.2    stdlib.h:    通用的使用工具</h2><blockquote>
<p><strong>说明：</strong>涵盖累全部不适合于任何其他头的函数。</p>
<ul>
<li>字符串转换函数</li>
<li>伪随机序列生成函数</li>
<li>内存管理函数</li>
<li>与外部环境的通信</li>
<li>搜索与排序使用工具</li>
<li>整数算术运算函数(<a href="">17</a>)</li>
<li>多子节字符和字符串函数(<a href="">25.2</a>)</li>
</ul>
</blockquote>
<h3 id="26-2-1-字符串转换函数"><a href="#26-2-1-字符串转换函数" class="headerlink" title="26.2.1    字符串转换函数"></a>26.2.1    字符串转换函数</h3><blockquote>
<p><strong>字符串中的特殊子串：</strong></p>
<ul>
<li><strong>十六进制浮点数</strong></li>
</ul>
</blockquote>
<table>
<thead>
<tr>
<th><code>0x(X)</code></th>
<th>一个或多个<code>十六进制数字</code>（可能包括<code>小数点</code>）</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
</tr>
</tbody>
</table>
<blockquote>
<ul>
<li><strong>无穷数</strong>：<code>INF</code>（不要求大小写）或`INFINITY（不要求大小写）</li>
<li><strong>NaN</strong></li>
</ul>
</blockquote>
<table>
<thead>
<tr>
<th><code>NAN</code></th>
<th><code>(</code></th>
<th><code>空</code>或<code>一系列字符</code></th>
<th><code>)</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>不要求大小写</td>
<td></td>
<td>可以包含字母、数组或下划线，用于<code>为NaN值的二进制表示指定某些位</code>或被<code>nan函数</code>(<a href="">23.4</a>)调用</td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="atof函数（c89之前）"><a href="#atof函数（c89之前）" class="headerlink" title="atof函数（c89之前）"></a>atof函数（c89之前）</h4><hr>
<blockquote>
<p><strong>说明：</strong>将字符串转换为相应的<code>double</code>类型</p>
<ul>
<li>会跳过字符串开始处的空白字符</li>
<li>可以以<code>+</code>、<code>-</code>开头</li>
<li>把每个字符看作相应的数字，比如<code>&quot;234&quot;</code>会被看作<code>234</code></li>
<li>在遇到第一个不属于数的字符处停止</li>
</ul>
<p><strong>限制：</strong></p>
<ul>
<li>不能支持转换过程中处理了字符串中的多少字符</li>
<li>不能支持转换失败的具体情况（不能保证会修改<code>errno</code>变量的值）</li>
</ul>
<p><strong>原型：</strong><code>stdlib.h</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span><br><span class="line">* @param &#123;char *&#125; nptr 字符串</span><br><span class="line">* @return &#123;double&#125; 相应的数字：成功；0：不能执行转换（字符串为空或镇前导空白之后的字符的形式不符合函数的要求）</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">atof</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *nptr)</span></span>;</span><br></pre></td></tr></table></figure>
<h4 id="atoi函数（c89之前）"><a href="#atoi函数（c89之前）" class="headerlink" title="atoi函数（c89之前）"></a>atoi函数（c89之前）</h4><hr>
<blockquote>
<p><strong>说明：</strong>将字符串转换为相应的<code>int</code>类型</p>
<ul>
<li>会跳过字符串开始处的空白字符</li>
<li>可以以<code>+</code>、<code>-</code>开头</li>
<li>把每个字符看作相应的数字，比如<code>&quot;234&quot;</code>会被看作<code>234</code></li>
<li>在遇到第一个不属于数的字符处停止</li>
</ul>
<p><strong>限制：</strong></p>
<ul>
<li>不能支持转换过程中处理了字符串中的多少字符</li>
<li>不能支持转换失败的具体情况（不能保证会修改<code>errno</code>变量的值）</li>
</ul>
<p><strong>原型：</strong><code>stdlib.h</code></p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">* @param &#123;char *&#125; nptr 字符串</span><br><span class="line">* @return &#123;int&#125; 相应的数字：成功；0：不能执行转换（字符串为空或镇前导空白之后的字符的形式不符合函数的要求）</span><br><span class="line">*/</span><br><span class="line">int atoi (const chat *nptr)；</span><br></pre></td></tr></table></figure>
<h4 id="atol函数（c89之前）"><a href="#atol函数（c89之前）" class="headerlink" title="atol函数（c89之前）"></a>atol函数（c89之前）</h4><hr>
<blockquote>
<p><strong>说明：</strong>将字符串转换为相应的<code>long int</code>类型</p>
<ul>
<li>会跳过字符串开始处的空白字符</li>
<li>可以以<code>+</code>、<code>-</code>开头</li>
<li>把每个字符看作相应的数字，比如<code>&quot;234&quot;</code>会被看作<code>234</code></li>
<li>在遇到第一个不属于数的字符处停止</li>
</ul>
<p><strong>限制：</strong></p>
<ul>
<li>不能支持转换过程中处理了字符串中的多少字符</li>
<li>不能支持转换失败的具体情况（不能保证会修改<code>errno</code>变量的值）</li>
</ul>
<p><strong>原型：</strong><code>stdlib.h</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span><br><span class="line">* @param &#123;char *&#125; nptr 字符串</span><br><span class="line">* @return &#123;long int&#125; 相应的数字：成功；0：不能执行转换（字符串为空或镇前导空白之后的字符的形式不符合函数的要求）</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">int</span> <span class="title">atol</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *nptr)</span></span>;</span><br></pre></td></tr></table></figure>
<h4 id="strtod函数（c89）"><a href="#strtod函数（c89）" class="headerlink" title="strtod函数（c89）"></a>strtod函数（c89）</h4><hr>
<blockquote>
<p><strong>说明：</strong>将字符串转换为<code>double</code>，相比<code>atof函数（c89之前）</code></p>
<ul>
<li>返回值为<code>double</code>而不是<code>float</code></li>
<li>字符串可以<code>包含16进制的浮点数</code>、<code>无穷数</code>或<code>NaN</code>(同<code>strtold</code>、<code>strtof</code>)</li>
<li><strong>可以检测超出范围：</strong>如果转换得到的值超出了函数返回类型的表示范围，那么会在<code>errno</code>变量中存储<code>ERANGE</code>，且返回正或负的<code>HUGE_VAL</code>(<a href="">23.3</a>)</li>
<li><strong>更复杂：</strong>第二个参数指定停止转换的位置（当传递NULL是将不会指定）</li>
<li><strong>可以检测转换失败的细节：</strong>如果不能转换，将把要转换的字符串赋值给第二个参数指向的变量（前提是该参数非<code>NULL</code>）<br><strong>原型：</strong><code>stdlib.h</code></li>
</ul>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span><br><span class="line">* @param &#123;char *&#125; nptr 字符串</span><br><span class="line">* @param &#123;char **&#125; endptr 转换停止的位置</span><br><span class="line">* @return &#123;double&#125; 正或负的HUGE_VAL(23.3)：转换得到的值超过反回类型范围（并在errno中存储RANGE）；浮点数：成功转换；0：不能转换</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">strtod</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> * <span class="keyword">restrict</span> nptr, <span class="keyword">char</span> ** <span class="keyword">restrict</span> endptr)</span></span>;</span><br></pre></td></tr></table></figure>
<h4 id="strtol函数（c89）"><a href="#strtol函数（c89）" class="headerlink" title="strtol函数（c89）"></a>strtol函数（c89）</h4><hr>
<blockquote>
<p><strong>说明：</strong>将字符串转换为<code>long int</code>，相比<code>atol函数（c89之前）</code></p>
<ul>
<li><strong>可以检测超出范围：</strong>如果转换得到的值超出了函数返回类型的表示范围，那么会在<code>errno</code>变量中存储<code>ERANGE</code>，且返回<code>LONG_MIN</code>或<code>LONG_MAX</code></li>
<li><strong>更复杂：</strong>第二个参数指定停止转换的位置（当传递NULL是将不会指定）</li>
<li><strong>可以检测转换失败的细节：</strong>如果不能转换，将把要转换的字符串赋值给第二个参数指向的变量（前提是该参数非<code>NULL</code>）</li>
</ul>
<p><strong>原型：</strong><code>stdlib.h</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span><br><span class="line">* @param &#123;char *&#125; nptr 字符串</span><br><span class="line">* @param &#123;char **&#125; endptr 转换停止的位置</span><br><span class="line">* @param &#123;int&#125; base 待转换数的基数（进制，2~36）</span><br><span class="line">* @return &#123;long int&#125; LONG_MIN或LONG_MAX：转换得到的值超过反回类型范围（并在errno中存储RANGE）；浮点数：成功转换；0：不能转换</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">int</span> <span class="title">strtol</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> * <span class="keyword">restrict</span> nptr, <span class="keyword">char</span> ** <span class="keyword">restrict</span> endptr, <span class="keyword">int</span> base)</span></span>;</span><br></pre></td></tr></table></figure>
<h4 id="strtoul函数（c89）"><a href="#strtoul函数（c89）" class="headerlink" title="strtoul函数（c89）"></a>strtoul函数（c89）</h4><hr>
<blockquote>
<p><strong>说明：</strong>将字符串转换为<code>long int</code></p>
<ul>
<li><strong>可以检测超出范围：</strong>如果转换得到的值超出了函数返回类型的表示范围，那么会在<code>errno</code>变量中存储<code>ERANGE</code>，且返回<code>LONG_MIN</code>或<code>LONG_MAX</code></li>
<li><strong>更复杂：</strong>第二个参数指定停止转换的位置（当传递NULL是将不会指定）</li>
<li><strong>可以检测转换失败的细节：</strong>如果不能转换，将把要转换的字符串赋值给第二个参数指向的变量（前提是该参数非<code>NULL</code>）</li>
</ul>
<p><strong>原型：</strong><code>stdlib.h</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span><br><span class="line">* @param &#123;char *&#125; nptr 字符串</span><br><span class="line">* @param &#123;char **&#125; endptr 转换停止的位置</span><br><span class="line">* @param &#123;int&#125; base 待转换数的基数（进制，2~36）</span><br><span class="line">* @return &#123;unsigned long int&#125; ULONG_MAX或ULONG_MIN：转换得到的值超过反回类型范围（并在errno中存储RANGE）；浮点数：成功转换；0：不能转换</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">int</span> <span class="title">strtoll</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> * <span class="keyword">restrict</span> nptr, <span class="keyword">char</span> ** <span class="keyword">restrict</span> endptr, <span class="keyword">int</span> base)</span></span>;</span><br></pre></td></tr></table></figure>
<h4 id="strtold函数-C99"><a href="#strtold函数-C99" class="headerlink" title="strtold函数(C99)"></a>strtold函数(C99)</h4><hr>
<blockquote>
<p><strong>说明：</strong>将字符串转换为<code>long double</code>，相比<code>strtod函数（c89）</code></p>
<ul>
<li>转换为<code>long double</code></li>
<li>字符串可以<code>包含16进制的浮点数</code>、<code>无穷数</code>或<code>NaN</code>(同<code>strtod</code>、<code>strtof</code>)</li>
</ul>
<p><strong>原型：</strong><code>stdlib.h</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span><br><span class="line">* @param &#123;char *&#125; nptr 字符串</span><br><span class="line">* @param &#123;char **&#125; endptr 转换停止的位置</span><br><span class="line">* @return &#123;long double&#125; 正或负的HUGE_VAL(23.3)：转换得到的值超过反回类型范围（并在errno中存储RANGE）；浮点数：成功转换；0：不能转换</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">double</span> <span class="title">strtold</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> * <span class="keyword">restrict</span> nptr, <span class="keyword">char</span> ** <span class="keyword">restrict</span> endptr)</span></span>;</span><br></pre></td></tr></table></figure>
<h4 id="atoll函数-c99"><a href="#atoll函数-c99" class="headerlink" title="atoll函数(c99)"></a>atoll函数(c99)</h4><hr>
<blockquote>
<p><strong>说明：</strong>将字符串转换为<code>long long int</code>，和<code>atol函数（c89之前）</code>相比</p>
<ul>
<li>转换为<code>long long int</code></li>
<li>字符串可以<code>包含16进制的浮点数</code>、<code>无穷数</code>或<code>NaN</code></li>
</ul>
<p><strong>原型：</strong><code>stdlib.h</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span><br><span class="line">* @param &#123;char *&#125; nptr 字符串</span><br><span class="line">* @return &#123;long int&#125; 相应的数字：成功；0：不能执行转换（字符串为空或镇前导空白之后的字符的形式不符合函数的要求）</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> <span class="title">atol</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *nptr)</span></span>;</span><br></pre></td></tr></table></figure>
<h4 id="strtof函数-C99"><a href="#strtof函数-C99" class="headerlink" title="strtof函数(C99)"></a>strtof函数(C99)</h4><hr>
<blockquote>
<p><strong>说明：</strong>将字符串转换为<code>float</code>，相比<code>strtod函数（c89）</code></p>
<ul>
<li>转换为<code>float</code></li>
<li>字符串可以<code>包含16进制的浮点数</code>、<code>无穷数</code>或<code>NaN</code>(同<code>strtod</code>、<code>strtold</code>)</li>
</ul>
<p><strong>原型：</strong><code>stdlib.h</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span><br><span class="line">* @param &#123;char *&#125; nptr 字符串</span><br><span class="line">* @param &#123;char **&#125; endptr 转换停止的位置</span><br><span class="line">* @return &#123;float&#125; 正或负的HUGE_VAL(23.3)：转换得到的值超过反回类型范围（并在errno中存储RANGE）；浮点数：成功转换；0：不能转换</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">float</span> <span class="title">strtof</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> * <span class="keyword">restrict</span> nptr, <span class="keyword">char</span> ** <span class="keyword">restrict</span> endptr)</span></span>;</span><br></pre></td></tr></table></figure>
<h4 id="strtoll函数-C99"><a href="#strtoll函数-C99" class="headerlink" title="strtoll函数(C99)"></a>strtoll函数(C99)</h4><hr>
<blockquote>
<p><strong>说明：</strong>将字符串转换为<code>long long int</code>，类似<code>strtol函数（c89）</code><br><strong>原型：</strong><code>stdlib.h</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span><br><span class="line">* @param &#123;char *&#125; nptr 字符串</span><br><span class="line">* @param &#123;char **&#125; endptr 转换停止的位置</span><br><span class="line">* @param &#123;int&#125; base 待转换数的基数（进制，2~36）</span><br><span class="line">* @return &#123;long int&#125; LONG_MIN或LONG_MAX：转换得到的值超过反回类型范围（并在errno中存储RANGE）；浮点数：成功转换；0：不能转换</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> <span class="title">strtoll</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> * <span class="keyword">restrict</span> nptr, <span class="keyword">char</span> ** <span class="keyword">restrict</span> endptr, <span class="keyword">int</span> base)</span></span>;</span><br></pre></td></tr></table></figure>
<h4 id="strtoull函数-C99"><a href="#strtoull函数-C99" class="headerlink" title="strtoull函数(C99)"></a>strtoull函数(C99)</h4><hr>
<blockquote>
<p><strong>说明：</strong>将字符串转换为<code>unsigned long long int</code>，类似<code>strtoul函数(c89)</code><br><strong>原型：</strong><code>stdlib.h</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span><br><span class="line">* @param &#123;char *&#125; nptr 字符串</span><br><span class="line">* @param &#123;char **&#125; endptr 转换停止的位置</span><br><span class="line">* @param &#123;int&#125; base 待转换数的基数（进制，2~36）</span><br><span class="line">* @return &#123;unsigned long long int&#125; ULONG_MAX或ULONG_MIN：转换得到的值超过反回类型范围（并在errno中存储RANGE）；浮点数：成功转换；0：不能转换</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> <span class="title">strtoull</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> * <span class="keyword">restrict</span> nptr, <span class="keyword">char</span> ** <span class="keyword">restrict</span> endptr, <span class="keyword">int</span> base)</span></span>;</span><br></pre></td></tr></table></figure>
<h3 id="程序：测试数值转换函数"><a href="#程序：测试数值转换函数" class="headerlink" title="程序：测试数值转换函数"></a>程序：测试数值转换函数</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * Test c89 numeric conversion functions</span><br><span class="line"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;errno.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CHK_VALID printf(<span class="string">"    %s        %s\n"</span>, \</span><br><span class="line"> 					     errno != ERANGE ? <span class="string">"Yes"</span> : <span class="string">"No "</span>, \</span><br><span class="line"> 					     *ptr == <span class="string">'\0'</span> ? <span class="string">"Yes"</span> : <span class="string">"No"</span>);</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> <span class="keyword">const</span> *argv[])</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">char</span> *ptr;</span><br><span class="line">	<span class="comment">/* 检测程序启动方式是否正确 */</span></span><br><span class="line">	<span class="keyword">if</span> (argc != <span class="number">2</span>) &#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"usage: tnumconv string\n"</span>);</span><br><span class="line">		<span class="built_in">exit</span>(EXIT_FAILURE);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">/* 使用c89之前的3个旧转换函数 */</span> </span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"Function Return Value\n"</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"--------    --------\n"</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"atof        %g\n"</span>, atof(argv[<span class="number">1</span>]));</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"atoi        %d\n"</span>, atoi(argv[<span class="number">1</span>]));</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"atol        %ld\n"</span>, atol(argv[<span class="number">1</span>]));</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"Function    Return Value    Valid?    "</span></span><br><span class="line">		   <span class="string">"String Consumed?\n"</span></span><br><span class="line">		   <span class="string">"--------    ------------    ------    "</span></span><br><span class="line">		   <span class="string">"------------------\n"</span>);</span><br><span class="line">    errno = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"strtod    %-12g\n"</span>, strtod(argv[<span class="number">1</span>], &amp;ptr));</span><br><span class="line">    CHK_VALID;</span><br><span class="line"></span><br><span class="line">    errno = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"strtol    %-12ld\n"</span>, strtol(argv[<span class="number">1</span>], &amp;ptr, <span class="number">10</span>));</span><br><span class="line">    CHK_VALID;</span><br><span class="line"></span><br><span class="line">    errno = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"strtoul    %-12lu\n"</span>, strtoul(argv[<span class="number">1</span>], &amp;ptr, <span class="number">10</span>));</span><br><span class="line">    CHK_VALID;</span><br><span class="line">	return <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202015-10-24%20%E4%B8%8A%E5%8D%8810.36.50.png" alt="Alt text"></p>
<h3 id="26-2-3-伪随机序列生成函数"><a href="#26-2-3-伪随机序列生成函数" class="headerlink" title="26.2.3    伪随机序列生成函数"></a>26.2.3    伪随机序列生成函数</h3><h4 id="rand函数"><a href="#rand函数" class="headerlink" title="rand函数"></a>rand函数</h4><hr>
<blockquote>
<p><strong>描述：</strong>返回一个<code>0～RAND_MAX(stdlib.h)</code>的随机数。<br><strong>说明：</strong><code>rand函数</code>返回的数事实上不是随机的，这些数是由“种子”值（默认为1）产生的，但对于偶然的观察者而言，rand函数似乎能能够产生不相关的数值序列。<br><strong>原型：</strong><code>stdlib.h</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @return &#123;int&#125; `0～RAND_MAX(stdlib.h)`的随机数</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">rand</span> <span class="params">(<span class="keyword">void</span>)</span></span>;</span><br></pre></td></tr></table></figure>
<h4 id="srand函数"><a href="#srand函数" class="headerlink" title="srand函数"></a>srand函数</h4><blockquote>
<p><strong>描述：</strong>在<code>rand函数</code>执行前执行该函数来为<code>rand函数</code>提供种子值。<br><strong>注意：</strong>同一个种子值对应着一组特定的随机序列<br><strong>技巧：</strong>把<code>time函数</code>的返回值传递给<code>srand函数</code>设置“随机化”的种子值，这样可以使<code>rand函数</code>在每次运行时的行为都不相同。</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * Tests the pseudo-random sequence generation functions</span><br><span class="line"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i, seed;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"This program displays the first five value of "</span></span><br><span class="line">		   <span class="string">"rand.\n"</span>);</span><br><span class="line">	<span class="keyword">for</span> (;;) &#123;</span><br><span class="line">		<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, rand());</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"\n\n"</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"Enter new seed value (0 to terminate):"</span>);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;seed);</span><br><span class="line">		<span class="keyword">if</span> (seed == <span class="number">0</span>) &#123;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		srand(seed);</span><br><span class="line">	&#125;</span><br><span class="line">	return <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="26-2-3-与环境的通信"><a href="#26-2-3-与环境的通信" class="headerlink" title="26.2.3    与环境的通信"></a>26.2.3    与环境的通信</h3><blockquote>
<p><strong>说明：</strong>一组简单的操作系统接口。</p>
<ol>
<li>正常或不正常地终止程序，并且想操作系统反悔一个状态码</li>
<li>从用户的外部环境获取信息</li>
<li>执行操作系统的命令</li>
</ol>
</blockquote>
<h4 id="exit函数"><a href="#exit函数" class="headerlink" title="exit函数"></a>exit函数</h4><hr>
<blockquote>
<p><strong>描述：</strong>终止程序，并返回状态码给操作系统。<br><strong>细节：</strong>通常还会在后台做一些最后的动作</p>
<ul>
<li>清洗包好未输出数据的输出缓冲区</li>
<li>关闭打开的流</li>
<li>删除临时文件</li>
<li>调用通过<code>atexit函数</code>注册的在程序终止时要调用的函数</li>
</ul>
<p><strong>说明：</strong>通常等价于在<code>main函数</code>中执行<code>return n</code>，具有可移植性的状态码包括</p>
<ul>
<li><strong>EXIT_SUCCESS宏：</strong>正常退出(整数0)</li>
<li><strong>EXIT_FAILURE宏：</strong>非正常退出</li>
</ul>
<p><strong>注意：</strong><code>exit函数</code>和<code>return语句</code>的不同表现在</p>
</blockquote>
<table>
<thead>
<tr>
<th>区别</th>
<th>exit函数</th>
<th>return语句</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>main函数</code>中局部变量的生命周期</td>
<td>不结束</td>
<td>结束（如果用<code>atexit函数</code>注册的函数或<code>清洗输出流的缓冲区</code>访问这些变量就会出现问题）</td>
</tr>
<tr>
<td>使用<code>int</code>之外的类型</td>
<td>可以</td>
<td>必须和<code>mian函数</code>的返回类型保持一致，否则</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>原型：</strong><code>stdlib.h</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;int&#125; status 状态码</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">exit</span> <span class="params">(<span class="keyword">int</span> status)</span></span>;</span><br></pre></td></tr></table></figure>
<h4 id="atexit函数"><a href="#atexit函数" class="headerlink" title="atexit函数"></a>atexit函数</h4><hr>
<blockquote>
<p><strong>说明：</strong>当把函数指针传递给<code>aexit函数</code>时，它会把指针保存起来，当程序正常终止时会被调用。</p>
<ul>
<li>通过<code>exit函数</code>被调用或<code>main函数</code>中的<code>return</code>语句触发</li>
<li>如果注册了两个或更多函数，那么将按照与注册顺序<code>相反</code>的顺序调用它们</li>
</ul>
<p><strong>原型：</strong><code>stdlib.h</code></p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">* @param &#123;void (*func)(void)&#125; func 函数指针</span><br><span class="line">* @return &#123;int&#125; 未知</span><br><span class="line">*/</span><br><span class="line">int atexit (void (*func)(void));</span><br></pre></td></tr></table></figure>
<h4 id="Exit函数（c99）"><a href="#Exit函数（c99）" class="headerlink" title="_Exit函数（c99）"></a>_Exit函数（c99）</h4><hr>
<blockquote>
<p><strong>描述：</strong>终止程序，并返回状态码给操作系统<br><strong>说明：</strong>类似<code>exit函数</code></p>
<ul>
<li>不一定会清洗输出缓冲区（由实现定义）</li>
<li>不一定会关闭打开的流</li>
<li>不一定会删除临时文件</li>
<li>不会调用通过<code>atexit函数</code>注册的在程序终止时要调用的函数</li>
<li>不回发送信号触发<code>signal函数</code>（<a href="">24.3</a>）注册的函数</li>
</ul>
<p><strong>原型：</strong><code>stdlib.h</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;int&#125; status 状态码</span><br><span class="line">*/</span></span><br><span class="line"><span class="keyword">void</span> _Exit (<span class="keyword">int</span> status);</span><br></pre></td></tr></table></figure>
<h4 id="abort函数"><a href="#abort函数" class="headerlink" title="abort函数"></a>abort函数</h4><hr>
<blockquote>
<p><strong>描述：</strong>通常会导致异常的程序终止，长生<code>SIGABRT信号</code>并向系统返回一个表示“不成功”的状态码。<br><strong>注意：</strong>有一种情况下不会导致程序终止，那就是通过<code>signal函数</code>为<code>SIGABRT信号</code>注册处理函数，且处理函数调用了<code>longjmp函数</code>恢复到之前的执行环境。<br><strong>说明：</strong>类似<code>exit</code>函数，特点是</p>
<ul>
<li>不一定会清洗输出缓冲区（由实现定义）</li>
<li>不一定会关闭打开的流</li>
<li>不一定会删除临时文件</li>
</ul>
<p><strong>原型：</strong><code>stdlib.h</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">abort</span> <span class="params">(<span class="keyword">void</span>)</span></span>;</span><br></pre></td></tr></table></figure>
<h4 id="getenv函数"><a href="#getenv函数" class="headerlink" title="getenv函数"></a>getenv函数</h4><hr>
<blockquote>
<p><strong>描述：</strong>提供了访问用户环境中的任意字符串（环境变量）的功能。<br><strong>说明：</strong>获得的指针指向的字符串是静态的，有可能会被其它函数调用或系统自身修改。<br><strong>原型：</strong><code>stdlib.h</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;char *&#125; name 环境变量名</span><br><span class="line">* @return &#123;char *&#125; 指向静态分配的字符串的指针</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">char</span> *<span class="title">getenv</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *name)</span></span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* "/usr/local/bin:/bin:/usr/bin:." */</span></span><br><span class="line"><span class="keyword">char</span> *p = getenv(<span class="string">"PATH"</span>);</span><br></pre></td></tr></table></figure>
<h4 id="system函数"><a href="#system函数" class="headerlink" title="system函数"></a>system函数</h4><hr>
<blockquote>
<p><strong>描述：</strong>运行另一个c程序（可以是操作系统命令）<br><strong>说明：</strong>类似在操作系统终端使用命令行</p>
<ul>
<li><strong>参数：</strong>以<code>NULL</code>作为参数有特殊含义</li>
<li><strong>返回值</strong>：（由实现定义）通常情况下返回要求它运行的那个程序的终止状态码</li>
</ul>
<p><strong>原型：</strong><code>stdlib.h</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;char *&#125; string 命令</span><br><span class="line">* @return &#123;int&#125; 由实现定义）通常情况下返回要求它运行的那个程序的终止状态码</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">system</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *<span class="built_in">string</span>)</span></span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 调用UNIX(Linux)的ls命令，并将结果存入myfiles</span></span><br><span class="line">system(<span class="string">"ls &gt;myfiles"</span>);</span><br></pre></td></tr></table></figure>
<h3 id="26-2-4-搜索和排序使用工具"><a href="#26-2-4-搜索和排序使用工具" class="headerlink" title="26.2.4    搜索和排序使用工具"></a>26.2.4    搜索和排序使用工具</h3><h4 id="bsearch函数"><a href="#bsearch函数" class="headerlink" title="bsearch函数"></a>bsearch函数</h4><hr>
<blockquote>
<p><strong>描述：</strong>根据键在<code>有序数组</code>中搜索一个特定的值。<br><strong>说明：</strong>通常会使用<code>二分搜索算法</code>来搜索在数组中搜索<br><strong>原型：</strong><code>stdlib.h</code></p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">* @param &#123;void *&#125; key 指向键（匹配依据）的指针</span><br><span class="line">* @param &#123;void *&#125; base 数组</span><br><span class="line">* @param &#123;size_t&#125; size 每个元素的大小（字节）</span><br><span class="line">* @param &#123;Function *&#125; compar 指向比较函数的指针</span><br><span class="line">* @return &#123;void *&#125; 指向与键匹配的指针：匹配到；NULL：没匹配到</span><br><span class="line">*/</span><br><span class="line">void *bsearch (const void *key, const void *base, size_t nmemb, size_t size, int (*compar)(const void *, const void *));</span><br></pre></td></tr></table></figure>
<h4 id="qsort函数"><a href="#qsort函数" class="headerlink" title="qsort函数"></a>qsort函数</h4><hr>
<blockquote>
<p><strong>说明：</strong>为数组进行排序<br><strong>相关：</strong><a href="">17.1</a><br><strong>原型：</strong><code>stdlib.h</code></p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">* @param &#123;void *&#125; base 指向数组需要排序的部分的第一个元素</span><br><span class="line">* @param &#123;size_t&#125; nmemb 要排序的元素的数量</span><br><span class="line">* @param &#123;Function *&#125; compare 指向排序函数的指针</span><br><span class="line">*/</span><br><span class="line">void qsort (void *base, size_t nmemb, size_t size, int (*compar)(const void *, const void *));</span><br></pre></td></tr></table></figure>
<h3 id="程序：确定航空里程"><a href="#程序：确定航空里程" class="headerlink" title="程序：确定航空里程"></a>程序：确定航空里程</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * Determine air mileage from New York City.</span><br><span class="line"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> city_info &#123;</span><br><span class="line">	<span class="keyword">char</span> *city;</span><br><span class="line">	<span class="keyword">int</span> miles;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">compare_cityes</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">void</span> *key_ptr, <span class="keyword">const</span> <span class="keyword">void</span> *element_ptr)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">char</span> city_name[<span class="number">5</span>];</span><br><span class="line">	<span class="keyword">struct</span> city_info *ptr;</span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">struct</span> city_info mileage[] = &#123;</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="string">"Berlin"</span>, <span class="number">3965</span></span><br><span class="line">		&#125;,</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="string">"Buenos Aires"</span>, <span class="number">5297</span></span><br><span class="line">		&#125;,</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="string">"Cairo"</span>, <span class="number">5602</span></span><br><span class="line">		&#125;,</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="string">"Calcutta"</span>, <span class="number">7918</span></span><br><span class="line">		&#125;,</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="string">"Cape Town"</span>, <span class="number">7764</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"Enter city name:\n"</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%80[^\n]"</span>, city_name);</span><br><span class="line">	ptr = bsearch(city_name, mileage, sizeof(mileage) / sizeof(mileage[<span class="number">0</span>]), sizeof(mileage[<span class="number">0</span>]), compare_cityes);</span><br><span class="line">	<span class="keyword">if</span> (ptr != <span class="literal">NULL</span>) &#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%s is %d miles from New York City.\n"</span>, city_name, ptr-&gt;miles);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%s wasn't found."</span>, city_name);</span><br><span class="line">	&#125;</span><br><span class="line">	return <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">compare_cityes</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">void</span> *key_ptr, <span class="keyword">const</span> <span class="keyword">void</span> *element_ptr)</span> </span>&#123;</span><br><span class="line">	return <span class="built_in">strcmp</span>((char *) key_ptr, ((struct city_info *) element_ptr)-&gt;city);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="26-2-5-整数运算函数"><a href="#26-2-5-整数运算函数" class="headerlink" title="26.2.5    整数运算函数"></a>26.2.5    整数运算函数</h3><h4 id="abs函数"><a href="#abs函数" class="headerlink" title="abs函数"></a>abs函数</h4><hr>
<blockquote>
<p><strong>说明：</strong>返回<code>int</code>类型的绝对值。<br><strong>原型：</strong><code>stdlib.h</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;int&#125; j 需要求绝对值的整数</span><br><span class="line">* @return &#123;int&#125; 绝对值</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">abs</span> <span class="params">(<span class="keyword">int</span> j)</span></span>;</span><br></pre></td></tr></table></figure>
<h4 id="labs函数"><a href="#labs函数" class="headerlink" title="labs函数"></a>labs函数</h4><hr>
<blockquote>
<p><strong>说明：</strong>返回<code>long int</code>类型的绝对值。<br><strong>原型：</strong><code>stdlib.h</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;long int&#125; j 需要求绝对值的long int值</span><br><span class="line">* @return &#123;long int&#125; 绝对值</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">int</span> <span class="title">abs</span> <span class="params">(<span class="keyword">long</span> <span class="keyword">int</span> j)</span></span>;</span><br></pre></td></tr></table></figure>
<h4 id="llabs函数"><a href="#llabs函数" class="headerlink" title="llabs函数"></a>llabs函数</h4><hr>
<blockquote>
<p><strong>说明：</strong>返回<code>long long int</code>类型的绝对值。<br><strong>原型：</strong><code>stdlib.h</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;long long int&#125; j 需要求绝对值的long int值</span><br><span class="line">* @return &#123;long long int&#125; 绝对值</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> <span class="title">abs</span> <span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> j)</span></span>;</span><br></pre></td></tr></table></figure>
<h4 id="div函数"><a href="#div函数" class="headerlink" title="div函数"></a>div函数</h4><hr>
<blockquote>
<p><strong>说明：</strong>用第一个参数除以第二个参数，返回含有<code>商</code>和<code>余数</code>的结构体。<br><strong>优点（相比<code>%</code>和<code>/</code>）：</strong>同<code>ldiv</code><br>|比较|<code>div(ldiv)函数</code>|<code>%</code>和<code>/</code>|<br>|-|-|-|<br>|效率|可能更高，许多计算机可以在一条语句中计算出商和余数|效率低，需要多个指令|<br>|负操作数舍入方式|商：向零舍入；余数：<code>n(原始数) = q(商) x d(除数) + r(余数)</code>|c89中由实现定义，c99中同<code>div（ldiv）函数</code>|<br><strong>原型：</strong><code>stdlib.h</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;int&#125; number 除数</span><br><span class="line">* @param &#123;int&#125; denom 被除数</span><br><span class="line">* @return &#123;div_t&#125; 含有商（quot）和余数（rem）的结构体</span><br><span class="line">*/</span></span><br><span class="line"><span class="keyword">div_t</span> div (<span class="keyword">int</span> number, <span class="keyword">int</span> denom);</span><br></pre></td></tr></table></figure>
<h4 id="ldiv函数（c99）"><a href="#ldiv函数（c99）" class="headerlink" title="ldiv函数（c99）"></a>ldiv函数（c99）</h4><hr>
<blockquote>
<p><strong>说明：</strong>用第一个参数除以第二个参数，返回含有<code>商</code>和<code>余数</code>的结构体。<br><strong>优点（相比<code>%</code>和<code>/</code>）：</strong>同<code>div</code><br>|比较|<code>ldiv(div)函数</code>|<code>%</code>和<code>/</code>|<br>|-|-|-|<br>|效率|可能更高，许多计算机可以在一条语句中计算出商和余数|效率低，需要多个指令|<br>|负操作数舍入方式|商：向零舍入；余数：<code>n(原始数) = q(商) x d(除数) + r(余数)</code>|c89中由实现定义，c99中同<code>ldiv（div）函数</code>|<br><strong>原型：</strong><code>stdlib.h</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;long int&#125; number 除数</span><br><span class="line">* @param &#123;long  int&#125; denom 被除数</span><br><span class="line">* @return &#123;div_t&#125; 含有商（quot）和余数（rem）的结构体</span><br><span class="line">*/</span></span><br><span class="line"><span class="keyword">div_t</span> ldiv (<span class="keyword">long</span> <span class="keyword">int</span> number, <span class="keyword">long</span> <span class="keyword">int</span> denom);</span><br></pre></td></tr></table></figure>
<h4 id="lldiv函数（c99）"><a href="#lldiv函数（c99）" class="headerlink" title="lldiv函数（c99）"></a>lldiv函数（c99）</h4><hr>
<blockquote>
<p><strong>说明：</strong>用第一个参数除以第二个参数，返回含有<code>商</code>和<code>余数</code>的结构体。<br><strong>原型：</strong><code>stdlib.h</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;long long int&#125; number 除数</span><br><span class="line">* @param &#123;long long int&#125; denom 被除数</span><br><span class="line">* @return &#123;div_t&#125; 含有商（quot）和余数（rem）的结构体</span><br><span class="line">*/</span></span><br><span class="line"><span class="keyword">div_t</span> ldiv (<span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> number, <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> denom);</span><br></pre></td></tr></table></figure>
<h2 id="26-3-time-h：日期和时间"><a href="#26-3-time-h：日期和时间" class="headerlink" title="26.3    time.h：日期和时间"></a>26.3    time.h：日期和时间</h2><blockquote>
<p><strong>说明：</strong>存储时间的数据结构。</p>
<ul>
<li><code>clock_t</code>：按照“时钟滴答”进行度量的时间值。</li>
<li><code>time_t</code>：紧凑的时间和日期编码（日历时间）</li>
<li><code>struct tm</code>：包含分解的时间的结构体<br><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202015-11-02%20%E4%B8%8B%E5%8D%889.40.49.png" alt="Alt text"><br>❶ 允许两个额外的“闰秒”。c99中最大值为60。<br>❷ 如果夏令时有效，就为正数；如果无效，为零；如果这一信息未知，就为负数。</li>
</ul>
</blockquote>
<h3 id="26-3-1-时间处理函数"><a href="#26-3-1-时间处理函数" class="headerlink" title="26.3.1    时间处理函数"></a>26.3.1    时间处理函数</h3><h4 id="clock函数"><a href="#clock函数" class="headerlink" title="clock函数"></a>clock函数</h4><hr>
<blockquote>
<p><strong>说明：</strong>返回程序从开始执行到当前时刻的处理器时间（时钟数）。<br><strong>原型：</strong><code>stdlib.h</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @return &#123;clock_t&#125; 程序从此启动到当前经过的处理器时间</span><br><span class="line">*/</span></span><br><span class="line"><span class="keyword">clock_t</span> clock (<span class="keyword">void</span>);</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>技巧：</strong></p>
<ul>
<li>为了将处理器时间转换为秒，将其除以<code>CLOCK_PER_SEC</code>(定义在<code>time.h</code>)。</li>
<li>当用<code>clock</code>函数来确定程序已经运行多长时间时（不包括到达<code>main函数</code>之前的时间），习惯做法时调用<code>clock函数</code>两次：一次在<code>main函数</code>开始处，一次在程序要终止之前。</li>
</ul>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#inlcude &lt;stdio.h&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">	<span class="comment">/* 第一次调用 */</span></span><br><span class="line">	<span class="keyword">clock_t</span> start_clock = clock();</span><br><span class="line">	...</span><br><span class="line">	<span class="comment">/* 第二次调用 */</span></span><br><span class="line">	<span class="comment">/* CLOCK_PER_SEC：类型由实现定义，c99指定其为clock_t类型 */</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"Processor time used: %g sec.\n"</span>, (clock() - start_clock / (double) CLOCKS_PER_SEC);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="time函数"><a href="#time函数" class="headerlink" title="time函数"></a>time函数</h4><hr>
<blockquote>
<p><strong>说明：</strong>返回当前的日历时间。</p>
<ul>
<li>如果参数不为<code>NULL</code>,那么<code>time函数</code>还会把日历时间存储在实参指向的空间中。</li>
</ul>
<p><strong>原型：</strong><code>time.h</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;time_t *&#125; timer 指向存储当前日历时间的存储空间（可以为NULL）</span><br><span class="line">* @return &#123;time_t&#125; 当前的日历时间 </span><br><span class="line">*/</span></span><br><span class="line"><span class="keyword">time_t</span> time (<span class="keyword">time_t</span> *timer);</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方式一：使用返回值</span></span><br><span class="line">cur_time = time(NULL);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方式二：通过参数指定存储的位置</span></span><br><span class="line">time(&amp;cur_time);</span><br></pre></td></tr></table></figure>
<h4 id="difftime函数"><a href="#difftime函数" class="headerlink" title="difftime函数"></a>difftime函数</h4><hr>
<blockquote>
<p><strong>说明：</strong>通过两个时间点的日历时间，返回两个时间点之间的时间差（秒）<br><strong>用途：</strong>计算程序的运行时间。<br><strong>原型：</strong><code>time.h</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;time_t&#125; 日历时间</span><br><span class="line">* @param &#123;time_t&#125; 日历时间（较早的时间）</span><br><span class="line">* @return &#123;double&#125; time0和time1之间按秒衡量的差值</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">difftime</span><span class="params">(time_t time1, time_t time0)</span></span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">// 第一个日历时间</span></span><br><span class="line">	<span class="keyword">time_t</span> start_time = time(NUULL);</span><br><span class="line">	...</span><br><span class="line">	<span class="comment">// 第二个日历时间，并计算时间差</span></span><br><span class="line">	ptintf(<span class="string">"Return time: %g sec.\n"</span>, difftime(NULL), start_time);</span><br><span class="line">	return <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="mktime函数"><a href="#mktime函数" class="headerlink" title="mktime函数"></a>mktime函数</h4><hr>
<blockquote>
<p><strong>说明：</strong>把<code>struct tm</code>(分解时间)类型的时间转换为日历时间并返回。<br><strong>用途：</strong>对于和时间、日期相关的计算非常有用。<br><strong>副作用：</strong>会按照一定规则调整结构的成员</p>
<ul>
<li><strong>改变值不在合法范围内的成员：</strong>一个成员的数值的调整可能会导致接连对其它成员的调整，直到全部合法。</li>
<li>初始化<code>tm_wday</code>（一星期的第几天）和<code>tm_yday</code>（一年中的第几天）</li>
</ul>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 声明分解时间 */</span></span><br><span class="line"><span class="keyword">struct</span> tm t;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 初始化分解时间 */</span></span><br><span class="line">t.tm_mday = <span class="number">27</span>;<span class="comment">/* 日 */</span></span><br><span class="line">t.tm_mon = <span class="number">6</span>;<span class="comment">/* 月 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 保证其他成员被正确初始化 */</span></span><br><span class="line">t.tm_sec = <span class="number">0</span>;</span><br><span class="line">t.tm_min = <span class="number">0</span>;</span><br><span class="line">t.tm_hour = <span class="number">0</span>;</span><br><span class="line">t.tm_isdst = <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 制造超出取值范围的情况 */</span></span><br><span class="line">t.tm_mday = += <span class="number">16</span>; <span class="comment">/* 43 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 将分解时间转为日历时间，将导致原本的分解时间成员被修改 */</span></span><br><span class="line">mktime(&amp;t);</span><br></pre></td></tr></table></figure>
<p><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202015-11-03%20%E4%B8%8B%E5%8D%886.42.02.png" alt="Alt text"></p>
<h3 id="26-3-2-时间转换函数"><a href="#26-3-2-时间转换函数" class="headerlink" title="26.3.2    时间转换函数"></a>26.3.2    时间转换函数</h3><blockquote>
<p><strong>说明：</strong>转换示意图<br> <img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202015-11-03%20%E4%B8%8B%E5%8D%886.44.39.png" alt="Alt text"><br><strong>注意：</strong>其中的<code>mktime函数</code>被C标准定义为<code>处理函数</code>而不是<code>转换函数</code>。</p>
</blockquote>
<h4 id="gmtime函数"><a href="#gmtime函数" class="headerlink" title="gmtime函数"></a>gmtime函数</h4><hr>
<blockquote>
<p><strong>说明：</strong>将日历时间转换为分解时间，是<code>UTC</code>(协调世界时间)。<br><strong>注意：</strong>返回值指向的是一个静态分配的结构，会被后续的<code>getime函数</code>或<code>localtime函数</code>调用修改。</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;time_t&#125; timer 日历时间</span><br><span class="line">* @return &#123;struct tm&#125; 分解时间</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">struct</span> tm *<span class="title">gmtime</span> <span class="params">(<span class="keyword">const</span> time_t *timer)</span></span>;</span><br></pre></td></tr></table></figure>
<h4 id="localtime函数"><a href="#localtime函数" class="headerlink" title="localtime函数"></a>localtime函数</h4><hr>
<blockquote>
<p><strong>说明：</strong>将日历时间转换为分解时间，是本地时间。<br><strong>原型：</strong><code>time.h</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;&#125;</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">struct</span> tm *<span class="title">localtime</span> <span class="params">(<span class="keyword">const</span> time_t *timer)</span></span>;</span><br></pre></td></tr></table></figure>
<h4 id="asctime函数"><a href="#asctime函数" class="headerlink" title="asctime函数"></a>asctime函数</h4><hr>
<blockquote>
<p><strong>说明：</strong>将分解时间转换为字符串格式。</p>
<blockquote>
<p><code>Sun Jun 3 17:48:34 2007\n</code></p>
</blockquote>
<p><strong>注意：</strong>返回的字符串是一个静态分配的结构，会被后续的<code>asctime函数</code>或<code>strftime函数</code>调用修改。<br><strong>原型：</strong><code>time.h</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;struct tm *&#125; timeptr 指向分解时间结构体的指针</span><br><span class="line">* @return &#123;char *&#125; 字符串形式的时间(ASCII时间)</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">char</span> *<span class="title">asctime</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">struct</span> tm *timeptr)</span></span>;</span><br></pre></td></tr></table></figure>
<h4 id="ctime函数"><a href="#ctime函数" class="headerlink" title="ctime函数"></a>ctime函数</h4><hr>
<blockquote>
<p><strong>说明：</strong>将日历时间转换为字符串格式。<br><strong>注意：</strong>返回的字符串是一个静态分配的结构，会被后续的<code>asctime函数</code>或<code>strftime函数</code>调用修改。<br><strong>原型：</strong><code>time.h</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;time_t&#125; time 日历时间</span><br><span class="line">* @return &#123;char *&#125; 描述本地时间的字符串</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">char</span> *<span class="title">ctime</span> <span class="params">(<span class="keyword">const</span> time_t *time)</span></span>;</span><br></pre></td></tr></table></figure>
<h4 id="strftime函数"><a href="#strftime函数" class="headerlink" title="strftime函数"></a>strftime函数</h4><hr>
<blockquote>
<p><strong>描述：</strong>把分解时间转换成字符串格式。<br><strong>注意：</strong>函数对地区敏感，改变<code>LC_TIME</code>可能会影响转换说明符的行为。<br><strong>转换说明符：</strong></p>
<ul>
<li>针对<code>&quot;C&quot;</code>地区（c89~c99），支持<code>ISO 8601</code><br><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202015-11-03%20%E4%B8%8B%E5%8D%8810.54.27.png" alt="Alt text"><br><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202015-11-03%20%E4%B8%8B%E5%8D%8810.55.24.png" alt="Alt text"></li>
<li>一些转换说明符在<code>&quot;C&quot;</code>地区的替换字符串（c99）<br><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202015-11-03%20%E4%B8%8B%E5%8D%8810.58.53.png" alt="Alt text"></li>
<li><code>E</code>或<code>O</code>修饰符：修改特定的转换说明符，替换为依赖当前地区的备选格式（<code>&quot;C&quot;</code>地区忽略<code>E</code>或<code>O</code>）（c99）<br><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202015-11-03%20%E4%B8%8B%E5%8D%8811.04.15.png" alt="Alt text"></li>
</ul>
<p><strong>说明：</strong>类似<code>asctime函数</code>，但提供了大量对时间进行格式化的控制。</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* @param &#123;char *&#125; s 指向用来存储字符串形式的时间的空间</span><br><span class="line">* @param &#123;size_t&#125; maxsize 存储在s中的字符数量上限</span><br><span class="line">* @param &#123;char *&#125; format 格式串</span><br><span class="line">* @param &#123;struct tm *&#125; timeptr 分解时间</span><br><span class="line">* @return &#123;size_t&#125; </span><br><span class="line">*/</span></span><br><span class="line"><span class="keyword">size_t</span> strftime (<span class="keyword">char</span> * <span class="keyword">restrict</span> s, <span class="keyword">size_t</span> maxsize, <span class="keyword">const</span> <span class="keyword">char</span> * <span class="keyword">restrict</span> format, <span class="keyword">const</span> <span class="keyword">struct</span> tm * restricy timeptr);</span><br></pre></td></tr></table></figure>
<h3 id="程序：显示日期和时间"><a href="#程序：显示日期和时间" class="headerlink" title="程序：显示日期和时间"></a>程序：显示日期和时间</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * Display the current date and time in three formats</span><br><span class="line"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> <span class="keyword">const</span> *argv[])</span> </span>&#123;</span><br><span class="line">	<span class="comment">/* 1. 获得日历时间 */</span></span><br><span class="line">	<span class="keyword">time_t</span> current = time(NULL);</span><br><span class="line">	<span class="keyword">struct</span> tm *ptr;</span><br><span class="line">	<span class="keyword">char</span> date_time[<span class="number">21</span>];</span><br><span class="line">	<span class="keyword">int</span> hour;</span><br><span class="line">	<span class="keyword">char</span> am_or_pm;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/* 2. 打印日期时间：ctime默认的的字符串形式 */</span></span><br><span class="line">	<span class="built_in">puts</span>(ctime(&amp;current));</span><br><span class="line"></span><br><span class="line">	<span class="comment">/* 2. 打印日期时间：strftime默认的字符串形式 */</span></span><br><span class="line">	strftime(date_time, <span class="keyword">sizeof</span>(date_time), <span class="string">"%m-%d-%Y %I:%M%p\n"</span>, localtime(&amp;current));</span><br><span class="line">	<span class="built_in">puts</span>(date_time);</span><br><span class="line"></span><br><span class="line">	<span class="comment">/* 2. 打印日期和时间：使用printf结合分解时间 */</span></span><br><span class="line">	ptr = localtime(&amp;current);</span><br><span class="line">	hour = ptr-&gt;tm_hour;</span><br><span class="line">	<span class="keyword">if</span> (hour &lt;= <span class="number">11</span>) &#123;</span><br><span class="line">		am_or_pm = <span class="string">'a'</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> &#123;</span><br><span class="line">		hour -= <span class="number">12</span>;</span><br><span class="line">		am_or_pm = <span class="string">'p'</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (hour == <span class="number">0</span>) &#123;</span><br><span class="line">		hour = <span class="number">12</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%.2d-%.2d-%.2d %2d:%.2d%c\n"</span>, ptr-&gt;tm_mon + <span class="number">1</span>, ptr-&gt;tm_mday, ptr-&gt;tm_year + <span class="number">1900</span>, hour, ptr-&gt;tm_min, am_or_pm);</span><br><span class="line">	return <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ ./datetime</span><br><span class="line"> Wed Nov  4 10:41:12  2015</span><br><span class="line"></span><br><span class="line"> 11-04-2015 10:41AM</span><br><span class="line"></span><br><span class="line"> 11-04-2015 10:41a</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/6/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/8/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="Sean" />
          <p class="site-author-name" itemprop="name">Sean</p>
          <p class="site-description motion-element" itemprop="description">整理了一批过去一段时间ios相关的笔记，其它的笔记也整理下？源码分享出来？再说吧...反正也只有自己会看吧...</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">94</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Sean</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"lapuda-er"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    <script src="/vendors/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  






  
  

  

  

  

</body>
</html>
