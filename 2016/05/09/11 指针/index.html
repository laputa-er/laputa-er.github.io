<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    
    <title>11 指针 | Laputa</title>
    <meta name="renderer" content="webkit">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <meta name="description" content="do things for fun">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="11 指针 | Laputa">
    <meta name="twitter:description" content="do things for fun">

    <meta property="og:type" content="article">
    <meta property="og:title" content="11 指针 | Laputa">
    <meta property="og:description" content="do things for fun">

    
    <meta name="author" content="Sean">
    
    <link rel="stylesheet" href="/css/vno.css">
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css">

    
    <link rel="icon" href="/images/favicon.png">
    

    <meta name="generator" content="hexo"/>
    
    <link rel="alternate" type="application/rss+xml" title="Laputa" href="/atom.xml">
    

    <link rel="canonical" href="http://laputa-er.github.io/2016/05/09/11 指针/"/>

    
</head>

<body class="home-template no-js">

    <span class="mobile btn-mobile-menu">
        <i class="fa fa-list btn-mobile-menu__icon"></i>
        <i class="fa fa-angle-up btn-mobile-close__icon hidden"></i>
    </span>

    
<header class="panel-cover panel-cover--collapsed" style="background-image: url(/images/background-cover.jpg)">
  <div class="panel-main">
    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        <a href="/" title="前往 Laputa 的主页"><img src="/images/logo2.jpg" width="80" alt="Laputa logo" class="panel-cover__logo logo" /></a>
        <h1 class="panel-cover__title panel-title"><a href="/" title="link to homepage for Laputa">Laputa</a></h1>
        
        <span class="panel-cover__subtitle panel-subtitle">已然在路上</span>
        
        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">If you can not act the way you want to live, you will one day live in accordance with the way to think about.</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />

        <div class="navigation-wrapper">
          <div>
          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">
              <li class="navigation__item"><a href="/#blog" title="访问笔记" class="blog-button">笔记</a></li>
            
              <li class="navigation__item"><a href="/projects">项目作品</a></li>
            
              <li class="navigation__item"><a href="/aboutme">关于我</a></li>
            
            </ul>
          </nav>
          </div>
          <div>
          <nav class="cover-navigation navigation--social">
  <ul class="navigation">

  <!-- Weibo-->
  

  <!-- Github -->
  
  <li class="navigation__item">
    <a href="https://github.com/laputa-er" title="查看我的GitHub主页" target="_blank">
      <i class='social fa fa-github'></i>
      <span class="label">Github</span>
    </a>
  </li>


<!-- Stack Overflow -->
        
        <li class="navigation__item">
            <a href="http://stackoverflow.com/users/6304138/laputa" title="Stack Overflow" target="_blank">
                <i class='social fa fa-stack-overflow'></i>
                <span class="label">Stack Overflow</span>
            </a>
        </li>
        

  <!-- Google Plus -->
  

<!-- Facebook -->

  
<!-- Twitter -->

  

  <li class="navigation__item">
    <a href="/atom.xml" title="RSS" target="_blank">
      <i class='social fa fa-rss'></i>
      <span class="label">RSS</span>
    </a>
  </li>



  </ul>
</nav>

          </div>
        </div>

      </div>

    </div>

    <div class="panel-cover--overlay cover-blue"></div>
  </div>
</header>

    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            <article class="post-container post-container--single">

  <header class="post-header">
    <div class="post-meta">
      <time datetime="2016-05-09T15:05:35.000Z" class="post-list__meta--date date">2016-05-09</time> &#8226; <span class="post-meta__tags tags">于&nbsp;
  <a class="tag-link" href="/tags/c语言程序设计－现代方法/">c语言程序设计－现代方法</a>
</span>
    </div>
    <h1 class="post-title">11 指针</h1>
  </header>

  <section class="post">
    <!-- Table of Contents -->
    
    <div id="top-toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#11-1声明指针变量"><span class="toc-number">1.</span> <span class="toc-text">11.1声明指针变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-2-取地址运算符和间接寻址运算符"><span class="toc-number">2.</span> <span class="toc-text">11.2    取地址运算符和间接寻址运算符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2-1-取地址运算符"><span class="toc-number">2.1.</span> <span class="toc-text">11.2.1    取地址运算符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2-2-间接寻址运算符"><span class="toc-number">2.2.</span> <span class="toc-text">11.2.2    间接寻址运算符</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-3-指针赋值"><span class="toc-number">3.</span> <span class="toc-text">11.3    指针赋值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-4-指针作为实际参数"><span class="toc-number">4.</span> <span class="toc-text">11.4    指针作为实际参数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-4-1-程序：找出数组中的最大元素和最小元素"><span class="toc-number">4.1.</span> <span class="toc-text">11.4.1    程序：找出数组中的最大元素和最小元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-4-2-用const保护实际参数"><span class="toc-number">4.2.</span> <span class="toc-text">11.4.2    用const保护实际参数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-5-指针作为返回值"><span class="toc-number">5.</span> <span class="toc-text">11.5    指针作为返回值</span></a></li></ol>
    </div>
    <div id="tocShell"></div>
    <div id="toc" class="toc-article">
      <div class="btn-group drag-me">
        <i class="social fa fa-ellipsis-v"></i>
      </div>
      <div class="btn-group dropup-catelog">
        <button class="btn"><i class="social fa fa-list-ol"></i></button>
        <div class="catelog-content">
          <p class="toc-title-wrap">
            <strong class="toc-title">文章目录</strong>
          </p>
          <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#11-1声明指针变量"><span class="toc-number">1.</span> <span class="toc-text">11.1声明指针变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-2-取地址运算符和间接寻址运算符"><span class="toc-number">2.</span> <span class="toc-text">11.2    取地址运算符和间接寻址运算符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2-1-取地址运算符"><span class="toc-number">2.1.</span> <span class="toc-text">11.2.1    取地址运算符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2-2-间接寻址运算符"><span class="toc-number">2.2.</span> <span class="toc-text">11.2.2    间接寻址运算符</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-3-指针赋值"><span class="toc-number">3.</span> <span class="toc-text">11.3    指针赋值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-4-指针作为实际参数"><span class="toc-number">4.</span> <span class="toc-text">11.4    指针作为实际参数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-4-1-程序：找出数组中的最大元素和最小元素"><span class="toc-number">4.1.</span> <span class="toc-text">11.4.1    程序：找出数组中的最大元素和最小元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-4-2-用const保护实际参数"><span class="toc-number">4.2.</span> <span class="toc-text">11.4.2    用const保护实际参数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-5-指针作为返回值"><span class="toc-number">5.</span> <span class="toc-text">11.5    指针作为返回值</span></a></li></ol>
        </div>
      </div>
    </div>
    
    <p><strong>字节(byte)：</strong>大多数现代计算机用字节来分割内存，每个字节可以存储8位信息。每个字节都有唯一的地址，用来和内存中的其他字节进行区别。<br><strong>变量在内存中的地址：</strong>程序中的每个变量占有一个或多个内存字节，把第一个字节的地址称为变量的地址。<br><strong>指针变量：（pointer variable）</strong>虽然可以用整数表示地址，但是其取值单位可能不同于整数的范围，所以一定不能用普通整型变量存储地址。但是，可以用热熟的指针变量存储地址。<br><strong>指针：</strong>在用指针变量p存储变量i的地址时，我们说成是p“指向”i。换句话说，指针就是地址，而且指针变量是只存储地址的变量。</p>
<h2 id="11-1声明指针变量"><a href="#11-1声明指针变量" class="headerlink" title="11.1声明指针变量"></a>11.1声明指针变量</h2><p><strong>语法：</strong><code>int *p</code></p>
<ul>
<li>必须在指针变量名字前放置<code>*</code></li>
<li>可以和其他变量一起出现在声明中</li>
<li>每个指针变量唯一指向特定类型（引用类型）的对象</li>
<li>对指针可以指向的引用类型没有限制，甚至可以指向另一个指针。</li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> i, i, a[<span class="number">10</span>], *p;</span><br></pre></td></tr></table></figure>
<h2 id="11-2-取地址运算符和间接寻址运算符"><a href="#11-2-取地址运算符和间接寻址运算符" class="headerlink" title="11.2    取地址运算符和间接寻址运算符"></a>11.2    取地址运算符和间接寻址运算符</h2><table>
<thead>
<tr>
<th>运算符</th>
<th>名称</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&amp;变量</code></td>
<td>取地址运算符</td>
<td>找到变量的地址</td>
</tr>
<tr>
<td><code>*指针变量</code></td>
<td>间接寻址运算符</td>
<td>找到指针指向的对象</td>
</tr>
</tbody>
</table>
<h3 id="11-2-1-取地址运算符"><a href="#11-2-1-取地址运算符" class="headerlink" title="11.2.1    取地址运算符"></a>11.2.1    取地址运算符</h3><p><strong>先声明后赋值：</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> i, *p;</span><br><span class="line">p = &amp;i;</span><br></pre></td></tr></table></figure>
<p><strong>声明的同时赋值：</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> i, *p = &amp;i;</span><br></pre></td></tr></table></figure>
<h3 id="11-2-2-间接寻址运算符"><a href="#11-2-2-间接寻址运算符" class="headerlink" title="11.2.2    间接寻址运算符"></a>11.2.2    间接寻址运算符</h3><blockquote>
<p><strong>说明：</strong>一旦指针变量指向指向了对象，就可以使用<code>*</code>运算符访问存储在对象中的内容。</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> i, *p = &amp;i;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d\n"</span>, *p);<span class="comment">//*p等价于i</span></span><br></pre></td></tr></table></figure>
<p><strong>注意：</strong>不要把间接寻址运算符用于未初始化的指针变量。否则一旦改变未知的内存单元可能会导致不规律的行为或操作系统的崩溃。</p>
<h2 id="11-3-指针赋值"><a href="#11-3-指针赋值" class="headerlink" title="11.3    指针赋值"></a>11.3    指针赋值</h2><blockquote>
<p><strong>前提：</strong>两个指针具有相同的类型</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> i, j, *p, *q;</span><br><span class="line">p = &amp;i;</span><br><span class="line">q = p;<span class="comment">//把i的地址右赋值给了p，此时右两个指针同时指向i</span></span><br></pre></td></tr></table></figure>
<h2 id="11-4-指针作为实际参数"><a href="#11-4-指针作为实际参数" class="headerlink" title="11.4    指针作为实际参数"></a>11.4    指针作为实际参数</h2><blockquote>
<p><strong>背景：</strong>c语言的参数传递机制为“值传递”，参数传递进来的是变量的副本。</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> int_part;</span><br><span class="line"><span class="keyword">float</span> frace_part;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/*声明*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">decompose</span><span class="params">(<span class="keyword">float</span> x, <span class="keyword">int</span> *int_part, <span class="keyword">float</span> *frac_part)</span></span>;</span><br><span class="line"><span class="comment">//或void decompose(float x, int *, float *);</span></span><br><span class="line">decompose(<span class="number">3.1415926</span>, &amp;i, &amp;f);</span><br><span class="line"><span class="comment">/*调用*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*定义*/</span></span><br><span class="line"><span class="comment">/**</span><br><span class="line">* 取出一个浮点数的整数部分和小数部并分别赋值给两个外部变量</span><br><span class="line">* @param x 目标浮点数</span><br><span class="line">* @param *int_part 存储整数部分的地址</span><br><span class="line">* @param *fract_part 存储小数部分的变量</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">decompose</span><span class="params">(<span class="keyword">float</span> x, <span class="keyword">int</span> *int_part, <span class="keyword">float</span> *fract_part)</span></span>&#123;</span><br><span class="line">	*int_part = (int) x;</span><br><span class="line">	*fract_part = x - *int_part;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="11-4-1-程序：找出数组中的最大元素和最小元素"><a href="#11-4-1-程序：找出数组中的最大元素和最小元素" class="headerlink" title="11.4.1    程序：找出数组中的最大元素和最小元素"></a>11.4.1    程序：找出数组中的最大元素和最小元素</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * Finds the largest and smallest elements in an array</span><br><span class="line"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"> <span class="meta">#<span class="meta-keyword">define</span> N 10</span></span><br><span class="line"> <span class="function"><span class="keyword">void</span> <span class="title">max_min</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> n, <span class="keyword">int</span> *max, <span class="keyword">int</span> *min)</span></span>;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"> 	<span class="keyword">int</span> b[N], i, big, small;</span><br><span class="line"></span><br><span class="line"> 	<span class="built_in">printf</span>(<span class="string">"Enter %d numbers:"</span>, N);</span><br><span class="line"> 	<span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; N; i++)&#123;</span><br><span class="line"> 		<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;b[i]);</span><br><span class="line"> 	&#125;</span><br><span class="line"> 	max_min(b, N, &amp;big, &amp;small);</span><br><span class="line"> 	<span class="built_in">printf</span>(<span class="string">"Largest: %d\n"</span>, big);</span><br><span class="line"> 	<span class="built_in">printf</span>(<span class="string">"smallest: %d\n"</span>, small);</span><br><span class="line"></span><br><span class="line"> 	return <span class="number">0</span>;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 找出最大值和最小值并将结果赋给响应指针对应的变量</span><br><span class="line"> * @param a   数组</span><br><span class="line"> * @param n   数组大小</span><br><span class="line"> * @param max 存储最大值的变量</span><br><span class="line"> * @param min 存储最小值的变量</span><br><span class="line"> */</span></span><br><span class="line"> <span class="function"><span class="keyword">void</span> <span class="title">max_min</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> n, <span class="keyword">int</span> *max, <span class="keyword">int</span> *min)</span></span>&#123;</span><br><span class="line"> 	<span class="keyword">int</span> i;</span><br><span class="line"> 	*max = *min = a[<span class="number">0</span>];</span><br><span class="line"> 	<span class="keyword">for</span>(i = <span class="number">1</span>; i &lt; n; i++)&#123;</span><br><span class="line"> 		<span class="keyword">if</span>(a[i] &gt; *max)&#123;</span><br><span class="line"> 			*max = a[i];</span><br><span class="line"> 		&#125;<span class="keyword">else</span> <span class="keyword">if</span>(a[i] &lt; *min)&#123;</span><br><span class="line"> 			*min = a[i];</span><br><span class="line"> 		&#125;</span><br><span class="line"> 	&#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ ./maxmin </span><br><span class="line"> Enter 10 numbers:1 2 3 4 5 6 7 8 9 10</span><br><span class="line"> Largest: 10</span><br><span class="line"> smallest: 1</span><br></pre></td></tr></table></figure>
<h3 id="11-4-2-用const保护实际参数"><a href="#11-4-2-用const保护实际参数" class="headerlink" title="11.4.2    用const保护实际参数"></a>11.4.2    用const保护实际参数</h3><p><strong>使用指针替代变量副本：</strong>如果需要大量的存储空间，那么传递变量的值可能浪费时间和空间。<br><strong>const：</strong>放在形式参数的类型说明之前，证明函数不会改变传递给函数的指针所指向的对象。试图改变用<code>const</code>修饰的形参对应的实参会引发编译器发出特定消息。</p>
<h2 id="11-5-指针作为返回值"><a href="#11-5-指针作为返回值" class="headerlink" title="11.5    指针作为返回值"></a>11.5    指针作为返回值</h2><p><strong>用途：</strong>函数返回结果的内存位置而不是返回值。<br><strong>场景：</strong></p>
<ol>
<li>返回指向外部变量的指针</li>
<li>返回声明为<code>static</code>的局部变量的指针</li>
<li><strong>限制：</strong>永远不会返回指向自动局部变量的指针，因为函数返回后局部变量的存储空间就不存在了。</li>
</ol>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> *<span class="title">max</span><span class="params">(<span class="keyword">int</span> *a, <span class="keyword">int</span> *b)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(*a &gt; *b)&#123;</span><br><span class="line">		return a;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		return b;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> *p, x, y;</span><br><span class="line">p = max(*x, &amp;y);</span><br></pre></td></tr></table></figure>

  </section>

</article>




            <footer class="footer">
    <span class="footer__copyright">
        本站点采用<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>
    </span>
    <span class="footer__copyright">
        基于 <a href="http://hexo.io">Hexo</a> 搭建，感谢 <a href="https://pages.github.com/">GitHub Pages</a> 提供免费的托管服务
    </span>
    <span class="footer__copyright">
        &copy; 2016 - 
        本站修改自<a href="https://github.com/lenbo-ma/hexo-theme-vno" target="_blank">hexo-theme-vno</a>
    </span>
</footer>

        </div>
    </div>

    <script src="http://cdn.bootcss.com/jquery/2.1.4/jquery.min.js"></script>
    <script src="/js/main.js"></script>

     
</body>
</html>
