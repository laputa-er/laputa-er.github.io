<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    
    <title>2 网络通信 | Sean</title>
    <meta name="renderer" content="webkit">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <meta name="description" content="do things for fun">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="2 网络通信 | Sean">
    <meta name="twitter:description" content="do things for fun">

    <meta property="og:type" content="article">
    <meta property="og:title" content="2 网络通信 | Sean">
    <meta property="og:description" content="do things for fun">

    
    <meta name="author" content="Sean">
    
    <link rel="stylesheet" href="/css/vno.css">
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css">

    
    <link rel="icon" href="/images/sean.png">
    

    <meta name="generator" content="hexo"/>
    

    <link rel="canonical" href="http://laputa-er.github.io/2016/05/14/JK_IOS高级_2  网络通信/"/>

    
</head>

<body class="home-template no-js">

    <span class="mobile btn-mobile-menu">
        <i class="fa fa-list btn-mobile-menu__icon"></i>
        <i class="fa fa-angle-up btn-mobile-close__icon hidden"></i>
    </span>
    
<header class="panel-cover panel-cover--collapsed" style="background-image: url(/images/mengxiang.jpg)">
  <div class="panel-main">
    <div class="panel-main__inner panel-inverted">
      <span class="panel-arrow panel-left-arrow disabled">
        <i class="fa fa-angle-left"></i>
      </span>
      <span class="panel-arrow panel-right-arrow">
        <i class="fa fa-angle-right"></i>
      </span>

      <div class="panel-animation-container">
        <div class="panel-content panel-main__content">
            <a href="/" title="前往 Sean 的主页"><img src="/images/sean.png" width="80" alt="Sean logo" class="panel-cover__logo logo" /></a>
            <h1 class="panel-cover__title panel-title"><a href="/" title="link to homepage for Sean">Sean</a></h1>
            
            <span class="panel-cover__subtitle panel-subtitle">笔记分享</span>
            
            <hr class="panel-cover__divider" />
            <p class="panel-cover__description">整理了一批过去一段时间ios相关的笔记，其它的笔记也整理下？源码分享出来？再说吧...反正也只有自己会看吧...</p>
            <hr class="panel-cover__divider panel-cover__divider--secondary" />

            <div class="navigation-wrapper">
              <div>
              <nav class="cover-navigation cover-navigation--primary">
                <ul class="navigation">
                  <li class="navigation__item"><a href="/#blog" title="访问笔记" class="blog-button">笔记</a></li>
                  <li style="display: none;">
                    <textarea>
                      
                        <li class="navigation__item"><a href="/projects">项目作品</a></li>
                      
                        <li class="navigation__item"><a href="/aboutme">关于我</a></li>
                      
                    </textarea>
                  </li>
                </ul>
              </nav>
              </div>
              <div>
              <nav class="cover-navigation navigation--social">
  <ul class="navigation">

  <!-- Weibo-->
  

  <!-- Github -->
  

<!-- Stack Overflow -->
        

  <!-- Google Plus -->
  

<!-- Facebook -->

  
<!-- Twitter -->

  



  </ul>
</nav>

              </div>
            </div>

          </div>
          <div class="panel-content panel-tagcloud_content">
            
              <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">笔记分类</h3>
    <div class="widget tagcloud">
      <a href="/tags/Objective-C基础教程第二版/">Objective-C基础教程第二版</a> <a href="/tags/The-Swift-Program-Language-2/">The Swift Program Language 2</a> <a href="/tags/c语言程序设计－现代方法/">c语言程序设计－现代方法</a> <a href="/tags/极客学院-ios中级/">极客学院_ios中级</a> <a href="/tags/极客学院-ios初级/">极客学院_ios初级</a> <a href="/tags/极客学院-ios高级/">极客学院_ios高级</a>
    </div>
  </div>

  
</aside>
            
          </div>
        </div>  

      </div>
      <div class="panel-cover--overlay cover-blue"></div>
  </div>
  </header>
    
    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            <article class="post-container post-container--single">

  <header class="post-header">
    <div class="post-meta">
      <time datetime="2016-05-14T01:03:10.000Z" class="post-list__meta--date date">2016-05-14</time> &#8226; <span class="post-meta__tags tags">于&nbsp;
  <a class="tag-link" href="/tags/极客学院-ios高级/">极客学院_ios高级</a>
</span>
    </div>
    <h1 class="post-title">2 网络通信</h1>
  </header>

  <section class="post">
    <!-- Table of Contents -->
    
    <div id="top-toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-iOS-HTTP通信"><span class="toc-number">1.</span> <span class="toc-text">2.1    iOS-HTTP通信</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-1-同步加载网络数据"><span class="toc-number">1.1.</span> <span class="toc-text">2.1.1    同步加载网络数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-2-异步加载网络数据"><span class="toc-number">1.2.</span> <span class="toc-text">2.2.2    异步加载网络数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-3-搭建J2E集成开发环境"><span class="toc-number">1.3.</span> <span class="toc-text">2.2.3 搭建J2E集成开发环境</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-3-1-安装-Apache-Tomcat"><span class="toc-number">1.3.1.</span> <span class="toc-text">2.2.3.1    安装 Apache Tomcat</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-3-2-安装-Tomcat-Controller"><span class="toc-number">1.3.2.</span> <span class="toc-text">2.2.3.2    安装 Tomcat Controller</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-3-3-安装-eclispe"><span class="toc-number">1.3.3.</span> <span class="toc-text">2.2.3.3    安装 eclispe</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#创建Dynamic-Web-Project"><span class="toc-number">1.3.3.1.</span> <span class="toc-text">创建Dynamic Web Project</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-4-通过GET-POST方式与服务器通信"><span class="toc-number">1.4.</span> <span class="toc-text">2.2.4    通过GET/POST方式与服务器通信</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-4-1-后端"><span class="toc-number">1.4.1.</span> <span class="toc-text">2.2.4.1    后端</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-4-2-客户端"><span class="toc-number">1.4.2.</span> <span class="toc-text">2.2.4.2    客户端</span></a></li></ol></li></ol></li></ol>
    </div>
    <div id="tocShell"></div>
    <div id="toc" class="toc-article">
      <div class="btn-group drag-me">
        <i class="social fa fa-ellipsis-v"></i>
      </div>
      <div class="btn-group dropup-catelog">
        <button class="btn"><i class="social fa fa-list-ol"></i></button>
        <div class="catelog-content">
          <p class="toc-title-wrap">
            <strong class="toc-title">文章目录</strong>
          </p>
          <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-iOS-HTTP通信"><span class="toc-number">1.</span> <span class="toc-text">2.1    iOS-HTTP通信</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-1-同步加载网络数据"><span class="toc-number">1.1.</span> <span class="toc-text">2.1.1    同步加载网络数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-2-异步加载网络数据"><span class="toc-number">1.2.</span> <span class="toc-text">2.2.2    异步加载网络数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-3-搭建J2E集成开发环境"><span class="toc-number">1.3.</span> <span class="toc-text">2.2.3 搭建J2E集成开发环境</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-3-1-安装-Apache-Tomcat"><span class="toc-number">1.3.1.</span> <span class="toc-text">2.2.3.1    安装 Apache Tomcat</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-3-2-安装-Tomcat-Controller"><span class="toc-number">1.3.2.</span> <span class="toc-text">2.2.3.2    安装 Tomcat Controller</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-3-3-安装-eclispe"><span class="toc-number">1.3.3.</span> <span class="toc-text">2.2.3.3    安装 eclispe</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#创建Dynamic-Web-Project"><span class="toc-number">1.3.3.1.</span> <span class="toc-text">创建Dynamic Web Project</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-4-通过GET-POST方式与服务器通信"><span class="toc-number">1.4.</span> <span class="toc-text">2.2.4    通过GET/POST方式与服务器通信</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-4-1-后端"><span class="toc-number">1.4.1.</span> <span class="toc-text">2.2.4.1    后端</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-4-2-客户端"><span class="toc-number">1.4.2.</span> <span class="toc-text">2.2.4.2    客户端</span></a></li></ol></li></ol></li></ol>
        </div>
      </div>
    </div>
    
    <h2 id="2-1-iOS-HTTP通信"><a href="#2-1-iOS-HTTP通信" class="headerlink" title="2.1    iOS-HTTP通信"></a>2.1    iOS-HTTP通信</h2><h3 id="2-1-1-同步加载网络数据"><a href="#2-1-1-同步加载网络数据" class="headerlink" title="2.1.1    同步加载网络数据"></a>2.1.1    同步加载网络数据</h3><blockquote>
<p><strong>说明：</strong>介绍两种方式</p>
<ul>
<li><code>NSString</code>提供的构造器</li>
<li><code>NSURLConnection.sendSynchronousRequest</code>方法（iOS 9中已过时）</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewController</span>: <span class="title">UIViewController</span> </span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line">        <span class="comment">// Do any additional setup after loading the view, typically from a nib.</span></span><br><span class="line">        loadJKPageByNSString()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     同步方式请求极客学院首页（通过 NSString）</span><br><span class="line">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">loadJKPageByNSString</span><span class="params">()</span></span> -&gt; () &#123;</span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> str = <span class="keyword">try</span> <span class="type">NSString</span>(contentsOfURL: <span class="type">NSURL</span>(string: <span class="string">"http://jikexueyuan.com"</span>)!, encoding: <span class="type">NSUTF8StringEncoding</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">let</span> data = <span class="type">NSData</span>(contentsOfURL: <span class="type">NSURL</span>(string: <span class="string">"http://jikexueyuan.com"</span>)!)</span><br><span class="line"></span><br><span class="line">            <span class="built_in">print</span>(str)</span><br><span class="line">            <span class="built_in">print</span>(data)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> &#123;</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">"无法连接网络"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     同步方式请求极客学院首页（通过 NSURLConnection）</span><br><span class="line">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">loadJKPageByNSURLConnection</span><span class="params">()</span></span> -&gt; () &#123;</span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> resp:<span class="type">NSURLResponse</span>?</span><br><span class="line">            <span class="keyword">let</span> data = <span class="keyword">try</span> <span class="type">NSURLConnection</span>.sendSynchronousRequest(<span class="type">NSURLRequest</span>(<span class="type">URL</span>: <span class="type">NSURL</span>(string: <span class="string">"http://hikexueyuan.com"</span>)!), returningResponse: &amp;resp)</span><br><span class="line"></span><br><span class="line">            <span class="built_in">print</span>(resp)</span><br><span class="line">            <span class="built_in">print</span>(data)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> &#123;</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">"无法连接网络"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-2-2-异步加载网络数据"><a href="#2-2-2-异步加载网络数据" class="headerlink" title="2.2.2    异步加载网络数据"></a>2.2.2    异步加载网络数据</h3><blockquote>
<p><strong>说明：</strong><code>NSURLConnection.sendAsynchronousRequest</code>（在<code>iOS9 中过时</code>）</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewController</span>: <span class="title">UIViewController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line">        <span class="comment">// Do any additional setup after loading the view, typically from a nib.</span></span><br><span class="line">        loadJKPage()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">loadJKPage</span><span class="params">()</span></span> -&gt; () &#123;</span><br><span class="line">        <span class="type">NSURLConnection</span>.sendAsynchronousRequest(<span class="type">NSURLRequest</span>(<span class="type">URL</span>: <span class="type">NSURL</span>(string: <span class="string">"http://jikexueyuan.com"</span>)!), queue: <span class="type">NSOperationQueue</span>()) &#123;(resp:<span class="type">NSURLResponse</span>?, data:<span class="type">NSData</span>?, error:<span class="type">NSError</span>?) -&gt; <span class="type">Void</span> <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> e = error &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">"请求失败:\(e)"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="type">NSString</span>(data: data!, encoding: <span class="type">NSUTF8StringEncoding</span>))</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-2-3-搭建J2E集成开发环境"><a href="#2-2-3-搭建J2E集成开发环境" class="headerlink" title="2.2.3 搭建J2E集成开发环境"></a>2.2.3 搭建J2E集成开发环境</h3><h4 id="2-2-3-1-安装-Apache-Tomcat"><a href="#2-2-3-1-安装-Apache-Tomcat" class="headerlink" title="2.2.3.1    安装 Apache Tomcat"></a>2.2.3.1    安装 Apache Tomcat</h4><blockquote>
<p><strong>下载 Apache Tomcat：</strong><a href="http://tomcat.apache.org/download-80.cgi" target="_blank" rel="external">http://tomcat.apache.org/download-80.cgi</a></p>
</blockquote>
<p><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-04-21%20%E4%B8%8A%E5%8D%8812.30.32.png" alt="Alt text"></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo mkdir -p /usr/<span class="built_in">local</span></span><br><span class="line">$ mv ~/Downloads/apache-tomcat-8.0.33 /usr/<span class="built_in">local</span></span><br><span class="line">$ sudo ln <span class="_">-s</span> /usr/<span class="built_in">local</span>/apache-tomcat-8.0.33 /Library/Tomcat8</span><br><span class="line">$ chown -R  tonyearth /Library/Tomcat8</span><br><span class="line">$ sudo chown -R  tonyearth /Library/Tomcat8/bin/*.sh</span><br></pre></td></tr></table></figure>
<h4 id="2-2-3-2-安装-Tomcat-Controller"><a href="#2-2-3-2-安装-Tomcat-Controller" class="headerlink" title="2.2.3.2    安装 Tomcat Controller"></a>2.2.3.2    安装 Tomcat Controller</h4><blockquote>
<p><strong>下载 Tomcat Controller：</strong><a href="http://tomcat-controller.en.softonic.com/mac/download#downloading" target="_blank" rel="external">http://tomcat-controller.en.softonic.com/mac/download#downloading</a></p>
</blockquote>
<h4 id="2-2-3-3-安装-eclispe"><a href="#2-2-3-3-安装-eclispe" class="headerlink" title="2.2.3.3    安装 eclispe"></a>2.2.3.3    安装 eclispe</h4><blockquote>
<p><strong>下载eclipse：</strong><a href="http://www.eclipse.org/downloads/" target="_blank" rel="external">http://www.eclipse.org/downloads/</a></p>
</blockquote>
<h5 id="创建Dynamic-Web-Project"><a href="#创建Dynamic-Web-Project" class="headerlink" title="创建Dynamic Web Project"></a>创建Dynamic Web Project</h5><ol>
<li>开始创建新项目<br><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-04-21%20%E4%B8%8A%E5%8D%8812.35.45.png" alt="Alt text|300x150"></li>
<li>New Runtime<br><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-04-21%20%E4%B8%8A%E5%8D%8812.35.56.png" alt="Alt text|300x200"></li>
<li>选择前面安装好的 Tomecat8 的安装目录<br><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-04-21%20%E4%B8%8A%E5%8D%8812.35.17.png" alt="Alt text|300x120"></li>
<li>创建 JSP文件 测试<br><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-04-21%20%E4%B8%8A%E5%8D%8812.39.14.png" alt="Alt text|300x200"></li>
</ol>
<h3 id="2-2-4-通过GET-POST方式与服务器通信"><a href="#2-2-4-通过GET-POST方式与服务器通信" class="headerlink" title="2.2.4    通过GET/POST方式与服务器通信"></a>2.2.4    通过GET/POST方式与服务器通信</h3><h4 id="2-2-4-1-后端"><a href="#2-2-4-1-后端" class="headerlink" title="2.2.4.1    后端"></a>2.2.4.1    后端</h4><p><img src="http://o6ul1xz4z.bkt.clouddn.com/img/1461253557430.png" alt="Alt text|200x200"></p>
<p><em>returnParas.jsp</em></p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">String name = request.getParameter(<span class="string">"name"</span>);</span><br><span class="line"><span class="keyword">if</span> (name != <span class="keyword">null</span>) &#123;</span><br><span class="line">	out.print(<span class="string">"Hello "</span> + name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">	out.print(<span class="string">"No Args"</span>);</span><br><span class="line">&#125;</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>
<h4 id="2-2-4-2-客户端"><a href="#2-2-4-2-客户端" class="headerlink" title="2.2.4.2    客户端"></a>2.2.4.2    客户端</h4><blockquote>
<p><strong>注意：</strong>下面请求使用的<code>API</code>在<code>iOS9</code>中已过时<br><strong>技巧：</strong>网络请求交给子线程而不是主线程处理，不占用主线程的资源，从而不带来界面卡顿的问题<br><img src="http://o6ul1xz4z.bkt.clouddn.com/img/1462710986603_get.gif" alt="Alt text|300x200"></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewController</span>: <span class="title">UIViewController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> textInput: <span class="type">UITextField</span>!<span class="comment">// 输入请求参数</span></span><br><span class="line">    <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> textShow: <span class="type">UITextView</span>!<span class="comment">// 展示请求会的结果</span></span><br><span class="line">    <span class="comment">// 发送请求</span></span><br><span class="line">    <span class="meta">@IBAction</span> <span class="function"><span class="keyword">func</span> <span class="title">btnRequestPressed</span><span class="params">(sender: AnyObject)</span></span> &#123;</span><br><span class="line">        testGet()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line">        <span class="comment">// Do any additional setup after loading the view, typically from a nib.</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     发送 get 请求</span><br><span class="line">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">testGet</span><span class="params">()</span></span>-&gt; () &#123;</span><br><span class="line">        <span class="keyword">let</span> name = textInput.text!</span><br><span class="line">        <span class="comment">// 创建一个线程发起请求，不占用主线程的资源</span></span><br><span class="line">        <span class="type">NSURLConnection</span>.sendAsynchronousRequest(<span class="type">NSURLRequest</span>(<span class="type">URL</span>: <span class="type">NSURL</span>(string: <span class="string">"http://localhost:8080/MyServer/returnParas.jsp?name=\(name)"</span>)!), queue: <span class="type">NSOperationQueue</span>(), completionHandler: &#123;</span><br><span class="line">            (resp:<span class="type">NSURLResponse</span>?, data:<span class="type">NSData</span>?, error:<span class="type">NSError</span>?) -&gt; () <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> d = data &#123;</span><br><span class="line">                <span class="comment">// 交给主线程处理</span></span><br><span class="line">                dispatch_sync(dispatch_get_main_queue(), &#123;</span><br><span class="line">                    () -&gt; <span class="type">Void</span> <span class="keyword">in</span></span><br><span class="line">                    <span class="comment">// self.textShow 是主线程的控件，因此必须在主线程中处理</span></span><br><span class="line">                    <span class="keyword">self</span>.textShow.text = <span class="type">NSString</span>(data: d, encoding: <span class="type">NSUTF8StringEncoding</span>)! <span class="keyword">as</span> <span class="type">String</span></span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     发送post请求</span><br><span class="line">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">testPost</span><span class="params">()</span></span>-&gt;() &#123;</span><br><span class="line">        <span class="keyword">let</span> name = textInput.text!</span><br><span class="line">        <span class="comment">// 创建并设置请求</span></span><br><span class="line">        <span class="keyword">let</span> req = <span class="type">NSMutableURLRequest</span>(<span class="type">URL</span>: <span class="type">NSURL</span>(string: <span class="string">"http://localhost:8080/MyServer/returnParas.jsp"</span>)!)</span><br><span class="line">        req.<span class="type">HTTPMethod</span> = <span class="string">"POST"</span></span><br><span class="line">        req.<span class="type">HTTPBody</span> = <span class="type">NSString</span>(string: <span class="string">"name=\(name)"</span>).dataUsingEncoding(<span class="type">NSUTF8StringEncoding</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 发起请求</span></span><br><span class="line">        <span class="type">NSURLConnection</span>.sendAsynchronousRequest(req, queue: <span class="type">NSOperationQueue</span>(), completionHandler: &#123;</span><br><span class="line">            (resp:<span class="type">NSURLResponse</span>?, data:<span class="type">NSData</span>?, error:<span class="type">NSError</span>?) -&gt; () <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> d = data &#123;</span><br><span class="line">                dispatch_sync(dispatch_get_main_queue(), &#123;</span><br><span class="line">                    <span class="keyword">self</span>.textShow.text = <span class="type">NSString</span>(data: d, encoding: <span class="type">NSUTF8StringEncoding</span>)! <span class="keyword">as</span> <span class="type">String</span></span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

  </section>

</article>


<section class="post-comments">
  <!-- 多说评论框 start -->
  <div class="ds-thread" data-thread-key="http://laputa-er.github.io/2016/05/14/JK_IOS高级_2  网络通信/" data-title="2 网络通信" data-url="http://laputa-er.github.io/2016/05/14/JK_IOS高级_2  网络通信/"></div>
  <!-- 多说评论框 end -->
  <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
  <script type="text/javascript">
  var duoshuoQuery = {short_name:"laputa-er"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
     || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
  </script>
<!-- 多说公共JS代码 end -->
</section>




            <footer class="footer">
    <span class="footer__copyright">
        本站点采用<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>
    </span>
    <span class="footer__copyright">
        基于 <a href="http://hexo.io">Hexo</a> 搭建，感谢 <a href="https://pages.github.com/">GitHub Pages</a> 提供免费的托管服务
    </span>
    <span class="footer__copyright">
        &copy; 2016 - 
        本站修改自<a href="https://github.com/lenbo-ma/hexo-theme-vno" target="_blank">hexo-theme-vno</a>
    </span>
</footer>

        </div>
    </div>

    <script src="http://cdn.bootcss.com/jquery/2.1.4/jquery.min.js"></script>
    <script src="/js/main.js"></script>

     
</body>
</html>
