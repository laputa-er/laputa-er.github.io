<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="c语言程序设计－现代方法," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="16.1    结构变量
结构：结构的特性与数组很不相同。

结构的元素（成员）可能具有不同的类型
每个结构成员都有名字
为了选择特殊的结构成员需要知名结构成员的名字而不是它的位置

扩展：大多数语言都提供类似的特性，所以结构可能听起来很舒需。再其它语言中，经常把结构称为纪录（record），把结构的成员称为字段（field）。

16.1.1    结构变量的声明语法：只声明不初始化（会非配内存">
<meta property="og:type" content="article">
<meta property="og:title" content="16 结构、联合和枚举">
<meta property="og:url" content="http://laputa-er.github.io/2016/05/10/16 结构、联合和枚举/index.html">
<meta property="og:site_name" content="Sean">
<meta property="og:description" content="16.1    结构变量
结构：结构的特性与数组很不相同。

结构的元素（成员）可能具有不同的类型
每个结构成员都有名字
为了选择特殊的结构成员需要知名结构成员的名字而不是它的位置

扩展：大多数语言都提供类似的特性，所以结构可能听起来很舒需。再其它语言中，经常把结构称为纪录（record），把结构的成员称为字段（field）。

16.1.1    结构变量的声明语法：只声明不初始化（会非配内存">
<meta property="og:image" content="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202015-08-31%20%E4%B8%8B%E5%8D%889.48.36.png">
<meta property="og:updated_time" content="2016-05-10T02:49:46.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="16 结构、联合和枚举">
<meta name="twitter:description" content="16.1    结构变量
结构：结构的特性与数组很不相同。

结构的元素（成员）可能具有不同的类型
每个结构成员都有名字
为了选择特殊的结构成员需要知名结构成员的名字而不是它的位置

扩展：大多数语言都提供类似的特性，所以结构可能听起来很舒需。再其它语言中，经常把结构称为纪录（record），把结构的成员称为字段（field）。

16.1.1    结构变量的声明语法：只声明不初始化（会非配内存">
<meta name="twitter:image" content="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202015-08-31%20%E4%B8%8B%E5%8D%889.48.36.png">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://laputa-er.github.io/2016/05/10/16 结构、联合和枚举/"/>

  <title> 16 结构、联合和枚举 | Sean </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Sean</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">笔记分享</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                16 结构、联合和枚举
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-10T10:49:46+08:00" content="2016-05-10">
              2016-05-10
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/10/16 结构、联合和枚举/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/10/16 结构、联合和枚举/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="16-1-结构变量"><a href="#16-1-结构变量" class="headerlink" title="16.1    结构变量"></a>16.1    结构变量</h2><blockquote>
<p><strong>结构：</strong>结构的特性与数组很不相同。</p>
<ul>
<li>结构的元素（成员）可能具有不同的类型</li>
<li>每个结构成员都有名字</li>
<li>为了选择特殊的结构成员需要知名结构成员的名字而不是它的位置</li>
</ul>
<p><strong>扩展：</strong>大多数语言都提供类似的特性，所以结构可能听起来很舒需。再其它语言中，经常把结构称为纪录（record），把结构的成员称为字段（field）。</p>
</blockquote>
<h3 id="16-1-1-结构变量的声明"><a href="#16-1-1-结构变量的声明" class="headerlink" title="16.1.1    结构变量的声明"></a>16.1.1    结构变量的声明</h3><p><strong>语法：</strong>只声明不初始化（会非配内存但成员不会初始化）</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span>&#123;</span><br><span class="line">    成员类型 成员名称;</span><br><span class="line">    ...</span><br><span class="line">&#125;实例变量<span class="number">1</span>, 实例变量<span class="number">2</span>, ...;</span><br></pre></td></tr></table></figure>
<p><strong>实例：</strong>结构实例化的变量具备以下特点</p>
<ul>
<li>成员在内存中是按照顺序存储的</li>
<li>内部成员拥有单独的名字空间（name space）</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//零件</span></span><br><span class="line"><span class="keyword">struct</span>&#123;</span><br><span class="line">	<span class="keyword">int</span> number;<span class="comment">//零件编号</span></span><br><span class="line">	<span class="keyword">char</span> name[NAME_LEN+<span class="number">1</span>];<span class="comment">//零件名称</span></span><br><span class="line">	<span class="keyword">int</span> on_hand;<span class="comment">//零件现有数量</span></span><br><span class="line">&#125;part1, part2;<span class="comment">//同时用这种结构实例化了两个变量</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//员工</span></span><br><span class="line"><span class="keyword">struct</span>&#123;</span><br><span class="line">	<span class="keyword">char</span> name[NAME_LEN+<span class="number">1</span>];<span class="comment">//姓名</span></span><br><span class="line">	<span class="keyword">int</span> number;<span class="comment">//工号</span></span><br><span class="line">	<span class="keyword">char</span> sex;<span class="comment">//性别</span></span><br><span class="line">&#125;employee1, employee2;</span><br></pre></td></tr></table></figure>
<h3 id="16-1-2-结构变量的初始化"><a href="#16-1-2-结构变量的初始化" class="headerlink" title="16.1.2    结构变量的初始化"></a>16.1.2    结构变量的初始化</h3><blockquote>
<p><strong>语法：</strong>声明的同时初始化</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span>&#123;</span><br><span class="line">    成员<span class="number">1</span>类型 成员<span class="number">1</span>名称;</span><br><span class="line">    成员<span class="number">2</span>类型 成员<span class="number">2</span>名称;</span><br><span class="line">    ...</span><br><span class="line">&#125;实例变量<span class="number">1</span> = &#123;成员<span class="number">1</span>值, 成员<span class="number">2</span>值, ...&#125;,   </span><br><span class="line">  实例变量<span class="number">2</span> = &#123;成员<span class="number">1</span>值, 成员<span class="number">2</span>值, ...&#125;, </span><br><span class="line">  ...;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>规则：</strong>类似数组</p>
<ol>
<li>用于结构初始化式的表达式必须是常量</li>
<li>初始化式可以短于它所初始化的结构，任何剩余的成员都用0作为它的初始值</li>
</ol>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span>&#123;</span><br><span class="line">    <span class="keyword">int</span> number;</span><br><span class="line">    <span class="keyword">char</span> name[NAME_LEN+<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">int</span> on, hand;</span><br><span class="line">&#125;part1 = &#123;<span class="number">528</span>, <span class="string">"Disk drive"</span>, <span class="number">10</span>&#125;,</span><br><span class="line"> part2 = &#123;<span class="number">914</span>, <span class="string">"Printer cable"</span>, <span class="number">5</span>&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="16-1-3-对结构的操作"><a href="#16-1-3-对结构的操作" class="headerlink" title="16.1.3    对结构的操作"></a>16.1.3    对结构的操作</h3><blockquote>
<p><strong>限制：</strong>不能用<code>==</code>或<code>!=</code>判定两个结构是否相等或不等。</p>
</blockquote>
<h4 id="16-1-3-1-访问成员"><a href="#16-1-3-1-访问成员" class="headerlink" title="16.1.3.1    访问成员"></a>16.1.3.1    访问成员</h4><blockquote>
<p><strong>左值：</strong>结构成员的值是左值</p>
<ul>
<li>可以出现在赋值运算的左侧</li>
<li>作为自增或自减表达式的操作数</li>
</ul>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">printf</span>(<span class="string">"Part number %d:"</span>, part1.number);</span><br><span class="line">part1.number = <span class="number">228</span>;<span class="comment">//可以出现在赋值运算的左侧</span></span><br><span class="line">part1.on_hand++;<span class="comment">//作为自增或自减表达式的操作数</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>逗号运算符：</strong><code>结构变量.成员名</code></p>
<ul>
<li>优先级和后缀++和后缀–相同（几乎高于所有其他运算符）</li>
</ul>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;part1.on_hand);<span class="comment">//.运算符优先级高于&amp;</span></span><br></pre></td></tr></table></figure>
<h4 id="16-1-3-2-赋值运算"><a href="#16-1-3-2-赋值运算" class="headerlink" title="16.1.3.2    赋值运算"></a>16.1.3.2    赋值运算</h4><blockquote>
<p><strong>说明：</strong>数组不能用=运算符实现变量间数组内容的复制，但结构变量可以。<br><strong>注意：</strong>只能用于同一个结构类型声明的的变量之间。<br><strong>技巧：</strong>把需要复制的数组嵌在结构体内（作为成员）进行复制。</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a[<span class="number">10</span>];</span><br><span class="line">&#125;a1, a2;</span><br><span class="line"></span><br><span class="line">a1 = a2;<span class="comment">//a1的存储空间中数据和a2相同，实现了复制</span></span><br></pre></td></tr></table></figure>
<h2 id="16-2-结构类型"><a href="#16-2-结构类型" class="headerlink" title="16.2    结构类型"></a>16.2    结构类型</h2><blockquote>
<p><strong>说明：</strong>上一小结重点放在结构变量而不是结构类型本身上，这一节将重点观察结构类型。<br><strong>命名结构类型：</strong>如果需要在程序的不同位置声明结构变量，上一节的“匿名结构”就行不通了。c语言提供了两种命名结构的方法</p>
<ol>
<li>声明“结构标记”(结构用语链表时，只能声明“结构标记”)</li>
<li>使用<code>typedef</code>定义类型名</li>
</ol>
</blockquote>
<h3 id="16-2-1-结构标记的声明"><a href="#16-2-1-结构标记的声明" class="headerlink" title="16.2.1    结构标记的声明"></a>16.2.1    结构标记的声明</h3><blockquote>
<p><strong>结构标记(structure tag)：</strong>结构标记用于标记某种特定结构类型的名字。</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span>  结构类型名&#123;</span><br><span class="line">	成员<span class="number">1</span>类型 成员<span class="number">1</span>名称;</span><br><span class="line">	 ...</span><br><span class="line">&#125;[结构变量<span class="number">1</span>, ...];<span class="comment">//分号表示声明的结束，不能省略</span></span><br><span class="line"><span class="keyword">struct</span> 结构类型名 结构变量<span class="number">2</span>, ...;<span class="comment">//struct关键字不能省略，因为结构类型名不是有效的c语言类型名(原生的和typedef定义的才是)。</span></span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//不仅声明了标记part，而且声明了变量</span></span><br><span class="line"><span class="keyword">struct</span> part&#123;</span><br><span class="line">	<span class="keyword">int</span> number;</span><br><span class="line">	<span class="keyword">char</span> name[NAME_LEN+<span class="number">1</span>];</span><br><span class="line">	<span class="keyword">int</span> on_hand;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">struct</span> part  part1 = &#123;<span class="number">528</span>, <span class="string">"disk drive"</span>, <span class="number">10</span>&#125;;</span><br><span class="line"><span class="keyword">struct</span> part part2;</span><br><span class="line">part2 = part1;</span><br></pre></td></tr></table></figure>
<h3 id="16-2-2-结构类型的定义"><a href="#16-2-2-结构类型的定义" class="headerlink" title="16.2.2    结构类型的定义"></a>16.2.2    结构类型的定义</h3><blockquote>
<p><strong>说明：</strong>用typedef来定义真正的类型名。</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span>&#123;</span><br><span class="line">	成员<span class="number">1</span>类型 成员<span class="number">1</span>名称;</span><br><span class="line">	 ...</span><br><span class="line">&#125; 结构类型名;</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span>&#123;</span><br><span class="line">	<span class="keyword">int</span> number;</span><br><span class="line">	<span class="keyword">char</span> name[NAME_LEN+<span class="number">1</span>];</span><br><span class="line">	<span class="keyword">int</span> on_hand;</span><br><span class="line">&#125; Part;<span class="comment">//类型名的名字必须出现在定义的末尾，而不是在单词struct的后边</span></span><br><span class="line">Part part1, part2;</span><br></pre></td></tr></table></figure>
<h3 id="16-2-3-结构类型的实际参数和返回值"><a href="#16-2-3-结构类型的实际参数和返回值" class="headerlink" title="16.2.3    结构类型的实际参数和返回值"></a>16.2.3    结构类型的实际参数和返回值</h3><blockquote>
<p><strong>缺点：</strong>带来一定系统开销，尤其是结构题很大的时候</p>
<blockquote>
<p>给函数传递结构和从函数返回结构都要求使用结构中所有成员的副本。</p>
</blockquote>
<p><strong>技巧：</strong>有时用指向结构的指针来代替传递给函数（或函数返回）的结构本身是很明智的做法。</p>
</blockquote>
<h4 id="16-2-3-1-用作参数"><a href="#16-2-3-1-用作参数" class="headerlink" title="16.2.3.1    用作参数"></a>16.2.3.1    用作参数</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print_part</span> <span class="params">(<span class="keyword">struct</span> part p)</span> </span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"part number: %d\n"</span>, p.number);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"Part name: %s\n"</span>, p.name);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"Quality on hand: %d \n"</span>, p.on_hand);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 传参</span></span><br><span class="line">print_part(part1);</span><br></pre></td></tr></table></figure>
<h4 id="16-2-3-2-用作返回值"><a href="#16-2-3-2-用作返回值" class="headerlink" title="16.2.3.2    用作返回值"></a>16.2.3.2    用作返回值</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义</span></span><br><span class="line"><span class="function"><span class="keyword">struct</span> part <span class="title">build_part</span><span class="params">(<span class="keyword">int</span> number, <span class="keyword">const</span> <span class="keyword">char</span>* name, <span class="keyword">int</span> on_hand)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">	<span class="keyword">struct</span> part p;</span><br><span class="line">	p.number = number;</span><br><span class="line">	<span class="built_in">strcpy</span>(p.name, name);</span><br><span class="line">	p.on_hand = on_hand;</span><br><span class="line">	return p;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="16-3-数组和结构的嵌套"><a href="#16-3-数组和结构的嵌套" class="headerlink" title="16.3    数组和结构的嵌套"></a>16.3    数组和结构的嵌套</h2><h3 id="16-3-1-嵌套的结构"><a href="#16-3-1-嵌套的结构" class="headerlink" title="16.3.1    嵌套的结构"></a>16.3.1    嵌套的结构</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义姓名</span></span><br><span class="line"><span class="keyword">struct</span> person_name &#123;</span><br><span class="line">	<span class="keyword">char</span> first[FIRST_NAME_LEN + <span class="number">1</span>];</span><br><span class="line">	<span class="keyword">char</span> middle_initial;</span><br><span class="line">	<span class="keyword">char</span> last[LAST_NAME_LEN + <span class="number">1</span>];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//定义学生</span></span><br><span class="line"><span class="keyword">struct</span> student &#123;</span><br><span class="line">	<span class="keyword">struct</span> person_name name; <span class="comment">// 结构的成员可以是另一种结构体</span></span><br><span class="line">	int_id, age;</span><br><span class="line">	<span class="keyword">char</span> sex;</span><br><span class="line">&#125; student1, student2;</span><br><span class="line"></span><br><span class="line"><span class="built_in">strcpy</span>(student1.name.first, <span class="string">"Fred"</span>);</span><br></pre></td></tr></table></figure>
<h3 id="16-3-2-结构数组"><a href="#16-3-2-结构数组" class="headerlink" title="16.3.2    结构数组"></a>16.3.2    结构数组</h3><blockquote>
<p><strong>说明：</strong>结构可以作为数组的元素。</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*声明*/</span></span><br><span class="line"><span class="comment">// 声明结构数组</span></span><br><span class="line"><span class="keyword">struct</span> part inventory[<span class="number">100</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">/*访问*/</span></span><br><span class="line"><span class="comment">// 访问结构数组中的结构</span></span><br><span class="line">print_part(inventory[i]);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*操作*/</span></span><br><span class="line"><span class="comment">// 为数组中的结构的成员赋值</span></span><br><span class="line">inventory[i].number = <span class="number">883</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将数组中的结构的成员（字符串）置空</span></span><br><span class="line"> inventory[i].name[<span class="number">0</span>] = <span class="string">'\0'</span>;</span><br></pre></td></tr></table></figure>
<h3 id="16-3-3-结构数组的初始化"><a href="#16-3-3-结构数组的初始化" class="headerlink" title="16.3.3    结构数组的初始化"></a>16.3.3    结构数组的初始化</h3><blockquote>
<p><strong>语法：</strong>类似二维数组的初始化，每个结构都拥有自己的大括号。<br><strong>注意：</strong>每个结构值的内层大括号是可选项。</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义结构：国家代码</span></span><br><span class="line"><span class="keyword">struct</span> dialog_code &#123;</span><br><span class="line">	<span class="keyword">char</span> *country;</span><br><span class="line">	<span class="keyword">int</span> code;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始化</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">struct</span> dialog_code country_codes[] = &#123;</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="string">"Argentina"</span>, <span class="number">54</span></span><br><span class="line">	&#125;,</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="string">"Bangladesh"</span>, <span class="number">66</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="16-3-4-程序：维护零件数据库"><a href="#16-3-4-程序：维护零件数据库" class="headerlink" title="16.3.4    程序：维护零件数据库"></a>16.3.4    程序：维护零件数据库</h3><h4 id="16-3-4-1-编写"><a href="#16-3-4-1-编写" class="headerlink" title="16.3.4.1    编写"></a>16.3.4.1    编写</h4><h5 id="readline-h"><a href="#readline-h" class="headerlink" title="readline.h"></a>readline.h</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> READLINE_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> READLINE_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 读入一行</span><br><span class="line"> * 会跳过开头的空白符</span><br><span class="line"> *</span><br><span class="line"> * @param  str 读入的内容</span><br><span class="line"> * @param  n   字符串的内容</span><br><span class="line"> * @return     读入字符的个数</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">read_line</span><span class="params">(<span class="keyword">char</span> str[], <span class="keyword">int</span> n)</span></span>;</span><br></pre></td></tr></table></figure>
<h5 id="readline-c"><a href="#readline-c" class="headerlink" title="readline.c"></a>readline.c</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctype.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="string">"readline.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 读入一行</span><br><span class="line"> * 会跳过开头的空白符</span><br><span class="line"> *</span><br><span class="line"> * @param  str 读入的内容</span><br><span class="line"> * @param  n   字符串的内容</span><br><span class="line"> * @return     读入字符的个数</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">read_line</span><span class="params">(<span class="keyword">char</span> str[], <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">	<span class="comment">// ch的类型为int而不是char，便于判定EOF</span></span><br><span class="line">	<span class="keyword">int</span> ch, i =<span class="number">0</span>;</span><br><span class="line">	<span class="comment">// 跳过所有空白符</span></span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">isspace</span>(ch = getchar()))</span><br><span class="line">		;</span><br><span class="line">	<span class="keyword">while</span> (ch != <span class="string">'\n'</span> &amp;&amp; ch != EOF) &#123;</span><br><span class="line">		<span class="keyword">if</span> (i &lt; n) &#123;</span><br><span class="line">			str[i++] = ch;</span><br><span class="line">		&#125;</span><br><span class="line">		ch = getchar();</span><br><span class="line">	&#125;</span><br><span class="line">	str[i] = <span class="string">'\0'</span>;</span><br><span class="line">	return i;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="invent-c"><a href="#invent-c" class="headerlink" title="invent.c"></a>invent.c</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * Maintains a parts database (array version)</span><br><span class="line"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"> <span class="meta">#<span class="meta-keyword">include</span> <span class="string">"readline.h"</span></span></span><br><span class="line"></span><br><span class="line"> <span class="meta">#<span class="meta-keyword">define</span> NAME_LEN 25</span></span><br><span class="line"> <span class="meta">#<span class="meta-keyword">define</span> MAX_PARTS 100</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 零件</span><br><span class="line"> */</span></span><br><span class="line"> <span class="keyword">struct</span> part &#123;</span><br><span class="line"> 	<span class="keyword">int</span> number;</span><br><span class="line"> 	<span class="keyword">char</span> name[NAME_LEN + <span class="number">1</span>];</span><br><span class="line"> 	<span class="keyword">int</span> on_hand;</span><br><span class="line"> &#125; inventory[MAX_PARTS];</span><br><span class="line"></span><br><span class="line"> <span class="keyword">int</span> num_parts = <span class="number">0</span>; <span class="comment">// 当前零件的数量</span></span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">int</span> <span class="title">find_part</span> <span class="params">(<span class="keyword">int</span> number)</span></span>;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"> <span class="function"><span class="keyword">void</span> <span class="title">search</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"> <span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"> <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 循环等待用户操作</span></span><br><span class="line"> <span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span> </span>&#123;</span><br><span class="line"> 	<span class="keyword">char</span> code;</span><br><span class="line"> 	<span class="keyword">for</span> (;;) &#123;</span><br><span class="line"> 		<span class="built_in">printf</span>(<span class="string">"Enter operation code:"</span>);</span><br><span class="line"> 		<span class="built_in">scanf</span>(<span class="string">" %c"</span>, &amp;code);</span><br><span class="line"></span><br><span class="line"> 		<span class="comment">// 跳过所有的换行符</span></span><br><span class="line"> 		<span class="keyword">while</span> (getchar() != <span class="string">'\n'</span>)</span><br><span class="line"> 			;</span><br><span class="line"> 		<span class="keyword">switch</span> (code) &#123;</span><br><span class="line"> 			<span class="keyword">case</span> <span class="string">'i'</span>:</span><br><span class="line"> 				insert();</span><br><span class="line"> 				<span class="keyword">break</span>;</span><br><span class="line"> 			<span class="keyword">case</span> <span class="string">'s'</span>:</span><br><span class="line"> 				search();</span><br><span class="line"> 				<span class="keyword">break</span>;</span><br><span class="line"> 			<span class="keyword">case</span> <span class="string">'u'</span>:</span><br><span class="line"> 				update();</span><br><span class="line"> 				<span class="keyword">break</span>;</span><br><span class="line"> 			<span class="keyword">case</span> <span class="string">'p'</span>:</span><br><span class="line"> 				print();</span><br><span class="line"> 				<span class="keyword">break</span>;</span><br><span class="line"> 			<span class="keyword">case</span> <span class="string">'q'</span>:</span><br><span class="line"> 				return <span class="number">0</span>;</span><br><span class="line"> 			<span class="keyword">default</span>:</span><br><span class="line"> 				<span class="built_in">printf</span>(<span class="string">"Illegal code\n"</span>);</span><br><span class="line"> 		&#125;</span><br><span class="line"> 		<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line"> 	&#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 按照零件的编号查找零件在清单数组中的下标</span><br><span class="line"> * @param  number 零件的编号</span><br><span class="line"> * @return        零件在清单中的下标</span><br><span class="line"> */</span></span><br><span class="line"> <span class="function"><span class="keyword">int</span> <span class="title">find_part</span> <span class="params">(<span class="keyword">int</span> number)</span> </span>&#123;</span><br><span class="line"> 	<span class="keyword">int</span> i;</span><br><span class="line"> 	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; num_parts; i++) &#123;</span><br><span class="line"> 		<span class="keyword">if</span> (inventory[i].number == number) &#123;</span><br><span class="line"> 			return i;</span><br><span class="line"> 		&#125;</span><br><span class="line"> 	&#125;</span><br><span class="line"> 	return <span class="number">-1</span>;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 通过命令行插入零件</span><br><span class="line"> */</span></span><br><span class="line"> <span class="function"><span class="keyword">void</span> <span class="title">insert</span> <span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line"> 	<span class="comment">// 输入零件号</span></span><br><span class="line"> 	<span class="keyword">int</span> part_number;</span><br><span class="line"> 	<span class="keyword">if</span> (num_parts == MAX_PARTS) &#123;</span><br><span class="line"> 		<span class="built_in">printf</span>(<span class="string">"Datebase is full, can't add more parts .\n"</span>);</span><br><span class="line"> 		return;</span><br><span class="line"> 	&#125;</span><br><span class="line"> 	<span class="built_in">printf</span>(<span class="string">"Enter partnumber: "</span>);</span><br><span class="line"> 	<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;part_number);</span><br><span class="line"> 	<span class="keyword">if</span> (find_part(part_number) &gt;= <span class="number">0</span>) &#123;</span><br><span class="line"> 		<span class="built_in">printf</span>(<span class="string">"Part already exists.\n"</span>);</span><br><span class="line"> 		return;</span><br><span class="line"> 	&#125;</span><br><span class="line"> 	inventory[num_parts].number = part_number;</span><br><span class="line"></span><br><span class="line"> 	<span class="comment">// 输入零件名</span></span><br><span class="line"> 	<span class="built_in">printf</span>(<span class="string">"Enter part name: "</span>);</span><br><span class="line"> 	read_line(inventory[num_parts].name, NAME_LEN);</span><br><span class="line"> 	<span class="built_in">printf</span>(<span class="string">"Enter quantity on hand: "</span>);</span><br><span class="line"> 	<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;inventory[num_parts].on_hand);</span><br><span class="line"> 	num_parts++;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 在命令行根据零件编号搜索零件</span><br><span class="line"> */</span></span><br><span class="line"> <span class="function"><span class="keyword">void</span> <span class="title">search</span> <span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line"> 	<span class="keyword">int</span> i, number;</span><br><span class="line"> 	<span class="built_in">printf</span>(<span class="string">"Enter part number: "</span>);</span><br><span class="line"> 	<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;number);</span><br><span class="line"> 	i = find_part(number);</span><br><span class="line"> 	<span class="keyword">if</span> (i &gt;= <span class="number">0</span>) &#123;</span><br><span class="line"> 		<span class="built_in">printf</span>(<span class="string">"Part name: %s\n"</span>, inventory[i].name);</span><br><span class="line"> 		<span class="built_in">printf</span>(<span class="string">"Quantity on hand: %d\n"</span>, inventory[i].on_hand);</span><br><span class="line"> 	&#125;</span><br><span class="line"> 	<span class="keyword">else</span> &#123;</span><br><span class="line"> 		<span class="built_in">printf</span>(<span class="string">"Part not found.\n"</span>);</span><br><span class="line"> 	&#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 更新清单中某种零件的数量</span><br><span class="line"> */</span></span><br><span class="line"> <span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line"> 	<span class="keyword">int</span> i, number, change;</span><br><span class="line"> 	<span class="built_in">printf</span>(<span class="string">"Enter part number : "</span>);</span><br><span class="line"> 	<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;number);</span><br><span class="line"> 	i = find_part(number);</span><br><span class="line"> 	<span class="keyword">if</span> (i &gt;= <span class="number">0</span>) &#123;</span><br><span class="line"> 		<span class="built_in">printf</span>(<span class="string">"Enter change in quantity on hand: "</span>);</span><br><span class="line"> 		<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;change);</span><br><span class="line"> 		inventory[i].on_hand += change;</span><br><span class="line"> 	&#125;</span><br><span class="line"> 	<span class="keyword">else</span> &#123;</span><br><span class="line"> 		<span class="built_in">printf</span>(<span class="string">"Part not found.\n"</span>);</span><br><span class="line"> 	&#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 打印当前零件清单中所有种类零件的信息</span><br><span class="line"> */</span></span><br><span class="line"> <span class="function"><span class="keyword">void</span> <span class="title">print</span> <span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line"> 	<span class="keyword">int</span> i;</span><br><span class="line"> 	<span class="built_in">printf</span>(<span class="string">"Part Number   Part Name             "</span></span><br><span class="line"> 		   <span class="string">"Quantity on hand\n"</span>);</span><br><span class="line"> 	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; num_parts; i++) &#123;</span><br><span class="line"> 		<span class="built_in">printf</span>(<span class="string">"%7d     %-25s%11d\n"</span>, inventory[i].number, inventory[i].name, inventory[i].on_hand);</span><br><span class="line"> 	&#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h4 id="16-3-4-2-编译"><a href="#16-3-4-2-编译" class="headerlink" title="16.3.4.2    编译"></a>16.3.4.2    编译</h4><p>$ vim makefile</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">invent:invent.o readline.o</span><br><span class="line">	gcc -o invent invent.o readline.o</span><br><span class="line">invent.o:invent.c readline.h</span><br><span class="line">	gcc -c invent.c</span><br><span class="line">readline.o:readline.c readline.h</span><br><span class="line">	gcc -c readline.c</span><br></pre></td></tr></table></figure>
<p>$ make</p>
<h4 id="16-3-4-3-运行"><a href="#16-3-4-3-运行" class="headerlink" title="16.3.4.3    运行"></a>16.3.4.3    运行</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ ./invent </span><br><span class="line"> Enter operation code:i</span><br><span class="line"> Enter partnumber: 01</span><br><span class="line"> Enter part name: screen</span><br><span class="line"> Enter quantity on hand: 1 </span><br><span class="line"></span><br><span class="line"> Enter operation code:p</span><br><span class="line"> Part Number   Part Name             Quantity on hand</span><br><span class="line">       1     screen</span><br></pre></td></tr></table></figure>
<h2 id="16-4-联合"><a href="#16-4-联合" class="headerlink" title="16.4    联合"></a>16.4    联合</h2><h3 id="特点（和结构相比）"><a href="#特点（和结构相比）" class="headerlink" title="特点（和结构相比）"></a>特点（和结构相比）</h3><blockquote>
<p><strong>相同点</strong></p>
<ul>
<li>包含一个或多个成员</li>
<li>成员可以是不同的类型</li>
<li>声明标记和类型的方式</li>
<li>访问成员的方式</li>
<li>可以使用<code>=</code>进行复制操作</li>
<li>可以在函数间传递或作为函数的返回值</li>
<li>初始化方式</li>
</ul>
<p><strong>不同点</strong></p>
<ul>
<li>联合的实例所有成员共享相同的存储空间</li>
<li>联合的实例大小由最大的成员的类型决定</li>
<li>联合初始化实例时初始化的是按照第一个成员的类型来初始化值的</li>
</ul>
</blockquote>
<p><img src="http://o6ul1xz4z.bkt.clouddn.com/img/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202015-08-31%20%E4%B8%8B%E5%8D%889.48.36.png" alt="Alt text"></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">union</span> &#123;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="keyword">float</span> f;</span><br><span class="line">&#125; u = &#123;<span class="number">0</span>&#125;; <span class="comment">// 0会按照i的类型初始化存储空间</span></span><br><span class="line"></span><br><span class="line">u.f = <span class="number">78.4</span>; <span class="comment">// 为联合赋值</span></span><br></pre></td></tr></table></figure>
<h3 id="16-4-1-使用联合来节省空间"><a href="#16-4-1-使用联合来节省空间" class="headerlink" title="16.4.1    使用联合来节省空间"></a>16.4.1    使用联合来节省空间</h3><blockquote>
<p><strong>原理：</strong>在<code>struct</code>中使用<code>union</code>作为成员，后者使用<code>struct</code>作为成员。这种混合的结构可以实现一种数据结构应用于多种情境的效果。<br><strong>扩展：</strong>在<code>c++</code>中，<code>struct</code>中的<code>union</code>可以匿名，在<code>c</code>中则不得不指定<code>union</code>的名字。</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> TITLE_LEN 20</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> AUTHOR_LEN 10</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DESIGN_LEN 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 礼品册上的商品</span><br><span class="line"> * 可以存储3种类型的商品：书籍、杯子、衬衫</span><br><span class="line"> *</span><br><span class="line"> * @type &#123;struct&#125;</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">struct</span> catalog_item &#123;</span><br><span class="line">	<span class="keyword">int</span> stock_number; <span class="comment">// 编号</span></span><br><span class="line">	<span class="keyword">float</span> price; <span class="comment">// 价格</span></span><br><span class="line">	<span class="keyword">int</span> item_type; <span class="comment">// 分类</span></span><br><span class="line">	<span class="keyword">union</span> &#123;</span><br><span class="line">		<span class="comment">// 可能是书</span></span><br><span class="line">		<span class="keyword">struct</span> &#123;</span><br><span class="line">			<span class="keyword">char</span> title[TITLE_LEN + <span class="number">1</span>];</span><br><span class="line">			<span class="keyword">char</span> author[AUTHOR_LEN + <span class="number">1</span>];</span><br><span class="line">			<span class="keyword">int</span> num_pages;</span><br><span class="line">		&#125; book;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 可能是杯子</span></span><br><span class="line">		<span class="keyword">struct</span> &#123;</span><br><span class="line">			<span class="keyword">char</span> design[DESIGN_LEN + <span class="number">1</span>];</span><br><span class="line">		&#125; mug;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 可能是衬衫</span></span><br><span class="line">		<span class="keyword">struct</span> &#123;</span><br><span class="line">			<span class="keyword">char</span> design[DESIGN_LEN + <span class="number">1</span>];</span><br><span class="line">			<span class="keyword">int</span> colors;</span><br><span class="line">			<span class="keyword">int</span> sizes;</span><br><span class="line">	 	&#125; shirt;</span><br><span class="line">	&#125; item;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">// 声明结构体实例</span></span><br><span class="line">	<span class="keyword">struct</span> catalog_item bookItem;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 为结构体中的联合的成员赋值</span></span><br><span class="line">	<span class="built_in">strcpy</span>(bookItem.item.book.title, <span class="string">"three body"</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 访问结构题中的联合的成员</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%s\n"</span>, bookItem.item.book.title);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="16-4-2-使用联合来构造混合的数据结构"><a href="#16-4-2-使用联合来构造混合的数据结构" class="headerlink" title="16.4.2    使用联合来构造混合的数据结构"></a>16.4.2    使用联合来构造混合的数据结构</h3><blockquote>
<p><strong>说明：</strong>创建含有不同数据类型的混合数据结构（比如数组）。</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 混合数据类型，包含整型和浮点型</span><br><span class="line"> * </span><br><span class="line"> * @typedef &#123;union&#125; Number</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">union</span> &#123;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="keyword">float</span> f;</span><br><span class="line">&#125; Number;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">// 声明混合型数组</span></span><br><span class="line">	Number number_array[<span class="number">1000</span>];</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 赋值</span></span><br><span class="line">	number_array[<span class="number">0</span>].i = <span class="number">5</span>; <span class="comment">// 第一个值为整型</span></span><br><span class="line">	number_array[<span class="number">1</span>].f = <span class="number">3.14</span>; <span class="comment">// 第二个值为浮点型</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 访问</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, number_array[<span class="number">0</span>].i); <span class="comment">// 5</span></span><br><span class="line">	</span><br><span class="line">	return <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="16-4-3-为联合添加“标记字段”"><a href="#16-4-3-为联合添加“标记字段”" class="headerlink" title="16.4.3    为联合添加“标记字段”"></a>16.4.3    为联合添加“标记字段”</h3><blockquote>
<p><strong>用途：</strong>为联合提供额外的当前类型信息，防止获取到无意义的值。</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> INT_KIND 0</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> FLOAT_KIND 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * </span><br><span class="line"> * @typedef &#123;struct&#125; </span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> &#123;</span><br><span class="line">	<span class="keyword">int</span> kind; <span class="comment">// 标记字段</span></span><br><span class="line">	<span class="keyword">union</span> &#123;</span><br><span class="line">		<span class="keyword">int</span> i;</span><br><span class="line">		<span class="keyword">float</span> f;</span><br><span class="line">	&#125; u;</span><br><span class="line">&#125; Number;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 根据数据结构的类型以不同的方式打印值</span><br><span class="line"> * </span><br><span class="line"> * @param &#123;struct&#125; n 要打印的数据结构</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print_number</span><span class="params">(Number n)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">// 声明结构实例</span></span><br><span class="line">	Number n;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 标记字段</span></span><br><span class="line">	n.kind = INT_KIND;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 赋值</span></span><br><span class="line">	n.u.i = <span class="number">82</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 打印出来</span></span><br><span class="line">	print_number(n); <span class="comment">// 82</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print_number</span><span class="params">(Number n)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (n.kind == INT_KIND) &#123;</span><br><span class="line">		<span class="keyword">if</span> (n.kind == INT_KIND) &#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, n.u.i);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"%g\n"</span>, n.u.f);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="16-5-枚举"><a href="#16-5-枚举" class="headerlink" title="16.5    枚举"></a>16.5    枚举</h2><blockquote>
<p><strong>说明：</strong><code>enum</code>是一种由程序员列出值的类型，而且程序员必须为每种值（枚举常量）命名。<br><strong>特点：</strong></p>
<ul>
<li>遵循到c语言的作用域规则（如果枚举声明在函数体内，那么它的常量对外部函数是不可见的）</li>
<li>声明的方式类似结构和联合</li>
</ul>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 最简单的声明方式：定义枚举类型的同时声明枚举变量</span></span><br><span class="line"><span class="keyword">enum</span> &#123;CLUBS, DIAMONDS, HEARTS, SPADES&#125; s1, s2;</span><br></pre></td></tr></table></figure>
<h3 id="16-5-1-枚举标记和枚举类型"><a href="#16-5-1-枚举标记和枚举类型" class="headerlink" title="16.5.1    枚举标记和枚举类型"></a>16.5.1    枚举标记和枚举类型</h3><blockquote>
<p><strong>说明：</strong>类似结构和联合的标记，有两种方式。</p>
</blockquote>
<h5 id="方式1：enum-标记名-可能值"><a href="#方式1：enum-标记名-可能值" class="headerlink" title="方式1：enum 标记名 {可能值}"></a>方式1：<code>enum 标记名 {可能值}</code></h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建枚举类型</span></span><br><span class="line"><span class="keyword">enum</span> suit &#123;CLUBS, DIAMONDS, HEARTS, SPADES&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明枚举变量</span></span><br><span class="line"><span class="keyword">enum</span> suit s1, s2;</span><br></pre></td></tr></table></figure>
<h5 id="方式2：typedef-enum-可能值-类型名"><a href="#方式2：typedef-enum-可能值-类型名" class="headerlink" title="方式2：typedef enum {可能值} 类型名"></a>方式2：<code>typedef enum {可能值} 类型名</code></h5><blockquote>
<p><strong>技巧：</strong>利用<code>typedef</code>来创建布尔类型是非常好的一种方法。</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">enum</span> &#123;CLUBS, DIAMONDS, HEARTS, SPADES&#125; Suit;</span><br><span class="line">Suit s1, s2;</span><br></pre></td></tr></table></figure>
<h3 id="16-5-2-枚举作为整数"><a href="#16-5-2-枚举作为整数" class="headerlink" title="16.5.2    枚举作为整数"></a>16.5.2    枚举作为整数</h3><blockquote>
<p><strong>说明：</strong>在系统内部，c语言会把枚举变量和常量作为整数处理。</p>
<ul>
<li>当没有为枚举常量指定值时，它的值时一个大于前一个常量的值（默认第一个枚举常量的值为0）</li>
<li>可以为枚举常量自由选择不同的值</li>
<li>当为枚举常量指定值时，对大小顺序没有要求</li>
<li>两个或多个枚举常量具有相同的值也是合法的</li>
</ul>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> suit &#123;CLUBS = <span class="number">20</span>, DIAMONDS = <span class="number">10</span>, HEARTS, SPADES&#125;; <span class="comment">// 20, 10, 11</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>扩展：</strong>把整数用作枚举的值是非常危险的，<code>c++</code>不允许整数用作枚举的值来使用。</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i;</span><br><span class="line"><span class="keyword">enum</span> suit &#123;CLUBS, DIAMONDS, HEARTS, SPADES&#125; s;</span><br><span class="line">i = DIAMONDS;</span><br><span class="line">s = <span class="number">0</span>;</span><br><span class="line">s++;</span><br><span class="line">i = s + <span class="number">2</span>;</span><br></pre></td></tr></table></figure>
<h3 id="16-5-3-用枚举声明“标记字段”"><a href="#16-5-3-用枚举声明“标记字段”" class="headerlink" title="16.5.3    用枚举声明“标记字段”"></a>16.5.3    用枚举声明“标记字段”</h3><blockquote>
<p><strong>说明：</strong><code>enum</code>和<code>union</code>配合实现<code>union</code>的“标记字段”。<br><strong>优点：</strong></p>
<ul>
<li>不需要额外定义宏</li>
<li>明确类型的可能值范围</li>
<li>含义更明确</li>
</ul>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">typedeg <span class="keyword">struct</span> &#123;</span><br><span class="line">	<span class="keyword">enum</span> &#123;INT_KIND, FLOAT_KIND&#125; kind;</span><br><span class="line">	<span class="keyword">union</span> &#123;</span><br><span class="line">		<span class="keyword">int</span> i;</span><br><span class="line">		<span class="keyword">float</span> f;</span><br><span class="line">	&#125; u;</span><br><span class="line">&#125; Number;</span><br></pre></td></tr></table></figure>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/c语言程序设计－现代方法/" rel="tag">#c语言程序设计－现代方法</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/05/10/15 编写大规模程序/" rel="next" title="15 编写大规模程序">
                <i class="fa fa-chevron-left"></i> 15 编写大规模程序
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/05/10/17 指针的高级应用/" rel="prev" title="17 指针的高级应用">
                17 指针的高级应用 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2016/05/10/16 结构、联合和枚举/"
           data-title="16 结构、联合和枚举" data-url="http://laputa-er.github.io/2016/05/10/16 结构、联合和枚举/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="Sean" />
          <p class="site-author-name" itemprop="name">Sean</p>
          <p class="site-description motion-element" itemprop="description">整理了一批过去一段时间ios相关的笔记，其它的笔记也整理下？源码分享出来？再说吧...反正也只有自己会看吧...</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">94</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">12</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#16-1-结构变量"><span class="nav-number">1.</span> <span class="nav-text">16.1    结构变量</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#16-1-1-结构变量的声明"><span class="nav-number">1.1.</span> <span class="nav-text">16.1.1    结构变量的声明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#16-1-2-结构变量的初始化"><span class="nav-number">1.2.</span> <span class="nav-text">16.1.2    结构变量的初始化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#16-1-3-对结构的操作"><span class="nav-number">1.3.</span> <span class="nav-text">16.1.3    对结构的操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#16-1-3-1-访问成员"><span class="nav-number">1.3.1.</span> <span class="nav-text">16.1.3.1    访问成员</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#16-1-3-2-赋值运算"><span class="nav-number">1.3.2.</span> <span class="nav-text">16.1.3.2    赋值运算</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#16-2-结构类型"><span class="nav-number">2.</span> <span class="nav-text">16.2    结构类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#16-2-1-结构标记的声明"><span class="nav-number">2.1.</span> <span class="nav-text">16.2.1    结构标记的声明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#16-2-2-结构类型的定义"><span class="nav-number">2.2.</span> <span class="nav-text">16.2.2    结构类型的定义</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#16-2-3-结构类型的实际参数和返回值"><span class="nav-number">2.3.</span> <span class="nav-text">16.2.3    结构类型的实际参数和返回值</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#16-2-3-1-用作参数"><span class="nav-number">2.3.1.</span> <span class="nav-text">16.2.3.1    用作参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#16-2-3-2-用作返回值"><span class="nav-number">2.3.2.</span> <span class="nav-text">16.2.3.2    用作返回值</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#16-3-数组和结构的嵌套"><span class="nav-number">3.</span> <span class="nav-text">16.3    数组和结构的嵌套</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#16-3-1-嵌套的结构"><span class="nav-number">3.1.</span> <span class="nav-text">16.3.1    嵌套的结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#16-3-2-结构数组"><span class="nav-number">3.2.</span> <span class="nav-text">16.3.2    结构数组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#16-3-3-结构数组的初始化"><span class="nav-number">3.3.</span> <span class="nav-text">16.3.3    结构数组的初始化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#16-3-4-程序：维护零件数据库"><span class="nav-number">3.4.</span> <span class="nav-text">16.3.4    程序：维护零件数据库</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#16-3-4-1-编写"><span class="nav-number">3.4.1.</span> <span class="nav-text">16.3.4.1    编写</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#readline-h"><span class="nav-number">3.4.1.1.</span> <span class="nav-text">readline.h</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#readline-c"><span class="nav-number">3.4.1.2.</span> <span class="nav-text">readline.c</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#invent-c"><span class="nav-number">3.4.1.3.</span> <span class="nav-text">invent.c</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#16-3-4-2-编译"><span class="nav-number">3.4.2.</span> <span class="nav-text">16.3.4.2    编译</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#16-3-4-3-运行"><span class="nav-number">3.4.3.</span> <span class="nav-text">16.3.4.3    运行</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#16-4-联合"><span class="nav-number">4.</span> <span class="nav-text">16.4    联合</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#特点（和结构相比）"><span class="nav-number">4.1.</span> <span class="nav-text">特点（和结构相比）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#16-4-1-使用联合来节省空间"><span class="nav-number">4.2.</span> <span class="nav-text">16.4.1    使用联合来节省空间</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#16-4-2-使用联合来构造混合的数据结构"><span class="nav-number">4.3.</span> <span class="nav-text">16.4.2    使用联合来构造混合的数据结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#16-4-3-为联合添加“标记字段”"><span class="nav-number">4.4.</span> <span class="nav-text">16.4.3    为联合添加“标记字段”</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#16-5-枚举"><span class="nav-number">5.</span> <span class="nav-text">16.5    枚举</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#16-5-1-枚举标记和枚举类型"><span class="nav-number">5.1.</span> <span class="nav-text">16.5.1    枚举标记和枚举类型</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#方式1：enum-标记名-可能值"><span class="nav-number">5.1.0.1.</span> <span class="nav-text">方式1：enum 标记名 {可能值}</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#方式2：typedef-enum-可能值-类型名"><span class="nav-number">5.1.0.2.</span> <span class="nav-text">方式2：typedef enum {可能值} 类型名</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#16-5-2-枚举作为整数"><span class="nav-number">5.2.</span> <span class="nav-text">16.5.2    枚举作为整数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#16-5-3-用枚举声明“标记字段”"><span class="nav-number">5.3.</span> <span class="nav-text">16.5.3    用枚举声明“标记字段”</span></a></li></ol></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Sean</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"lapuda-er"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    <script src="/vendors/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  






  
  

  

  

  

</body>
</html>
