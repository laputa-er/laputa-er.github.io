<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    
    <title>3 格式化输入／输出 | Sean</title>
    <meta name="renderer" content="webkit">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <meta name="description" content="do things for fun">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="3 格式化输入／输出 | Sean">
    <meta name="twitter:description" content="do things for fun">

    <meta property="og:type" content="article">
    <meta property="og:title" content="3 格式化输入／输出 | Sean">
    <meta property="og:description" content="do things for fun">

    
    <meta name="author" content="Sean">
    
    <link rel="stylesheet" href="/css/vno.css">
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css">

    
    <link rel="icon" href="/images/favicon.png">
    

    <meta name="generator" content="hexo"/>
    

    <link rel="canonical" href="http://laputa-er.github.io/2016/05/08/3 格式化输入／输出/"/>

    
</head>

<body class="home-template no-js">

    <span class="mobile btn-mobile-menu">
        <i class="fa fa-list btn-mobile-menu__icon"></i>
        <i class="fa fa-angle-up btn-mobile-close__icon hidden"></i>
    </span>
    
<header class="panel-cover panel-cover--collapsed" style="background-image: url(/images/mengxiang.jpg)">
  <div class="panel-main">
    <div class="panel-main__inner panel-inverted">
      <span class="panel-arrow panel-left-arrow disabled">
        <i class="fa fa-angle-left"></i>
      </span>
      <span class="panel-arrow panel-right-arrow">
        <i class="fa fa-angle-right"></i>
      </span>

      <div class="panel-animation-container">
        <div class="panel-content panel-main__content">
            <a href="/" title="前往 Sean 的主页"><img src="/images/sean.png" width="80" alt="Sean logo" class="panel-cover__logo logo" /></a>
            <h1 class="panel-cover__title panel-title"><a href="/" title="link to homepage for Sean">Sean</a></h1>
            
            <span class="panel-cover__subtitle panel-subtitle">笔记分享</span>
            
            <hr class="panel-cover__divider" />
            <p class="panel-cover__description">整理了一批过去一段时间ios相关的笔记，其它的笔记也整理下？源码分享出来？再说吧...反正也只有自己会看吧...</p>
            <hr class="panel-cover__divider panel-cover__divider--secondary" />

            <div class="navigation-wrapper">
              <div>
              <nav class="cover-navigation cover-navigation--primary">
                <ul class="navigation">
                  <li class="navigation__item"><a href="/#blog" title="访问笔记" class="blog-button">笔记</a></li>
                  <li style="display: none;">
                    <textarea>
                      
                        <li class="navigation__item"><a href="/projects">项目作品</a></li>
                      
                        <li class="navigation__item"><a href="/aboutme">关于我</a></li>
                      
                    </textarea>
                  </li>
                </ul>
              </nav>
              </div>
              <div>
              <nav class="cover-navigation navigation--social">
  <ul class="navigation">

  <!-- Weibo-->
  

  <!-- Github -->
  

<!-- Stack Overflow -->
        

  <!-- Google Plus -->
  

<!-- Facebook -->

  
<!-- Twitter -->

  



  </ul>
</nav>

              </div>
            </div>

          </div>
          <div class="panel-content panel-tagcloud_content">
            
              <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">笔记分类</h3>
    <div class="widget tagcloud">
      <a href="/tags/Objective-C基础教程第二版/">Objective-C基础教程第二版</a> <a href="/tags/The-Swift-Program-Language-2/">The Swift Program Language 2</a> <a href="/tags/c语言程序设计－现代方法/">c语言程序设计－现代方法</a> <a href="/tags/极客学院-ios中级/">极客学院_ios中级</a> <a href="/tags/极客学院-ios初级/">极客学院_ios初级</a> <a href="/tags/极客学院-ios高级/">极客学院_ios高级</a>
    </div>
  </div>

  
</aside>
            
          </div>
        </div>  

      </div>
      <div class="panel-cover--overlay cover-blue"></div>
  </div>
  </header>
    
    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            <article class="post-container post-container--single">

  <header class="post-header">
    <div class="post-meta">
      <time datetime="2016-05-08T14:48:34.000Z" class="post-list__meta--date date">2016-05-08</time> &#8226; <span class="post-meta__tags tags">于&nbsp;
  <a class="tag-link" href="/tags/c语言程序设计－现代方法/">c语言程序设计－现代方法</a>
</span>
    </div>
    <h1 class="post-title">3 格式化输入／输出</h1>
  </header>

  <section class="post">
    <!-- Table of Contents -->
    
    <div id="top-toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-printf函数"><span class="toc-number">1.</span> <span class="toc-text">3.1    printf函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-1-转换说明"><span class="toc-number">1.1.</span> <span class="toc-text">3.1.1    转换说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-2-程序：用printf函数格式化数"><span class="toc-number">1.2.</span> <span class="toc-text">3.1.2    程序：用printf函数格式化数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-3-转义序列"><span class="toc-number">1.3.</span> <span class="toc-text">3.1.3    转义序列</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-scanf函数"><span class="toc-number">2.</span> <span class="toc-text">3.2    scanf函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-1-scanf函数的工作方法"><span class="toc-number">2.1.</span> <span class="toc-text">3.2.1    scanf函数的工作方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-2-格式串中的普通字符"><span class="toc-number">2.2.</span> <span class="toc-text">3.2.2    格式串中的普通字符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-3-混淆printf函数和scanf函数"><span class="toc-number">2.3.</span> <span class="toc-text">3.2.3    混淆printf函数和scanf函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-4-程序：计算持有的股票的价值"><span class="toc-number">2.4.</span> <span class="toc-text">3.2.4    程序：计算持有的股票的价值</span></a></li></ol></li></ol>
    </div>
    <div id="tocShell"></div>
    <div id="toc" class="toc-article">
      <div class="btn-group drag-me">
        <i class="social fa fa-ellipsis-v"></i>
      </div>
      <div class="btn-group dropup-catelog">
        <button class="btn"><i class="social fa fa-list-ol"></i></button>
        <div class="catelog-content">
          <p class="toc-title-wrap">
            <strong class="toc-title">文章目录</strong>
          </p>
          <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-printf函数"><span class="toc-number">1.</span> <span class="toc-text">3.1    printf函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-1-转换说明"><span class="toc-number">1.1.</span> <span class="toc-text">3.1.1    转换说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-2-程序：用printf函数格式化数"><span class="toc-number">1.2.</span> <span class="toc-text">3.1.2    程序：用printf函数格式化数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-3-转义序列"><span class="toc-number">1.3.</span> <span class="toc-text">3.1.3    转义序列</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-scanf函数"><span class="toc-number">2.</span> <span class="toc-text">3.2    scanf函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-1-scanf函数的工作方法"><span class="toc-number">2.1.</span> <span class="toc-text">3.2.1    scanf函数的工作方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-2-格式串中的普通字符"><span class="toc-number">2.2.</span> <span class="toc-text">3.2.2    格式串中的普通字符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-3-混淆printf函数和scanf函数"><span class="toc-number">2.3.</span> <span class="toc-text">3.2.3    混淆printf函数和scanf函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-4-程序：计算持有的股票的价值"><span class="toc-number">2.4.</span> <span class="toc-text">3.2.4    程序：计算持有的股票的价值</span></a></li></ol></li></ol>
        </div>
      </div>
    </div>
    
    <h2 id="3-1-printf函数"><a href="#3-1-printf函数" class="headerlink" title="3.1    printf函数"></a>3.1    printf函数</h2><blockquote>
<p><strong>语法：</strong><code>printf(格式串,表达式1,表达式2,...)</code><br><strong>转换说明（conversion specification）：</strong>以字符<code>%</code>开头，用来表示打印过程中填充了值的占位符。<code>%</code>后面的信息指定了把数值从内部（二进制）形式转换成打印（字符）形式的方法。<br><strong>注意：</strong></p>
<ol>
<li>单独调用一次prinf函数时可以打印的值的个数没有限制</li>
<li>c语言编译器不会检测格式串中转换说明的数据是否和输出项的数量相匹配</li>
<li>也不检测转换说明是否适合要显示项的数据类型</li>
</ol>
</blockquote>
<h3 id="3-1-1-转换说明"><a href="#3-1-1-转换说明" class="headerlink" title="3.1.1    转换说明"></a>3.1.1    转换说明</h3><blockquote>
<p><strong>格式：</strong><code>%m.pX</code>或<code>%-m.pX</code></p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:center">组件</th>
<th style="text-align:center">含义</th>
<th style="text-align:left">必选</th>
<th>用途</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">-</td>
<td style="text-align:center">左对齐</td>
<td style="text-align:left">否</td>
<td>左对齐（默认右对齐）</td>
<td></td>
</tr>
<tr>
<td style="text-align:center">m</td>
<td style="text-align:center">minimum field width</td>
<td style="text-align:left">否</td>
<td>最小字段宽度</td>
<td>当<code>打印字符数&lt;m</code>时会根据对齐方式在前或后放置额外的空格；<code>打印字符数&gt;m</code>时字段宽度会自动扩展为需要的尺寸。</td>
</tr>
<tr>
<td style="text-align:center">.</td>
<td style="text-align:center">分隔</td>
<td style="text-align:left">否</td>
<td>分隔m和p，p存在时才存在</td>
<td></td>
</tr>
<tr>
<td style="text-align:center">p</td>
<td style="text-align:center">precision</td>
<td style="text-align:left">否</td>
<td>含义依赖于<code>X</code>的选择</td>
<td><code>d</code>(数字的最少个数，不够用0补够，默认1)；<code>e</code>(小数点后数字个数，默认6) ;<code>f</code>(同e); <code>g</code>(有效数字的最大数量)</td>
</tr>
<tr>
<td style="text-align:center">X</td>
<td style="text-align:center">conversion specifier</td>
<td style="text-align:left">是</td>
<td>在显示数值前对其进行那种转换</td>
<td><code>d</code>(十进制)；<code>e</code>(指数)；<code>f</code>(浮点数)<code>g</code>(根据数的大小决定指数形式还是浮点数形式)</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>注意：</strong>以上只就部分转换说明符进行了说明。</p>
</blockquote>
<h3 id="3-1-2-程序：用printf函数格式化数"><a href="#3-1-2-程序：用printf函数格式化数" class="headerlink" title="3.1.2    程序：用printf函数格式化数"></a>3.1.2    程序：用printf函数格式化数</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * Prints int and float values in various formats</span><br><span class="line"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># <span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"> <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"> 	<span class="keyword">int</span> i;</span><br><span class="line"> 	<span class="keyword">float</span> x;</span><br><span class="line"></span><br><span class="line"> 	i = <span class="number">40</span>;</span><br><span class="line"> 	x = <span class="number">839.21</span>;</span><br><span class="line"></span><br><span class="line"> 	<span class="built_in">printf</span>(<span class="string">"|%d|%5d|%-5d|%5.3d|\n"</span>, i, i, i, i);</span><br><span class="line"> 	<span class="built_in">printf</span>(<span class="string">"|%10.3f|%10.3e|%-10g|\n"</span>, x, x, x);</span><br><span class="line"></span><br><span class="line"> 	return <span class="number">0</span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ./tprintf </span><br><span class="line"> |40|   40|40   |  040|</span><br><span class="line"> |   839.210| 8.392e+02|839.21    |</span><br></pre></td></tr></table></figure>
<h3 id="3-1-3-转义序列"><a href="#3-1-3-转义序列" class="headerlink" title="3.1.3    转义序列"></a>3.1.3    转义序列</h3><blockquote>
<p><strong>简介：</strong>通过使用<code>\</code>组合其它字符实现对字符的转义，转义字符使字符串包含一些特殊字符而又不会使编译器引发问题，包括非打印的控制字符和对编译器有特殊含义的字符（比如<code>&quot;</code>）。</p>
</blockquote>
<p><code>只提供部分</code></p>
<table>
<thead>
<tr>
<th>转义字符</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>\a</td>
<td>警报（响铃）</td>
</tr>
<tr>
<td>\b</td>
<td>回退符</td>
</tr>
<tr>
<td>\n</td>
<td>换行符</td>
</tr>
<tr>
<td>\t</td>
<td>横向制表符</td>
</tr>
</tbody>
</table>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="built_in">printf</span>(<span class="string">"Item\tUnit\tPurpose\n\tPrice\tDate\n"</span>)</span><br></pre></td></tr></table></figure>
<h2 id="3-2-scanf函数"><a href="#3-2-scanf函数" class="headerlink" title="3.2    scanf函数"></a>3.2    scanf函数</h2><blockquote>
<p><strong>语法：</strong><code>scanf(格式串, 表达式1, 表达式2, ...)</code><br><strong>注意：</strong></p>
<ul>
<li>编译器不会检查转换说明的数量与输入变量是否相匹配</li>
<li>编译器不会检查转换说明和对应输入变量格式是否合适</li>
<li>忘记在变量前放置符号<code>&amp;</code>将会产生不可预知的结果（比如变量没有初始化）</li>
</ul>
</blockquote>
<h3 id="3-2-1-scanf函数的工作方法"><a href="#3-2-1-scanf函数的工作方法" class="headerlink" title="3.2.1    scanf函数的工作方法"></a>3.2.1    scanf函数的工作方法</h3><blockquote>
<p><strong>简述：</strong>scanf函数本质上是一种“模式匹配”函数，也就是试图把输入的字符组与转换说明匹配成功。<br><strong>空白字符(white-space)：</strong>空格、横向（纵向）制表符、换页符、换行符。<br><strong>匹配规则：</strong></p>
<ol>
<li>从左边开始处理输入的字符串的信息</li>
<li>对格式串中的每一个转换说明，scanf函数努力从输入的数据中定位适当类型的项，并且跳过必要的空白符</li>
<li>遇到不可能属于当前转换说明的字符时结束对当前转换字符的匹配，并将已经匹配的字符赋值给对应变量</li>
<li>如果用户输入的字符都和当前转换说明不匹配，则不再查看格式串的剩余部分</li>
</ol>
</blockquote>
<h3 id="3-2-2-格式串中的普通字符"><a href="#3-2-2-格式串中的普通字符" class="headerlink" title="3.2.2    格式串中的普通字符"></a>3.2.2    格式串中的普通字符</h3><blockquote>
<p><strong>空白字符</strong>：当再格式串中遇到一个或多个连续的空白字符时，scanf函数从输入中重复读空白字符直到遇到一个非空白字符。<br><strong>其他字符：</strong>当格式串中国年遇到一个非空白字符时，scanf会把它与下一个输入字符进行比较。如果匹配则丢掉匹配的部分，并针对后面的输入及对应的格式串进行处理；否则异常退出。</p>
</blockquote>
<h3 id="3-2-3-混淆printf函数和scanf函数"><a href="#3-2-3-混淆printf函数和scanf函数" class="headerlink" title="3.2.3    混淆printf函数和scanf函数"></a>3.2.3    混淆printf函数和scanf函数</h3><p><strong>常见问题</strong></p>
<ul>
<li>在printf函数调用时在变量前面放置<code>&amp;</code></li>
<li>scanf中格式串中出现不必要的<code>\n</code>，导致交互程序会一直匹配用户输入的空白符</li>
</ul>
<h3 id="3-2-4-程序：计算持有的股票的价值"><a href="#3-2-4-程序：计算持有的股票的价值" class="headerlink" title="3.2.4    程序：计算持有的股票的价值"></a>3.2.4    程序：计算持有的股票的价值</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * Computes the value of stock holdings</span><br><span class="line"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># <span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"> <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"> 	<span class="keyword">int</span> price, shares;</span><br><span class="line"> 	<span class="keyword">float</span> num, denom, value;</span><br><span class="line"></span><br><span class="line"> 	<span class="built_in">printf</span>(<span class="string">"Enter share price (must inclide a fraction):\n"</span>);</span><br><span class="line"> 	<span class="built_in">scanf</span>(<span class="string">"%d%f/%f"</span>, &amp;price, &amp;num, &amp;denom);</span><br><span class="line"></span><br><span class="line"> 	<span class="built_in">printf</span>(<span class="string">"Enter number of shares:"</span>);</span><br><span class="line"> 	<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;shares);</span><br><span class="line"></span><br><span class="line"> 	value = (price + num / denom) * shares;</span><br><span class="line"></span><br><span class="line"> 	<span class="built_in">printf</span>(<span class="string">"Value of holdings:$%.2f\n"</span>, value);</span><br><span class="line"></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ./stocks </span><br><span class="line"> Enter share price (must inclide a fraction):</span><br><span class="line"> 64 18/40</span><br><span class="line"> Enter number of shares:100</span><br><span class="line"> Value of holdings:<span class="variable">$6445</span>.00</span><br></pre></td></tr></table></figure>

  </section>

</article>


<section class="post-comments">
  <!-- 多说评论框 start -->
  <div class="ds-thread" data-thread-key="http://laputa-er.github.io/2016/05/08/3 格式化输入／输出/" data-title="3 格式化输入／输出" data-url="http://laputa-er.github.io/2016/05/08/3 格式化输入／输出/"></div>
  <!-- 多说评论框 end -->
  <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
  <script type="text/javascript">
  var duoshuoQuery = {short_name:"laputa-er"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
     || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
  </script>
<!-- 多说公共JS代码 end -->
</section>




            <footer class="footer">
    <span class="footer__copyright">
        本站点采用<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>
    </span>
    <span class="footer__copyright">
        基于 <a href="http://hexo.io">Hexo</a> 搭建，感谢 <a href="https://pages.github.com/">GitHub Pages</a> 提供免费的托管服务
    </span>
    <span class="footer__copyright">
        &copy; 2016 - 
        本站修改自<a href="https://github.com/lenbo-ma/hexo-theme-vno" target="_blank">hexo-theme-vno</a>
    </span>
</footer>

        </div>
    </div>

    <script src="http://cdn.bootcss.com/jquery/2.1.4/jquery.min.js"></script>
    <script src="/js/main.js"></script>

     
</body>
</html>
